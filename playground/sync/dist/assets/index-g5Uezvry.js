var Jx=Object.defineProperty;var Vx=(e,t,r)=>t in e?Jx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var b=(e,t,r)=>Vx(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function Hx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var O$={exports:{}},lu={},A$={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lo=Symbol.for("react.element"),Wx=Symbol.for("react.portal"),Gx=Symbol.for("react.fragment"),Yx=Symbol.for("react.strict_mode"),Zx=Symbol.for("react.profiler"),Xx=Symbol.for("react.provider"),eD=Symbol.for("react.context"),tD=Symbol.for("react.forward_ref"),rD=Symbol.for("react.suspense"),nD=Symbol.for("react.memo"),iD=Symbol.for("react.lazy"),mh=Symbol.iterator;function sD(e){return e===null||typeof e!="object"?null:(e=mh&&e[mh]||e["@@iterator"],typeof e=="function"?e:null)}var R$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_$=Object.assign,T$={};function Hi(e,t,r){this.props=e,this.context=t,this.refs=T$,this.updater=r||R$}Hi.prototype.isReactComponent={};Hi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Hi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function L$(){}L$.prototype=Hi.prototype;function df(e,t,r){this.props=e,this.context=t,this.refs=T$,this.updater=r||R$}var pf=df.prototype=new L$;pf.constructor=df;_$(pf,Hi.prototype);pf.isPureReactComponent=!0;var $h=Array.isArray,F$=Object.prototype.hasOwnProperty,hf={current:null},z$={key:!0,ref:!0,__self:!0,__source:!0};function q$(e,t,r){var n,i={},o=null,u=null;if(t!=null)for(n in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(o=""+t.key),t)F$.call(t,n)&&!z$.hasOwnProperty(n)&&(i[n]=t[n]);var d=arguments.length-2;if(d===1)i.children=r;else if(1<d){for(var h=Array(d),m=0;m<d;m++)h[m]=arguments[m+2];i.children=h}if(e&&e.defaultProps)for(n in d=e.defaultProps,d)i[n]===void 0&&(i[n]=d[n]);return{$$typeof:lo,type:e,key:o,ref:u,props:i,_owner:hf.current}}function oD(e,t){return{$$typeof:lo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function mf(e){return typeof e=="object"&&e!==null&&e.$$typeof===lo}function aD(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var vh=/\/+/g;function $l(e,t){return typeof e=="object"&&e!==null&&e.key!=null?aD(""+e.key):t.toString(36)}function ma(e,t,r,n,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(o){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case lo:case Wx:u=!0}}if(u)return u=e,i=i(u),e=n===""?"."+$l(u,0):n,$h(i)?(r="",e!=null&&(r=e.replace(vh,"$&/")+"/"),ma(i,t,r,"",function(m){return m})):i!=null&&(mf(i)&&(i=oD(i,r+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(vh,"$&/")+"/")+e)),t.push(i)),1;if(u=0,n=n===""?".":n+":",$h(e))for(var d=0;d<e.length;d++){o=e[d];var h=n+$l(o,d);u+=ma(o,t,r,h,i)}else if(h=sD(e),typeof h=="function")for(e=h.call(e),d=0;!(o=e.next()).done;)o=o.value,h=n+$l(o,d++),u+=ma(o,t,r,h,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function Ho(e,t,r){if(e==null)return e;var n=[],i=0;return ma(e,n,"","",function(o){return t.call(r,o,i++)}),n}function uD(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var kt={current:null},$a={transition:null},lD={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:$a,ReactCurrentOwner:hf};function B$(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:Ho,forEach:function(e,t,r){Ho(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ho(e,function(){t++}),t},toArray:function(e){return Ho(e,function(t){return t})||[]},only:function(e){if(!mf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};fe.Component=Hi;fe.Fragment=Gx;fe.Profiler=Zx;fe.PureComponent=df;fe.StrictMode=Yx;fe.Suspense=rD;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lD;fe.act=B$;fe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=_$({},e.props),i=e.key,o=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,u=hf.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var d=e.type.defaultProps;for(h in t)F$.call(t,h)&&!z$.hasOwnProperty(h)&&(n[h]=t[h]===void 0&&d!==void 0?d[h]:t[h])}var h=arguments.length-2;if(h===1)n.children=r;else if(1<h){d=Array(h);for(var m=0;m<h;m++)d[m]=arguments[m+2];n.children=d}return{$$typeof:lo,type:e.type,key:i,ref:o,props:n,_owner:u}};fe.createContext=function(e){return e={$$typeof:eD,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Xx,_context:e},e.Consumer=e};fe.createElement=q$;fe.createFactory=function(e){var t=q$.bind(null,e);return t.type=e,t};fe.createRef=function(){return{current:null}};fe.forwardRef=function(e){return{$$typeof:tD,render:e}};fe.isValidElement=mf;fe.lazy=function(e){return{$$typeof:iD,_payload:{_status:-1,_result:e},_init:uD}};fe.memo=function(e,t){return{$$typeof:nD,type:e,compare:t===void 0?null:t}};fe.startTransition=function(e){var t=$a.transition;$a.transition={};try{e()}finally{$a.transition=t}};fe.unstable_act=B$;fe.useCallback=function(e,t){return kt.current.useCallback(e,t)};fe.useContext=function(e){return kt.current.useContext(e)};fe.useDebugValue=function(){};fe.useDeferredValue=function(e){return kt.current.useDeferredValue(e)};fe.useEffect=function(e,t){return kt.current.useEffect(e,t)};fe.useId=function(){return kt.current.useId()};fe.useImperativeHandle=function(e,t,r){return kt.current.useImperativeHandle(e,t,r)};fe.useInsertionEffect=function(e,t){return kt.current.useInsertionEffect(e,t)};fe.useLayoutEffect=function(e,t){return kt.current.useLayoutEffect(e,t)};fe.useMemo=function(e,t){return kt.current.useMemo(e,t)};fe.useReducer=function(e,t,r){return kt.current.useReducer(e,t,r)};fe.useRef=function(e){return kt.current.useRef(e)};fe.useState=function(e){return kt.current.useState(e)};fe.useSyncExternalStore=function(e,t,r){return kt.current.useSyncExternalStore(e,t,r)};fe.useTransition=function(){return kt.current.useTransition()};fe.version="18.3.1";A$.exports=fe;var me=A$.exports;const cD=Hx(me);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fD=me,dD=Symbol.for("react.element"),pD=Symbol.for("react.fragment"),hD=Object.prototype.hasOwnProperty,mD=fD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$D={key:!0,ref:!0,__self:!0,__source:!0};function U$(e,t,r){var n,i={},o=null,u=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(u=t.ref);for(n in t)hD.call(t,n)&&!$D.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:dD,type:e,key:o,ref:u,props:i,_owner:mD.current}}lu.Fragment=pD;lu.jsx=U$;lu.jsxs=U$;O$.exports=lu;var L=O$.exports,ec={},K$={exports:{}},_t={},Q$={exports:{}},J$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,re){var le=A.length;A.push(re);e:for(;0<le;){var U=le-1>>>1,ze=A[U];if(0<i(ze,re))A[U]=re,A[le]=ze,le=U;else break e}}function r(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var re=A[0],le=A.pop();if(le!==re){A[0]=le;e:for(var U=0,ze=A.length,Xn=ze>>>1;U<Xn;){var gr=2*(U+1)-1,rs=A[gr],br=gr+1,Sn=A[br];if(0>i(rs,le))br<ze&&0>i(Sn,rs)?(A[U]=Sn,A[br]=le,U=br):(A[U]=rs,A[gr]=le,U=gr);else if(br<ze&&0>i(Sn,le))A[U]=Sn,A[br]=le,U=br;else break e}}return re}function i(A,re){var le=A.sortIndex-re.sortIndex;return le!==0?le:A.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var h=[],m=[],g=1,c=null,v=3,j=!1,C=!1,T=!1,H=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(A){for(var re=r(m);re!==null;){if(re.callback===null)n(m);else if(re.startTime<=A)n(m),re.sortIndex=re.expirationTime,t(h,re);else break;re=r(m)}}function E(A){if(T=!1,x(A),!C)if(r(h)!==null)C=!0,ae(O);else{var re=r(m);re!==null&&it(E,re.startTime-A)}}function O(A,re){C=!1,T&&(T=!1,S(z),z=-1),j=!0;var le=v;try{for(x(re),c=r(h);c!==null&&(!(c.expirationTime>re)||A&&!Ze());){var U=c.callback;if(typeof U=="function"){c.callback=null,v=c.priorityLevel;var ze=U(c.expirationTime<=re);re=e.unstable_now(),typeof ze=="function"?c.callback=ze:c===r(h)&&n(h),x(re)}else n(h);c=r(h)}if(c!==null)var Xn=!0;else{var gr=r(m);gr!==null&&it(E,gr.startTime-re),Xn=!1}return Xn}finally{c=null,v=le,j=!1}}var F=!1,Q=null,z=-1,$e=5,ee=-1;function Ze(){return!(e.unstable_now()-ee<$e)}function ve(){if(Q!==null){var A=e.unstable_now();ee=A;var re=!0;try{re=Q(!0,A)}finally{re?I():(F=!1,Q=null)}}else F=!1}var I;if(typeof k=="function")I=function(){k(ve)};else if(typeof MessageChannel<"u"){var ts=new MessageChannel,Dd=ts.port2;ts.port1.onmessage=ve,I=function(){Dd.postMessage(null)}}else I=function(){H(ve,0)};function ae(A){Q=A,F||(F=!0,I())}function it(A,re){z=H(function(){A(e.unstable_now())},re)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){C||j||(C=!0,ae(O))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$e=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return r(h)},e.unstable_next=function(A){switch(v){case 1:case 2:case 3:var re=3;break;default:re=v}var le=v;v=re;try{return A()}finally{v=le}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,re){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var le=v;v=A;try{return re()}finally{v=le}},e.unstable_scheduleCallback=function(A,re,le){var U=e.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?U+le:U):le=U,A){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=le+ze,A={id:g++,callback:re,priorityLevel:A,startTime:le,expirationTime:ze,sortIndex:-1},le>U?(A.sortIndex=le,t(m,A),r(h)===null&&A===r(m)&&(T?(S(z),z=-1):T=!0,it(E,le-U))):(A.sortIndex=ze,t(h,A),C||j||(C=!0,ae(O))),A},e.unstable_shouldYield=Ze,e.unstable_wrapCallback=function(A){var re=v;return function(){var le=v;v=re;try{return A.apply(this,arguments)}finally{v=le}}}})(J$);Q$.exports=J$;var vD=Q$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yD=me,Rt=vD;function q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var V$=new Set,Ks={};function Gn(e,t){_i(e,t),_i(e+"Capture",t)}function _i(e,t){for(Ks[e]=t,e=0;e<t.length;e++)V$.add(t[e])}var Or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tc=Object.prototype.hasOwnProperty,gD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yh={},gh={};function bD(e){return tc.call(gh,e)?!0:tc.call(yh,e)?!1:gD.test(e)?gh[e]=!0:(yh[e]=!0,!1)}function wD(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function kD(e,t,r,n){if(t===null||typeof t>"u"||wD(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function St(e,t,r,n,i,o,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=u}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ut[e]=new St(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ut[t]=new St(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ut[e]=new St(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ut[e]=new St(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ut[e]=new St(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ut[e]=new St(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ut[e]=new St(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ut[e]=new St(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ut[e]=new St(e,5,!1,e.toLowerCase(),null,!1,!1)});var $f=/[\-:]([a-z])/g;function vf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace($f,vf);ut[t]=new St(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace($f,vf);ut[t]=new St(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace($f,vf);ut[t]=new St(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ut[e]=new St(e,1,!1,e.toLowerCase(),null,!1,!1)});ut.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ut[e]=new St(e,1,!1,e.toLowerCase(),null,!0,!0)});function yf(e,t,r,n){var i=ut.hasOwnProperty(t)?ut[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(kD(t,r,i,n)&&(r=null),n||i===null?bD(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var qr=yD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wo=Symbol.for("react.element"),pi=Symbol.for("react.portal"),hi=Symbol.for("react.fragment"),gf=Symbol.for("react.strict_mode"),rc=Symbol.for("react.profiler"),H$=Symbol.for("react.provider"),W$=Symbol.for("react.context"),bf=Symbol.for("react.forward_ref"),nc=Symbol.for("react.suspense"),ic=Symbol.for("react.suspense_list"),wf=Symbol.for("react.memo"),Yr=Symbol.for("react.lazy"),G$=Symbol.for("react.offscreen"),bh=Symbol.iterator;function gs(e){return e===null||typeof e!="object"?null:(e=bh&&e[bh]||e["@@iterator"],typeof e=="function"?e:null)}var Fe=Object.assign,vl;function Ns(e){if(vl===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);vl=t&&t[1]||""}return`
`+vl+e}var yl=!1;function gl(e,t){if(!e||yl)return"";yl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var n=m}Reflect.construct(e,[],t)}else{try{t.call()}catch(m){n=m}e.call(t.prototype)}else{try{throw Error()}catch(m){n=m}e()}}catch(m){if(m&&n&&typeof m.stack=="string"){for(var i=m.stack.split(`
`),o=n.stack.split(`
`),u=i.length-1,d=o.length-1;1<=u&&0<=d&&i[u]!==o[d];)d--;for(;1<=u&&0<=d;u--,d--)if(i[u]!==o[d]){if(u!==1||d!==1)do if(u--,d--,0>d||i[u]!==o[d]){var h=`
`+i[u].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=u&&0<=d);break}}}finally{yl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ns(e):""}function SD(e){switch(e.tag){case 5:return Ns(e.type);case 16:return Ns("Lazy");case 13:return Ns("Suspense");case 19:return Ns("SuspenseList");case 0:case 2:case 15:return e=gl(e.type,!1),e;case 11:return e=gl(e.type.render,!1),e;case 1:return e=gl(e.type,!0),e;default:return""}}function sc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case hi:return"Fragment";case pi:return"Portal";case rc:return"Profiler";case gf:return"StrictMode";case nc:return"Suspense";case ic:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case W$:return(e.displayName||"Context")+".Consumer";case H$:return(e._context.displayName||"Context")+".Provider";case bf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case wf:return t=e.displayName||null,t!==null?t:sc(e.type)||"Memo";case Yr:t=e._payload,e=e._init;try{return sc(e(t))}catch{}}return null}function xD(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sc(t);case 8:return t===gf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function mn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Y$(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function DD(e){var t=Y$(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(u){n=""+u,o.call(this,u)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(u){n=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Go(e){e._valueTracker||(e._valueTracker=DD(e))}function Z$(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Y$(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ia(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function oc(e,t){var r=t.checked;return Fe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function wh(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=mn(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function X$(e,t){t=t.checked,t!=null&&yf(e,"checked",t,!1)}function ac(e,t){X$(e,t);var r=mn(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?uc(e,t.type,r):t.hasOwnProperty("defaultValue")&&uc(e,t.type,mn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function kh(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function uc(e,t,r){(t!=="number"||Ia(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var js=Array.isArray;function ji(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+mn(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function lc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(q(91));return Fe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Sh(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(q(92));if(js(r)){if(1<r.length)throw Error(q(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:mn(r)}}function ev(e,t){var r=mn(t.value),n=mn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function xh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function tv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?tv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Yo,rv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Yo=Yo||document.createElement("div"),Yo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Yo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Qs(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Os={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CD=["Webkit","ms","Moz","O"];Object.keys(Os).forEach(function(e){CD.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Os[t]=Os[e]})});function nv(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Os.hasOwnProperty(e)&&Os[e]?(""+t).trim():t+"px"}function iv(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=nv(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var ND=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fc(e,t){if(t){if(ND[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(q(62))}}function dc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pc=null;function kf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hc=null,Ii=null,Ei=null;function Dh(e){if(e=po(e)){if(typeof hc!="function")throw Error(q(280));var t=e.stateNode;t&&(t=hu(t),hc(e.stateNode,e.type,t))}}function sv(e){Ii?Ei?Ei.push(e):Ei=[e]:Ii=e}function ov(){if(Ii){var e=Ii,t=Ei;if(Ei=Ii=null,Dh(e),t)for(e=0;e<t.length;e++)Dh(t[e])}}function av(e,t){return e(t)}function uv(){}var bl=!1;function lv(e,t,r){if(bl)return e(t,r);bl=!0;try{return av(e,t,r)}finally{bl=!1,(Ii!==null||Ei!==null)&&(uv(),ov())}}function Js(e,t){var r=e.stateNode;if(r===null)return null;var n=hu(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(q(231,t,typeof r));return r}var mc=!1;if(Or)try{var bs={};Object.defineProperty(bs,"passive",{get:function(){mc=!0}}),window.addEventListener("test",bs,bs),window.removeEventListener("test",bs,bs)}catch{mc=!1}function jD(e,t,r,n,i,o,u,d,h){var m=Array.prototype.slice.call(arguments,3);try{t.apply(r,m)}catch(g){this.onError(g)}}var As=!1,Ea=null,Ma=!1,$c=null,ID={onError:function(e){As=!0,Ea=e}};function ED(e,t,r,n,i,o,u,d,h){As=!1,Ea=null,jD.apply(ID,arguments)}function MD(e,t,r,n,i,o,u,d,h){if(ED.apply(this,arguments),As){if(As){var m=Ea;As=!1,Ea=null}else throw Error(q(198));Ma||(Ma=!0,$c=m)}}function Yn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function cv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ch(e){if(Yn(e)!==e)throw Error(q(188))}function PD(e){var t=e.alternate;if(!t){if(t=Yn(e),t===null)throw Error(q(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return Ch(i),e;if(o===n)return Ch(i),t;o=o.sibling}throw Error(q(188))}if(r.return!==n.return)r=i,n=o;else{for(var u=!1,d=i.child;d;){if(d===r){u=!0,r=i,n=o;break}if(d===n){u=!0,n=i,r=o;break}d=d.sibling}if(!u){for(d=o.child;d;){if(d===r){u=!0,r=o,n=i;break}if(d===n){u=!0,n=o,r=i;break}d=d.sibling}if(!u)throw Error(q(189))}}if(r.alternate!==n)throw Error(q(190))}if(r.tag!==3)throw Error(q(188));return r.stateNode.current===r?e:t}function fv(e){return e=PD(e),e!==null?dv(e):null}function dv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=dv(e);if(t!==null)return t;e=e.sibling}return null}var pv=Rt.unstable_scheduleCallback,Nh=Rt.unstable_cancelCallback,OD=Rt.unstable_shouldYield,AD=Rt.unstable_requestPaint,Ke=Rt.unstable_now,RD=Rt.unstable_getCurrentPriorityLevel,Sf=Rt.unstable_ImmediatePriority,hv=Rt.unstable_UserBlockingPriority,Pa=Rt.unstable_NormalPriority,_D=Rt.unstable_LowPriority,mv=Rt.unstable_IdlePriority,cu=null,mr=null;function TD(e){if(mr&&typeof mr.onCommitFiberRoot=="function")try{mr.onCommitFiberRoot(cu,e,void 0,(e.current.flags&128)===128)}catch{}}var ir=Math.clz32?Math.clz32:zD,LD=Math.log,FD=Math.LN2;function zD(e){return e>>>=0,e===0?32:31-(LD(e)/FD|0)|0}var Zo=64,Xo=4194304;function Is(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Oa(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,o=e.pingedLanes,u=r&268435455;if(u!==0){var d=u&~i;d!==0?n=Is(d):(o&=u,o!==0&&(n=Is(o)))}else u=r&~i,u!==0?n=Is(u):o!==0&&(n=Is(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ir(t),i=1<<r,n|=e[r],t&=~i;return n}function qD(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BD(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var u=31-ir(o),d=1<<u,h=i[u];h===-1?(!(d&r)||d&n)&&(i[u]=qD(d,t)):h<=t&&(e.expiredLanes|=d),o&=~d}}function vc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function $v(){var e=Zo;return Zo<<=1,!(Zo&4194240)&&(Zo=64),e}function wl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function co(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ir(t),e[t]=r}function UD(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-ir(r),o=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~o}}function xf(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ir(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var ke=0;function vv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var yv,Df,gv,bv,wv,yc=!1,ea=[],an=null,un=null,ln=null,Vs=new Map,Hs=new Map,en=[],KD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jh(e,t){switch(e){case"focusin":case"focusout":an=null;break;case"dragenter":case"dragleave":un=null;break;case"mouseover":case"mouseout":ln=null;break;case"pointerover":case"pointerout":Vs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hs.delete(t.pointerId)}}function ws(e,t,r,n,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},t!==null&&(t=po(t),t!==null&&Df(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function QD(e,t,r,n,i){switch(t){case"focusin":return an=ws(an,e,t,r,n,i),!0;case"dragenter":return un=ws(un,e,t,r,n,i),!0;case"mouseover":return ln=ws(ln,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return Vs.set(o,ws(Vs.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Hs.set(o,ws(Hs.get(o)||null,e,t,r,n,i)),!0}return!1}function kv(e){var t=Tn(e.target);if(t!==null){var r=Yn(t);if(r!==null){if(t=r.tag,t===13){if(t=cv(r),t!==null){e.blockedOn=t,wv(e.priority,function(){gv(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function va(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=gc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);pc=n,r.target.dispatchEvent(n),pc=null}else return t=po(r),t!==null&&Df(t),e.blockedOn=r,!1;t.shift()}return!0}function Ih(e,t,r){va(e)&&r.delete(t)}function JD(){yc=!1,an!==null&&va(an)&&(an=null),un!==null&&va(un)&&(un=null),ln!==null&&va(ln)&&(ln=null),Vs.forEach(Ih),Hs.forEach(Ih)}function ks(e,t){e.blockedOn===t&&(e.blockedOn=null,yc||(yc=!0,Rt.unstable_scheduleCallback(Rt.unstable_NormalPriority,JD)))}function Ws(e){function t(i){return ks(i,e)}if(0<ea.length){ks(ea[0],e);for(var r=1;r<ea.length;r++){var n=ea[r];n.blockedOn===e&&(n.blockedOn=null)}}for(an!==null&&ks(an,e),un!==null&&ks(un,e),ln!==null&&ks(ln,e),Vs.forEach(t),Hs.forEach(t),r=0;r<en.length;r++)n=en[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<en.length&&(r=en[0],r.blockedOn===null);)kv(r),r.blockedOn===null&&en.shift()}var Mi=qr.ReactCurrentBatchConfig,Aa=!0;function VD(e,t,r,n){var i=ke,o=Mi.transition;Mi.transition=null;try{ke=1,Cf(e,t,r,n)}finally{ke=i,Mi.transition=o}}function HD(e,t,r,n){var i=ke,o=Mi.transition;Mi.transition=null;try{ke=4,Cf(e,t,r,n)}finally{ke=i,Mi.transition=o}}function Cf(e,t,r,n){if(Aa){var i=gc(e,t,r,n);if(i===null)Ml(e,t,n,Ra,r),jh(e,n);else if(QD(i,e,t,r,n))n.stopPropagation();else if(jh(e,n),t&4&&-1<KD.indexOf(e)){for(;i!==null;){var o=po(i);if(o!==null&&yv(o),o=gc(e,t,r,n),o===null&&Ml(e,t,n,Ra,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else Ml(e,t,n,null,r)}}var Ra=null;function gc(e,t,r,n){if(Ra=null,e=kf(n),e=Tn(e),e!==null)if(t=Yn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=cv(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ra=e,null}function Sv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RD()){case Sf:return 1;case hv:return 4;case Pa:case _D:return 16;case mv:return 536870912;default:return 16}default:return 16}}var nn=null,Nf=null,ya=null;function xv(){if(ya)return ya;var e,t=Nf,r=t.length,n,i="value"in nn?nn.value:nn.textContent,o=i.length;for(e=0;e<r&&t[e]===i[e];e++);var u=r-e;for(n=1;n<=u&&t[r-n]===i[o-n];n++);return ya=i.slice(e,1<n?1-n:void 0)}function ga(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ta(){return!0}function Eh(){return!1}function Tt(e){function t(r,n,i,o,u){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=u,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(r=e[d],this[d]=r?r(o):o[d]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ta:Eh,this.isPropagationStopped=Eh,this}return Fe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ta)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ta)},persist:function(){},isPersistent:ta}),t}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jf=Tt(Wi),fo=Fe({},Wi,{view:0,detail:0}),WD=Tt(fo),kl,Sl,Ss,fu=Fe({},fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:If,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ss&&(Ss&&e.type==="mousemove"?(kl=e.screenX-Ss.screenX,Sl=e.screenY-Ss.screenY):Sl=kl=0,Ss=e),kl)},movementY:function(e){return"movementY"in e?e.movementY:Sl}}),Mh=Tt(fu),GD=Fe({},fu,{dataTransfer:0}),YD=Tt(GD),ZD=Fe({},fo,{relatedTarget:0}),xl=Tt(ZD),XD=Fe({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),eC=Tt(XD),tC=Fe({},Wi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),rC=Tt(tC),nC=Fe({},Wi,{data:0}),Ph=Tt(nC),iC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aC(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=oC[e])?!!t[e]:!1}function If(){return aC}var uC=Fe({},fo,{key:function(e){if(e.key){var t=iC[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ga(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?sC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:If,charCode:function(e){return e.type==="keypress"?ga(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ga(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),lC=Tt(uC),cC=Fe({},fu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oh=Tt(cC),fC=Fe({},fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:If}),dC=Tt(fC),pC=Fe({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),hC=Tt(pC),mC=Fe({},fu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$C=Tt(mC),vC=[9,13,27,32],Ef=Or&&"CompositionEvent"in window,Rs=null;Or&&"documentMode"in document&&(Rs=document.documentMode);var yC=Or&&"TextEvent"in window&&!Rs,Dv=Or&&(!Ef||Rs&&8<Rs&&11>=Rs),Ah=" ",Rh=!1;function Cv(e,t){switch(e){case"keyup":return vC.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mi=!1;function gC(e,t){switch(e){case"compositionend":return Nv(t);case"keypress":return t.which!==32?null:(Rh=!0,Ah);case"textInput":return e=t.data,e===Ah&&Rh?null:e;default:return null}}function bC(e,t){if(mi)return e==="compositionend"||!Ef&&Cv(e,t)?(e=xv(),ya=Nf=nn=null,mi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dv&&t.locale!=="ko"?null:t.data;default:return null}}var wC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _h(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!wC[e.type]:t==="textarea"}function jv(e,t,r,n){sv(n),t=_a(t,"onChange"),0<t.length&&(r=new jf("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var _s=null,Gs=null;function kC(e){Fv(e,0)}function du(e){var t=yi(e);if(Z$(t))return e}function SC(e,t){if(e==="change")return t}var Iv=!1;if(Or){var Dl;if(Or){var Cl="oninput"in document;if(!Cl){var Th=document.createElement("div");Th.setAttribute("oninput","return;"),Cl=typeof Th.oninput=="function"}Dl=Cl}else Dl=!1;Iv=Dl&&(!document.documentMode||9<document.documentMode)}function Lh(){_s&&(_s.detachEvent("onpropertychange",Ev),Gs=_s=null)}function Ev(e){if(e.propertyName==="value"&&du(Gs)){var t=[];jv(t,Gs,e,kf(e)),lv(kC,t)}}function xC(e,t,r){e==="focusin"?(Lh(),_s=t,Gs=r,_s.attachEvent("onpropertychange",Ev)):e==="focusout"&&Lh()}function DC(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return du(Gs)}function CC(e,t){if(e==="click")return du(t)}function NC(e,t){if(e==="input"||e==="change")return du(t)}function jC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var or=typeof Object.is=="function"?Object.is:jC;function Ys(e,t){if(or(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!tc.call(t,i)||!or(e[i],t[i]))return!1}return!0}function Fh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zh(e,t){var r=Fh(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Fh(r)}}function Mv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Mv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pv(){for(var e=window,t=Ia();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ia(e.document)}return t}function Mf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function IC(e){var t=Pv(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Mv(r.ownerDocument.documentElement,r)){if(n!==null&&Mf(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!e.extend&&o>n&&(i=n,n=o,o=i),i=zh(r,o);var u=zh(r,n);i&&u&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var EC=Or&&"documentMode"in document&&11>=document.documentMode,$i=null,bc=null,Ts=null,wc=!1;function qh(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;wc||$i==null||$i!==Ia(n)||(n=$i,"selectionStart"in n&&Mf(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ts&&Ys(Ts,n)||(Ts=n,n=_a(bc,"onSelect"),0<n.length&&(t=new jf("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=$i)))}function ra(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var vi={animationend:ra("Animation","AnimationEnd"),animationiteration:ra("Animation","AnimationIteration"),animationstart:ra("Animation","AnimationStart"),transitionend:ra("Transition","TransitionEnd")},Nl={},Ov={};Or&&(Ov=document.createElement("div").style,"AnimationEvent"in window||(delete vi.animationend.animation,delete vi.animationiteration.animation,delete vi.animationstart.animation),"TransitionEvent"in window||delete vi.transitionend.transition);function pu(e){if(Nl[e])return Nl[e];if(!vi[e])return e;var t=vi[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Ov)return Nl[e]=t[r];return e}var Av=pu("animationend"),Rv=pu("animationiteration"),_v=pu("animationstart"),Tv=pu("transitionend"),Lv=new Map,Bh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yn(e,t){Lv.set(e,t),Gn(t,[e])}for(var jl=0;jl<Bh.length;jl++){var Il=Bh[jl],MC=Il.toLowerCase(),PC=Il[0].toUpperCase()+Il.slice(1);yn(MC,"on"+PC)}yn(Av,"onAnimationEnd");yn(Rv,"onAnimationIteration");yn(_v,"onAnimationStart");yn("dblclick","onDoubleClick");yn("focusin","onFocus");yn("focusout","onBlur");yn(Tv,"onTransitionEnd");_i("onMouseEnter",["mouseout","mouseover"]);_i("onMouseLeave",["mouseout","mouseover"]);_i("onPointerEnter",["pointerout","pointerover"]);_i("onPointerLeave",["pointerout","pointerover"]);Gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Es="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Es));function Uh(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,MD(n,t,void 0,e),e.currentTarget=null}function Fv(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var u=n.length-1;0<=u;u--){var d=n[u],h=d.instance,m=d.currentTarget;if(d=d.listener,h!==o&&i.isPropagationStopped())break e;Uh(i,d,m),o=h}else for(u=0;u<n.length;u++){if(d=n[u],h=d.instance,m=d.currentTarget,d=d.listener,h!==o&&i.isPropagationStopped())break e;Uh(i,d,m),o=h}}}if(Ma)throw e=$c,Ma=!1,$c=null,e}function Me(e,t){var r=t[Cc];r===void 0&&(r=t[Cc]=new Set);var n=e+"__bubble";r.has(n)||(zv(t,e,2,!1),r.add(n))}function El(e,t,r){var n=0;t&&(n|=4),zv(r,e,n,t)}var na="_reactListening"+Math.random().toString(36).slice(2);function Zs(e){if(!e[na]){e[na]=!0,V$.forEach(function(r){r!=="selectionchange"&&(OC.has(r)||El(r,!1,e),El(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[na]||(t[na]=!0,El("selectionchange",!1,t))}}function zv(e,t,r,n){switch(Sv(t)){case 1:var i=VD;break;case 4:i=HD;break;default:i=Cf}r=i.bind(null,t,r,e),i=void 0,!mc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Ml(e,t,r,n,i){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var u=n.tag;if(u===3||u===4){var d=n.stateNode.containerInfo;if(d===i||d.nodeType===8&&d.parentNode===i)break;if(u===4)for(u=n.return;u!==null;){var h=u.tag;if((h===3||h===4)&&(h=u.stateNode.containerInfo,h===i||h.nodeType===8&&h.parentNode===i))return;u=u.return}for(;d!==null;){if(u=Tn(d),u===null)return;if(h=u.tag,h===5||h===6){n=o=u;continue e}d=d.parentNode}}n=n.return}lv(function(){var m=o,g=kf(r),c=[];e:{var v=Lv.get(e);if(v!==void 0){var j=jf,C=e;switch(e){case"keypress":if(ga(r)===0)break e;case"keydown":case"keyup":j=lC;break;case"focusin":C="focus",j=xl;break;case"focusout":C="blur",j=xl;break;case"beforeblur":case"afterblur":j=xl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Mh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=YD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=dC;break;case Av:case Rv:case _v:j=eC;break;case Tv:j=hC;break;case"scroll":j=WD;break;case"wheel":j=$C;break;case"copy":case"cut":case"paste":j=rC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Oh}var T=(t&4)!==0,H=!T&&e==="scroll",S=T?v!==null?v+"Capture":null:v;T=[];for(var k=m,x;k!==null;){x=k;var E=x.stateNode;if(x.tag===5&&E!==null&&(x=E,S!==null&&(E=Js(k,S),E!=null&&T.push(Xs(k,E,x)))),H)break;k=k.return}0<T.length&&(v=new j(v,C,null,r,g),c.push({event:v,listeners:T}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",v&&r!==pc&&(C=r.relatedTarget||r.fromElement)&&(Tn(C)||C[Ar]))break e;if((j||v)&&(v=g.window===g?g:(v=g.ownerDocument)?v.defaultView||v.parentWindow:window,j?(C=r.relatedTarget||r.toElement,j=m,C=C?Tn(C):null,C!==null&&(H=Yn(C),C!==H||C.tag!==5&&C.tag!==6)&&(C=null)):(j=null,C=m),j!==C)){if(T=Mh,E="onMouseLeave",S="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(T=Oh,E="onPointerLeave",S="onPointerEnter",k="pointer"),H=j==null?v:yi(j),x=C==null?v:yi(C),v=new T(E,k+"leave",j,r,g),v.target=H,v.relatedTarget=x,E=null,Tn(g)===m&&(T=new T(S,k+"enter",C,r,g),T.target=x,T.relatedTarget=H,E=T),H=E,j&&C)t:{for(T=j,S=C,k=0,x=T;x;x=ci(x))k++;for(x=0,E=S;E;E=ci(E))x++;for(;0<k-x;)T=ci(T),k--;for(;0<x-k;)S=ci(S),x--;for(;k--;){if(T===S||S!==null&&T===S.alternate)break t;T=ci(T),S=ci(S)}T=null}else T=null;j!==null&&Kh(c,v,j,T,!1),C!==null&&H!==null&&Kh(c,H,C,T,!0)}}e:{if(v=m?yi(m):window,j=v.nodeName&&v.nodeName.toLowerCase(),j==="select"||j==="input"&&v.type==="file")var O=SC;else if(_h(v))if(Iv)O=NC;else{O=DC;var F=xC}else(j=v.nodeName)&&j.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(O=CC);if(O&&(O=O(e,m))){jv(c,O,r,g);break e}F&&F(e,v,m),e==="focusout"&&(F=v._wrapperState)&&F.controlled&&v.type==="number"&&uc(v,"number",v.value)}switch(F=m?yi(m):window,e){case"focusin":(_h(F)||F.contentEditable==="true")&&($i=F,bc=m,Ts=null);break;case"focusout":Ts=bc=$i=null;break;case"mousedown":wc=!0;break;case"contextmenu":case"mouseup":case"dragend":wc=!1,qh(c,r,g);break;case"selectionchange":if(EC)break;case"keydown":case"keyup":qh(c,r,g)}var Q;if(Ef)e:{switch(e){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else mi?Cv(e,r)&&(z="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(z="onCompositionStart");z&&(Dv&&r.locale!=="ko"&&(mi||z!=="onCompositionStart"?z==="onCompositionEnd"&&mi&&(Q=xv()):(nn=g,Nf="value"in nn?nn.value:nn.textContent,mi=!0)),F=_a(m,z),0<F.length&&(z=new Ph(z,e,null,r,g),c.push({event:z,listeners:F}),Q?z.data=Q:(Q=Nv(r),Q!==null&&(z.data=Q)))),(Q=yC?gC(e,r):bC(e,r))&&(m=_a(m,"onBeforeInput"),0<m.length&&(g=new Ph("onBeforeInput","beforeinput",null,r,g),c.push({event:g,listeners:m}),g.data=Q))}Fv(c,t)})}function Xs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function _a(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Js(e,r),o!=null&&n.unshift(Xs(e,o,i)),o=Js(e,t),o!=null&&n.push(Xs(e,o,i))),e=e.return}return n}function ci(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Kh(e,t,r,n,i){for(var o=t._reactName,u=[];r!==null&&r!==n;){var d=r,h=d.alternate,m=d.stateNode;if(h!==null&&h===n)break;d.tag===5&&m!==null&&(d=m,i?(h=Js(r,o),h!=null&&u.unshift(Xs(r,h,d))):i||(h=Js(r,o),h!=null&&u.push(Xs(r,h,d)))),r=r.return}u.length!==0&&e.push({event:t,listeners:u})}var AC=/\r\n?/g,RC=/\u0000|\uFFFD/g;function Qh(e){return(typeof e=="string"?e:""+e).replace(AC,`
`).replace(RC,"")}function ia(e,t,r){if(t=Qh(t),Qh(e)!==t&&r)throw Error(q(425))}function Ta(){}var kc=null,Sc=null;function xc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Dc=typeof setTimeout=="function"?setTimeout:void 0,_C=typeof clearTimeout=="function"?clearTimeout:void 0,Jh=typeof Promise=="function"?Promise:void 0,TC=typeof queueMicrotask=="function"?queueMicrotask:typeof Jh<"u"?function(e){return Jh.resolve(null).then(e).catch(LC)}:Dc;function LC(e){setTimeout(function(){throw e})}function Pl(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),Ws(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Ws(t)}function cn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Vh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Gi=Math.random().toString(36).slice(2),hr="__reactFiber$"+Gi,eo="__reactProps$"+Gi,Ar="__reactContainer$"+Gi,Cc="__reactEvents$"+Gi,FC="__reactListeners$"+Gi,zC="__reactHandles$"+Gi;function Tn(e){var t=e[hr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ar]||r[hr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Vh(e);e!==null;){if(r=e[hr])return r;e=Vh(e)}return t}e=r,r=e.parentNode}return null}function po(e){return e=e[hr]||e[Ar],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function yi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(q(33))}function hu(e){return e[eo]||null}var Nc=[],gi=-1;function gn(e){return{current:e}}function Oe(e){0>gi||(e.current=Nc[gi],Nc[gi]=null,gi--)}function je(e,t){gi++,Nc[gi]=e.current,e.current=t}var $n={},ht=gn($n),It=gn(!1),Kn=$n;function Ti(e,t){var r=e.type.contextTypes;if(!r)return $n;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Et(e){return e=e.childContextTypes,e!=null}function La(){Oe(It),Oe(ht)}function Hh(e,t,r){if(ht.current!==$n)throw Error(q(168));je(ht,t),je(It,r)}function qv(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(q(108,xD(e)||"Unknown",i));return Fe({},r,n)}function Fa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||$n,Kn=ht.current,je(ht,e),je(It,It.current),!0}function Wh(e,t,r){var n=e.stateNode;if(!n)throw Error(q(169));r?(e=qv(e,t,Kn),n.__reactInternalMemoizedMergedChildContext=e,Oe(It),Oe(ht),je(ht,e)):Oe(It),je(It,r)}var jr=null,mu=!1,Ol=!1;function Bv(e){jr===null?jr=[e]:jr.push(e)}function qC(e){mu=!0,Bv(e)}function bn(){if(!Ol&&jr!==null){Ol=!0;var e=0,t=ke;try{var r=jr;for(ke=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}jr=null,mu=!1}catch(i){throw jr!==null&&(jr=jr.slice(e+1)),pv(Sf,bn),i}finally{ke=t,Ol=!1}}return null}var bi=[],wi=0,za=null,qa=0,Kt=[],Qt=0,Qn=null,Er=1,Mr="";function An(e,t){bi[wi++]=qa,bi[wi++]=za,za=e,qa=t}function Uv(e,t,r){Kt[Qt++]=Er,Kt[Qt++]=Mr,Kt[Qt++]=Qn,Qn=e;var n=Er;e=Mr;var i=32-ir(n)-1;n&=~(1<<i),r+=1;var o=32-ir(t)+i;if(30<o){var u=i-i%5;o=(n&(1<<u)-1).toString(32),n>>=u,i-=u,Er=1<<32-ir(t)+i|r<<i|n,Mr=o+e}else Er=1<<o|r<<i|n,Mr=e}function Pf(e){e.return!==null&&(An(e,1),Uv(e,1,0))}function Of(e){for(;e===za;)za=bi[--wi],bi[wi]=null,qa=bi[--wi],bi[wi]=null;for(;e===Qn;)Qn=Kt[--Qt],Kt[Qt]=null,Mr=Kt[--Qt],Kt[Qt]=null,Er=Kt[--Qt],Kt[Qt]=null}var At=null,Ot=null,_e=!1,nr=null;function Kv(e,t){var r=Jt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Gh(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,At=e,Ot=cn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,At=e,Ot=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Qn!==null?{id:Er,overflow:Mr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Jt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,At=e,Ot=null,!0):!1;default:return!1}}function jc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ic(e){if(_e){var t=Ot;if(t){var r=t;if(!Gh(e,t)){if(jc(e))throw Error(q(418));t=cn(r.nextSibling);var n=At;t&&Gh(e,t)?Kv(n,r):(e.flags=e.flags&-4097|2,_e=!1,At=e)}}else{if(jc(e))throw Error(q(418));e.flags=e.flags&-4097|2,_e=!1,At=e}}}function Yh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;At=e}function sa(e){if(e!==At)return!1;if(!_e)return Yh(e),_e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!xc(e.type,e.memoizedProps)),t&&(t=Ot)){if(jc(e))throw Qv(),Error(q(418));for(;t;)Kv(e,t),t=cn(t.nextSibling)}if(Yh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ot=cn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ot=null}}else Ot=At?cn(e.stateNode.nextSibling):null;return!0}function Qv(){for(var e=Ot;e;)e=cn(e.nextSibling)}function Li(){Ot=At=null,_e=!1}function Af(e){nr===null?nr=[e]:nr.push(e)}var BC=qr.ReactCurrentBatchConfig;function xs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(q(309));var n=r.stateNode}if(!n)throw Error(q(147,e));var i=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(u){var d=i.refs;u===null?delete d[o]:d[o]=u},t._stringRef=o,t)}if(typeof e!="string")throw Error(q(284));if(!r._owner)throw Error(q(290,e))}return e}function oa(e,t){throw e=Object.prototype.toString.call(t),Error(q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zh(e){var t=e._init;return t(e._payload)}function Jv(e){function t(S,k){if(e){var x=S.deletions;x===null?(S.deletions=[k],S.flags|=16):x.push(k)}}function r(S,k){if(!e)return null;for(;k!==null;)t(S,k),k=k.sibling;return null}function n(S,k){for(S=new Map;k!==null;)k.key!==null?S.set(k.key,k):S.set(k.index,k),k=k.sibling;return S}function i(S,k){return S=hn(S,k),S.index=0,S.sibling=null,S}function o(S,k,x){return S.index=x,e?(x=S.alternate,x!==null?(x=x.index,x<k?(S.flags|=2,k):x):(S.flags|=2,k)):(S.flags|=1048576,k)}function u(S){return e&&S.alternate===null&&(S.flags|=2),S}function d(S,k,x,E){return k===null||k.tag!==6?(k=zl(x,S.mode,E),k.return=S,k):(k=i(k,x),k.return=S,k)}function h(S,k,x,E){var O=x.type;return O===hi?g(S,k,x.props.children,E,x.key):k!==null&&(k.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Yr&&Zh(O)===k.type)?(E=i(k,x.props),E.ref=xs(S,k,x),E.return=S,E):(E=Ca(x.type,x.key,x.props,null,S.mode,E),E.ref=xs(S,k,x),E.return=S,E)}function m(S,k,x,E){return k===null||k.tag!==4||k.stateNode.containerInfo!==x.containerInfo||k.stateNode.implementation!==x.implementation?(k=ql(x,S.mode,E),k.return=S,k):(k=i(k,x.children||[]),k.return=S,k)}function g(S,k,x,E,O){return k===null||k.tag!==7?(k=Bn(x,S.mode,E,O),k.return=S,k):(k=i(k,x),k.return=S,k)}function c(S,k,x){if(typeof k=="string"&&k!==""||typeof k=="number")return k=zl(""+k,S.mode,x),k.return=S,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Wo:return x=Ca(k.type,k.key,k.props,null,S.mode,x),x.ref=xs(S,null,k),x.return=S,x;case pi:return k=ql(k,S.mode,x),k.return=S,k;case Yr:var E=k._init;return c(S,E(k._payload),x)}if(js(k)||gs(k))return k=Bn(k,S.mode,x,null),k.return=S,k;oa(S,k)}return null}function v(S,k,x,E){var O=k!==null?k.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return O!==null?null:d(S,k,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Wo:return x.key===O?h(S,k,x,E):null;case pi:return x.key===O?m(S,k,x,E):null;case Yr:return O=x._init,v(S,k,O(x._payload),E)}if(js(x)||gs(x))return O!==null?null:g(S,k,x,E,null);oa(S,x)}return null}function j(S,k,x,E,O){if(typeof E=="string"&&E!==""||typeof E=="number")return S=S.get(x)||null,d(k,S,""+E,O);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Wo:return S=S.get(E.key===null?x:E.key)||null,h(k,S,E,O);case pi:return S=S.get(E.key===null?x:E.key)||null,m(k,S,E,O);case Yr:var F=E._init;return j(S,k,x,F(E._payload),O)}if(js(E)||gs(E))return S=S.get(x)||null,g(k,S,E,O,null);oa(k,E)}return null}function C(S,k,x,E){for(var O=null,F=null,Q=k,z=k=0,$e=null;Q!==null&&z<x.length;z++){Q.index>z?($e=Q,Q=null):$e=Q.sibling;var ee=v(S,Q,x[z],E);if(ee===null){Q===null&&(Q=$e);break}e&&Q&&ee.alternate===null&&t(S,Q),k=o(ee,k,z),F===null?O=ee:F.sibling=ee,F=ee,Q=$e}if(z===x.length)return r(S,Q),_e&&An(S,z),O;if(Q===null){for(;z<x.length;z++)Q=c(S,x[z],E),Q!==null&&(k=o(Q,k,z),F===null?O=Q:F.sibling=Q,F=Q);return _e&&An(S,z),O}for(Q=n(S,Q);z<x.length;z++)$e=j(Q,S,z,x[z],E),$e!==null&&(e&&$e.alternate!==null&&Q.delete($e.key===null?z:$e.key),k=o($e,k,z),F===null?O=$e:F.sibling=$e,F=$e);return e&&Q.forEach(function(Ze){return t(S,Ze)}),_e&&An(S,z),O}function T(S,k,x,E){var O=gs(x);if(typeof O!="function")throw Error(q(150));if(x=O.call(x),x==null)throw Error(q(151));for(var F=O=null,Q=k,z=k=0,$e=null,ee=x.next();Q!==null&&!ee.done;z++,ee=x.next()){Q.index>z?($e=Q,Q=null):$e=Q.sibling;var Ze=v(S,Q,ee.value,E);if(Ze===null){Q===null&&(Q=$e);break}e&&Q&&Ze.alternate===null&&t(S,Q),k=o(Ze,k,z),F===null?O=Ze:F.sibling=Ze,F=Ze,Q=$e}if(ee.done)return r(S,Q),_e&&An(S,z),O;if(Q===null){for(;!ee.done;z++,ee=x.next())ee=c(S,ee.value,E),ee!==null&&(k=o(ee,k,z),F===null?O=ee:F.sibling=ee,F=ee);return _e&&An(S,z),O}for(Q=n(S,Q);!ee.done;z++,ee=x.next())ee=j(Q,S,z,ee.value,E),ee!==null&&(e&&ee.alternate!==null&&Q.delete(ee.key===null?z:ee.key),k=o(ee,k,z),F===null?O=ee:F.sibling=ee,F=ee);return e&&Q.forEach(function(ve){return t(S,ve)}),_e&&An(S,z),O}function H(S,k,x,E){if(typeof x=="object"&&x!==null&&x.type===hi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Wo:e:{for(var O=x.key,F=k;F!==null;){if(F.key===O){if(O=x.type,O===hi){if(F.tag===7){r(S,F.sibling),k=i(F,x.props.children),k.return=S,S=k;break e}}else if(F.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Yr&&Zh(O)===F.type){r(S,F.sibling),k=i(F,x.props),k.ref=xs(S,F,x),k.return=S,S=k;break e}r(S,F);break}else t(S,F);F=F.sibling}x.type===hi?(k=Bn(x.props.children,S.mode,E,x.key),k.return=S,S=k):(E=Ca(x.type,x.key,x.props,null,S.mode,E),E.ref=xs(S,k,x),E.return=S,S=E)}return u(S);case pi:e:{for(F=x.key;k!==null;){if(k.key===F)if(k.tag===4&&k.stateNode.containerInfo===x.containerInfo&&k.stateNode.implementation===x.implementation){r(S,k.sibling),k=i(k,x.children||[]),k.return=S,S=k;break e}else{r(S,k);break}else t(S,k);k=k.sibling}k=ql(x,S.mode,E),k.return=S,S=k}return u(S);case Yr:return F=x._init,H(S,k,F(x._payload),E)}if(js(x))return C(S,k,x,E);if(gs(x))return T(S,k,x,E);oa(S,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,k!==null&&k.tag===6?(r(S,k.sibling),k=i(k,x),k.return=S,S=k):(r(S,k),k=zl(x,S.mode,E),k.return=S,S=k),u(S)):r(S,k)}return H}var Fi=Jv(!0),Vv=Jv(!1),Ba=gn(null),Ua=null,ki=null,Rf=null;function _f(){Rf=ki=Ua=null}function Tf(e){var t=Ba.current;Oe(Ba),e._currentValue=t}function Ec(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Pi(e,t){Ua=e,Rf=ki=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(jt=!0),e.firstContext=null)}function Ht(e){var t=e._currentValue;if(Rf!==e)if(e={context:e,memoizedValue:t,next:null},ki===null){if(Ua===null)throw Error(q(308));ki=e,Ua.dependencies={lanes:0,firstContext:e}}else ki=ki.next=e;return t}var Ln=null;function Lf(e){Ln===null?Ln=[e]:Ln.push(e)}function Hv(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,Lf(t)):(r.next=i.next,i.next=r),t.interleaved=r,Rr(e,n)}function Rr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Zr=!1;function Ff(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fn(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ye&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Rr(e,r)}return i=n.interleaved,i===null?(t.next=t,Lf(n)):(t.next=i.next,i.next=t),n.interleaved=t,Rr(e,r)}function ba(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,xf(e,r)}}function Xh(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var u={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=u:o=o.next=u,r=r.next}while(r!==null);o===null?i=o=t:o=o.next=t}else i=o=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ka(e,t,r,n){var i=e.updateQueue;Zr=!1;var o=i.firstBaseUpdate,u=i.lastBaseUpdate,d=i.shared.pending;if(d!==null){i.shared.pending=null;var h=d,m=h.next;h.next=null,u===null?o=m:u.next=m,u=h;var g=e.alternate;g!==null&&(g=g.updateQueue,d=g.lastBaseUpdate,d!==u&&(d===null?g.firstBaseUpdate=m:d.next=m,g.lastBaseUpdate=h))}if(o!==null){var c=i.baseState;u=0,g=m=h=null,d=o;do{var v=d.lane,j=d.eventTime;if((n&v)===v){g!==null&&(g=g.next={eventTime:j,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var C=e,T=d;switch(v=t,j=r,T.tag){case 1:if(C=T.payload,typeof C=="function"){c=C.call(j,c,v);break e}c=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=T.payload,v=typeof C=="function"?C.call(j,c,v):C,v==null)break e;c=Fe({},c,v);break e;case 2:Zr=!0}}d.callback!==null&&d.lane!==0&&(e.flags|=64,v=i.effects,v===null?i.effects=[d]:v.push(d))}else j={eventTime:j,lane:v,tag:d.tag,payload:d.payload,callback:d.callback,next:null},g===null?(m=g=j,h=c):g=g.next=j,u|=v;if(d=d.next,d===null){if(d=i.shared.pending,d===null)break;v=d,d=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(g===null&&(h=c),i.baseState=h,i.firstBaseUpdate=m,i.lastBaseUpdate=g,t=i.shared.interleaved,t!==null){i=t;do u|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Vn|=u,e.lanes=u,e.memoizedState=c}}function em(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(q(191,i));i.call(n)}}}var ho={},$r=gn(ho),to=gn(ho),ro=gn(ho);function Fn(e){if(e===ho)throw Error(q(174));return e}function zf(e,t){switch(je(ro,t),je(to,e),je($r,ho),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:cc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=cc(t,e)}Oe($r),je($r,t)}function zi(){Oe($r),Oe(to),Oe(ro)}function Gv(e){Fn(ro.current);var t=Fn($r.current),r=cc(t,e.type);t!==r&&(je(to,e),je($r,r))}function qf(e){to.current===e&&(Oe($r),Oe(to))}var Te=gn(0);function Qa(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Al=[];function Bf(){for(var e=0;e<Al.length;e++)Al[e]._workInProgressVersionPrimary=null;Al.length=0}var wa=qr.ReactCurrentDispatcher,Rl=qr.ReactCurrentBatchConfig,Jn=0,Le=null,Ge=null,tt=null,Ja=!1,Ls=!1,no=0,UC=0;function ft(){throw Error(q(321))}function Uf(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!or(e[r],t[r]))return!1;return!0}function Kf(e,t,r,n,i,o){if(Jn=o,Le=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wa.current=e===null||e.memoizedState===null?VC:HC,e=r(n,i),Ls){o=0;do{if(Ls=!1,no=0,25<=o)throw Error(q(301));o+=1,tt=Ge=null,t.updateQueue=null,wa.current=WC,e=r(n,i)}while(Ls)}if(wa.current=Va,t=Ge!==null&&Ge.next!==null,Jn=0,tt=Ge=Le=null,Ja=!1,t)throw Error(q(300));return e}function Qf(){var e=no!==0;return no=0,e}function dr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Le.memoizedState=tt=e:tt=tt.next=e,tt}function Wt(){if(Ge===null){var e=Le.alternate;e=e!==null?e.memoizedState:null}else e=Ge.next;var t=tt===null?Le.memoizedState:tt.next;if(t!==null)tt=t,Ge=e;else{if(e===null)throw Error(q(310));Ge=e,e={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},tt===null?Le.memoizedState=tt=e:tt=tt.next=e}return tt}function io(e,t){return typeof t=="function"?t(e):t}function _l(e){var t=Wt(),r=t.queue;if(r===null)throw Error(q(311));r.lastRenderedReducer=e;var n=Ge,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var u=i.next;i.next=o.next,o.next=u}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var d=u=null,h=null,m=o;do{var g=m.lane;if((Jn&g)===g)h!==null&&(h=h.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),n=m.hasEagerState?m.eagerState:e(n,m.action);else{var c={lane:g,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};h===null?(d=h=c,u=n):h=h.next=c,Le.lanes|=g,Vn|=g}m=m.next}while(m!==null&&m!==o);h===null?u=n:h.next=d,or(n,t.memoizedState)||(jt=!0),t.memoizedState=n,t.baseState=u,t.baseQueue=h,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do o=i.lane,Le.lanes|=o,Vn|=o,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Tl(e){var t=Wt(),r=t.queue;if(r===null)throw Error(q(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(i!==null){r.pending=null;var u=i=i.next;do o=e(o,u.action),u=u.next;while(u!==i);or(o,t.memoizedState)||(jt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function Yv(){}function Zv(e,t){var r=Le,n=Wt(),i=t(),o=!or(n.memoizedState,i);if(o&&(n.memoizedState=i,jt=!0),n=n.queue,Jf(ty.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||tt!==null&&tt.memoizedState.tag&1){if(r.flags|=2048,so(9,ey.bind(null,r,n,i,t),void 0,null),nt===null)throw Error(q(349));Jn&30||Xv(r,t,i)}return i}function Xv(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function ey(e,t,r,n){t.value=r,t.getSnapshot=n,ry(t)&&ny(e)}function ty(e,t,r){return r(function(){ry(t)&&ny(e)})}function ry(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!or(e,r)}catch{return!0}}function ny(e){var t=Rr(e,1);t!==null&&sr(t,e,1,-1)}function tm(e){var t=dr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:e},t.queue=e,e=e.dispatch=JC.bind(null,Le,e),[t.memoizedState,e]}function so(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function iy(){return Wt().memoizedState}function ka(e,t,r,n){var i=dr();Le.flags|=e,i.memoizedState=so(1|t,r,void 0,n===void 0?null:n)}function $u(e,t,r,n){var i=Wt();n=n===void 0?null:n;var o=void 0;if(Ge!==null){var u=Ge.memoizedState;if(o=u.destroy,n!==null&&Uf(n,u.deps)){i.memoizedState=so(t,r,o,n);return}}Le.flags|=e,i.memoizedState=so(1|t,r,o,n)}function rm(e,t){return ka(8390656,8,e,t)}function Jf(e,t){return $u(2048,8,e,t)}function sy(e,t){return $u(4,2,e,t)}function oy(e,t){return $u(4,4,e,t)}function ay(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function uy(e,t,r){return r=r!=null?r.concat([e]):null,$u(4,4,ay.bind(null,t,e),r)}function Vf(){}function ly(e,t){var r=Wt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Uf(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function cy(e,t){var r=Wt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Uf(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function fy(e,t,r){return Jn&21?(or(r,t)||(r=$v(),Le.lanes|=r,Vn|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,jt=!0),e.memoizedState=r)}function KC(e,t){var r=ke;ke=r!==0&&4>r?r:4,e(!0);var n=Rl.transition;Rl.transition={};try{e(!1),t()}finally{ke=r,Rl.transition=n}}function dy(){return Wt().memoizedState}function QC(e,t,r){var n=pn(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},py(e))hy(t,r);else if(r=Hv(e,t,r,n),r!==null){var i=bt();sr(r,e,n,i),my(r,t,n)}}function JC(e,t,r){var n=pn(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(py(e))hy(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var u=t.lastRenderedState,d=o(u,r);if(i.hasEagerState=!0,i.eagerState=d,or(d,u)){var h=t.interleaved;h===null?(i.next=i,Lf(t)):(i.next=h.next,h.next=i),t.interleaved=i;return}}catch{}finally{}r=Hv(e,t,i,n),r!==null&&(i=bt(),sr(r,e,n,i),my(r,t,n))}}function py(e){var t=e.alternate;return e===Le||t!==null&&t===Le}function hy(e,t){Ls=Ja=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function my(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,xf(e,r)}}var Va={readContext:Ht,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},VC={readContext:Ht,useCallback:function(e,t){return dr().memoizedState=[e,t===void 0?null:t],e},useContext:Ht,useEffect:rm,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ka(4194308,4,ay.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ka(4194308,4,e,t)},useInsertionEffect:function(e,t){return ka(4,2,e,t)},useMemo:function(e,t){var r=dr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=dr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=QC.bind(null,Le,e),[n.memoizedState,e]},useRef:function(e){var t=dr();return e={current:e},t.memoizedState=e},useState:tm,useDebugValue:Vf,useDeferredValue:function(e){return dr().memoizedState=e},useTransition:function(){var e=tm(!1),t=e[0];return e=KC.bind(null,e[1]),dr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Le,i=dr();if(_e){if(r===void 0)throw Error(q(407));r=r()}else{if(r=t(),nt===null)throw Error(q(349));Jn&30||Xv(n,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,rm(ty.bind(null,n,o,e),[e]),n.flags|=2048,so(9,ey.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=dr(),t=nt.identifierPrefix;if(_e){var r=Mr,n=Er;r=(n&~(1<<32-ir(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=no++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=UC++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},HC={readContext:Ht,useCallback:ly,useContext:Ht,useEffect:Jf,useImperativeHandle:uy,useInsertionEffect:sy,useLayoutEffect:oy,useMemo:cy,useReducer:_l,useRef:iy,useState:function(){return _l(io)},useDebugValue:Vf,useDeferredValue:function(e){var t=Wt();return fy(t,Ge.memoizedState,e)},useTransition:function(){var e=_l(io)[0],t=Wt().memoizedState;return[e,t]},useMutableSource:Yv,useSyncExternalStore:Zv,useId:dy,unstable_isNewReconciler:!1},WC={readContext:Ht,useCallback:ly,useContext:Ht,useEffect:Jf,useImperativeHandle:uy,useInsertionEffect:sy,useLayoutEffect:oy,useMemo:cy,useReducer:Tl,useRef:iy,useState:function(){return Tl(io)},useDebugValue:Vf,useDeferredValue:function(e){var t=Wt();return Ge===null?t.memoizedState=e:fy(t,Ge.memoizedState,e)},useTransition:function(){var e=Tl(io)[0],t=Wt().memoizedState;return[e,t]},useMutableSource:Yv,useSyncExternalStore:Zv,useId:dy,unstable_isNewReconciler:!1};function tr(e,t){if(e&&e.defaultProps){t=Fe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Mc(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Fe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var vu={isMounted:function(e){return(e=e._reactInternals)?Yn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=bt(),i=pn(e),o=Pr(n,i);o.payload=t,r!=null&&(o.callback=r),t=fn(e,o,i),t!==null&&(sr(t,e,i,n),ba(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=bt(),i=pn(e),o=Pr(n,i);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=fn(e,o,i),t!==null&&(sr(t,e,i,n),ba(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=bt(),n=pn(e),i=Pr(r,n);i.tag=2,t!=null&&(i.callback=t),t=fn(e,i,n),t!==null&&(sr(t,e,n,r),ba(t,e,n))}};function nm(e,t,r,n,i,o,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,u):t.prototype&&t.prototype.isPureReactComponent?!Ys(r,n)||!Ys(i,o):!0}function $y(e,t,r){var n=!1,i=$n,o=t.contextType;return typeof o=="object"&&o!==null?o=Ht(o):(i=Et(t)?Kn:ht.current,n=t.contextTypes,o=(n=n!=null)?Ti(e,i):$n),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vu,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function im(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&vu.enqueueReplaceState(t,t.state,null)}function Pc(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},Ff(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Ht(o):(o=Et(t)?Kn:ht.current,i.context=Ti(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Mc(e,t,o,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&vu.enqueueReplaceState(i,i.state,null),Ka(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function qi(e,t){try{var r="",n=t;do r+=SD(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function Ll(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Oc(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var GC=typeof WeakMap=="function"?WeakMap:Map;function vy(e,t,r){r=Pr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Wa||(Wa=!0,Uc=n),Oc(e,t)},r}function yy(e,t,r){r=Pr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){Oc(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Oc(e,t),typeof n!="function"&&(dn===null?dn=new Set([this]):dn.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),r}function sm(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new GC;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=cN.bind(null,e,t,r),t.then(e,e))}function om(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function am(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Pr(-1,1),t.tag=2,fn(r,t,1))),r.lanes|=1),e)}var YC=qr.ReactCurrentOwner,jt=!1;function yt(e,t,r,n){t.child=e===null?Vv(t,null,r,n):Fi(t,e.child,r,n)}function um(e,t,r,n,i){r=r.render;var o=t.ref;return Pi(t,i),n=Kf(e,t,r,n,o,i),r=Qf(),e!==null&&!jt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,_r(e,t,i)):(_e&&r&&Pf(t),t.flags|=1,yt(e,t,n,i),t.child)}function lm(e,t,r,n,i){if(e===null){var o=r.type;return typeof o=="function"&&!td(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,gy(e,t,o,n,i)):(e=Ca(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var u=o.memoizedProps;if(r=r.compare,r=r!==null?r:Ys,r(u,n)&&e.ref===t.ref)return _r(e,t,i)}return t.flags|=1,e=hn(o,n),e.ref=t.ref,e.return=t,t.child=e}function gy(e,t,r,n,i){if(e!==null){var o=e.memoizedProps;if(Ys(o,n)&&e.ref===t.ref)if(jt=!1,t.pendingProps=n=o,(e.lanes&i)!==0)e.flags&131072&&(jt=!0);else return t.lanes=e.lanes,_r(e,t,i)}return Ac(e,t,r,n,i)}function by(e,t,r){var n=t.pendingProps,i=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(xi,Pt),Pt|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,je(xi,Pt),Pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,je(xi,Pt),Pt|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,je(xi,Pt),Pt|=n;return yt(e,t,i,r),t.child}function wy(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ac(e,t,r,n,i){var o=Et(r)?Kn:ht.current;return o=Ti(t,o),Pi(t,i),r=Kf(e,t,r,n,o,i),n=Qf(),e!==null&&!jt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,_r(e,t,i)):(_e&&n&&Pf(t),t.flags|=1,yt(e,t,r,i),t.child)}function cm(e,t,r,n,i){if(Et(r)){var o=!0;Fa(t)}else o=!1;if(Pi(t,i),t.stateNode===null)Sa(e,t),$y(t,r,n),Pc(t,r,n,i),n=!0;else if(e===null){var u=t.stateNode,d=t.memoizedProps;u.props=d;var h=u.context,m=r.contextType;typeof m=="object"&&m!==null?m=Ht(m):(m=Et(r)?Kn:ht.current,m=Ti(t,m));var g=r.getDerivedStateFromProps,c=typeof g=="function"||typeof u.getSnapshotBeforeUpdate=="function";c||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(d!==n||h!==m)&&im(t,u,n,m),Zr=!1;var v=t.memoizedState;u.state=v,Ka(t,n,u,i),h=t.memoizedState,d!==n||v!==h||It.current||Zr?(typeof g=="function"&&(Mc(t,r,g,n),h=t.memoizedState),(d=Zr||nm(t,r,d,n,v,h,m))?(c||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=h),u.props=n,u.state=h,u.context=m,n=d):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{u=t.stateNode,Wv(e,t),d=t.memoizedProps,m=t.type===t.elementType?d:tr(t.type,d),u.props=m,c=t.pendingProps,v=u.context,h=r.contextType,typeof h=="object"&&h!==null?h=Ht(h):(h=Et(r)?Kn:ht.current,h=Ti(t,h));var j=r.getDerivedStateFromProps;(g=typeof j=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(d!==c||v!==h)&&im(t,u,n,h),Zr=!1,v=t.memoizedState,u.state=v,Ka(t,n,u,i);var C=t.memoizedState;d!==c||v!==C||It.current||Zr?(typeof j=="function"&&(Mc(t,r,j,n),C=t.memoizedState),(m=Zr||nm(t,r,m,n,v,C,h)||!1)?(g||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(n,C,h),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(n,C,h)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||d===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=C),u.props=n,u.state=C,u.context=h,n=m):(typeof u.componentDidUpdate!="function"||d===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),n=!1)}return Rc(e,t,r,n,o,i)}function Rc(e,t,r,n,i,o){wy(e,t);var u=(t.flags&128)!==0;if(!n&&!u)return i&&Wh(t,r,!1),_r(e,t,o);n=t.stateNode,YC.current=t;var d=u&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&u?(t.child=Fi(t,e.child,null,o),t.child=Fi(t,null,d,o)):yt(e,t,d,o),t.memoizedState=n.state,i&&Wh(t,r,!0),t.child}function ky(e){var t=e.stateNode;t.pendingContext?Hh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Hh(e,t.context,!1),zf(e,t.containerInfo)}function fm(e,t,r,n,i){return Li(),Af(i),t.flags|=256,yt(e,t,r,n),t.child}var _c={dehydrated:null,treeContext:null,retryLane:0};function Tc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Sy(e,t,r){var n=t.pendingProps,i=Te.current,o=!1,u=(t.flags&128)!==0,d;if((d=u)||(d=e!==null&&e.memoizedState===null?!1:(i&2)!==0),d?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),je(Te,i&1),e===null)return Ic(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=n.children,e=n.fallback,o?(n=t.mode,o=t.child,u={mode:"hidden",children:u},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=u):o=bu(u,n,0,null),e=Bn(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Tc(r),t.memoizedState=_c,e):Hf(t,u));if(i=e.memoizedState,i!==null&&(d=i.dehydrated,d!==null))return ZC(e,t,u,n,d,i,r);if(o){o=n.fallback,u=t.mode,i=e.child,d=i.sibling;var h={mode:"hidden",children:n.children};return!(u&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=h,t.deletions=null):(n=hn(i,h),n.subtreeFlags=i.subtreeFlags&14680064),d!==null?o=hn(d,o):(o=Bn(o,u,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,u=e.child.memoizedState,u=u===null?Tc(r):{baseLanes:u.baseLanes|r,cachePool:null,transitions:u.transitions},o.memoizedState=u,o.childLanes=e.childLanes&~r,t.memoizedState=_c,n}return o=e.child,e=o.sibling,n=hn(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Hf(e,t){return t=bu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function aa(e,t,r,n){return n!==null&&Af(n),Fi(t,e.child,null,r),e=Hf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ZC(e,t,r,n,i,o,u){if(r)return t.flags&256?(t.flags&=-257,n=Ll(Error(q(422))),aa(e,t,u,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,i=t.mode,n=bu({mode:"visible",children:n.children},i,0,null),o=Bn(o,i,u,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Fi(t,e.child,null,u),t.child.memoizedState=Tc(u),t.memoizedState=_c,o);if(!(t.mode&1))return aa(e,t,u,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var d=n.dgst;return n=d,o=Error(q(419)),n=Ll(o,n,void 0),aa(e,t,u,n)}if(d=(u&e.childLanes)!==0,jt||d){if(n=nt,n!==null){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|u)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Rr(e,i),sr(n,e,i,-1))}return ed(),n=Ll(Error(q(421))),aa(e,t,u,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=fN.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Ot=cn(i.nextSibling),At=t,_e=!0,nr=null,e!==null&&(Kt[Qt++]=Er,Kt[Qt++]=Mr,Kt[Qt++]=Qn,Er=e.id,Mr=e.overflow,Qn=t),t=Hf(t,n.children),t.flags|=4096,t)}function dm(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Ec(e.return,t,r)}function Fl(e,t,r,n,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function xy(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(yt(e,t,n.children,r),n=Te.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dm(e,r,t);else if(e.tag===19)dm(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(je(Te,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Qa(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Fl(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Qa(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Fl(t,!0,r,null,o);break;case"together":Fl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Sa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function _r(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Vn|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(q(153));if(t.child!==null){for(e=t.child,r=hn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=hn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function XC(e,t,r){switch(t.tag){case 3:ky(t),Li();break;case 5:Gv(t);break;case 1:Et(t.type)&&Fa(t);break;case 4:zf(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;je(Ba,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(je(Te,Te.current&1),t.flags|=128,null):r&t.child.childLanes?Sy(e,t,r):(je(Te,Te.current&1),e=_r(e,t,r),e!==null?e.sibling:null);je(Te,Te.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return xy(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),je(Te,Te.current),n)break;return null;case 22:case 23:return t.lanes=0,by(e,t,r)}return _r(e,t,r)}var Dy,Lc,Cy,Ny;Dy=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Lc=function(){};Cy=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Fn($r.current);var o=null;switch(r){case"input":i=oc(e,i),n=oc(e,n),o=[];break;case"select":i=Fe({},i,{value:void 0}),n=Fe({},n,{value:void 0}),o=[];break;case"textarea":i=lc(e,i),n=lc(e,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ta)}fc(r,n);var u;r=null;for(m in i)if(!n.hasOwnProperty(m)&&i.hasOwnProperty(m)&&i[m]!=null)if(m==="style"){var d=i[m];for(u in d)d.hasOwnProperty(u)&&(r||(r={}),r[u]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Ks.hasOwnProperty(m)?o||(o=[]):(o=o||[]).push(m,null));for(m in n){var h=n[m];if(d=i!=null?i[m]:void 0,n.hasOwnProperty(m)&&h!==d&&(h!=null||d!=null))if(m==="style")if(d){for(u in d)!d.hasOwnProperty(u)||h&&h.hasOwnProperty(u)||(r||(r={}),r[u]="");for(u in h)h.hasOwnProperty(u)&&d[u]!==h[u]&&(r||(r={}),r[u]=h[u])}else r||(o||(o=[]),o.push(m,r)),r=h;else m==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,d=d?d.__html:void 0,h!=null&&d!==h&&(o=o||[]).push(m,h)):m==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(m,""+h):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Ks.hasOwnProperty(m)?(h!=null&&m==="onScroll"&&Me("scroll",e),o||d===h||(o=[])):(o=o||[]).push(m,h))}r&&(o=o||[]).push("style",r);var m=o;(t.updateQueue=m)&&(t.flags|=4)}};Ny=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ds(e,t){if(!_e)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function eN(e,t,r){var n=t.pendingProps;switch(Of(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(t),null;case 1:return Et(t.type)&&La(),dt(t),null;case 3:return n=t.stateNode,zi(),Oe(It),Oe(ht),Bf(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(sa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,nr!==null&&(Jc(nr),nr=null))),Lc(e,t),dt(t),null;case 5:qf(t);var i=Fn(ro.current);if(r=t.type,e!==null&&t.stateNode!=null)Cy(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(q(166));return dt(t),null}if(e=Fn($r.current),sa(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[hr]=t,n[eo]=o,e=(t.mode&1)!==0,r){case"dialog":Me("cancel",n),Me("close",n);break;case"iframe":case"object":case"embed":Me("load",n);break;case"video":case"audio":for(i=0;i<Es.length;i++)Me(Es[i],n);break;case"source":Me("error",n);break;case"img":case"image":case"link":Me("error",n),Me("load",n);break;case"details":Me("toggle",n);break;case"input":wh(n,o),Me("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Me("invalid",n);break;case"textarea":Sh(n,o),Me("invalid",n)}fc(r,o),i=null;for(var u in o)if(o.hasOwnProperty(u)){var d=o[u];u==="children"?typeof d=="string"?n.textContent!==d&&(o.suppressHydrationWarning!==!0&&ia(n.textContent,d,e),i=["children",d]):typeof d=="number"&&n.textContent!==""+d&&(o.suppressHydrationWarning!==!0&&ia(n.textContent,d,e),i=["children",""+d]):Ks.hasOwnProperty(u)&&d!=null&&u==="onScroll"&&Me("scroll",n)}switch(r){case"input":Go(n),kh(n,o,!0);break;case"textarea":Go(n),xh(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Ta)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{u=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=tv(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=u.createElement(r,{is:n.is}):(e=u.createElement(r),r==="select"&&(u=e,n.multiple?u.multiple=!0:n.size&&(u.size=n.size))):e=u.createElementNS(e,r),e[hr]=t,e[eo]=n,Dy(e,t,!1,!1),t.stateNode=e;e:{switch(u=dc(r,n),r){case"dialog":Me("cancel",e),Me("close",e),i=n;break;case"iframe":case"object":case"embed":Me("load",e),i=n;break;case"video":case"audio":for(i=0;i<Es.length;i++)Me(Es[i],e);i=n;break;case"source":Me("error",e),i=n;break;case"img":case"image":case"link":Me("error",e),Me("load",e),i=n;break;case"details":Me("toggle",e),i=n;break;case"input":wh(e,n),i=oc(e,n),Me("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Fe({},n,{value:void 0}),Me("invalid",e);break;case"textarea":Sh(e,n),i=lc(e,n),Me("invalid",e);break;default:i=n}fc(r,i),d=i;for(o in d)if(d.hasOwnProperty(o)){var h=d[o];o==="style"?iv(e,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&rv(e,h)):o==="children"?typeof h=="string"?(r!=="textarea"||h!=="")&&Qs(e,h):typeof h=="number"&&Qs(e,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ks.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Me("scroll",e):h!=null&&yf(e,o,h,u))}switch(r){case"input":Go(e),kh(e,n,!1);break;case"textarea":Go(e),xh(e);break;case"option":n.value!=null&&e.setAttribute("value",""+mn(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?ji(e,!!n.multiple,o,!1):n.defaultValue!=null&&ji(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ta)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return dt(t),null;case 6:if(e&&t.stateNode!=null)Ny(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(q(166));if(r=Fn(ro.current),Fn($r.current),sa(t)){if(n=t.stateNode,r=t.memoizedProps,n[hr]=t,(o=n.nodeValue!==r)&&(e=At,e!==null))switch(e.tag){case 3:ia(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ia(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[hr]=t,t.stateNode=n}return dt(t),null;case 13:if(Oe(Te),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_e&&Ot!==null&&t.mode&1&&!(t.flags&128))Qv(),Li(),t.flags|=98560,o=!1;else if(o=sa(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(q(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(q(317));o[hr]=t}else Li(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;dt(t),o=!1}else nr!==null&&(Jc(nr),nr=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Te.current&1?Ye===0&&(Ye=3):ed())),t.updateQueue!==null&&(t.flags|=4),dt(t),null);case 4:return zi(),Lc(e,t),e===null&&Zs(t.stateNode.containerInfo),dt(t),null;case 10:return Tf(t.type._context),dt(t),null;case 17:return Et(t.type)&&La(),dt(t),null;case 19:if(Oe(Te),o=t.memoizedState,o===null)return dt(t),null;if(n=(t.flags&128)!==0,u=o.rendering,u===null)if(n)Ds(o,!1);else{if(Ye!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=Qa(e),u!==null){for(t.flags|=128,Ds(o,!1),n=u.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,u=o.alternate,u===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return je(Te,Te.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ke()>Bi&&(t.flags|=128,n=!0,Ds(o,!1),t.lanes=4194304)}else{if(!n)if(e=Qa(u),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ds(o,!0),o.tail===null&&o.tailMode==="hidden"&&!u.alternate&&!_e)return dt(t),null}else 2*Ke()-o.renderingStartTime>Bi&&r!==1073741824&&(t.flags|=128,n=!0,Ds(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(r=o.last,r!==null?r.sibling=u:t.child=u,o.last=u)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ke(),t.sibling=null,r=Te.current,je(Te,n?r&1|2:r&1),t):(dt(t),null);case 22:case 23:return Xf(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Pt&1073741824&&(dt(t),t.subtreeFlags&6&&(t.flags|=8192)):dt(t),null;case 24:return null;case 25:return null}throw Error(q(156,t.tag))}function tN(e,t){switch(Of(t),t.tag){case 1:return Et(t.type)&&La(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zi(),Oe(It),Oe(ht),Bf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return qf(t),null;case 13:if(Oe(Te),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(q(340));Li()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Oe(Te),null;case 4:return zi(),null;case 10:return Tf(t.type._context),null;case 22:case 23:return Xf(),null;case 24:return null;default:return null}}var ua=!1,pt=!1,rN=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Si(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Be(e,t,n)}else r.current=null}function Fc(e,t,r){try{r()}catch(n){Be(e,t,n)}}var pm=!1;function nN(e,t){if(kc=Aa,e=Pv(),Mf(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var u=0,d=-1,h=-1,m=0,g=0,c=e,v=null;t:for(;;){for(var j;c!==r||i!==0&&c.nodeType!==3||(d=u+i),c!==o||n!==0&&c.nodeType!==3||(h=u+n),c.nodeType===3&&(u+=c.nodeValue.length),(j=c.firstChild)!==null;)v=c,c=j;for(;;){if(c===e)break t;if(v===r&&++m===i&&(d=u),v===o&&++g===n&&(h=u),(j=c.nextSibling)!==null)break;c=v,v=c.parentNode}c=j}r=d===-1||h===-1?null:{start:d,end:h}}else r=null}r=r||{start:0,end:0}}else r=null;for(Sc={focusedElem:e,selectionRange:r},Aa=!1,Z=t;Z!==null;)if(t=Z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Z=e;else for(;Z!==null;){t=Z;try{var C=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var T=C.memoizedProps,H=C.memoizedState,S=t.stateNode,k=S.getSnapshotBeforeUpdate(t.elementType===t.type?T:tr(t.type,T),H);S.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(E){Be(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,Z=e;break}Z=t.return}return C=pm,pm=!1,C}function Fs(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&Fc(t,r,o)}i=i.next}while(i!==n)}}function yu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function zc(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function jy(e){var t=e.alternate;t!==null&&(e.alternate=null,jy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[hr],delete t[eo],delete t[Cc],delete t[FC],delete t[zC])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Iy(e){return e.tag===5||e.tag===3||e.tag===4}function hm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Iy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qc(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ta));else if(n!==4&&(e=e.child,e!==null))for(qc(e,t,r),e=e.sibling;e!==null;)qc(e,t,r),e=e.sibling}function Bc(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Bc(e,t,r),e=e.sibling;e!==null;)Bc(e,t,r),e=e.sibling}var ot=null,rr=!1;function Wr(e,t,r){for(r=r.child;r!==null;)Ey(e,t,r),r=r.sibling}function Ey(e,t,r){if(mr&&typeof mr.onCommitFiberUnmount=="function")try{mr.onCommitFiberUnmount(cu,r)}catch{}switch(r.tag){case 5:pt||Si(r,t);case 6:var n=ot,i=rr;ot=null,Wr(e,t,r),ot=n,rr=i,ot!==null&&(rr?(e=ot,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ot.removeChild(r.stateNode));break;case 18:ot!==null&&(rr?(e=ot,r=r.stateNode,e.nodeType===8?Pl(e.parentNode,r):e.nodeType===1&&Pl(e,r),Ws(e)):Pl(ot,r.stateNode));break;case 4:n=ot,i=rr,ot=r.stateNode.containerInfo,rr=!0,Wr(e,t,r),ot=n,rr=i;break;case 0:case 11:case 14:case 15:if(!pt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,u=o.destroy;o=o.tag,u!==void 0&&(o&2||o&4)&&Fc(r,t,u),i=i.next}while(i!==n)}Wr(e,t,r);break;case 1:if(!pt&&(Si(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(d){Be(r,t,d)}Wr(e,t,r);break;case 21:Wr(e,t,r);break;case 22:r.mode&1?(pt=(n=pt)||r.memoizedState!==null,Wr(e,t,r),pt=n):Wr(e,t,r);break;default:Wr(e,t,r)}}function mm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new rN),t.forEach(function(n){var i=dN.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function er(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=e,u=t,d=u;e:for(;d!==null;){switch(d.tag){case 5:ot=d.stateNode,rr=!1;break e;case 3:ot=d.stateNode.containerInfo,rr=!0;break e;case 4:ot=d.stateNode.containerInfo,rr=!0;break e}d=d.return}if(ot===null)throw Error(q(160));Ey(o,u,i),ot=null,rr=!1;var h=i.alternate;h!==null&&(h.return=null),i.return=null}catch(m){Be(i,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)My(t,e),t=t.sibling}function My(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(er(t,e),fr(e),n&4){try{Fs(3,e,e.return),yu(3,e)}catch(T){Be(e,e.return,T)}try{Fs(5,e,e.return)}catch(T){Be(e,e.return,T)}}break;case 1:er(t,e),fr(e),n&512&&r!==null&&Si(r,r.return);break;case 5:if(er(t,e),fr(e),n&512&&r!==null&&Si(r,r.return),e.flags&32){var i=e.stateNode;try{Qs(i,"")}catch(T){Be(e,e.return,T)}}if(n&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,u=r!==null?r.memoizedProps:o,d=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{d==="input"&&o.type==="radio"&&o.name!=null&&X$(i,o),dc(d,u);var m=dc(d,o);for(u=0;u<h.length;u+=2){var g=h[u],c=h[u+1];g==="style"?iv(i,c):g==="dangerouslySetInnerHTML"?rv(i,c):g==="children"?Qs(i,c):yf(i,g,c,m)}switch(d){case"input":ac(i,o);break;case"textarea":ev(i,o);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var j=o.value;j!=null?ji(i,!!o.multiple,j,!1):v!==!!o.multiple&&(o.defaultValue!=null?ji(i,!!o.multiple,o.defaultValue,!0):ji(i,!!o.multiple,o.multiple?[]:"",!1))}i[eo]=o}catch(T){Be(e,e.return,T)}}break;case 6:if(er(t,e),fr(e),n&4){if(e.stateNode===null)throw Error(q(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(T){Be(e,e.return,T)}}break;case 3:if(er(t,e),fr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ws(t.containerInfo)}catch(T){Be(e,e.return,T)}break;case 4:er(t,e),fr(e);break;case 13:er(t,e),fr(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Yf=Ke())),n&4&&mm(e);break;case 22:if(g=r!==null&&r.memoizedState!==null,e.mode&1?(pt=(m=pt)||g,er(t,e),pt=m):er(t,e),fr(e),n&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!g&&e.mode&1)for(Z=e,g=e.child;g!==null;){for(c=Z=g;Z!==null;){switch(v=Z,j=v.child,v.tag){case 0:case 11:case 14:case 15:Fs(4,v,v.return);break;case 1:Si(v,v.return);var C=v.stateNode;if(typeof C.componentWillUnmount=="function"){n=v,r=v.return;try{t=n,C.props=t.memoizedProps,C.state=t.memoizedState,C.componentWillUnmount()}catch(T){Be(n,r,T)}}break;case 5:Si(v,v.return);break;case 22:if(v.memoizedState!==null){vm(c);continue}}j!==null?(j.return=v,Z=j):vm(c)}g=g.sibling}e:for(g=null,c=e;;){if(c.tag===5){if(g===null){g=c;try{i=c.stateNode,m?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(d=c.stateNode,h=c.memoizedProps.style,u=h!=null&&h.hasOwnProperty("display")?h.display:null,d.style.display=nv("display",u))}catch(T){Be(e,e.return,T)}}}else if(c.tag===6){if(g===null)try{c.stateNode.nodeValue=m?"":c.memoizedProps}catch(T){Be(e,e.return,T)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===e)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;c.sibling===null;){if(c.return===null||c.return===e)break e;g===c&&(g=null),c=c.return}g===c&&(g=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:er(t,e),fr(e),n&4&&mm(e);break;case 21:break;default:er(t,e),fr(e)}}function fr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Iy(r)){var n=r;break e}r=r.return}throw Error(q(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Qs(i,""),n.flags&=-33);var o=hm(e);Bc(e,o,i);break;case 3:case 4:var u=n.stateNode.containerInfo,d=hm(e);qc(e,d,u);break;default:throw Error(q(161))}}catch(h){Be(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function iN(e,t,r){Z=e,Py(e)}function Py(e,t,r){for(var n=(e.mode&1)!==0;Z!==null;){var i=Z,o=i.child;if(i.tag===22&&n){var u=i.memoizedState!==null||ua;if(!u){var d=i.alternate,h=d!==null&&d.memoizedState!==null||pt;d=ua;var m=pt;if(ua=u,(pt=h)&&!m)for(Z=i;Z!==null;)u=Z,h=u.child,u.tag===22&&u.memoizedState!==null?ym(i):h!==null?(h.return=u,Z=h):ym(i);for(;o!==null;)Z=o,Py(o),o=o.sibling;Z=i,ua=d,pt=m}$m(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Z=o):$m(e)}}function $m(e){for(;Z!==null;){var t=Z;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:pt||yu(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!pt)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:tr(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&em(t,o,n);break;case 3:var u=t.updateQueue;if(u!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}em(t,u,r)}break;case 5:var d=t.stateNode;if(r===null&&t.flags&4){r=d;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&r.focus();break;case"img":h.src&&(r.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var g=m.memoizedState;if(g!==null){var c=g.dehydrated;c!==null&&Ws(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}pt||t.flags&512&&zc(t)}catch(v){Be(t,t.return,v)}}if(t===e){Z=null;break}if(r=t.sibling,r!==null){r.return=t.return,Z=r;break}Z=t.return}}function vm(e){for(;Z!==null;){var t=Z;if(t===e){Z=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Z=r;break}Z=t.return}}function ym(e){for(;Z!==null;){var t=Z;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{yu(4,t)}catch(h){Be(t,r,h)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(h){Be(t,i,h)}}var o=t.return;try{zc(t)}catch(h){Be(t,o,h)}break;case 5:var u=t.return;try{zc(t)}catch(h){Be(t,u,h)}}}catch(h){Be(t,t.return,h)}if(t===e){Z=null;break}var d=t.sibling;if(d!==null){d.return=t.return,Z=d;break}Z=t.return}}var sN=Math.ceil,Ha=qr.ReactCurrentDispatcher,Wf=qr.ReactCurrentOwner,Vt=qr.ReactCurrentBatchConfig,ye=0,nt=null,Ve=null,at=0,Pt=0,xi=gn(0),Ye=0,oo=null,Vn=0,gu=0,Gf=0,zs=null,Nt=null,Yf=0,Bi=1/0,Nr=null,Wa=!1,Uc=null,dn=null,la=!1,sn=null,Ga=0,qs=0,Kc=null,xa=-1,Da=0;function bt(){return ye&6?Ke():xa!==-1?xa:xa=Ke()}function pn(e){return e.mode&1?ye&2&&at!==0?at&-at:BC.transition!==null?(Da===0&&(Da=$v()),Da):(e=ke,e!==0||(e=window.event,e=e===void 0?16:Sv(e.type)),e):1}function sr(e,t,r,n){if(50<qs)throw qs=0,Kc=null,Error(q(185));co(e,r,n),(!(ye&2)||e!==nt)&&(e===nt&&(!(ye&2)&&(gu|=r),Ye===4&&tn(e,at)),Mt(e,n),r===1&&ye===0&&!(t.mode&1)&&(Bi=Ke()+500,mu&&bn()))}function Mt(e,t){var r=e.callbackNode;BD(e,t);var n=Oa(e,e===nt?at:0);if(n===0)r!==null&&Nh(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Nh(r),t===1)e.tag===0?qC(gm.bind(null,e)):Bv(gm.bind(null,e)),TC(function(){!(ye&6)&&bn()}),r=null;else{switch(vv(n)){case 1:r=Sf;break;case 4:r=hv;break;case 16:r=Pa;break;case 536870912:r=mv;break;default:r=Pa}r=zy(r,Oy.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Oy(e,t){if(xa=-1,Da=0,ye&6)throw Error(q(327));var r=e.callbackNode;if(Oi()&&e.callbackNode!==r)return null;var n=Oa(e,e===nt?at:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ya(e,n);else{t=n;var i=ye;ye|=2;var o=Ry();(nt!==e||at!==t)&&(Nr=null,Bi=Ke()+500,qn(e,t));do try{uN();break}catch(d){Ay(e,d)}while(!0);_f(),Ha.current=o,ye=i,Ve!==null?t=0:(nt=null,at=0,t=Ye)}if(t!==0){if(t===2&&(i=vc(e),i!==0&&(n=i,t=Qc(e,i))),t===1)throw r=oo,qn(e,0),tn(e,n),Mt(e,Ke()),r;if(t===6)tn(e,n);else{if(i=e.current.alternate,!(n&30)&&!oN(i)&&(t=Ya(e,n),t===2&&(o=vc(e),o!==0&&(n=o,t=Qc(e,o))),t===1))throw r=oo,qn(e,0),tn(e,n),Mt(e,Ke()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(q(345));case 2:Rn(e,Nt,Nr);break;case 3:if(tn(e,n),(n&130023424)===n&&(t=Yf+500-Ke(),10<t)){if(Oa(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){bt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Dc(Rn.bind(null,e,Nt,Nr),t);break}Rn(e,Nt,Nr);break;case 4:if(tn(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var u=31-ir(n);o=1<<u,u=t[u],u>i&&(i=u),n&=~o}if(n=i,n=Ke()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*sN(n/1960))-n,10<n){e.timeoutHandle=Dc(Rn.bind(null,e,Nt,Nr),n);break}Rn(e,Nt,Nr);break;case 5:Rn(e,Nt,Nr);break;default:throw Error(q(329))}}}return Mt(e,Ke()),e.callbackNode===r?Oy.bind(null,e):null}function Qc(e,t){var r=zs;return e.current.memoizedState.isDehydrated&&(qn(e,t).flags|=256),e=Ya(e,t),e!==2&&(t=Nt,Nt=r,t!==null&&Jc(t)),e}function Jc(e){Nt===null?Nt=e:Nt.push.apply(Nt,e)}function oN(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!or(o(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function tn(e,t){for(t&=~Gf,t&=~gu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ir(t),n=1<<r;e[r]=-1,t&=~n}}function gm(e){if(ye&6)throw Error(q(327));Oi();var t=Oa(e,0);if(!(t&1))return Mt(e,Ke()),null;var r=Ya(e,t);if(e.tag!==0&&r===2){var n=vc(e);n!==0&&(t=n,r=Qc(e,n))}if(r===1)throw r=oo,qn(e,0),tn(e,t),Mt(e,Ke()),r;if(r===6)throw Error(q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rn(e,Nt,Nr),Mt(e,Ke()),null}function Zf(e,t){var r=ye;ye|=1;try{return e(t)}finally{ye=r,ye===0&&(Bi=Ke()+500,mu&&bn())}}function Hn(e){sn!==null&&sn.tag===0&&!(ye&6)&&Oi();var t=ye;ye|=1;var r=Vt.transition,n=ke;try{if(Vt.transition=null,ke=1,e)return e()}finally{ke=n,Vt.transition=r,ye=t,!(ye&6)&&bn()}}function Xf(){Pt=xi.current,Oe(xi)}function qn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,_C(r)),Ve!==null)for(r=Ve.return;r!==null;){var n=r;switch(Of(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&La();break;case 3:zi(),Oe(It),Oe(ht),Bf();break;case 5:qf(n);break;case 4:zi();break;case 13:Oe(Te);break;case 19:Oe(Te);break;case 10:Tf(n.type._context);break;case 22:case 23:Xf()}r=r.return}if(nt=e,Ve=e=hn(e.current,null),at=Pt=t,Ye=0,oo=null,Gf=gu=Vn=0,Nt=zs=null,Ln!==null){for(t=0;t<Ln.length;t++)if(r=Ln[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var u=o.next;o.next=i,n.next=u}r.pending=n}Ln=null}return e}function Ay(e,t){do{var r=Ve;try{if(_f(),wa.current=Va,Ja){for(var n=Le.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ja=!1}if(Jn=0,tt=Ge=Le=null,Ls=!1,no=0,Wf.current=null,r===null||r.return===null){Ye=1,oo=t,Ve=null;break}e:{var o=e,u=r.return,d=r,h=t;if(t=at,d.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var m=h,g=d,c=g.tag;if(!(g.mode&1)&&(c===0||c===11||c===15)){var v=g.alternate;v?(g.updateQueue=v.updateQueue,g.memoizedState=v.memoizedState,g.lanes=v.lanes):(g.updateQueue=null,g.memoizedState=null)}var j=om(u);if(j!==null){j.flags&=-257,am(j,u,d,o,t),j.mode&1&&sm(o,m,t),t=j,h=m;var C=t.updateQueue;if(C===null){var T=new Set;T.add(h),t.updateQueue=T}else C.add(h);break e}else{if(!(t&1)){sm(o,m,t),ed();break e}h=Error(q(426))}}else if(_e&&d.mode&1){var H=om(u);if(H!==null){!(H.flags&65536)&&(H.flags|=256),am(H,u,d,o,t),Af(qi(h,d));break e}}o=h=qi(h,d),Ye!==4&&(Ye=2),zs===null?zs=[o]:zs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var S=vy(o,h,t);Xh(o,S);break e;case 1:d=h;var k=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof k.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(dn===null||!dn.has(x)))){o.flags|=65536,t&=-t,o.lanes|=t;var E=yy(o,d,t);Xh(o,E);break e}}o=o.return}while(o!==null)}Ty(r)}catch(O){t=O,Ve===r&&r!==null&&(Ve=r=r.return);continue}break}while(!0)}function Ry(){var e=Ha.current;return Ha.current=Va,e===null?Va:e}function ed(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),nt===null||!(Vn&268435455)&&!(gu&268435455)||tn(nt,at)}function Ya(e,t){var r=ye;ye|=2;var n=Ry();(nt!==e||at!==t)&&(Nr=null,qn(e,t));do try{aN();break}catch(i){Ay(e,i)}while(!0);if(_f(),ye=r,Ha.current=n,Ve!==null)throw Error(q(261));return nt=null,at=0,Ye}function aN(){for(;Ve!==null;)_y(Ve)}function uN(){for(;Ve!==null&&!OD();)_y(Ve)}function _y(e){var t=Fy(e.alternate,e,Pt);e.memoizedProps=e.pendingProps,t===null?Ty(e):Ve=t,Wf.current=null}function Ty(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=tN(r,t),r!==null){r.flags&=32767,Ve=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ye=6,Ve=null;return}}else if(r=eN(r,t,Pt),r!==null){Ve=r;return}if(t=t.sibling,t!==null){Ve=t;return}Ve=t=e}while(t!==null);Ye===0&&(Ye=5)}function Rn(e,t,r){var n=ke,i=Vt.transition;try{Vt.transition=null,ke=1,lN(e,t,r,n)}finally{Vt.transition=i,ke=n}return null}function lN(e,t,r,n){do Oi();while(sn!==null);if(ye&6)throw Error(q(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(q(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(UD(e,o),e===nt&&(Ve=nt=null,at=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||la||(la=!0,zy(Pa,function(){return Oi(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Vt.transition,Vt.transition=null;var u=ke;ke=1;var d=ye;ye|=4,Wf.current=null,nN(e,r),My(r,e),IC(Sc),Aa=!!kc,Sc=kc=null,e.current=r,iN(r),AD(),ye=d,ke=u,Vt.transition=o}else e.current=r;if(la&&(la=!1,sn=e,Ga=i),o=e.pendingLanes,o===0&&(dn=null),TD(r.stateNode),Mt(e,Ke()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Wa)throw Wa=!1,e=Uc,Uc=null,e;return Ga&1&&e.tag!==0&&Oi(),o=e.pendingLanes,o&1?e===Kc?qs++:(qs=0,Kc=e):qs=0,bn(),null}function Oi(){if(sn!==null){var e=vv(Ga),t=Vt.transition,r=ke;try{if(Vt.transition=null,ke=16>e?16:e,sn===null)var n=!1;else{if(e=sn,sn=null,Ga=0,ye&6)throw Error(q(331));var i=ye;for(ye|=4,Z=e.current;Z!==null;){var o=Z,u=o.child;if(Z.flags&16){var d=o.deletions;if(d!==null){for(var h=0;h<d.length;h++){var m=d[h];for(Z=m;Z!==null;){var g=Z;switch(g.tag){case 0:case 11:case 15:Fs(8,g,o)}var c=g.child;if(c!==null)c.return=g,Z=c;else for(;Z!==null;){g=Z;var v=g.sibling,j=g.return;if(jy(g),g===m){Z=null;break}if(v!==null){v.return=j,Z=v;break}Z=j}}}var C=o.alternate;if(C!==null){var T=C.child;if(T!==null){C.child=null;do{var H=T.sibling;T.sibling=null,T=H}while(T!==null)}}Z=o}}if(o.subtreeFlags&2064&&u!==null)u.return=o,Z=u;else e:for(;Z!==null;){if(o=Z,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Fs(9,o,o.return)}var S=o.sibling;if(S!==null){S.return=o.return,Z=S;break e}Z=o.return}}var k=e.current;for(Z=k;Z!==null;){u=Z;var x=u.child;if(u.subtreeFlags&2064&&x!==null)x.return=u,Z=x;else e:for(u=k;Z!==null;){if(d=Z,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:yu(9,d)}}catch(O){Be(d,d.return,O)}if(d===u){Z=null;break e}var E=d.sibling;if(E!==null){E.return=d.return,Z=E;break e}Z=d.return}}if(ye=i,bn(),mr&&typeof mr.onPostCommitFiberRoot=="function")try{mr.onPostCommitFiberRoot(cu,e)}catch{}n=!0}return n}finally{ke=r,Vt.transition=t}}return!1}function bm(e,t,r){t=qi(r,t),t=vy(e,t,1),e=fn(e,t,1),t=bt(),e!==null&&(co(e,1,t),Mt(e,t))}function Be(e,t,r){if(e.tag===3)bm(e,e,r);else for(;t!==null;){if(t.tag===3){bm(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(dn===null||!dn.has(n))){e=qi(r,e),e=yy(t,e,1),t=fn(t,e,1),e=bt(),t!==null&&(co(t,1,e),Mt(t,e));break}}t=t.return}}function cN(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=bt(),e.pingedLanes|=e.suspendedLanes&r,nt===e&&(at&r)===r&&(Ye===4||Ye===3&&(at&130023424)===at&&500>Ke()-Yf?qn(e,0):Gf|=r),Mt(e,t)}function Ly(e,t){t===0&&(e.mode&1?(t=Xo,Xo<<=1,!(Xo&130023424)&&(Xo=4194304)):t=1);var r=bt();e=Rr(e,t),e!==null&&(co(e,t,r),Mt(e,r))}function fN(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Ly(e,r)}function dN(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(q(314))}n!==null&&n.delete(t),Ly(e,r)}var Fy;Fy=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||It.current)jt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return jt=!1,XC(e,t,r);jt=!!(e.flags&131072)}else jt=!1,_e&&t.flags&1048576&&Uv(t,qa,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Sa(e,t),e=t.pendingProps;var i=Ti(t,ht.current);Pi(t,r),i=Kf(null,t,n,e,i,r);var o=Qf();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Et(n)?(o=!0,Fa(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ff(t),i.updater=vu,t.stateNode=i,i._reactInternals=t,Pc(t,n,e,r),t=Rc(null,t,n,!0,o,r)):(t.tag=0,_e&&o&&Pf(t),yt(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Sa(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=hN(n),e=tr(n,e),i){case 0:t=Ac(null,t,n,e,r);break e;case 1:t=cm(null,t,n,e,r);break e;case 11:t=um(null,t,n,e,r);break e;case 14:t=lm(null,t,n,tr(n.type,e),r);break e}throw Error(q(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:tr(n,i),Ac(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:tr(n,i),cm(e,t,n,i,r);case 3:e:{if(ky(t),e===null)throw Error(q(387));n=t.pendingProps,o=t.memoizedState,i=o.element,Wv(e,t),Ka(t,n,null,r);var u=t.memoizedState;if(n=u.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=qi(Error(q(423)),t),t=fm(e,t,n,r,i);break e}else if(n!==i){i=qi(Error(q(424)),t),t=fm(e,t,n,r,i);break e}else for(Ot=cn(t.stateNode.containerInfo.firstChild),At=t,_e=!0,nr=null,r=Vv(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Li(),n===i){t=_r(e,t,r);break e}yt(e,t,n,r)}t=t.child}return t;case 5:return Gv(t),e===null&&Ic(t),n=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,u=i.children,xc(n,i)?u=null:o!==null&&xc(n,o)&&(t.flags|=32),wy(e,t),yt(e,t,u,r),t.child;case 6:return e===null&&Ic(t),null;case 13:return Sy(e,t,r);case 4:return zf(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Fi(t,null,n,r):yt(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:tr(n,i),um(e,t,n,i,r);case 7:return yt(e,t,t.pendingProps,r),t.child;case 8:return yt(e,t,t.pendingProps.children,r),t.child;case 12:return yt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,je(Ba,n._currentValue),n._currentValue=u,o!==null)if(or(o.value,u)){if(o.children===i.children&&!It.current){t=_r(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var d=o.dependencies;if(d!==null){u=o.child;for(var h=d.firstContext;h!==null;){if(h.context===n){if(o.tag===1){h=Pr(-1,r&-r),h.tag=2;var m=o.updateQueue;if(m!==null){m=m.shared;var g=m.pending;g===null?h.next=h:(h.next=g.next,g.next=h),m.pending=h}}o.lanes|=r,h=o.alternate,h!==null&&(h.lanes|=r),Ec(o.return,r,t),d.lanes|=r;break}h=h.next}}else if(o.tag===10)u=o.type===t.type?null:o.child;else if(o.tag===18){if(u=o.return,u===null)throw Error(q(341));u.lanes|=r,d=u.alternate,d!==null&&(d.lanes|=r),Ec(u,r,t),u=o.sibling}else u=o.child;if(u!==null)u.return=o;else for(u=o;u!==null;){if(u===t){u=null;break}if(o=u.sibling,o!==null){o.return=u.return,u=o;break}u=u.return}o=u}yt(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Pi(t,r),i=Ht(i),n=n(i),t.flags|=1,yt(e,t,n,r),t.child;case 14:return n=t.type,i=tr(n,t.pendingProps),i=tr(n.type,i),lm(e,t,n,i,r);case 15:return gy(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:tr(n,i),Sa(e,t),t.tag=1,Et(n)?(e=!0,Fa(t)):e=!1,Pi(t,r),$y(t,n,i),Pc(t,n,i,r),Rc(null,t,n,!0,e,r);case 19:return xy(e,t,r);case 22:return by(e,t,r)}throw Error(q(156,t.tag))};function zy(e,t){return pv(e,t)}function pN(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(e,t,r,n){return new pN(e,t,r,n)}function td(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hN(e){if(typeof e=="function")return td(e)?1:0;if(e!=null){if(e=e.$$typeof,e===bf)return 11;if(e===wf)return 14}return 2}function hn(e,t){var r=e.alternate;return r===null?(r=Jt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ca(e,t,r,n,i,o){var u=2;if(n=e,typeof e=="function")td(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case hi:return Bn(r.children,i,o,t);case gf:u=8,i|=8;break;case rc:return e=Jt(12,r,t,i|2),e.elementType=rc,e.lanes=o,e;case nc:return e=Jt(13,r,t,i),e.elementType=nc,e.lanes=o,e;case ic:return e=Jt(19,r,t,i),e.elementType=ic,e.lanes=o,e;case G$:return bu(r,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case H$:u=10;break e;case W$:u=9;break e;case bf:u=11;break e;case wf:u=14;break e;case Yr:u=16,n=null;break e}throw Error(q(130,e==null?e:typeof e,""))}return t=Jt(u,r,t,i),t.elementType=e,t.type=n,t.lanes=o,t}function Bn(e,t,r,n){return e=Jt(7,e,n,t),e.lanes=r,e}function bu(e,t,r,n){return e=Jt(22,e,n,t),e.elementType=G$,e.lanes=r,e.stateNode={isHidden:!1},e}function zl(e,t,r){return e=Jt(6,e,null,t),e.lanes=r,e}function ql(e,t,r){return t=Jt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mN(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wl(0),this.expirationTimes=wl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wl(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function rd(e,t,r,n,i,o,u,d,h){return e=new mN(e,t,r,d,h),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Jt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ff(o),e}function $N(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pi,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function qy(e){if(!e)return $n;e=e._reactInternals;e:{if(Yn(e)!==e||e.tag!==1)throw Error(q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Et(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(q(171))}if(e.tag===1){var r=e.type;if(Et(r))return qv(e,r,t)}return t}function By(e,t,r,n,i,o,u,d,h){return e=rd(r,n,!0,e,i,o,u,d,h),e.context=qy(null),r=e.current,n=bt(),i=pn(r),o=Pr(n,i),o.callback=t??null,fn(r,o,i),e.current.lanes=i,co(e,i,n),Mt(e,n),e}function wu(e,t,r,n){var i=t.current,o=bt(),u=pn(i);return r=qy(r),t.context===null?t.context=r:t.pendingContext=r,t=Pr(o,u),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=fn(i,t,u),e!==null&&(sr(e,i,u,o),ba(e,i,u)),u}function Za(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function wm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function nd(e,t){wm(e,t),(e=e.alternate)&&wm(e,t)}function vN(){return null}var Uy=typeof reportError=="function"?reportError:function(e){console.error(e)};function id(e){this._internalRoot=e}ku.prototype.render=id.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(q(409));wu(e,t,null,null)};ku.prototype.unmount=id.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hn(function(){wu(null,e,null,null)}),t[Ar]=null}};function ku(e){this._internalRoot=e}ku.prototype.unstable_scheduleHydration=function(e){if(e){var t=bv();e={blockedOn:null,target:e,priority:t};for(var r=0;r<en.length&&t!==0&&t<en[r].priority;r++);en.splice(r,0,e),r===0&&kv(e)}};function sd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Su(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function km(){}function yN(e,t,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var m=Za(u);o.call(m)}}var u=By(t,n,e,0,null,!1,!1,"",km);return e._reactRootContainer=u,e[Ar]=u.current,Zs(e.nodeType===8?e.parentNode:e),Hn(),u}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var d=n;n=function(){var m=Za(h);d.call(m)}}var h=rd(e,0,!1,null,null,!1,!1,"",km);return e._reactRootContainer=h,e[Ar]=h.current,Zs(e.nodeType===8?e.parentNode:e),Hn(function(){wu(t,h,r,n)}),h}function xu(e,t,r,n,i){var o=r._reactRootContainer;if(o){var u=o;if(typeof i=="function"){var d=i;i=function(){var h=Za(u);d.call(h)}}wu(t,u,e,i)}else u=yN(r,t,e,i,n);return Za(u)}yv=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Is(t.pendingLanes);r!==0&&(xf(t,r|1),Mt(t,Ke()),!(ye&6)&&(Bi=Ke()+500,bn()))}break;case 13:Hn(function(){var n=Rr(e,1);if(n!==null){var i=bt();sr(n,e,1,i)}}),nd(e,1)}};Df=function(e){if(e.tag===13){var t=Rr(e,134217728);if(t!==null){var r=bt();sr(t,e,134217728,r)}nd(e,134217728)}};gv=function(e){if(e.tag===13){var t=pn(e),r=Rr(e,t);if(r!==null){var n=bt();sr(r,e,t,n)}nd(e,t)}};bv=function(){return ke};wv=function(e,t){var r=ke;try{return ke=e,t()}finally{ke=r}};hc=function(e,t,r){switch(t){case"input":if(ac(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=hu(n);if(!i)throw Error(q(90));Z$(n),ac(n,i)}}}break;case"textarea":ev(e,r);break;case"select":t=r.value,t!=null&&ji(e,!!r.multiple,t,!1)}};av=Zf;uv=Hn;var gN={usingClientEntryPoint:!1,Events:[po,yi,hu,sv,ov,Zf]},Cs={findFiberByHostInstance:Tn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bN={bundleType:Cs.bundleType,version:Cs.version,rendererPackageName:Cs.rendererPackageName,rendererConfig:Cs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=fv(e),e===null?null:e.stateNode},findFiberByHostInstance:Cs.findFiberByHostInstance||vN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ca=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ca.isDisabled&&ca.supportsFiber)try{cu=ca.inject(bN),mr=ca}catch{}}_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gN;_t.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sd(t))throw Error(q(200));return $N(e,t,null,r)};_t.createRoot=function(e,t){if(!sd(e))throw Error(q(299));var r=!1,n="",i=Uy;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=rd(e,1,!1,null,null,r,!1,n,i),e[Ar]=t.current,Zs(e.nodeType===8?e.parentNode:e),new id(t)};_t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(q(188)):(e=Object.keys(e).join(","),Error(q(268,e)));return e=fv(t),e=e===null?null:e.stateNode,e};_t.flushSync=function(e){return Hn(e)};_t.hydrate=function(e,t,r){if(!Su(t))throw Error(q(200));return xu(null,e,t,!0,r)};_t.hydrateRoot=function(e,t,r){if(!sd(e))throw Error(q(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",u=Uy;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(u=r.onRecoverableError)),t=By(t,null,e,1,r??null,i,!1,o,u),e[Ar]=t.current,Zs(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new ku(t)};_t.render=function(e,t,r){if(!Su(t))throw Error(q(200));return xu(null,e,t,!1,r)};_t.unmountComponentAtNode=function(e){if(!Su(e))throw Error(q(40));return e._reactRootContainer?(Hn(function(){xu(null,null,e,!1,function(){e._reactRootContainer=null,e[Ar]=null})}),!0):!1};_t.unstable_batchedUpdates=Zf;_t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Su(r))throw Error(q(200));if(e==null||e._reactInternals===void 0)throw Error(q(38));return xu(e,t,r,!1,n)};_t.version="18.3.1-next-f1338f8080-20240426";function Ky(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ky)}catch(e){console.error(e)}}Ky(),K$.exports=_t;var wN=K$.exports,Sm=wN;ec.createRoot=Sm.createRoot,ec.hydrateRoot=Sm.hydrateRoot;function kN({queries:e,onSubmit:t,selectedClient:r}){const[n,i]=me.useState(null),[o,u]=me.useState({}),[d,h]=me.useState(!1),[m,g]=me.useState(null),[c,v]=me.useState(!1),j=e.find(S=>S.id===n);me.useEffect(()=>{g(null)},[n]);const C=S=>{i(S);const k=e.find(E=>E.id===S),x={};k!=null&&k.inputFields&&k.inputFields.forEach(E=>{E.type==="boolean"&&(x[E.name]=!1)}),u(x)},T=(S,k,x)=>{let E=k;if(x==="boolean")E=k;else if(x==="number"){const O=Number(k);E=k===""?"":isNaN(O)?k:O}else E=k;u(O=>({...O,[S]:E}))},H=async S=>{if(S.preventDefault(),!n||!(r!=null&&r.connected))return;const k={...o};j!=null&&j.inputFields&&j.inputFields.forEach(x=>{x.type==="boolean"&&k[x.name]===void 0&&(k[x.name]=!1)}),g(null),h(!0),v(!0);try{const x=await t(n,k);g(x);const E={};j!=null&&j.inputFields&&j.inputFields.forEach(O=>{O.type==="boolean"&&(E[O.name]=!1)}),u(E)}catch(x){g({error:x.message||"An error occurred"})}finally{h(!1),v(!1)}};return r?r.connected?L.jsxs("div",{className:"query-form",children:[L.jsx("h2",{children:"Query Form"}),L.jsxs("form",{onSubmit:H,children:[L.jsxs("div",{className:"form-group",children:[L.jsx("label",{htmlFor:"query-select",children:"Select Query:"}),L.jsxs("select",{id:"query-select",value:n||"",onChange:S=>C(S.target.value),className:"query-select",children:[L.jsx("option",{value:"",children:"-- Select a query --"}),e.map((S,k)=>L.jsx("option",{value:S.id,children:S.name},`${S.id}-${k}`))]})]}),j&&L.jsx("div",{className:"form-params",children:j.inputFields&&j.inputFields.length>0?j.inputFields.map((S,k)=>{const x=o[S.name],E=S.type==="boolean",O=S.type==="number";return L.jsx("div",{className:"form-group",children:E?L.jsx(L.Fragment,{children:L.jsxs("label",{htmlFor:`param-${S.name}-${k}`,style:{display:"flex",alignItems:"center",gap:"8px"},children:[L.jsx("input",{id:`param-${S.name}-${k}`,type:"checkbox",checked:x===!0,onChange:F=>T(S.name,F.target.checked,S.type),className:"param-checkbox"}),L.jsx("span",{children:S.name})]})}):L.jsxs(L.Fragment,{children:[L.jsxs("label",{htmlFor:`param-${S.name}-${k}`,children:[S.name,":"]}),L.jsx("input",{id:`param-${S.name}-${k}`,type:O?"number":"text",value:x!==void 0?String(x):"",onChange:F=>T(S.name,F.target.value,S.type),placeholder:`Enter ${S.name}...`,className:"param-input"})]})},`${S.name}-${k}`)}):L.jsx("p",{className:"no-params",children:"No parameters required"})}),L.jsx("button",{type:"submit",disabled:!n||d,className:"submit-btn",children:d?"Submitting...":"Submit Query"})]}),(c||m)&&L.jsxs("div",{className:"query-response",children:[L.jsx("h3",{children:"Response"}),c?L.jsx("div",{className:"response-loading",children:"Loading..."}):L.jsx("pre",{className:"response-data",children:JSON.stringify(m,null,2)})]})]}):L.jsx("div",{className:"query-form",children:L.jsx("p",{className:"no-client",children:"Client not connected"})}):L.jsx("div",{className:"query-form",children:L.jsx("p",{className:"no-client",children:"Select a client to run queries"})})}function SN({events:e,clients:t}){const r=me.useRef(null),[n,i]=me.useState(new Set);me.useEffect(()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)},[e]);const o=m=>{if(!m)return"Unknown";const g=t.find(c=>c.id===m);return(g==null?void 0:g.name)||m},u=m=>{i(g=>{const c=new Set(g);return c.has(m)?c.delete(m):c.add(m),c})},d=async m=>{try{await navigator.clipboard.writeText(m)}catch(g){console.error("Failed to copy:",g)}},h=me.useMemo(()=>{const m=[],g=new Map;for(const c of e)if(c.type==="query_sent"){const v=c.clientId||"unknown",j=g.get(v)||[];j.push(c),g.set(v,j)}else if(c.type==="query_response"){const v=c.clientId||"unknown",j=g.get(v);if(j&&j.length>0){const C=j.shift();m.push({type:"request_response",request:C,response:c}),j.length===0&&g.delete(v)}else m.push({type:"sse",event:c})}else m.push({type:"sse",event:c});for(const c of g.values())for(const v of c)m.push({type:"sse",event:v});return m},[e]);return L.jsxs("div",{className:"message-pane",children:[L.jsx("h2",{children:"Message Stream"}),L.jsx("div",{className:"message-list",ref:r,children:h.length===0?L.jsx("div",{className:"no-messages",children:"No messages yet"}):h.map((m,g)=>{if(m.type==="request_response"){const c=()=>{const H=m.request.data;if(H!=null&&H.url){const S=H.method||"GET",k=new URL(H.url);return`${S} ${k.pathname}${k.search}`}return H!=null&&H.queryId?`${H.method||"POST"} /db/${H.queryId}`:"GET /db/:req"},v=()=>{const H=m.request.data;if(H!=null&&H.url)return H.url;if(H!=null&&H.queryId){const S=H.sessionId;return S?`http://localhost:3000/db/${H.queryId}?sessionId=${S}`:`http://localhost:3000/db/${H.queryId}`}return""},j=`${m.request.id}-${m.response.id}`,C=n.has(j),T=v();return L.jsxs("div",{className:"message-item message-item-grouped",children:[L.jsxs("div",{className:`message-group-header ${C?"expanded":""}`,onClick:()=>u(j),style:{cursor:"pointer"},children:[L.jsxs("div",{className:"message-group-header-left",children:[L.jsx("svg",{className:`message-caret ${C?"expanded":""}`,width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:L.jsx("path",{d:"M4.5 3L7.5 6L4.5 9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),T&&L.jsx("button",{className:"message-clipboard-btn",onClick:H=>{H.stopPropagation(),d(T)},title:`Copy URL to clipboard: ${T}`,children:L.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[L.jsx("path",{d:"M9.5 1.5H4.5C3.67157 1.5 3 2.17157 3 3V9.5C3 10.3284 3.67157 11 4.5 11H9.5C10.3284 11 11 10.3284 11 9.5V3C11 2.17157 10.3284 1.5 9.5 1.5Z",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),L.jsx("path",{d:"M6.5 1.5V3.5C6.5 4.05228 6.94772 4.5 7.5 4.5H9.5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),L.jsx("div",{className:"message-group-label",children:c()})]}),L.jsxs("div",{className:"message-group-meta",children:[L.jsx("span",{className:"message-time",children:m.request.timestamp.toLocaleTimeString()}),m.request.clientId&&L.jsx("span",{className:"message-client",children:o(m.request.clientId)})]})]}),C&&L.jsxs("div",{className:"message-group-content",children:[L.jsxs("div",{className:"message-group-section",children:[L.jsx("div",{className:"message-section-header",style:{color:"#007bff"},children:"REQUEST"}),L.jsx("pre",{className:"message-data",children:JSON.stringify(m.request.data,null,2)})]}),L.jsxs("div",{className:"message-group-section",children:[L.jsx("div",{className:"message-section-header",style:{color:"#28a745"},children:"RESPONSE"}),L.jsx("pre",{className:"message-data",children:JSON.stringify(m.response.data,null,2)})]})]})]},j)}else{const c=m.event,v=c.type==="sync_delta"?"#ffc107":"#666",j=c.id,C=n.has(j);return L.jsxs("div",{className:"message-item",children:[L.jsxs("div",{className:"message-header",onClick:()=>u(j),style:{cursor:"pointer"},children:[L.jsxs("div",{className:"message-header-left",children:[L.jsx("svg",{className:`message-caret ${C?"expanded":""}`,width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:L.jsx("path",{d:"M4.5 3L7.5 6L4.5 9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),L.jsx("span",{className:"message-type",style:{color:v},children:c.type})]}),L.jsxs("div",{className:"message-header-right",children:[L.jsx("span",{className:"message-time",children:c.timestamp.toLocaleTimeString()}),c.clientId&&L.jsx("span",{className:"message-client",children:o(c.clientId)})]})]}),C&&L.jsx("pre",{className:"message-data",children:JSON.stringify(c.data,null,2)})]},j)}})})]})}const mo=e=>Array.isArray(e)?e:[e],xN=(e,t)=>{const r=[[],[]];for(const n of e)t(n)?r[0].push(n):r[1].push(n);return r},Qy=Array,Ir=(e,t)=>e.includes(t),DN=(e,t=0)=>[...new Array(e)].map((r,n)=>n+t),De=(e,t,r)=>e===void 0?t===void 0?[]:Array.isArray(t)?t:[t]:(Array.isArray(t)?e.push(...t):e.push(t),e),zn=(e,t)=>t==null?e??[]:e==null?mo(t):e.concat(t),CN=(...e)=>e.reduce(zn,[]),Un=(e,t,r)=>{if(e===void 0)return Array.isArray(t)?t:[t];const n=(r==null?void 0:r.isEqual)??((i,o)=>i===o);for(const i of mo(t))e.some(o=>n(o,i))||e.push(i);return e},NN=(e,t)=>e.reduce((r,n)=>{const i=n[t];return r[i]=De(r[i],n),r},{}),Ui=(e,t,r)=>e.length===t.length&&e.every(r!=null&&r.isEqual?(n,i)=>r.isEqual(n,t[i]):(n,i)=>n===t[i]),Zn=(e,t)=>ar(e)===t,ar=e=>{const t=typeof e;return t==="object"?e===null?"null":"object":t==="function"?"object":t},Tr={boolean:"boolean",null:"null",undefined:"undefined",bigint:"a bigint",number:"a number",object:"an object",string:"a string",symbol:"a symbol"},jN={...Tr,function:"a function"};class IN extends Error{}const He=e=>Ki(e,IN),Ki=(e,t=Error)=>{throw new t(e)};class EN extends Error{constructor(){super(...arguments);b(this,"name","ParseError")}}const B=e=>Ki(e,EN),Jy=e=>` ${e}`,MN="",Ce=(e,t)=>{const r={},n=Array.isArray(e);let i=!1;for(const[o,u]of Object.entries(e).entries()){const d=n?t(o,u[1]):t(...u,o);i||(i=typeof d[0]=="number");const h=Array.isArray(d[0])||d.length===0?d:[d];for(const[m,g]of h)typeof m=="object"?r[m.group]=De(r[m.group],g):r[m]=g}return i?Object.values(r):r},Vy=Object.entries,vr=(e,t)=>e in t,od=(e,t)=>t in e;class PN{constructor(t){Object.assign(this,t)}}const ON=class{};class Hy extends ON{}const AN=(e,t)=>{const r={},n={};let i;for(i in e)i in t?r[i]=e[i]:n[i]=e[i];return[r,n]},Wy=(e,t)=>AN(e,t)[1],$o=e=>Object.keys(e).length===0,Xa=e=>[...Object.entries(e),...Object.getOwnPropertySymbols(e).map(t=>[t,e[t]])],RN=(e,t)=>Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)),_N=e=>{const t=Object.keys(e).sort(),r={};for(let n=0;n<t.length;n++)r[t[n]]=e[t[n]];return r},pr=Jy(`unset${MN}`),TN=e=>Object.values(e).filter(t=>typeof t=="number"?!0:typeof e[t]!="number"),Gy={Array,Boolean,Date,Error,Function,Map,Number,Promise,RegExp,Set,String,WeakMap,WeakSet},Yy=globalThis.File??Blob,Zy={ArrayBuffer,Blob,File:Yy,FormData,Headers,Request,Response,URL},LN={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array},Qi={...Gy,...Zy,...LN,String,Number,Boolean},ad=e=>{var n;let t=Object.getPrototypeOf(e);for(;t!=null&&t.constructor&&(!vr(t.constructor.name,Qi)||!(e instanceof Qi[t.constructor.name]));)t=Object.getPrototypeOf(t);const r=(n=t==null?void 0:t.constructor)==null?void 0:n.name;if(!(r===void 0||r==="Object"))return r},Vc=e=>typeof e=="object"&&e!==null?ad(e)??"object":ar(e),mt=Array.isArray,FN={Array:"an array",Function:"a function",Date:"a Date",RegExp:"a RegExp",Error:"an Error",Map:"a Map",Set:"a Set",String:"a String object",Number:"a Number object",Boolean:"a Boolean object",Promise:"a Promise",WeakMap:"a WeakMap",WeakSet:"a WeakSet"},zN={ArrayBuffer:"an ArrayBuffer instance",Blob:"a Blob instance",File:"a File instance",FormData:"a FormData instance",Headers:"a Headers instance",Request:"a Request instance",Response:"a Response instance",URL:"a URL instance"},qN={Int8Array:"an Int8Array",Uint8Array:"a Uint8Array",Uint8ClampedArray:"a Uint8ClampedArray",Int16Array:"an Int16Array",Uint16Array:"a Uint16Array",Int32Array:"an Int32Array",Uint32Array:"a Uint32Array",Float32Array:"a Float32Array",Float64Array:"a Float64Array",BigInt64Array:"a BigInt64Array",BigUint64Array:"a BigUint64Array"},BN={...FN,...zN,...qN},ud=e=>{const t=Object(e).name??null;return t&&vr(t,Qi)&&Qi[t]===e?t:null},xm=(e,t)=>{let r=e.prototype;for(;r!==null;){if(r===t.prototype)return!0;r=Object.getPrototypeOf(r)}return!1},UN=e=>Xy(e,new Map),Xy=(e,t)=>{if(typeof e!="object"||e===null)return e;if(t!=null&&t.has(e))return t.get(e);const r=ud(e.constructor);if(r==="Date")return new Date(e.getTime());if(r&&r!=="Array")return e;const n=Array.isArray(e)?e.slice():Object.create(Object.getPrototypeOf(e)),i=Object.getOwnPropertyDescriptors(e);if(t){t.set(e,n);for(const o in i){const u=i[o];"get"in u||"set"in u||(u.value=Xy(u.value,t))}}return Object.defineProperties(n,i),n},KN=e=>{let t=pr;return()=>t===pr?t=e():t},Du=e=>typeof e=="function"&&e.length===0,QN=class extends Function{constructor(...e){const t=e.slice(0,-1),r=e[e.length-1];try{super(...t,r)}catch(n){return He(`Encountered an unexpected error while compiling your definition:
                Message: ${n} 
                Source: (${e.slice(0,-1)}) => {
                    ${e[e.length-1]}
                }`)}}};class wn{constructor(t,...[r]){return Object.assign(Object.setPrototypeOf(t.bind((r==null?void 0:r.bind)??this),this.constructor.prototype),r==null?void 0:r.attach)}}const JN=KN(()=>{try{return new Function("return false")()}catch{return!0}});class yr{constructor(){}}const VN=()=>{var e,t,r;try{return(((r=(((t=(e=new Error().stack)==null?void 0:e.split(`
`)[2])==null?void 0:t.trim())||"").match(/\(?(.+?)(?::\d+:\d+)?\)?$/))==null?void 0:r[1])||"unknown").replace(/^file:\/\//,"")}catch{return"unknown"}};var b$;const HN=((b$=globalThis.process)==null?void 0:b$.env)??{},WN={fileName:VN,env:HN},GN=e=>e[0].toUpperCase()+e.slice(1),YN=e=>e[0].toLowerCase()+e.slice(1),eg=e=>new RegExp(ZN(e),typeof e=="string"?"":e.flags),ZN=e=>`^(?:${typeof e=="string"?e:e.source})$`,rn={negativeLookahead:e=>`(?!${e})`,nonCapturingGroup:e=>`(?:${e})`},Bs="\\",Cu={" ":1,"\n":1,"	":1},XN=/^-0\.?0*$/.source,tg=/[1-9]\d*/.source,ej=/\.\d+/.source,tj=/\.\d*[1-9]/.source,rg=e=>eg(rn.negativeLookahead(XN)+rn.nonCapturingGroup("-?"+rn.nonCapturingGroup(rn.nonCapturingGroup("0|"+tg)+rn.nonCapturingGroup(e.decimalPattern)+"?")+(e.allowDecimalOnly?"|"+e.decimalPattern:"")+"?")),Dm=rg({decimalPattern:tj,allowDecimalOnly:!1}),rj=Dm.test.bind(Dm),Hc=rg({decimalPattern:ej,allowDecimalOnly:!0});Hc.test.bind(Hc);const nj=/^-?\d*\.?\d*$/,ij=e=>e.length!==0&&nj.test(e),eu=eg(rn.negativeLookahead("^-0$")+"-?"+rn.nonCapturingGroup(rn.nonCapturingGroup("0|"+tg))),sj=eu.test.bind(eu),Wc=/^-?\d+$/,oj=Wc.test.bind(Wc),ng={number:"a number",bigint:"a bigint",integer:"an integer"},ig=(e,t)=>`'${e}' was parsed as ${ng[t]} but could not be narrowed to a literal value. Avoid unnecessary leading or trailing zeros and other abnormal notation`,aj=(e,t)=>t==="number"?rj(e):sj(e),uj=(e,t)=>t==="number"?Number(e):Number.parseInt(e),lj=(e,t)=>t==="number"?ij(e):oj(e),cj=(e,t)=>ld(e,"number",t),fj=(e,t)=>ld(e,"number",{...t,strict:!0}),dj=(e,t)=>ld(e,"integer",t),ld=(e,t,r)=>{const n=uj(e,t);return!Number.isNaN(n)&&lj(e,t)?r!=null&&r.strict?aj(e,t)?n:B(ig(e,t)):n:r!=null&&r.errorOnFail?B((r==null?void 0:r.errorOnFail)===!0?`Failed to parse ${ng[t]} from '${e}'`:r==null?void 0:r.errorOnFail):void 0},pj=e=>{if(e[e.length-1]!=="n")return;const t=e.slice(0,-1);let r;try{r=BigInt(t)}catch{return}if(eu.test(t))return r;if(Wc.test(t))return B(ig(e,"bigint"))},hj="0.56.0",mj={version:hj,filename:WN.fileName(),FileConstructor:Yy},vo=mj,Cm=new Map,Bl=Object.create(null),Gc=e=>{const t=Cm.get(e);if(t)return t;let r=$j(e);return Bl[r]?r=`${r}${Bl[r]++}`:Bl[r]=1,vo[r]=e,Cm.set(e,r),r},ao=e=>/^[$A-Z_a-z][\w$]*$/.test(e),$j=e=>{switch(typeof e){case"object":{if(e===null)break;const t=ad(e)??"object";return t[0].toLowerCase()+t.slice(1)}case"function":return ao(e.name)?e.name:"fn";case"symbol":return e.description&&ao(e.description)?e.description:"symbol"}return He(`Unexpected attempt to register serializable value of type ${ar(e)}`)},cd=e=>typeof e=="string"?JSON.stringify(e):typeof e=="bigint"?`${e}n`:`${e}`,vj=(e,t={})=>Us(e,{onUndefined:"$ark.undefined",onBigInt:r=>`$ark.bigint-${r}`,...t},[]),Se=(e,t)=>{var r;switch(ar(e)){case"object":const n=e,i=((r=n.constructor)==null?void 0:r.name)??"Object";return i==="Object"||i==="Array"?(t==null?void 0:t.quoteKeys)===!1?tu(n,(t==null?void 0:t.indent)??0,""):JSON.stringify(Us(n,Ji,[]),null,t==null?void 0:t.indent):tu(n,(t==null?void 0:t.indent)??0,"");case"symbol":return Ji.onSymbol(e);default:return cd(e)}},tu=(e,t,r)=>{var o;if(typeof e=="function")return Ji.onFunction(e);if(typeof e!="object"||e===null)return cd(e);const n=r+" ".repeat(t);if(Array.isArray(e)){if(e.length===0)return"[]";const u=e.map(d=>tu(d,t,n)).join(`,
`+n);return t?`[
${n}${u}
${r}]`:`[${u}]`}const i=((o=e.constructor)==null?void 0:o.name)??"Object";if(i==="Object"){const u=Xa(e).map(([d,h])=>{const m=typeof d=="symbol"?Ji.onSymbol(d):ao(d)?d:JSON.stringify(d),g=tu(h,t,n);return`${n}${m}: ${g}`});return u.length===0?"{}":t?`{
${u.join(`,
`)}
${r}}`:`{${u.join(", ")}}`}return e instanceof Date?yo(e):"expression"in e&&typeof e.expression=="string"?e.expression:i},Ji={onCycle:()=>"(cycle)",onSymbol:e=>`Symbol(${Gc(e)})`,onFunction:e=>`Function(${Gc(e)})`},Us=(e,t,r)=>{var n,i;switch(ar(e)){case"object":{const o=e;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();if(typeof o=="function")return Ji.onFunction(o);if(r.includes(o))return"(cycle)";const u=[...r,o];if(Array.isArray(o))return o.map(h=>Us(h,t,u));if(o instanceof Date)return o.toDateString();const d={};for(const h in o)d[h]=Us(o[h],t,u);for(const h of Object.getOwnPropertySymbols(o))d[((n=t.onSymbol)==null?void 0:n.call(t,h))??h.toString()]=Us(o[h],t,u);return d}case"symbol":return Ji.onSymbol(e);case"bigint":return((i=t.onBigInt)==null?void 0:i.call(t,e))??`${e}n`;case"undefined":return t.onUndefined??"undefined";case"string":return e.replace(/\\/g,"\\\\");default:return e}},yo=e=>{const t=e.getFullYear(),r=e.getMonth(),n=e.getDate(),i=e.getHours(),o=e.getMinutes(),u=e.getSeconds(),d=e.getMilliseconds();if(r===0&&n===1&&i===0&&o===0&&u===0&&d===0)return`${t}`;const h=`${yj[r]} ${n}, ${t}`;if(i===0&&o===0&&u===0&&d===0)return h;let m=e.toLocaleTimeString();const g=m.endsWith(" AM")||m.endsWith(" PM")?m.slice(-3):"";return g&&(m=m.slice(0,-g.length)),d?m+=`.${bj(d,3)}`:gj.test(m)&&(m=m.slice(0,-3)),`${m+g}, ${h}`},yj=["January","February","March","April","May","June","July","August","September","October","November","December"],gj=/:\d\d:00$/,bj=(e,t)=>String(e).padStart(t,"0"),sg=(e,t,...[r])=>{const n=(r==null?void 0:r.stringifySymbol)??Se;let i=e;switch(typeof t){case"string":i=ao(t)?e===""?t:`${e}.${t}`:`${e}[${JSON.stringify(t)}]`;break;case"number":i=`${e}[${t}]`;break;case"symbol":i=`${e}[${n(t)}]`;break;default:r!=null&&r.stringifyNonKey?i=`${e}[${r.stringifyNonKey(t)}]`:B(`${Se(t)} must be a PropertyKey or stringifyNonKey must be passed to options`)}return i},go=(e,...t)=>e.reduce((r,n)=>sg(r,n,...t),"");class og extends Qy{constructor(...r){super();b(this,"cache",{});this.push(...r)}toJSON(){if(this.cache.json)return this.cache.json;this.cache.json=[];for(let r=0;r<this.length;r++)this.cache.json.push(typeof this[r]=="symbol"?Se(this[r]):this[r]);return this.cache.json}stringify(){return this.cache.stringify?this.cache.stringify:this.cache.stringify=go(this)}stringifyAncestors(){if(this.cache.stringifyAncestors)return this.cache.stringifyAncestors;let r="";const n=[r];for(const i of this)r=sg(r,i),n.push(r);return this.cache.stringifyAncestors=n}}class ag{constructor(t){b(this,"chars");b(this,"i");b(this,"def");this.def=t,this.chars=[...t],this.i=0}shift(){return this.chars[this.i++]??""}get lookahead(){return this.chars[this.i]??""}get nextLookahead(){return this.chars[this.i+1]??""}get length(){return this.chars.length}shiftUntil(t){let r="";for(;this.lookahead&&!t(this,r);)r+=this.shift();return r}shiftUntilEscapable(t){let r="";for(;this.lookahead;)if(this.lookahead===Bs)this.shift(),t(this,r)?r+=this.shift():this.lookahead===Bs?r+=this.shift():r+=`${Bs}${this.shift()}`;else{if(t(this,r))break;r+=this.shift()}return r}shiftUntilLookahead(t){return typeof t=="string"?this.shiftUntil(r=>r.lookahead===t):this.shiftUntil(r=>r.lookahead in t)}shiftUntilNonWhitespace(){return this.shiftUntil(()=>!(this.lookahead in Cu))}jumpToIndex(t){this.i=t<0?this.length+t:t}jumpForward(t){this.i+=t}get location(){return this.i}get unscanned(){return this.chars.slice(this.i,this.length).join("")}get scanned(){return this.chars.slice(0,this.i).join("")}sliceChars(t,r){return this.chars.slice(t,r).join("")}lookaheadIs(t){return this.lookahead===t}lookaheadIsIn(t){return this.lookahead in t}}const wj=(e,t)=>`Unmatched ${e}${t===""?"":` before ${t}`}`,ug=e=>`Missing ${e}`;let Yc="$ark",kj=2;for(;Yc in globalThis;)Yc=`$ark${kj++}`;const lg=Yc;globalThis[lg]=vo;const V=vo,Sj=e=>`${lg}.${e}`,wt=e=>Sj(Gc(e));class cg extends Hy{constructor(...r){super();b(this,"argNames");b(this,"body","");b(this,"indentation",0);this.argNames=r;for(const n of r){if(n in this)throw new Error(`Arg name '${n}' would overwrite an existing property on FunctionBody`);this[n]=n}}indent(){return this.indentation+=4,this}dedent(){return this.indentation-=4,this}prop(r,n=!1){return fg(r,n)}index(r,n=!1){return dg(`${r}`,n)}line(r){return this.body+=`${" ".repeat(this.indentation)}${r}
`,this}const(r,n){return this.line(`const ${r} = ${n}`),this}let(r,n){return this.line(`let ${r} = ${n}`)}set(r,n){return this.line(`${r} = ${n}`)}if(r,n){return this.block(`if (${r})`,n)}elseIf(r,n){return this.block(`else if (${r})`,n)}else(r){return this.block("else",r)}for(r,n,i=0){return this.block(`for (let i = ${i}; ${r}; i++)`,n)}forIn(r,n){return this.block(`for (const k in ${r})`,n)}block(r,n,i=""){return this.line(`${r} {`),this.indent(),n(this),this.dedent(),this.line(`}${i}`)}return(r=""){return this.line(`return ${r}`)}write(r="anonymous",n=0){return`${r}(${this.argNames.join(", ")}) { ${n?this.body.split(`
`).map(i=>" ".repeat(n)+`${i}`).join(`
`):this.body} }`}compile(){return new QN(...this.argNames,this.body)}}const Yi=e=>Zn(e,"object")||typeof e=="symbol"?wt(e):cd(e),fg=(e,t=!1)=>typeof e=="string"&&ao(e)?`${t?"?":""}.${e}`:dg(xj(e),t),xj=e=>typeof e=="symbol"?wt(e):JSON.stringify(e),dg=(e,t=!1)=>`${t?"?.":""}[${e}]`;class Ul extends cg{constructor(r){super("data","ctx");b(this,"traversalKind");b(this,"optimistic");this.traversalKind=r.kind,this.optimistic=r.optimistic===!0}invoke(r,n){const i=(n==null?void 0:n.arg)??this.data,o=typeof r=="string"?!0:this.requiresContextFor(r),u=typeof r=="string"?r:r.id;return o?`${this.referenceToId(u,n)}(${i}, ${this.ctx})`:`${this.referenceToId(u,n)}(${i})`}referenceToId(r,n){const i=(n==null?void 0:n.kind)??this.traversalKind,o=`this.${r}${i}`;return n!=null&&n.bind?`${o}.bind(${n==null?void 0:n.bind})`:o}requiresContextFor(r){return this.traversalKind==="Apply"||r.allowsRequiresContext}initializeErrorCount(){return this.const("errorCount","ctx.currentErrorCount")}returnIfFail(){return this.if("ctx.currentErrorCount > errorCount",()=>this.return())}returnIfFailFast(){return this.if("ctx.failFast && ctx.currentErrorCount > errorCount",()=>this.return())}traverseKey(r,n,i){const o=this.requiresContextFor(i);return o&&this.line(`${this.ctx}.path.push(${r})`),this.check(i,{arg:n}),o&&this.line(`${this.ctx}.path.pop()`),this}check(r,n){return this.traversalKind==="Allows"?this.if(`!${this.invoke(r,n)}`,()=>this.return(!1)):this.line(this.invoke(r,n))}}const pg=e=>Ce(e,(t,r)=>[t,mt(r)?[...r]:r]),Lr=Jy("arkKind"),ne=(e,t)=>(e==null?void 0:e[Lr])===t,gt=e=>ne(e,"root")||ne(e,"constraint"),Dj=["unit","proto","domain"],Nu=["required","optional","index","sequence"],hg=["pattern","divisor","exactLength","max","min","maxLength","minLength","before","after"],mg=[...hg,"structure","predicate"],fd=[...mg,...Nu],ju=["alias","union","morph","unit","intersection","proto","domain"],Cj=[...ju,...fd],$g=Ce(fd,(e,t)=>[t,1]),Nj=Ce([...Nu,"undeclared"],(e,t)=>[t,1]),vg=Ce(Cj,(e,t)=>[t,e]),Na=e=>typeof e=="string"&&e in vg,ru=e=>vg[e],dd=e=>ju.slice(ru(e)+1);[...dd("union")];[...dd("morph")];const Wn=e=>typeof e=="string"||typeof e=="boolean"||e===null?e:typeof e=="number"?Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e:Yi(e),Iu=e=>{let t="{ ";for(const[r,n]of Object.entries(e))t+=`${r}: ${Yi(n)}, `;return t+" }"},Ue=e=>{var r,n,i,o;const t=e;return t.hasAssociatedError&&((r=t.defaults).expected??(r.expected=u=>"description"in u?u.description:t.defaults.description(u)),(n=t.defaults).actual??(n.actual=u=>Se(u)),(i=t.defaults).problem??(i.problem=u=>`must be ${u.expected}${u.actual?` (was ${u.actual})`:""}`),(o=t.defaults).message??(o.message=u=>{if(u.path.length===0)return u.problem;const d=`${u.propString} ${u.problem}`;return d[0]==="["?`value at ${d}`:d})),t};class jj extends Error{constructor(r,n){super(Se(n,{quoteKeys:!1,indent:4}));b(this,"name","ToJsonSchemaError");b(this,"code");b(this,"context");this.code=r,this.context=n}hasCode(r){return this.code===r}}const Ij={target:"draft-2020-12",dialect:"https://json-schema.org/draft/2020-12/schema",useRefs:!1,fallback:{arrayObject:e=>We.throw("arrayObject",e),arrayPostfix:e=>We.throw("arrayPostfix",e),defaultValue:e=>We.throw("defaultValue",e),domain:e=>We.throw("domain",e),morph:e=>We.throw("morph",e),patternIntersection:e=>We.throw("patternIntersection",e),predicate:e=>We.throw("predicate",e),proto:e=>We.throw("proto",e),symbolKey:e=>We.throw("symbolKey",e),unit:e=>We.throw("unit",e),date:e=>We.throw("date",e)}},We={Error:jj,throw:(...e)=>{throw new We.Error(...e)},throwInternalOperandError:(e,t)=>He(`Unexpected JSON Schema input for ${e}: ${Se(t)}`),defaultConfig:Ij};V.config??(V.config={});const Zc=(e,t)=>{if(!t)return e;const r={...e};let n;for(n in t){const i={...e.keywords};if(n==="keywords"){for(const o in t[n]){const u=t.keywords[o];u!==void 0&&(i[o]=typeof u=="string"?{description:u}:u)}r.keywords=i}else n==="toJsonSchema"?r[n]=yg(e.toJsonSchema,t.toJsonSchema):Na(n)?r[n]={...e[n],...t[n]}:r[n]=t[n]}return r},Ej={"draft-2020-12":"https://json-schema.org/draft/2020-12/schema","draft-07":"http://json-schema.org/draft-07/schema#"},yg=(e,t)=>{if(!e)return Nm(t??{},void 0);if(!t)return e;const r={...e};let n;for(n in t)n==="fallback"?r.fallback=Mj(e.fallback,t.fallback):r[n]=t[n];return Nm(r,t)},Nm=(e,t)=>(t==null?void 0:t.dialect)!==void 0?e:(t==null?void 0:t.target)!==void 0?{...e,dialect:Ej[t.target]}:e,Mj=(e,t)=>{e=jm(e),t=jm(t);const r={};let n;for(n in We.defaultConfig.fallback)r[n]=t[n]??t.default??e[n]??e.default??We.defaultConfig.fallback[n];return r},jm=e=>typeof e=="function"?{default:e}:e??{};var w$,k$;class Vi extends(k$=Hy,w$=Lr,k$){constructor({prefixPath:r,relativePath:n,...i},o){super();b(this,w$,"error");b(this,"path");b(this,"data");b(this,"nodeConfig");b(this,"input");b(this,"ctx");this.input=i,this.ctx=o,RN(this,i);const u=o.data;i.code==="union"&&(i.errors=i.errors.flatMap(h=>{const m=h.hasCode("union")?h.errors:[h];return!r&&!n?m:m.map(g=>g.transform(c=>({...c,path:CN(r,c.path,n)})))})),this.nodeConfig=o.config[this.code];const d=[...i.path??o.path];n&&d.push(...n),r&&d.unshift(...r),this.path=new og(...d),this.data="data"in i?i.data:u}transform(r){return new Vi(r({data:this.data,path:this.path,...this.input}),this.ctx)}hasCode(r){return this.code===r}get propString(){return go(this.path)}get expected(){var n;if(this.input.expected)return this.input.expected;const r=((n=this.meta)==null?void 0:n.expected)??this.nodeConfig.expected;return typeof r=="function"?r(this.input):r}get actual(){var n;if(this.input.actual)return this.input.actual;const r=((n=this.meta)==null?void 0:n.actual)??this.nodeConfig.actual;return typeof r=="function"?r(this.data):r}get problem(){var n;if(this.input.problem)return this.input.problem;const r=((n=this.meta)==null?void 0:n.problem)??this.nodeConfig.problem;return typeof r=="function"?r(this):r}get message(){var n;if(this.input.message)return this.input.message;const r=((n=this.meta)==null?void 0:n.message)??this.nodeConfig.message;return typeof r=="function"?r(this):r}get flat(){return this.hasCode("intersection")?[...this.errors]:[this]}toJSON(){return{data:this.data,path:this.path,...this.input,expected:this.expected,actual:this.actual,problem:this.problem,message:this.message}}toString(){return this.message}throw(){throw this}}var S$,x$;class vn extends(x$=Qy,S$=Lr,x$){constructor(r){super();b(this,S$,"errors");b(this,"ctx");b(this,"byPath",Object.create(null));b(this,"byAncestorPath",Object.create(null));b(this,"count",0);b(this,"mutable",this);this.ctx=r}get flatByPath(){return Ce(this.byPath,(r,n)=>[r,n.flat])}get flatProblemsByPath(){return Ce(this.byPath,(r,n)=>[r,n.flat.map(i=>i.problem)])}throw(){throw this.toTraversalError()}toTraversalError(){return new Pj(this)}add(r){const n=this.byPath[r.propString];if(n){if(r===n||n.hasCode("union")&&n.errors.length===0)return;const i=r.hasCode("union")&&r.errors.length===0?r:new Vi({code:"intersection",errors:n.hasCode("intersection")?[...n.errors,r]:[n,r]},this.ctx),o=this.indexOf(n);this.mutable[o===-1?this.length:o]=i,this.byPath[r.propString]=i,this.addAncestorPaths(r)}else this.byPath[r.propString]=r,this.addAncestorPaths(r),this.mutable.push(r);this.count++}transform(r){const n=new vn(this.ctx);for(const i of this)n.add(r(i));return n}merge(r){for(const n of r)this.add(new Vi({...n,path:[...this.ctx.path,...n.path]},this.ctx))}affectsPath(r){return this.length===0?!1:r.stringifyAncestors().some(n=>n in this.byPath)||r.stringify()in this.byAncestorPath}get summary(){return this.toString()}get issues(){return this}toJSON(){return[...this.map(r=>r.toJSON())]}toString(){return this.join(`
`)}addAncestorPaths(r){for(const n of r.path.stringifyAncestors())this.byAncestorPath[n]=De(this.byAncestorPath[n],r)}}class Pj extends Error{constructor(r){var t=(...KO)=>(super(...KO),b(this,"name","TraversalError"),this);r.length===1?t(r.summary):t(`
`+r.map(n=>`   ${Oj(n)}`).join(`
`)),Object.defineProperty(this,"arkErrors",{value:r,enumerable:!1})}}const Oj=e=>e.toString().split(`
`).join(`
  `);class Di{constructor(t,r){b(this,"path",[]);b(this,"errors",new vn(this));b(this,"root");b(this,"config");b(this,"queuedMorphs",[]);b(this,"branches",[]);b(this,"seen",{});this.root=t,this.config=r}get data(){let t=this.root;for(const r of this.path)t=t==null?void 0:t[r];return t}get propString(){return go(this.path)}reject(t){return this.error(t),!1}mustBe(t){return this.error(t),!1}error(t){const r=typeof t=="object"?t.code?t:{...t,code:"predicate"}:{code:"predicate",expected:t};return this.errorFromContext(r)}hasError(){return this.currentErrorCount!==0}get currentBranch(){return this.branches[this.branches.length-1]}queueMorphs(t){const r={path:new og(...this.path),morphs:t};this.currentBranch?this.currentBranch.queuedMorphs.push(r):this.queuedMorphs.push(r)}finalize(t){return this.queuedMorphs.length&&(typeof this.root=="object"&&this.root!==null&&this.config.clone&&(this.root=this.config.clone(this.root)),this.applyQueuedMorphs()),this.hasError()?t?t(this.errors):this.errors:this.root}get currentErrorCount(){return this.currentBranch?this.currentBranch.error?1:0:this.errors.count}get failFast(){return this.branches.length!==0}pushBranch(){this.branches.push({error:void 0,queuedMorphs:[]})}popBranch(){return this.branches.pop()}get external(){return this}errorFromNodeContext(t){return this.errorFromContext(t)}errorFromContext(t){const r=new Vi(t,this);return this.currentBranch?this.currentBranch.error=r:this.errors.add(r),r}applyQueuedMorphs(){for(;this.queuedMorphs.length;){const t=this.queuedMorphs;this.queuedMorphs=[];for(const{path:r,morphs:n}of t)this.errors.affectsPath(r)||this.applyMorphsAtPath(r,n)}}applyMorphsAtPath(t,r){const n=t[t.length-1];let i;if(n!==void 0){i=this.root;for(let o=0;o<t.length-1;o++)i=i[t[o]]}for(const o of r){this.path=[...t];const u=gt(o),d=o(i===void 0?this.root:i[n],this);if(d instanceof Vi){this.errors.includes(d)||this.errors.add(d);break}if(d instanceof vn){u||this.errors.merge(d),this.queuedMorphs=[];break}i===void 0?this.root=d:i[n]=d,this.applyQueuedMorphs()}}}const Fr=(e,t,r)=>{if(!r)return t();r.path.push(e);const n=t();return r.path.pop(),n};class gg extends wn{constructor(r,n){var o;super((u,d,h=this.onFail)=>d?(this.traverseApply(u,d),d.hasError()?d.errors:d.data):this.rootApply(u,h),{attach:r});b(this,"attachments");b(this,"$");b(this,"onFail");b(this,"includesTransform");b(this,"includesContextualPredicate");b(this,"isCyclic");b(this,"allowsRequiresContext");b(this,"rootApplyStrategy");b(this,"contextFreeMorph");b(this,"rootApply");b(this,"referencesById");b(this,"shallowReferences");b(this,"flatRefs");b(this,"flatMorphs");b(this,"allows");b(this,"compiledMeta",_j(this.metaJson));b(this,"precedence",ru(this.kind));b(this,"precompilation");b(this,"assert",(r,n)=>this(r,n,i=>i.throw()));this.attachments=r,this.$=n,this.onFail=this.meta.onFail??this.$.resolvedConfig.onFail,this.includesTransform=this.hasKind("morph")||this.hasKind("structure")&&this.structuralMorph!==void 0||this.hasKind("sequence")&&this.inner.defaultables!==void 0,this.includesContextualPredicate=this.hasKind("predicate")&&this.inner.predicate.length!==1,this.isCyclic=this.kind==="alias",this.referencesById={[this.id]:this},this.shallowReferences=this.hasKind("structure")?[this,...this.children]:this.children.reduce((u,d)=>Tj(u,d.shallowReferences),[this]);const i=this.isStructural();this.flatRefs=[],this.flatMorphs=[];for(let u=0;u<this.children.length;u++){if(this.includesTransform||(this.includesTransform=this.children[u].includesTransform),this.includesContextualPredicate||(this.includesContextualPredicate=this.children[u].includesContextualPredicate),this.isCyclic||(this.isCyclic=this.children[u].isCyclic),!i){const d=this.children[u].flatRefs;for(let h=0;h<d.length;h++){const m=d[h];if(!this.flatRefs.some(g=>bg(g,m))){this.flatRefs.push(m);for(const g of m.node.branches)(g.hasKind("morph")||g.hasKind("intersection")&&((o=g.structure)==null?void 0:o.structuralMorph)!==void 0)&&this.flatMorphs.push({path:m.path,propString:m.propString,node:g})}}}Object.assign(this.referencesById,this.children[u].referencesById)}this.flatRefs.sort((u,d)=>u.path.length>d.path.length?1:u.path.length<d.path.length?-1:u.propString>d.propString?1:u.propString<d.propString||u.node.expression<d.node.expression?-1:1),this.allowsRequiresContext=this.includesContextualPredicate||this.isCyclic,this.rootApplyStrategy=!this.allowsRequiresContext&&this.flatMorphs.length===0?this.shallowMorphs.length===0?"allows":this.shallowMorphs.every(u=>u.length===1||u.name==="$arkStructuralMorph")?this.hasKind("union")?this.branches.some(u=>u.shallowMorphs.length>1)?"contextual":"branchedOptimistic":this.shallowMorphs.length>1?"contextual":"optimistic":"contextual":"contextual",this.rootApply=this.createRootApply(),this.allows=this.allowsRequiresContext?u=>this.traverseAllows(u,new Di(u,this.$.resolvedConfig)):u=>this.traverseAllows(u)}get shallowMorphs(){return[]}createRootApply(){switch(this.rootApplyStrategy){case"allows":return(n,i)=>{if(this.allows(n))return n;const o=new Di(n,this.$.resolvedConfig);return this.traverseApply(n,o),o.finalize(i)};case"contextual":return(n,i)=>{const o=new Di(n,this.$.resolvedConfig);return this.traverseApply(n,o),o.finalize(i)};case"optimistic":this.contextFreeMorph=this.shallowMorphs[0];const r=this.$.resolvedConfig.clone;return(n,i)=>{if(this.allows(n))return this.contextFreeMorph(r&&(typeof n=="object"&&n!==null||typeof n=="function")?r(n):n);const o=new Di(n,this.$.resolvedConfig);return this.traverseApply(n,o),o.finalize(i)};case"branchedOptimistic":return this.createBranchedOptimisticRootApply();default:return this.rootApplyStrategy,He(`Unexpected rootApplyStrategy ${this.rootApplyStrategy}`)}}cacheGetter(r,n){return Object.defineProperty(this,r,{value:n}),n}get description(){var r;return this.cacheGetter("description",((r=this.meta)==null?void 0:r.description)??this.$.resolvedConfig[this.kind].description(this))}get references(){return Object.values(this.referencesById)}traverse(r,n){return this(r,n,null)}get in(){return this.cacheGetter("in",this.rawIn.isRoot()?this.$.finalize(this.rawIn):this.rawIn)}get rawIn(){return this.cacheGetter("rawIn",this.getIo("in"))}get out(){return this.cacheGetter("out",this.rawOut.isRoot()?this.$.finalize(this.rawOut):this.rawOut)}get rawOut(){return this.cacheGetter("rawOut",this.getIo("out"))}getIo(r){if(!this.includesTransform)return this;const n={};for(const[i,o]of this.innerEntries){const u=this.impl.keys[i];if(u.reduceIo)u.reduceIo(r,n,o);else if(u.child){const d=o;n[i]=mt(d)?d.map(h=>r==="in"?h.rawIn:h.rawOut):r==="in"?d.rawIn:d.rawOut}else n[i]=o}return this.$.node(this.kind,n)}toJSON(){return this.json}toString(){return`Type<${this.expression}>`}equals(r){const n=gt(r)?r:this.$.parseDefinition(r);return this.innerHash===n.innerHash}ifEquals(r){return this.equals(r)?this:void 0}hasKind(r){return this.kind===r}assertHasKind(r){return this.kind!==r&&Ki(`${this.kind} node was not of asserted kind ${r}`),this}hasKindIn(...r){return r.includes(this.kind)}assertHasKindIn(...r){return Ir(r,this.kind)||Ki(`${this.kind} node was not one of asserted kinds ${r}`),this}isBasis(){return Ir(Dj,this.kind)}isConstraint(){return Ir(fd,this.kind)}isStructural(){return Ir(Nu,this.kind)}isRefinement(){return Ir(mg,this.kind)}isRoot(){return Ir(ju,this.kind)}isUnknown(){return this.hasKind("intersection")&&this.children.length===0}isNever(){return this.hasKind("union")&&this.children.length===0}hasUnit(r){return this.hasKind("unit")&&this.allows(r)}hasOpenIntersection(){return this.impl.intersectionIsOpen}get nestableExpression(){return this.expression}select(r){const n=Ms.normalize(r);return this._select(n)}_select(r){let n=Ms.applyBoundary[r.boundary??"references"](this);return r.kind&&(n=n.filter(i=>i.kind===r.kind)),r.where&&(n=n.filter(r.where)),Ms.applyMethod[r.method??"filter"](n,this,r)}transform(r,n){return this._transform(r,this._createTransformContext(n))}_createTransformContext(r){return{root:this,selected:void 0,seen:{},path:[],parseOptions:{prereduced:(r==null?void 0:r.prereduced)??!1},undeclaredKeyHandling:void 0,...r}}_transform(r,n){var c;const i=n.bindScope??this.$;if(n.seen[this.id])return this.$.lazilyResolve(n.seen[this.id]);if(((c=n.shouldTransform)==null?void 0:c.call(n,this,n))===!1)return this;let o;n.seen[this.id]=()=>o,this.hasKind("structure")&&this.undeclared!==n.undeclaredKeyHandling&&(n={...n,undeclaredKeyHandling:this.undeclared});const u=Ce(this.inner,(v,j)=>{if(!this.impl.keys[v].child)return[v,j];const C=j;if(!mt(C)){const H=C._transform(r,n);return H?[v,H]:[]}if(C.length===0)return[v,j];const T=C.flatMap(H=>H._transform(r,n)??[]);return T.length?[v,T]:[]});delete n.seen[this.id];const d=Object.assign(u,{meta:this.meta}),h=n.selected&&!n.selected.includes(this)?d:r(this.kind,d,n);if(h===null)return null;if(gt(h))return o=h;const m=Object.keys(h);return(m.length===0||m.length===1&&m[0]==="meta")&&!$o(this.inner)?null:(this.kind==="required"||this.kind==="optional"||this.kind==="index")&&!("value"in h)?n.undeclaredKeyHandling?{...h,value:V.intrinsic.unknown}:null:(this.kind==="morph"&&(h.in??(h.in=V.intrinsic.unknown)),o=i.node(this.kind,h,n.parseOptions))}configureReferences(r,n="references"){const i=Ms.normalize(n),o=typeof r=="string"?(m,g)=>({...g,meta:{...g.meta,description:r}}):typeof r=="function"?(m,g)=>({...g,meta:r(g.meta)}):(m,g)=>({...g,meta:{...g.meta,...r}});if(i.boundary==="self")return this.$.node(this.kind,o(this.kind,{...this.inner,meta:this.meta}));const u=this._select(i),d=u&&mo(u),h=i.boundary==="child"?(m,g)=>g.root.children.includes(m):i.boundary==="shallow"?m=>m.kind!=="structure":()=>!0;return this.$.finalize(this.transform(o,{shouldTransform:h,selected:d}))}}const Ms={applyBoundary:{self:e=>[e],child:e=>[...e.children],shallow:e=>[...e.shallowReferences],references:e=>[...e.references]},applyMethod:{filter:e=>e,assertFilter:(e,t,r)=>(e.length===0&&Ki(Im(t,r)),e),find:e=>e[0],assertFind:(e,t,r)=>(e.length===0&&Ki(Im(t,r)),e[0])},normalize:e=>typeof e=="function"?{boundary:"references",method:"filter",where:e}:typeof e=="string"?vr(e,Ms.applyBoundary)?{method:"filter",boundary:e}:{boundary:"references",method:"filter",kind:e}:{boundary:"references",method:"filter",...e}},Im=(e,t)=>`${e} had no references matching ${Se(t)}.`,Aj=e=>go(e,{stringifyNonKey:t=>t.expression}),Rj=/"(\$ark\.[^"]+)"/g,_j=e=>JSON.stringify(e).replace(Rj,"$1"),on=(e,t)=>({path:e,node:t,propString:Aj(e)}),bg=(e,t)=>e.propString===t.propString&&e.node.equals(t.node),Em=(e,t)=>Un(e,t,{isEqual:bg}),Tj=(e,t)=>Un(e,t,{isEqual:(r,n)=>r.equals(n)});class te extends Array{static init(t,r,n,i){return new te({kind:t,l:r,r:n,path:(i==null?void 0:i.path)??[],optional:(i==null?void 0:i.optional)??!1})}add(t,r,n,i){return this.push({kind:t,l:r,r:n,path:(i==null?void 0:i.path)??[],optional:(i==null?void 0:i.optional)??!1}),this}get summary(){return this.describeReasons()}describeReasons(){if(this.length===1){const{path:t,l:r,r:n}=this[0],i=go(t);return wg(`Intersection${i&&` at ${i}`} of ${Mm(r,n)}`)}return`The following intersections result in unsatisfiable types:
 ${this.map(({path:t,l:r,r:n})=>`${t}: ${Mm(r,n)}`).join(`
 `)}`}throw(){return B(this.describeReasons())}invert(){const t=this.map(r=>({...r,l:r.r,r:r.l}));return t instanceof te?t:new te(...t)}withPrefixKey(t,r){return this.map(n=>({...n,path:[t,...n.path],optional:n.optional||r==="optional"}))}toNeverIfDisjoint(){return V.intrinsic.never}}const Mm=(e,t)=>`${Xc(e)} and ${Xc(t)}`,Xc=e=>gt(e)?e.expression:mt(e)?e.map(Xc).join(" | ")||"never":String(e),wg=e=>`${e} results in an unsatisfiable type`,fi={},zr=(e,t,r)=>rt(e,t,{$:r,invert:!1,pipe:!1}),ef=(e,t,r)=>rt(e,t,{$:r,invert:!1,pipe:!0}),rt=(e,t,r)=>{const n=r.pipe?"|>":"&",i=`${e.hash}${n}${t.hash}`;if(fi[i]!==void 0)return fi[i];if(!r.pipe){const d=`${t.hash}${n}${e.hash}`;if(fi[d]!==void 0){const h=fi[d],m=h instanceof te?h.invert():h;return fi[i]=m,m}}const o=!r.pipe||!e.includesTransform&&!t.includesTransform;if(o&&e.equals(t))return e;let u=o?tf(e,t,r):e.hasKindIn(...ju)?Lj(e,t,r):tf(e,t,r);return gt(u)&&(e.equals(u)?u=e:t.equals(u)&&(u=t)),fi[i]=u,u},tf=(e,t,r)=>{const n=e.precedence<t.precedence?e.kind:t.kind,i=e.impl.intersections[t.kind]??t.impl.intersections[e.kind];if(i===void 0)return null;if(n===e.kind)return i(e,t,r);{let o=i(t,e,{...r,invert:!r.invert});return o instanceof te&&(o=o.invert()),o}},Lj=(e,t,r)=>e.includesTransform||t.includesTransform?r.invert?Pm(t,e,r):Pm(e,t,r):tf(e,t,r),Pm=(e,t,r)=>e.distribute(n=>Fj(n,t,r),n=>{const i=n.filter(gt);if(i.length===0)return te.init("union",e.branches,t.branches);if(i.length<e.branches.length||!e.branches.every((u,d)=>u.rawIn.equals(i[d].rawIn)))return r.$.parseSchema(i);if(i.length===1)return i[0];const o={branches:i};return r.$.parseSchema(o)}),Fj=(e,t,r)=>{if(e.hasKind("morph")){const i=[...e.morphs];if(e.lastMorphIfNode){const o=rt(e.lastMorphIfNode,t,r);if(o instanceof te)return o;i[i.length-1]=o}else i.push(t);return r.$.node("morph",{morphs:i,in:e.inner.in})}if(t.hasKind("morph")){const i=rt(e,t.rawIn,r);return i instanceof te?i:r.$.node("morph",{morphs:[t],in:i})}return r.$.node("morph",{morphs:[t],in:e})};class Zi extends gg{constructor(r,n){super(r,n);b(this,"impliedSiblings");Object.defineProperty(this,Lr,{value:"constraint",enumerable:!1})}intersect(r){return zr(this,r,this.$)}}class Eu extends Zi{constructor(){super(...arguments);b(this,"traverseApply",(r,n)=>{this.traverseAllows(r,n)||n.errorFromNodeContext(this.errorContext)})}compile(r){r.traversalKind==="Allows"?r.return(this.compiledCondition):r.if(this.compiledNegation,()=>r.line(`ctx.errorFromNodeContext(${this.compiledErrorContext})`))}get errorContext(){return{code:this.kind,description:this.description,meta:this.meta,...this.inner}}get compiledErrorContext(){return Iu(this.errorContext)}}const Ct=e=>(t,r)=>{if(mt(t)){if(t.length===0)return;const i=t.map(o=>r.$.node(e,o));return e==="predicate"?i:i.sort((o,u)=>o.hash<u.hash?-1:1)}const n=r.$.node(e,t);return n.hasOpenIntersection()?[n]:n},nu=e=>{const t=e.r.shift();if(!t){let n=e.l.length===0&&e.kind==="structure"?V.intrinsic.unknown.internal:e.ctx.$.node(e.kind,Object.assign(e.baseInner,zj(e.l)),{prereduced:!0});for(const i of e.roots){if(n instanceof te)return n;n=rt(i,n,e.ctx)}return n}let r=!1;for(let n=0;n<e.l.length;n++){const i=rt(e.l[n],t,e.ctx);if(i!==null){if(i instanceof te)return i;if(i.isRoot())return e.roots.push(i),e.l.splice(n),nu(e);if(!r)e.l[n]=i,r=!0;else if(!e.l.includes(i))return He(`Unexpectedly encountered multiple distinct intersection results for refinement ${t}`)}}if(r||e.l.push(t),e.kind==="intersection"&&t.impliedSiblings)for(const n of t.impliedSiblings)Un(e.r,n);return nu(e)},iu=e=>Object.entries(e).flatMap(([r,n])=>r in $g?n:[]).sort((r,n)=>r.precedence<n.precedence?-1:r.precedence>n.precedence?1:r.kind==="predicate"&&n.kind==="predicate"?0:r.hash<n.hash?-1:1),zj=e=>{const t={};for(const r of e)if(r.hasOpenIntersection())t[r.kind]=De(t[r.kind],r);else{if(t[r.kind])return He(`Unexpected intersection of closed refinements of kind ${r.kind}`);t[r.kind]=r}return t},qj=(...e)=>B(Bj(...e)),Bj=(e,t,r)=>{const n=r.hasKind("morph")?"a morph":r.isUnknown()?"unknown":r.exclude(t).defaultShortDescription;return`${GN(e)} operand must be ${t.description} (was ${n})`},Uj=(e,t,r)=>new su(e,t,r,r,null);class kg extends wn{}var D$,C$;class su extends(C$=wn,D$=Lr,C$){constructor(r,n,i,o,u){super((...d)=>{const h=Ce(this.names,(m,g)=>{const c=this.arg$.parse(d[m]);return c.extends(this.constraints[m])||B(Kj(g,this.constraints[m].expression,c.expression)),[g,c]});if(this.defIsLazy()){const m=this.bodyDef(h);return this.$.parse(m)}return this.$.parse(n,{args:h})});b(this,D$,"generic");b(this,"paramDefs");b(this,"bodyDef");b(this,"$");b(this,"arg$");b(this,"baseInstantiation");b(this,"hkt");b(this,"description");this.paramDefs=r,this.bodyDef=n,this.$=i,this.arg$=o,this.hkt=u,this.description=u?new u().description??`a generic type for ${u.constructor.name}`:"a generic type",this.baseInstantiation=this(...this.constraints)}defIsLazy(){return this.bodyDef instanceof kg}cacheGetter(r,n){return Object.defineProperty(this,r,{value:n}),n}get json(){return this.cacheGetter("json",{params:this.params.map(r=>r[1].isUnknown()?r[0]:[r[0],r[1].json]),body:vj(this.bodyDef)})}get params(){return this.cacheGetter("params",this.paramDefs.map(r=>typeof r=="string"?[r,V.intrinsic.unknown]:[r[0],this.$.parse(r[1])]))}get names(){return this.cacheGetter("names",this.params.map(r=>r[0]))}get constraints(){return this.cacheGetter("constraints",this.params.map(r=>r[1]))}get internal(){return this}get referencesById(){return this.baseInstantiation.internal.referencesById}get references(){return this.baseInstantiation.internal.references}}const Kj=(e,t,r)=>`${e} must be assignable to ${t} (was ${r})`,Qj=Ue({kind:"predicate",hasAssociatedError:!0,collapsibleKey:"predicate",keys:{predicate:{}},normalize:e=>typeof e=="function"?{predicate:e}:e,defaults:{description:e=>`valid according to ${e.predicate.name||"an anonymous predicate"}`},intersectionIsOpen:!0,intersections:{predicate:()=>null}});class Jj extends Zi{constructor(){super(...arguments);b(this,"serializedPredicate",wt(this.predicate));b(this,"compiledCondition",`${this.serializedPredicate}(data, ctx)`);b(this,"compiledNegation",`!${this.compiledCondition}`);b(this,"impliedBasis",null);b(this,"expression",this.serializedPredicate);b(this,"traverseAllows",this.predicate);b(this,"errorContext",{code:"predicate",description:this.description,meta:this.meta});b(this,"compiledErrorContext",Iu(this.errorContext));b(this,"traverseApply",(r,n)=>{const i=n.currentErrorCount;!this.predicate(r,n.external)&&n.currentErrorCount===i&&n.errorFromNodeContext(this.errorContext)})}compile(r){if(r.traversalKind==="Allows"){r.return(this.compiledCondition);return}r.initializeErrorCount(),r.if(`${this.compiledNegation} && ctx.currentErrorCount === errorCount`,()=>r.line(`ctx.errorFromNodeContext(${this.compiledErrorContext})`))}reduceJsonSchema(r,n){return n.fallback.predicate({code:"predicate",base:r,predicate:this.predicate})}}const Sg={implementation:Qj,Node:Jj},Vj=Ue({kind:"divisor",collapsibleKey:"rule",keys:{rule:{parse:e=>Number.isInteger(e)?e:B(Wj(e))}},normalize:e=>typeof e=="number"?{rule:e}:e,hasAssociatedError:!0,defaults:{description:e=>e.rule===1?"an integer":e.rule===2?"even":`a multiple of ${e.rule}`},intersections:{divisor:(e,t,r)=>r.$.node("divisor",{rule:Math.abs(e.rule*t.rule/Gj(e.rule,t.rule))})},obviatesBasisDescription:!0});class Hj extends Eu{constructor(){super(...arguments);b(this,"traverseAllows",r=>r%this.rule===0);b(this,"compiledCondition",`data % ${this.rule} === 0`);b(this,"compiledNegation",`data % ${this.rule} !== 0`);b(this,"impliedBasis",V.intrinsic.number.internal);b(this,"expression",`% ${this.rule}`)}reduceJsonSchema(r){return r.type="integer",this.rule===1||(r.multipleOf=this.rule),r}}const xg={implementation:Vj,Node:Hj},Wj=e=>`divisor must be an integer (was ${e})`,Gj=(e,t)=>{let r,n=e,i=t;for(;i!==0;)r=i,i=n%i,n=r;return n};class Xi extends Eu{constructor(){super(...arguments);b(this,"boundOperandKind",eI[this.kind]);b(this,"compiledActual",this.boundOperandKind==="value"?"data":this.boundOperandKind==="length"?"data.length":"data.valueOf()");b(this,"comparator",tI(this.kind,this.exclusive));b(this,"numericLimit",this.rule.valueOf());b(this,"expression",`${this.comparator} ${this.rule}`);b(this,"compiledCondition",`${this.compiledActual} ${this.comparator} ${this.numericLimit}`);b(this,"compiledNegation",`${this.compiledActual} ${Yj[this.comparator]} ${this.numericLimit}`);b(this,"stringLimit",this.boundOperandKind==="date"?rI(this.numericLimit):`${this.numericLimit}`);b(this,"limitKind",this.comparator[0]==="<"?"upper":"lower")}isStricterThan(r){return(this.limitKind==="upper"?this.numericLimit<r.numericLimit:this.numericLimit>r.numericLimit)||this.numericLimit===r.numericLimit&&this.exclusive===!0&&!r.exclusive}overlapsRange(r){return!(this.isStricterThan(r)||this.numericLimit===r.numericLimit&&(this.exclusive||r.exclusive))}overlapIsUnit(r){return this.numericLimit===r.numericLimit&&!this.exclusive&&!r.exclusive}}const Yj={"<":">=","<=":">",">":"<=",">=":"<"},Zj={min:"max",minLength:"maxLength",after:"before"},Dg={parse:e=>e||void 0},Cg=e=>t=>{if(typeof t=="number")return{rule:t};const{exclusive:r,...n}=t;return r?{...n,rule:e==="minLength"?n.rule+1:n.rule-1}:n},Ng=e=>t=>{if(typeof t=="number"||typeof t=="string"||t instanceof Date)return{rule:t};const{exclusive:r,...n}=t;if(!r)return n;const i=typeof n.rule=="number"?n.rule:typeof n.rule=="string"?new Date(n.rule).valueOf():n.rule.valueOf();return r?{...n,rule:e==="after"?i+1:i-1}:n},jg=e=>typeof e=="string"||typeof e=="number"?new Date(e):e,Xj=(e,t)=>`${e} bound must be a positive integer (was ${t})`,pd=e=>t=>((!Number.isInteger(t)||t<0)&&B(Xj(e,t)),t),eI={min:"value",max:"value",minLength:"length",maxLength:"length",after:"date",before:"date"},tI=(e,t)=>`${vr(e,Zj)?">":"<"}${t?"":"="}`,rI=e=>typeof e=="string"?e:new Date(e).toLocaleString(),nI=e=>`Bounded expression ${e} must be exactly one of number, string, Array, or Date`,iI=Ue({kind:"after",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{parse:jg,serialize:e=>e.toISOString()}},normalize:Ng("after"),defaults:{description:e=>`${e.collapsibleLimitString} or later`,actual:yo},intersections:{after:(e,t)=>e.isStricterThan(t)?e:t}});class sI extends Xi{constructor(){super(...arguments);b(this,"impliedBasis",V.intrinsic.Date.internal);b(this,"collapsibleLimitString",yo(this.rule));b(this,"traverseAllows",r=>r>=this.rule)}reduceJsonSchema(r,n){return n.fallback.date({code:"date",base:r,after:this.rule})}}const Ig={implementation:iI,Node:sI},oI=Ue({kind:"before",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{parse:jg,serialize:e=>e.toISOString()}},normalize:Ng("before"),defaults:{description:e=>`${e.collapsibleLimitString} or earlier`,actual:yo},intersections:{before:(e,t)=>e.isStricterThan(t)?e:t,after:(e,t,r)=>e.overlapsRange(t)?e.overlapIsUnit(t)?r.$.node("unit",{unit:e.rule}):null:te.init("range",e,t)}});class aI extends Xi{constructor(){super(...arguments);b(this,"collapsibleLimitString",yo(this.rule));b(this,"traverseAllows",r=>r<=this.rule);b(this,"impliedBasis",V.intrinsic.Date.internal)}reduceJsonSchema(r,n){return n.fallback.date({code:"date",base:r,before:this.rule})}}const Eg={implementation:oI,Node:aI},uI=Ue({kind:"exactLength",collapsibleKey:"rule",keys:{rule:{parse:pd("exactLength")}},normalize:e=>typeof e=="number"?{rule:e}:e,hasAssociatedError:!0,defaults:{description:e=>`exactly length ${e.rule}`,actual:e=>`${e.length}`},intersections:{exactLength:(e,t,r)=>te.init("unit",r.$.node("unit",{unit:e.rule}),r.$.node("unit",{unit:t.rule}),{path:["length"]}),minLength:(e,t)=>e.rule>=t.rule?e:te.init("range",e,t),maxLength:(e,t)=>e.rule<=t.rule?e:te.init("range",e,t)}});class lI extends Eu{constructor(){super(...arguments);b(this,"traverseAllows",r=>r.length===this.rule);b(this,"compiledCondition",`data.length === ${this.rule}`);b(this,"compiledNegation",`data.length !== ${this.rule}`);b(this,"impliedBasis",V.intrinsic.lengthBoundable.internal);b(this,"expression",`== ${this.rule}`)}reduceJsonSchema(r){switch(r.type){case"string":return r.minLength=this.rule,r.maxLength=this.rule,r;case"array":return r.minItems=this.rule,r.maxItems=this.rule,r;default:return We.throwInternalOperandError("exactLength",r)}}}const Mg={implementation:uI,Node:lI},cI=Ue({kind:"max",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{},exclusive:Dg},normalize:e=>typeof e=="number"?{rule:e}:e,defaults:{description:e=>e.rule===0?e.exclusive?"negative":"non-positive":`${e.exclusive?"less than":"at most"} ${e.rule}`},intersections:{max:(e,t)=>e.isStricterThan(t)?e:t,min:(e,t,r)=>e.overlapsRange(t)?e.overlapIsUnit(t)?r.$.node("unit",{unit:e.rule}):null:te.init("range",e,t)},obviatesBasisDescription:!0});class fI extends Xi{constructor(){super(...arguments);b(this,"impliedBasis",V.intrinsic.number.internal);b(this,"traverseAllows",this.exclusive?r=>r<this.rule:r=>r<=this.rule)}reduceJsonSchema(r){return this.exclusive?r.exclusiveMaximum=this.rule:r.maximum=this.rule,r}}const Pg={implementation:cI,Node:fI},dI=Ue({kind:"maxLength",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{parse:pd("maxLength")}},reduce:(e,t)=>e.rule===0?t.node("exactLength",e):void 0,normalize:Cg("maxLength"),defaults:{description:e=>`at most length ${e.rule}`,actual:e=>`${e.length}`},intersections:{maxLength:(e,t)=>e.isStricterThan(t)?e:t,minLength:(e,t,r)=>e.overlapsRange(t)?e.overlapIsUnit(t)?r.$.node("exactLength",{rule:e.rule}):null:te.init("range",e,t)}});class pI extends Xi{constructor(){super(...arguments);b(this,"impliedBasis",V.intrinsic.lengthBoundable.internal);b(this,"traverseAllows",r=>r.length<=this.rule)}reduceJsonSchema(r){switch(r.type){case"string":return r.maxLength=this.rule,r;case"array":return r.maxItems=this.rule,r;default:return We.throwInternalOperandError("maxLength",r)}}}const Og={implementation:dI,Node:pI},hI=Ue({kind:"min",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{},exclusive:Dg},normalize:e=>typeof e=="number"?{rule:e}:e,defaults:{description:e=>e.rule===0?e.exclusive?"positive":"non-negative":`${e.exclusive?"more than":"at least"} ${e.rule}`},intersections:{min:(e,t)=>e.isStricterThan(t)?e:t},obviatesBasisDescription:!0});class mI extends Xi{constructor(){super(...arguments);b(this,"impliedBasis",V.intrinsic.number.internal);b(this,"traverseAllows",this.exclusive?r=>r>this.rule:r=>r>=this.rule)}reduceJsonSchema(r){return this.exclusive?r.exclusiveMinimum=this.rule:r.minimum=this.rule,r}}const Ag={implementation:hI,Node:mI},$I=Ue({kind:"minLength",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{parse:pd("minLength")}},reduce:e=>e.rule===0?V.intrinsic.unknown:void 0,normalize:Cg("minLength"),defaults:{description:e=>e.rule===1?"non-empty":`at least length ${e.rule}`,actual:e=>e.length===0?"":`${e.length}`},intersections:{minLength:(e,t)=>e.isStricterThan(t)?e:t}});class vI extends Xi{constructor(){super(...arguments);b(this,"impliedBasis",V.intrinsic.lengthBoundable.internal);b(this,"traverseAllows",r=>r.length>=this.rule)}reduceJsonSchema(r){switch(r.type){case"string":return r.minLength=this.rule,r;case"array":return r.minItems=this.rule,r;default:return We.throwInternalOperandError("minLength",r)}}}const Rg={implementation:$I,Node:vI},yI={min:Ag.implementation,max:Pg.implementation,minLength:Rg.implementation,maxLength:Og.implementation,exactLength:Mg.implementation,after:Ig.implementation,before:Eg.implementation},gI={min:Ag.Node,max:Pg.Node,minLength:Rg.Node,maxLength:Og.Node,exactLength:Mg.Node,after:Ig.Node,before:Eg.Node},bI=Ue({kind:"pattern",collapsibleKey:"rule",keys:{rule:{},flags:{}},normalize:e=>typeof e=="string"?{rule:e}:e instanceof RegExp?e.flags?{rule:e.source,flags:e.flags}:{rule:e.source}:e,obviatesBasisDescription:!0,obviatesBasisExpression:!0,hasAssociatedError:!0,intersectionIsOpen:!0,defaults:{description:e=>`matched by ${e.rule}`},intersections:{pattern:()=>null}});class wI extends Eu{constructor(){super(...arguments);b(this,"instance",new RegExp(this.rule,this.flags));b(this,"expression",`${this.instance}`);b(this,"traverseAllows",this.instance.test.bind(this.instance));b(this,"compiledCondition",`${this.expression}.test(data)`);b(this,"compiledNegation",`!${this.compiledCondition}`);b(this,"impliedBasis",V.intrinsic.string.internal)}reduceJsonSchema(r,n){return r.pattern?n.fallback.patternIntersection({code:"patternIntersection",base:r,pattern:this.rule}):(r.pattern=this.rule,r)}}const _g={implementation:bI,Node:wI},ja=(e,t)=>{const r=kI(e);return t&&!t.includes(r)?B(`Root of kind ${r} should be one of ${t}`):r},kI=e=>{if(ne(e,"root"))return e.kind;if(typeof e=="string")return e[0]==="$"?"alias":e in Tr?"domain":"proto";if(typeof e=="function")return"proto";if(typeof e!="object"||e===null)return B(Om(e));if("morphs"in e)return"morph";if("branches"in e||mt(e))return"union";if("unit"in e)return"unit";if("reference"in e)return"alias";const t=Object.keys(e);return t.length===0||t.some(r=>r in $g)?"intersection":"proto"in e?"proto":"domain"in e?"domain":B(Om(e))},Om=e=>`${Se(e)} is not a valid type schema`,fa={},SI=e=>mt(e)?e.map(t=>t.collapsibleJson):e.collapsibleJson,Ut={};V.nodesByRegisteredId=Ut;const Tg=e=>(fa[e]??(fa[e]=0),`${e}${++fa[e]}`),Lg=e=>{var m;const t=Mu[e.kind],r=((m=t.applyConfig)==null?void 0:m.call(t,e.def,e.$.resolvedConfig))??e.def,n={},{meta:i,...o}=r,u=i===void 0?{}:typeof i=="string"?{description:i}:i,d=Vy(o).sort(([g],[c])=>Na(g)?Na(c)?ru(g)-ru(c):1:Na(c)||g<c?-1:1).filter(([g,c])=>{if(g.startsWith("meta.")){const v=g.slice(5);return u[v]=c,!1}return!0});for(const g of d){const c=g[0],v=t.keys[c];if(!v)return B(`Key ${c} is not valid on ${e.kind} schema`);const j=v.parse?v.parse(g[1],e):g[1];j!==pr&&(j!==void 0||v.preserveUndefined)&&(n[c]=j)}if(t.reduce&&!e.prereduced){const g=t.reduce(n,e.$);if(g)return g instanceof te?g.throw():DI(g,u)}return hd({id:e.id,kind:e.kind,inner:n,meta:u,$:e.$})},hd=({id:e,kind:t,inner:r,meta:n,$:i,ignoreCache:o})=>{const u=Mu[t],d=Vy(r),h=[];let m={};for(const[S,k]of d){const x=u.keys[S],E=x.serialize??(x.child?SI:Wn);if(m[S]=E(k),x.child===!0){const O=k;mt(O)?h.push(...O):h.push(O)}else typeof x.child=="function"&&h.push(...x.child(k))}u.finalizeInnerJson&&(m=u.finalizeInnerJson(m));let g={...m},c={};$o(n)||(c=Ce(n,(S,k)=>[S,S==="examples"?k:Wn(k)]),g.meta=da(c,"description",!0)),m=da(m,u.collapsibleKey,!1);const v=JSON.stringify({kind:t,...m});g=da(g,u.collapsibleKey,!1);const j=da(g,u.collapsibleKey,!0),C=JSON.stringify({kind:t,...g});if(i.nodesByHash[C]&&!o)return i.nodesByHash[C];const T={id:e,kind:t,impl:u,inner:r,innerEntries:d,innerJson:m,innerHash:v,meta:n,metaJson:c,json:g,hash:C,collapsibleJson:j,children:h};if(t!=="intersection")for(const S in r)S!=="in"&&S!=="out"&&(T[S]=r[S]);const H=new EE[t](T,i);return i.nodesByHash[C]=H},xI=(e,t)=>e.id===t?e:(gt(Ut[t])&&He(`Unexpected attempt to overwrite node id ${t}`),hd({id:t,kind:e.kind,inner:e.inner,meta:e.meta,$:e.$,ignoreCache:!0})),DI=(e,t,r)=>hd({id:Tg(t.alias??e.kind),kind:e.kind,inner:e.inner,meta:t,$:e.$}),da=(e,t,r)=>{const n=Object.keys(e);if(n.length===1&&n[0]===t){const i=e[t];if(r||Zn(i,"object")&&(Object.keys(i).length===1||Array.isArray(i)))return i}return e},rf=(e,t,r)=>{if(e.key!==t.key)return null;const n=e.key;let i=rt(e.value,t.value,r);const o=e.required||t.required?"required":"optional";if(i instanceof te)if(o==="optional")i=V.intrinsic.never.internal;else return i.withPrefixKey(e.key,e.required&&t.required?"required":"optional");if(o==="required")return r.$.node("required",{key:n,value:i});const u=e.hasDefault()?t.hasDefault()?e.default===t.default?e.default:B(zg(e.default,t.default)):e.default:t.hasDefault()?t.default:pr;return r.$.node("optional",{key:n,value:i,default:u})};class Fg extends Zi{constructor(){super(...arguments);b(this,"required",this.kind==="required");b(this,"optional",this.kind==="optional");b(this,"impliedBasis",V.intrinsic.object.internal);b(this,"serializedKey",Yi(this.key));b(this,"compiledKey",typeof this.key=="string"?this.key:this.serializedKey);b(this,"flatRefs",De(this.value.flatRefs.map(r=>on([this.key,...r.path],r.node)),on([this.key],this.value)));b(this,"traverseAllows",(r,n)=>this.key in r?Fr(this.key,()=>this.value.traverseAllows(r[this.key],n),n):this.optional);b(this,"traverseApply",(r,n)=>{this.key in r?Fr(this.key,()=>this.value.traverseApply(r[this.key],n),n):this.hasKind("required")&&n.errorFromNodeContext(this.errorContext)})}_transform(r,n){n.path.push(this.key);const i=super._transform(r,n);return n.path.pop(),i}hasDefault(){return"default"in this.inner}compile(r){r.if(`${this.serializedKey} in data`,()=>r.traverseKey(this.serializedKey,`data${r.prop(this.key)}`,this.value)),this.hasKind("required")&&r.else(()=>r.traversalKind==="Apply"?r.line(`ctx.errorFromNodeContext(${this.compiledErrorContext})`):r.return(!1)),r.traversalKind==="Allows"&&r.return(!0)}}const zg=(e,t)=>`Invalid intersection of default values ${Se(e)} & ${Se(t)}`,CI=Ue({kind:"optional",hasAssociatedError:!1,intersectionIsOpen:!0,keys:{key:{},value:{child:!0,parse:(e,t)=>t.$.parseSchema(e)},default:{preserveUndefined:!0}},normalize:e=>e,reduce:(e,t)=>{if(t.resolvedConfig.exactOptionalPropertyTypes===!1&&!e.value.allows(void 0))return t.node("optional",{...e,value:e.value.or(se.undefined)},{prereduced:!0})},defaults:{description:e=>`${e.compiledKey}?: ${e.value.description}`},intersections:{optional:rf}});class NI extends Fg{constructor(...r){super(...r);b(this,"expression",this.hasDefault()?`${this.compiledKey}: ${this.value.expression} = ${Se(this.inner.default)}`:`${this.compiledKey}?: ${this.value.expression}`);b(this,"defaultValueMorph",jI(this));b(this,"defaultValueMorphRef",this.defaultValueMorph&&wt(this.defaultValueMorph));"default"in this.inner&&$d(this.value,this.inner.default,this.key)}get rawIn(){const r=super.rawIn;return this.hasDefault()?this.$.node("optional",Wy(r.inner,{default:!0}),{prereduced:!0}):r}get outProp(){if(!this.hasDefault())return this;const{default:r,...n}=this.inner;return this.cacheGetter("outProp",this.$.node("required",n,{prereduced:!0}))}}const md={implementation:CI,Node:NI},Kl={},jI=e=>{if(!e.hasDefault())return;const t=`{${e.compiledKey}: ${e.value.id} = ${Wn(e.default)}}`;return Kl[t]??(Kl[t]=qg(e.key,e.value,e.default))},qg=(e,t,r)=>{if(typeof r=="function")return t.includesTransform?(i,o)=>(Fr(e,()=>t(i[e]=r(),o),o),i):i=>(i[e]=r(),i);const n=t.includesTransform?t.assert(r):r;return Zn(n,"object")?(i,o)=>(Fr(e,()=>t(i[e]=r,o),o),i):i=>(i[e]=n,i)},$d=(e,t,r)=>{const n=Du(t);Zn(t,"object")&&!n&&B(II(r));const i=e.in(n?t():t);if(i instanceof vn){r===null&&B(`Default ${i.summary}`);const o=i.transform(u=>u.transform(d=>({...d,prefixPath:[r]})));B(`Default for ${o.summary}`)}return t},II=e=>`Non-primitive default ${e===null?"":typeof e=="number"?`for value at [${e}] `:`for ${Yi(e)} `}must be specified as a function like () => ({my: 'object'})`;class bo extends gg{constructor(r,n){super(r,n);b(this,"branches",this.hasKind("union")?this.inner.branches:[this]);b(this,"_keyof");b(this,"pipe",Object.assign(this._pipe.bind(this),{try:this.tryPipe.bind(this)}));Object.defineProperty(this,Lr,{value:"root",enumerable:!1})}get rawIn(){return super.rawIn}get rawOut(){return super.rawOut}get internal(){return this}get"~standard"(){return{vendor:"arktype",version:1,validate:r=>{const n=this(r);return n instanceof vn?n:{value:n}},jsonSchema:{input:r=>this.rawIn.toJsonSchema({target:Am(r.target),...r.libraryOptions}),output:r=>this.rawOut.toJsonSchema({target:Am(r.target),...r.libraryOptions})}}}as(){return this}brand(r){return r===""?B(EI):this}readonly(){return this}distribute(r,n){const i=this.branches.map(r);return(n==null?void 0:n(i))??i}get shortDescription(){return this.meta.description??this.defaultShortDescription}toJsonSchema(r={}){const n=yg(this.$.resolvedConfig.toJsonSchema,r);n.useRefs||(n.useRefs=this.isCyclic);const i=typeof n.dialect=="string"?{$schema:n.dialect}:{};if(Object.assign(i,this.toJsonSchemaRecurse(n)),n.useRefs){const o=Ce(this.references,(u,d)=>d.isRoot()&&!d.alwaysExpandJsonSchema?[d.id,d.toResolvedJsonSchema(n)]:[]);n.target==="draft-07"?Object.assign(i,{definitions:o}):i.$defs=o}return i}toJsonSchemaRecurse(r){return r.useRefs&&!this.alwaysExpandJsonSchema?{$ref:`#/${r.target==="draft-07"?"definitions":"$defs"}/${this.id}`}:this.toResolvedJsonSchema(r)}get alwaysExpandJsonSchema(){return this.isBasis()||this.kind==="alias"||this.hasKind("union")&&this.isBoolean}toResolvedJsonSchema(r){const n=this.innerToJsonSchema(r);return Object.assign(n,this.metaJson)}intersect(r){const n=this.$.parseDefinition(r),i=this.rawIntersect(n);return i instanceof te?i:this.$.finalize(i)}rawIntersect(r){return zr(this,r,this.$)}toNeverIfDisjoint(){return this}and(r){const n=this.intersect(r);return n instanceof te?n.throw():n}rawAnd(r){const n=this.rawIntersect(r);return n instanceof te?n.throw():n}or(r){const n=this.$.parseDefinition(r);return this.$.finalize(this.rawOr(n))}rawOr(r){const n=[...this.branches,...r.branches];return this.$.node("union",n)}map(r){return this.$.schema(this.applyStructuralOperation("map",[r]))}pick(...r){return this.$.schema(this.applyStructuralOperation("pick",r))}omit(...r){return this.$.schema(this.applyStructuralOperation("omit",r))}required(){return this.$.schema(this.applyStructuralOperation("required",[]))}partial(){return this.$.schema(this.applyStructuralOperation("partial",[]))}keyof(){if(this._keyof)return this._keyof;const r=this.applyStructuralOperation("keyof",[]).reduce((n,i)=>n.intersect(i).toNeverIfDisjoint(),V.intrinsic.unknown.internal);return r.branches.length===0&&B(wg(`keyof ${this.expression}`)),this._keyof=this.$.finalize(r)}get props(){return this.branches.length!==1?B(PI(this.expression)):[...this.applyStructuralOperation("props",[])[0]]}merge(r){const n=this.$.parseDefinition(r);return this.$.schema(n.distribute(i=>this.applyStructuralOperation("merge",[Rm(i)??B(_m("merge",i.expression))])))}applyStructuralOperation(r,n){return this.distribute(i=>{if(i.equals(V.intrinsic.object)&&r!=="merge")return i;const o=Rm(i);if(o||B(_m(r,i.expression)),r==="keyof")return o.keyof();if(r==="get")return o.get(...n);if(r==="props")return o.props;const u=r==="required"?"require":r==="partial"?"optionalize":r;return this.$.node("intersection",{domain:"object",structure:o[u](...n)})})}get(...r){return r[0]===void 0?this:this.$.schema(this.applyStructuralOperation("get",r))}extract(r){const n=this.$.parseDefinition(r);return this.$.schema(this.branches.filter(i=>i.extends(n)))}exclude(r){const n=this.$.parseDefinition(r);return this.$.schema(this.branches.filter(i=>!i.extends(n)))}array(){return this.$.schema(this.isUnknown()?{proto:Array}:{proto:Array,sequence:this},{prereduced:!0})}overlaps(r){return!(this.intersect(r)instanceof te)}extends(r){if(this.isNever())return!0;const n=this.intersect(r);return!(n instanceof te)&&this.equals(n)}ifExtends(r){return this.extends(r)?this:void 0}subsumes(r){return this.$.parseDefinition(r).extends(this)}configure(r,n="shallow"){return this.configureReferences(r,n)}describe(r,n="shallow"){return this.configure({description:r},n)}optional(){return[this,"?"]}default(r){return $d(this,r,null),[this,"=",r]}from(r){return this.assert(r)}_pipe(...r){const n=r.reduce((i,o)=>i.rawPipeOnce(o),this);return this.$.finalize(n)}tryPipe(...r){const n=r.reduce((i,o)=>i.rawPipeOnce(ne(o,"root")?o:(u,d)=>{try{return o(u,d)}catch(h){return d.error({code:"predicate",predicate:o,actual:`aborted due to error:
    ${h}
`})}}),this);return this.$.finalize(n)}to(r){return this.$.finalize(this.toNode(this.$.parseDefinition(r)))}toNode(r){const n=ef(this,r,this.$);return n instanceof te?n.throw():n}rawPipeOnce(r){return ne(r,"root")?this.toNode(r):this.distribute(n=>n.hasKind("morph")?this.$.node("morph",{in:n.inner.in,morphs:[...n.morphs,r]}):this.$.node("morph",{in:n,morphs:[r]}),this.$.parseSchema)}narrow(r){return this.constrainOut("predicate",r)}constrain(r,n){return this._constrain("root",r,n)}constrainIn(r,n){return this._constrain("in",r,n)}constrainOut(r,n){return this._constrain("out",r,n)}_constrain(r,n,i){const o=this.$.node(n,i);if(o.isRoot())return o.isUnknown()?this:He(`Unexpected constraint node ${o}`);const u=r==="root"?this:r==="in"?this.rawIn:this.rawOut;if(u.hasKind("morph")||o.impliedBasis&&!u.extends(o.impliedBasis))return qj(n,o.impliedBasis,this);const d=this.$.node("intersection",{[o.kind]:o}),h=r==="out"?ef(this,d,this.$):zr(this,d,this.$);return h instanceof te&&h.throw(),this.$.finalize(h)}onUndeclaredKey(r){const n=typeof r=="string"?r:r.rule,i=typeof r=="string"?!1:r.deep;return this.$.finalize(this.transform((o,u)=>o==="structure"?n==="ignore"?Wy(u,{undeclared:1}):{...u,undeclared:n}:u,i?void 0:{shouldTransform:o=>!Ir(Nu,o.kind)}))}hasEqualMorphs(r){return!this.includesTransform&&!r.includesTransform?!0:!(!Ui(this.shallowMorphs,r.shallowMorphs)||!Ui(this.flatMorphs,r.flatMorphs,{isEqual:(n,i)=>{var o,u;return n.propString===i.propString&&(n.node.hasKind("morph")&&i.node.hasKind("morph")?n.node.hasEqualMorphs(i.node):n.node.hasKind("intersection")&&i.node.hasKind("intersection")?((o=n.node.structure)==null?void 0:o.structuralMorphRef)===((u=i.node.structure)==null?void 0:u.structuralMorphRef):!1)}}))}onDeepUndeclaredKey(r){return this.onUndeclaredKey({rule:r,deep:!0})}filter(r){return this.constrainIn("predicate",r)}divisibleBy(r){return this.constrain("divisor",r)}matching(r){return this.constrain("pattern",r)}atLeast(r){return this.constrain("min",r)}atMost(r){return this.constrain("max",r)}moreThan(r){return this.constrain("min",di(r))}lessThan(r){return this.constrain("max",di(r))}atLeastLength(r){return this.constrain("minLength",r)}atMostLength(r){return this.constrain("maxLength",r)}moreThanLength(r){return this.constrain("minLength",di(r))}lessThanLength(r){return this.constrain("maxLength",di(r))}exactlyLength(r){return this.constrain("exactLength",r)}atOrAfter(r){return this.constrain("after",r)}atOrBefore(r){return this.constrain("before",r)}laterThan(r){return this.constrain("after",di(r))}earlierThan(r){return this.constrain("before",di(r))}}const EI="Expected a non-empty brand name after #",Bg=["draft-2020-12","draft-07"],MI=e=>`JSONSchema target '${e}' is not supported (must be ${Bg.map(t=>`"${t}"`).join(" or ")})`,Am=e=>(Ir(Bg,e)||B(MI(e)),e),di=e=>typeof e=="object"&&!(e instanceof Date)?{...e,exclusive:!0}:{rule:e,exclusive:!0},pa=(e,t)=>ne(t,"root")?ne(e,"root")?e.extends(t):t.allows(e):ne(e,"root")?e.hasUnit(t):t===e,Rm=e=>{var t;return e.hasKind("morph")?null:e.hasKind("intersection")?e.inner.structure??(((t=e.basis)==null?void 0:t.domain)==="object"?e.$.bindReference(V.intrinsic.emptyStructure):null):e.isBasis()&&e.domain==="object"?e.$.bindReference(V.intrinsic.emptyStructure):null},PI=e=>`Props cannot be extracted from a union. Use .distribute to extract props from each branch instead. Received:
${e}`,_m=(e,t)=>`${e} operand must be an object (was ${t})`,wo=(e,t)=>Ce(dd(e),(r,n)=>[n,t]),OI=e=>typeof e=="string"?{reference:e}:e,Tm=e=>e instanceof te?V.intrinsic.never.internal:e,AI=Ue({kind:"alias",hasAssociatedError:!1,collapsibleKey:"reference",keys:{reference:{serialize:e=>e.startsWith("$")?e:`$ark.${e}`},resolve:{}},normalize:OI,defaults:{description:e=>e.reference},intersections:{alias:(e,t,r)=>r.$.lazilyResolve(()=>Tm(rt(e.resolution,t.resolution,r)),`${e.reference}${r.pipe?"=>":"&"}${t.reference}`),...wo("alias",(e,t,r)=>t.isUnknown()?e:t.isNever()?t:t.isBasis()&&!t.overlaps(V.intrinsic.object)?te.init("assignability",V.intrinsic.object,t):r.$.lazilyResolve(()=>Tm(rt(e.resolution,t,r)),`${e.reference}${r.pipe?"=>":"&"}${t.id}`))}});class RI extends bo{constructor(){super(...arguments);b(this,"expression",this.reference);b(this,"structure");b(this,"traverseAllows",(r,n)=>{const i=n.seen[this.reference];return i!=null&&i.includes(r)?!0:(n.seen[this.reference]=De(i,r),this.resolution.traverseAllows(r,n))});b(this,"traverseApply",(r,n)=>{const i=n.seen[this.reference];i!=null&&i.includes(r)||(n.seen[this.reference]=De(i,r),this.resolution.traverseApply(r,n))})}get resolution(){const r=this._resolve();return Ut[this.id]=r}_resolve(){if(this.resolve)return this.resolve();if(this.reference[0]==="$")return this.$.resolveRoot(this.reference.slice(1));const r=this.reference;let n=Ut[r];const i=[];for(;ne(n,"context");){if(i.includes(n.id))return B(_I(n.id,i));i.push(n.id),n=Ut[n.id]}return ne(n,"root")?n:He(`Unexpected resolution for reference ${this.reference}
Seen: [${i.join("->")}] 
Resolution: ${Se(n)}`)}get resolutionId(){if(this.reference.includes("&")||this.reference.includes("=>"))return this.resolution.id;if(this.reference[0]!=="$")return this.reference;const r=this.reference.slice(1),n=this.$.resolutions[r];return typeof n=="string"?n:ne(n,"root")?n.id:He(`Unexpected resolution for reference ${this.reference}: ${Se(n)}`)}get defaultShortDescription(){return Tr.object}innerToJsonSchema(r){return this.resolution.toJsonSchemaRecurse(r)}compile(r){const n=this.resolutionId;r.if(`ctx.seen.${n} && ctx.seen.${n}.includes(data)`,()=>r.return(!0)),r.if(`!ctx.seen.${n}`,()=>r.line(`ctx.seen.${n} = []`)),r.line(`ctx.seen.${n}.push(data)`),r.return(r.invoke(n))}}const _I=(e,t)=>`Alias '${e}' has a shallow resolution cycle: ${[...t,e].join("->")}`,vd={implementation:AI,Node:RI};class yd extends bo{constructor(){super(...arguments);b(this,"traverseApply",(r,n)=>{this.traverseAllows(r,n)||n.errorFromNodeContext(this.errorContext)})}get errorContext(){return{code:this.kind,description:this.description,meta:this.meta,...this.inner}}get compiledErrorContext(){return Iu(this.errorContext)}compile(r){r.traversalKind==="Allows"?r.return(this.compiledCondition):r.if(this.compiledNegation,()=>r.line(`ctx.errorFromNodeContext(${this.compiledErrorContext})`))}}const TI=Ue({kind:"domain",hasAssociatedError:!0,collapsibleKey:"domain",keys:{domain:{},numberAllowsNaN:{}},normalize:e=>typeof e=="string"?{domain:e}:od(e,"numberAllowsNaN")&&e.domain!=="number"?B(gd.writeBadAllowNanMessage(e.domain)):e,applyConfig:(e,t)=>e.numberAllowsNaN===void 0&&e.domain==="number"&&t.numberAllowsNaN?{...e,numberAllowsNaN:!0}:e,defaults:{description:e=>Tr[e.domain],actual:e=>Number.isNaN(e)?"NaN":Tr[ar(e)]},intersections:{domain:(e,t)=>e.domain==="number"&&t.domain==="number"?e.numberAllowsNaN?t:e:te.init("domain",e,t)}});class LI extends yd{constructor(){super(...arguments);b(this,"requiresNaNCheck",this.domain==="number"&&!this.numberAllowsNaN);b(this,"traverseAllows",this.requiresNaNCheck?r=>typeof r=="number"&&!Number.isNaN(r):r=>ar(r)===this.domain);b(this,"compiledCondition",this.domain==="object"?'((typeof data === "object" && data !== null) || typeof data === "function")':`typeof data === "${this.domain}"${this.requiresNaNCheck?" && !Number.isNaN(data)":""}`);b(this,"compiledNegation",this.domain==="object"?'((typeof data !== "object" || data === null) && typeof data !== "function")':`typeof data !== "${this.domain}"${this.requiresNaNCheck?" || Number.isNaN(data)":""}`);b(this,"expression",this.numberAllowsNaN?"number | NaN":this.domain)}get nestableExpression(){return this.numberAllowsNaN?`(${this.expression})`:this.expression}get defaultShortDescription(){return Tr[this.domain]}innerToJsonSchema(r){return this.domain==="bigint"||this.domain==="symbol"?r.fallback.domain({code:"domain",base:{},domain:this.domain}):{type:this.domain}}}const gd={implementation:TI,Node:LI,writeBadAllowNanMessage:e=>`numberAllowsNaN may only be specified with domain "number" (was ${e})`},FI=Ue({kind:"intersection",hasAssociatedError:!0,normalize:e=>{if(gt(e))return e;const{structure:t,...r}=e,n=!!t,i=t??{},o=Ce(r,(u,d)=>vr(u,Nj)?(n&&B(`Flattened structure key ${u} cannot be specified alongside a root 'structure' key.`),i[u]=d,[]):[u,d]);return(ne(i,"constraint")||!$o(i))&&(o.structure=i),o},finalizeInnerJson:({structure:e,...t})=>Zn(e,"object")?{...e,...t}:t,keys:{domain:{child:!0,parse:(e,t)=>t.$.node("domain",e)},proto:{child:!0,parse:(e,t)=>t.$.node("proto",e)},structure:{child:!0,parse:(e,t)=>t.$.node("structure",e),serialize:e=>{var u;if(!((u=e.sequence)!=null&&u.minLength))return e.collapsibleJson;const{sequence:t,...r}=e.collapsibleJson,{minVariadicLength:n,...i}=t,o=i.variadic&&Object.keys(i).length===1?i.variadic:i;return{...r,sequence:o}}},divisor:{child:!0,parse:Ct("divisor")},max:{child:!0,parse:Ct("max")},min:{child:!0,parse:Ct("min")},maxLength:{child:!0,parse:Ct("maxLength")},minLength:{child:!0,parse:Ct("minLength")},exactLength:{child:!0,parse:Ct("exactLength")},before:{child:!0,parse:Ct("before")},after:{child:!0,parse:Ct("after")},pattern:{child:!0,parse:Ct("pattern")},predicate:{child:!0,parse:Ct("predicate")}},reduce:(e,t)=>Lm({},e,{$:t,invert:!1,pipe:!1}),defaults:{description:e=>{if(e.children.length===0)return"unknown";if(e.structure)return e.structure.description;const t=[];if(e.basis&&!e.prestructurals.some(r=>r.impl.obviatesBasisDescription)&&t.push(e.basis.description),e.prestructurals.length){const r=e.prestructurals.slice().sort((n,i)=>n.kind==="min"&&i.kind==="max"?-1:0).map(n=>n.description);t.push(...r)}return e.inner.predicate&&t.push(...e.inner.predicate.map(r=>r.description)),t.join(" and ")},expected:e=>`   ${e.errors.map(t=>t.expected).join(`
   `)}`,problem:e=>`(${e.actual}) must be...
${e.expected}`},intersections:{intersection:(e,t,r)=>Lm(e.inner,t.inner,r),...wo("intersection",(e,t,r)=>{var h;if(e.children.length===0)return t;const{domain:n,proto:i,...o}=e.inner,u=i??n,d=u?rt(u,t,r):t;return d instanceof te?d:(h=e==null?void 0:e.basis)!=null&&h.equals(d)?e:e.$.node("intersection",{...o,[d.kind]:d},{prereduced:!0})})}});class zI extends bo{constructor(){super(...arguments);b(this,"basis",this.inner.domain??this.inner.proto??null);b(this,"prestructurals",[]);b(this,"refinements",this.children.filter(r=>r.isRefinement()?(Ir(hg,r.kind)&&this.prestructurals.push(r),!0):!1));b(this,"structure",this.inner.structure);b(this,"expression",qI(this));b(this,"traverseAllows",(r,n)=>this.children.every(i=>i.traverseAllows(r,n)));b(this,"traverseApply",(r,n)=>{const i=n.currentErrorCount;if(!(this.basis&&(this.basis.traverseApply(r,n),n.currentErrorCount>i))){if(this.prestructurals.length){for(let o=0;o<this.prestructurals.length-1;o++)if(this.prestructurals[o].traverseApply(r,n),n.failFast&&n.currentErrorCount>i)return;if(this.prestructurals[this.prestructurals.length-1].traverseApply(r,n),n.currentErrorCount>i)return}if(!(this.structure&&(this.structure.traverseApply(r,n),n.currentErrorCount>i))&&this.inner.predicate){for(let o=0;o<this.inner.predicate.length-1;o++)if(this.inner.predicate[o].traverseApply(r,n),n.failFast&&n.currentErrorCount>i)return;this.inner.predicate[this.inner.predicate.length-1].traverseApply(r,n)}}})}get shallowMorphs(){var r;return(r=this.inner.structure)!=null&&r.structuralMorph?[this.inner.structure.structuralMorph]:[]}get defaultShortDescription(){var r;return((r=this.basis)==null?void 0:r.defaultShortDescription)??"present"}innerToJsonSchema(r){return this.children.reduce((n,i)=>i.isBasis()?i.toJsonSchemaRecurse(r):i.reduceJsonSchema(n,r),{})}compile(r){if(r.traversalKind==="Allows"){for(const n of this.children)r.check(n);r.return(!0);return}if(r.initializeErrorCount(),this.basis&&(r.check(this.basis),this.children.length>1&&r.returnIfFail()),this.prestructurals.length){for(let n=0;n<this.prestructurals.length-1;n++)r.check(this.prestructurals[n]),r.returnIfFailFast();r.check(this.prestructurals[this.prestructurals.length-1]),(this.structure||this.inner.predicate)&&r.returnIfFail()}if(this.structure&&(r.check(this.structure),this.inner.predicate&&r.returnIfFail()),this.inner.predicate){for(let n=0;n<this.inner.predicate.length-1;n++)r.check(this.inner.predicate[n]),r.returnIfFail();r.check(this.inner.predicate[this.inner.predicate.length-1])}}}const Ug={implementation:FI,Node:zI},qI=e=>{var i;if((i=e.structure)!=null&&i.expression)return e.structure.expression;const t=e.basis&&!e.prestructurals.some(o=>o.impl.obviatesBasisExpression)?e.basis.nestableExpression:"",r=e.prestructurals.map(o=>o.expression).join(" & "),n=`${t}${t?" ":""}${r}`;return n==="Array == 0"?"[]":n||"unknown"},Lm=(e,t,r)=>{const n={},i=e.proto??e.domain,o=t.proto??t.domain,u=i?o?rt(i,o,r):i:o;return u instanceof te?u:(u&&(n[u.kind]=u),nu({kind:"intersection",baseInner:n,l:iu(e),r:iu(t),roots:[],ctx:r}))},BI=Ue({kind:"morph",hasAssociatedError:!1,keys:{in:{child:!0,parse:(e,t)=>t.$.parseSchema(e)},morphs:{parse:mo,serialize:e=>e.map(t=>ne(t,"root")?t.json:wt(t))},declaredIn:{child:!1,serialize:e=>e.json},declaredOut:{child:!1,serialize:e=>e.json}},normalize:e=>e,defaults:{description:e=>{var t;return`a morph from ${e.rawIn.description} to ${((t=e.rawOut)==null?void 0:t.description)??"unknown"}`}},intersections:{morph:(e,t,r)=>{if(!e.hasEqualMorphs(t))return B(KI(e.expression,t.expression));const n=rt(e.rawIn,t.rawIn,r);if(n instanceof te)return n;const i={morphs:e.morphs};if(e.declaredIn||t.declaredIn){const o=rt(e.rawIn,t.rawIn,r);if(o instanceof te)return o.throw();i.declaredIn=o}if(e.declaredOut||t.declaredOut){const o=rt(e.rawOut,t.rawOut,r);if(o instanceof te)return o.throw();i.declaredOut=o}return n.distribute(o=>r.$.node("morph",{...i,in:o}),r.$.parseSchema)},...wo("morph",(e,t,r)=>{const n=e.inner.in?rt(e.inner.in,t,r):t;return n instanceof te?n:n.equals(e.inner.in)?e:r.$.node("morph",{...e.inner,in:n})})}});class UI extends bo{constructor(){super(...arguments);b(this,"serializedMorphs",this.morphs.map(wt));b(this,"compiledMorphs",`[${this.serializedMorphs}]`);b(this,"lastMorph",this.inner.morphs[this.inner.morphs.length-1]);b(this,"lastMorphIfNode",ne(this.lastMorph,"root")?this.lastMorph:void 0);b(this,"introspectableIn",this.inner.in);b(this,"introspectableOut",this.lastMorphIfNode?Object.assign(this.referencesById,this.lastMorphIfNode.referencesById)&&this.lastMorphIfNode.rawOut:void 0);b(this,"expression",`(In: ${this.rawIn.expression}) => ${this.lastMorphIfNode?"To":"Out"}<${this.rawOut.expression}>`);b(this,"traverseAllows",(r,n)=>!this.introspectableIn||this.introspectableIn.traverseAllows(r,n));b(this,"traverseApply",(r,n)=>{this.introspectableIn&&this.introspectableIn.traverseApply(r,n),n.queueMorphs(this.morphs)})}get shallowMorphs(){var r;return Array.isArray((r=this.inner.in)==null?void 0:r.shallowMorphs)?[...this.inner.in.shallowMorphs,...this.morphs]:this.morphs}get rawIn(){var r;return this.declaredIn??((r=this.inner.in)==null?void 0:r.rawIn)??V.intrinsic.unknown.internal}get rawOut(){return this.declaredOut??this.introspectableOut??V.intrinsic.unknown.internal}declareIn(r){return this.$.node("morph",{...this.inner,declaredIn:r})}declareOut(r){return this.$.node("morph",{...this.inner,declaredOut:r})}get defaultShortDescription(){return this.rawIn.meta.description??this.rawIn.defaultShortDescription}innerToJsonSchema(r){var n;return r.fallback.morph({code:"morph",base:this.rawIn.toJsonSchemaRecurse(r),out:((n=this.introspectableOut)==null?void 0:n.toJsonSchemaRecurse(r))??null})}compile(r){if(r.traversalKind==="Allows"){if(!this.introspectableIn)return;r.return(r.invoke(this.introspectableIn));return}this.introspectableIn&&r.line(r.invoke(this.introspectableIn)),r.line(`ctx.queueMorphs(${this.compiledMorphs})`)}hasEqualMorphs(r){return Ui(this.morphs,r.morphs,{isEqual:(n,i)=>n===i||ne(n,"root")&&ne(i,"root")&&n.equals(i)})}}const Kg={implementation:BI,Node:UI},KI=(e,t)=>`The intersection of distinct morphs at a single path is indeterminate:
Left: ${e}
Right: ${t}`,QI=Ue({kind:"proto",hasAssociatedError:!0,collapsibleKey:"proto",keys:{proto:{serialize:e=>ud(e)??Wn(e)},dateAllowsInvalid:{}},normalize:e=>{const t=typeof e=="string"?{proto:Qi[e]}:typeof e=="function"?gt(e)?e:{proto:e}:typeof e.proto=="string"?{...e,proto:Qi[e.proto]}:e;return typeof t.proto!="function"&&B(ou.writeInvalidSchemaMessage(t.proto)),od(t,"dateAllowsInvalid")&&t.proto!==Date&&B(ou.writeBadInvalidDateMessage(t.proto)),t},applyConfig:(e,t)=>e.dateAllowsInvalid===void 0&&e.proto===Date&&t.dateAllowsInvalid?{...e,dateAllowsInvalid:!0}:e,defaults:{description:e=>e.builtinName?BN[e.builtinName]:`an instance of ${e.proto.name}`,actual:e=>e instanceof Date&&e.toString()==="Invalid Date"?"an invalid Date":Vc(e)},intersections:{proto:(e,t)=>e.proto===Date&&t.proto===Date?e.dateAllowsInvalid?t:e:xm(e.proto,t.proto)?e:xm(t.proto,e.proto)?t:te.init("proto",e,t),domain:(e,t)=>t.domain==="object"?e:te.init("domain",V.intrinsic.object.internal,t)}});class JI extends yd{constructor(){super(...arguments);b(this,"builtinName",ud(this.proto));b(this,"serializedConstructor",this.json.proto);b(this,"requiresInvalidDateCheck",this.proto===Date&&!this.dateAllowsInvalid);b(this,"traverseAllows",this.requiresInvalidDateCheck?r=>r instanceof Date&&r.toString()!=="Invalid Date":r=>r instanceof this.proto);b(this,"compiledCondition",`data instanceof ${this.serializedConstructor}${this.requiresInvalidDateCheck?' && data.toString() !== "Invalid Date"':""}`);b(this,"compiledNegation",`!(${this.compiledCondition})`);b(this,"expression",this.dateAllowsInvalid?"Date | InvalidDate":this.proto.name);b(this,"domain","object")}innerToJsonSchema(r){var n,i;switch(this.builtinName){case"Array":return{type:"array"};case"Date":return((i=(n=r.fallback).date)==null?void 0:i.call(n,{code:"date",base:{}}))??r.fallback.proto({code:"proto",base:{},proto:this.proto});default:return r.fallback.proto({code:"proto",base:{},proto:this.proto})}}get nestableExpression(){return this.dateAllowsInvalid?`(${this.expression})`:this.expression}get defaultShortDescription(){return this.description}}const ou={implementation:QI,Node:JI,writeBadInvalidDateMessage:e=>`dateAllowsInvalid may only be specified with constructor Date (was ${e.name})`,writeInvalidSchemaMessage:e=>`instanceOf operand must be a function (was ${ar(e)})`},VI=Ue({kind:"union",hasAssociatedError:!0,collapsibleKey:"branches",keys:{ordered:{},branches:{child:!0,parse:(e,t)=>{const r=[];for(const n of e){const i=ne(n,"root")?n.branches:t.$.parseSchema(n).branches;for(const o of i)if(o.hasKind("morph")){const u=r.findIndex(d=>d.hasKind("morph")&&d.hasEqualMorphs(o));if(u===-1)r.push(o);else{const d=r[u];r[u]=t.$.node("morph",{...d.inner,in:d.rawIn.rawOr(o.rawIn)})}}else r.push(o)}return t.def.ordered||r.sort((n,i)=>n.hash<i.hash?-1:1),r}}},normalize:e=>mt(e)?{branches:e}:e,reduce:(e,t)=>{const r=iE(e);if(r.length===1)return r[0];if(r.length!==e.branches.length)return t.node("union",{...e,branches:r},{prereduced:!0})},defaults:{description:e=>e.distribute(t=>t.description,Ai),expected:e=>{const t=NN(e.errors,"propString"),r=Object.entries(t).map(([n,i])=>{const o=[];for(const h of i)Un(o,h.expected);const u=Ai(o),d=i.every(h=>h.actual===i[0].actual)?i[0].actual:Se(i[0].data);return`${n&&`${n} `}must be ${u}${d&&` (was ${d})`}`});return Ai(r)},problem:e=>e.expected,message:e=>e.problem[0]==="["?`value at ${e.problem}`:e.problem},intersections:{union:(e,t,r)=>{if(e.isNever!==t.isNever)return te.init("presence",e,t);let n;return e.ordered?(t.ordered&&B(oE(e.expression,t.expression)),n=Ql(t.branches,e.branches,r),n instanceof te&&n.invert()):n=Ql(e.branches,t.branches,r),n instanceof te?n:r.$.parseSchema(e.ordered||t.ordered?{branches:n,ordered:!0}:{branches:n})},...wo("union",(e,t,r)=>{const n=Ql(e.branches,[t],r);return n instanceof te?n:n.length===1?n[0]:r.$.parseSchema(e.ordered?{branches:n,ordered:!0}:{branches:n})})}});class HI extends bo{constructor(){super(...arguments);b(this,"isBoolean",this.branches.length===2&&this.branches[0].hasUnit(!1)&&this.branches[1].hasUnit(!0));b(this,"unitBranches",this.branches.filter(r=>r.rawIn.hasKind("unit")));b(this,"discriminant",this.discriminate());b(this,"discriminantJson",this.discriminant?tE(this.discriminant):null);b(this,"expression",this.distribute(r=>r.nestableExpression,nE));b(this,"traverseAllows",(r,n)=>this.branches.some(i=>i.traverseAllows(r,n)));b(this,"traverseApply",(r,n)=>{const i=[];for(let o=0;o<this.branches.length;o++){if(n.pushBranch(),this.branches[o].traverseApply(r,n),!n.hasError())return this.branches[o].includesTransform?n.queuedMorphs.push(...n.popBranch().queuedMorphs):n.popBranch();i.push(n.popBranch().error)}n.errorFromNodeContext({code:"union",errors:i,meta:this.meta})});b(this,"traverseOptimistic",r=>{for(let n=0;n<this.branches.length;n++){const i=this.branches[n];if(i.traverseAllows(r))return i.contextFreeMorph?i.contextFreeMorph(r):r}return pr})}get branchGroups(){const r=[];let n=-1;for(const i of this.branches){if(i.hasKind("unit")&&i.domain==="boolean"){n===-1?(n=r.length,r.push(i)):r[n]=V.intrinsic.boolean;continue}r.push(i)}return r}createBranchedOptimisticRootApply(){return(r,n)=>{const i=this.traverseOptimistic(r);if(i!==pr)return i;const o=new Di(r,this.$.resolvedConfig);return this.traverseApply(r,o),o.finalize(n)}}get shallowMorphs(){return this.branches.reduce((r,n)=>Un(r,n.shallowMorphs),[])}get defaultShortDescription(){return this.distribute(r=>r.defaultShortDescription,Ai)}innerToJsonSchema(r){if(this.branchGroups.length===1&&this.branchGroups[0].equals(V.intrinsic.boolean))return{type:"boolean"};const n=this.branchGroups.map(i=>i.toJsonSchemaRecurse(r));return n.every(i=>Object.keys(i).length===1&&od(i,"const"))?{enum:n.map(i=>i.const)}:{anyOf:n}}compile(r){if(!this.discriminant||this.unitBranches.length===this.branches.length&&this.branches.length===2)return this.compileIndiscriminable(r);let n=this.discriminant.optionallyChainedPropString;this.discriminant.kind==="domain"&&(n=`typeof ${n} === "object" ? ${n} === null ? "null" : "object" : typeof ${n} === "function" ? "object" : typeof ${n}`);const i=this.discriminant.cases,o=Object.keys(i),{optimistic:u}=r;if(r.optimistic=!1,r.block(`switch(${n})`,()=>{for(const c in i){const v=i[c],j=c==="default"?c:`case ${c}`;let C;v===!0?C=u?"data":"true":u?v.rootApplyStrategy==="branchedOptimistic"?C=r.invoke(v,{kind:"Optimistic"}):v.contextFreeMorph?C=`${r.invoke(v)} ? ${wt(v.contextFreeMorph)}(data) : "${pr}"`:C=`${r.invoke(v)} ? data : "${pr}"`:C=r.invoke(v),r.line(`${j}: return ${C}`)}return r}),r.traversalKind==="Allows"){r.return(u?`"${pr}"`:!1);return}const d=Ai(this.discriminant.kind==="domain"?o.map(c=>{const v=c.slice(1,-1);return v==="function"?Tr.object:Tr[v]}):o),h=this.discriminant.path.map(c=>typeof c=="symbol"?wt(c):JSON.stringify(c)),m=JSON.stringify(d),g=this.discriminant.kind==="domain"?`${XI}[${n}]`:`${eE}(${n})`;r.line(`ctx.errorFromNodeContext({
	code: "predicate",
	expected: ${m},
	actual: ${g},
	relativePath: [${h}],
	meta: ${this.compiledMeta}
})`)}compileIndiscriminable(r){if(r.traversalKind==="Apply"){r.const("errors","[]");for(const n of this.branches)r.line("ctx.pushBranch()").line(r.invoke(n)).if("!ctx.hasError()",()=>r.return(n.includesTransform?"ctx.queuedMorphs.push(...ctx.popBranch().queuedMorphs)":"ctx.popBranch()")).line("errors.push(ctx.popBranch().error)");r.line(`ctx.errorFromNodeContext({ code: "union", errors, meta: ${this.compiledMeta} })`)}else{const{optimistic:n}=r;r.optimistic=!1;for(const i of this.branches)r.if(`${r.invoke(i)}`,()=>r.return(n?i.contextFreeMorph?`${wt(i.contextFreeMorph)}(data)`:"data":!0));r.return(n?`"${pr}"`:!1)}}get nestableExpression(){return this.isBoolean?"boolean":`(${this.expression})`}discriminate(){var u,d;if(this.branches.length<2||this.isCyclic)return null;if(this.unitBranches.length===this.branches.length){const h=Ce(this.unitBranches,(m,g)=>[`${g.rawIn.serializedValue}`,g.hasKind("morph")?g:!0]);return{kind:"unit",path:[],optionallyChainedPropString:"data",cases:h}}const r=[];for(let h=0;h<this.branches.length-1;h++){const m=this.branches[h];for(let g=h+1;g<this.branches.length;g++){const c=this.branches[g],v=zr(m.rawIn,c.rawIn,m.$);if(v instanceof te)for(const j of v){if(!j.kind||j.optional)continue;let C,T;if(j.kind==="domain"){const S=j.l,k=j.r;C=`"${typeof S=="string"?S:S.domain}"`,T=`"${typeof k=="string"?k:k.domain}"`}else if(j.kind==="unit")C=j.l.serializedValue,T=j.r.serializedValue;else continue;const H=r.find(S=>Ui(S.path,j.path)&&S.kind===j.kind);H?(H.cases[C]?H.cases[C].branchIndices=Un(H.cases[C].branchIndices,h):(u=H.cases)[C]??(u[C]={branchIndices:[h],condition:j.l}),H.cases[T]?H.cases[T].branchIndices=Un(H.cases[T].branchIndices,g):(d=H.cases)[T]??(d[T]={branchIndices:[g],condition:j.r})):r.push({kind:j.kind,cases:{[C]:{branchIndices:[h],condition:j.l},[T]:{branchIndices:[g],condition:j.r}},path:j.path})}}}const n=this.ordered?YI(r,this.branches):r;if(!n.length)return null;const i=WI(n,this),o={};for(const h in i.best.cases){const m=GI(i,h);if(m===null){o[h]=!0;continue}if(m.length===this.branches.length)return null;this.ordered&&m.sort((v,j)=>v.originalIndex-j.originalIndex);const g=m.map(v=>v.branch),c=g.length===1?g[0]:this.$.node("union",this.ordered?{branches:g,ordered:!0}:g);Object.assign(this.referencesById,c.referencesById),o[h]=c}if(i.defaultEntries.length){const h=i.defaultEntries.map(m=>m.branch);o.default=this.$.node("union",this.ordered?{branches:h,ordered:!0}:h,{prereduced:!0}),Object.assign(this.referencesById,o.default.referencesById)}return Object.assign(i.location,{cases:o})}}const WI=(e,t)=>{const n=e.sort((u,d)=>u.path.length===d.path.length?Object.keys(d.cases).length-Object.keys(u.cases).length:u.path.length-d.path.length)[0],i={kind:n.kind,path:n.path,optionallyChainedPropString:Qg(n.path)},o=t.branches.map((u,d)=>({originalIndex:d,branch:u}));return{best:n,location:i,defaultEntries:o,node:t}},GI=(e,t)=>{const r=e.best.cases[t],n=ZI(r.condition,e.location.path,e.node.$);let i=[];const o=[];for(let u=0;u<e.defaultEntries.length;u++){const d=e.defaultEntries[u];if(r.branchIndices.includes(d.originalIndex)){const h=Fm(e.node.branches[d.originalIndex],e.location);h===null?i=null:i==null||i.push({originalIndex:d.originalIndex,branch:h})}else if(d.branch.hasKind("alias")&&n.hasKind("domain")&&n.domain==="object")i==null||i.push(d);else{if(d.branch.rawIn.overlaps(n)){const h=Fm(d.branch,e.location);i==null||i.push({originalIndex:d.originalIndex,branch:h})}o.push(d)}}return e.defaultEntries=o,i},YI=(e,t)=>e.filter(n=>{const i=Object.values(n.cases).map(o=>o.branchIndices);for(let o=0;o<i.length-1;o++){const u=i[o];for(let d=o+1;d<i.length;d++){const h=i[d];for(const m of u)for(const g of h)if(m>g&&t[m].overlaps(t[g]))return!1}}return!0}),ZI=(e,t,r)=>{let n=e==="undefined"?r.node("unit",{unit:void 0}):e==="null"?r.node("unit",{unit:null}):e==="boolean"?r.units([!0,!1]):e;for(let i=t.length-1;i>=0;i--){const o=t[i];n=r.node("intersection",typeof o=="number"?{proto:"Array",sequence:[...DN(o).map(u=>({})),n]}:{domain:"object",required:[{key:o,value:n}]})}return n},Qg=e=>e.reduce((t,r)=>t+fg(r,!0),"data"),XI=wt(jN),eE=wt(Se),Jg={implementation:VI,Node:HI},tE=e=>({kind:e.kind,path:e.path.map(t=>typeof t=="string"?t:Yi(t)),cases:Ce(e.cases,(t,r)=>[t,r===!0?r:r.hasKind("union")&&r.discriminantJson?r.discriminantJson:r.json])}),rE={delimiter:" | ",finalDelimiter:" | "},nE=e=>Ai(e,rE),Ai=(e,t)=>{const r=(t==null?void 0:t.delimiter)??", ",n=(t==null?void 0:t.finalDelimiter)??" or ";if(e.length===0)return"never";if(e.length===1)return e[0];if(e.length===2&&e[0]==="false"&&e[1]==="true"||e[0]==="true"&&e[1]==="false")return"boolean";const i={},o=e.filter(d=>i[d]?!1:i[d]=!0),u=o.pop();return`${o.join(r)}${o.length?n:""}${u}`},Ql=(e,t,r)=>{const n=t.map(()=>[]);for(let o=0;o<e.length;o++){let u={};for(let d=0;d<t.length;d++){if(n[d]===null)continue;if(e[o].equals(t[d])){n[d]=null,u={};break}const h=rt(e[o],t[d],r);if(!(h instanceof te)){if(h.equals(e[o])){n[d].push(e[o]),u={};break}h.equals(t[d])?n[d]=null:u[d]=h}}for(const d in u)n[d][o]=u[d]}const i=n.flatMap((o,u)=>(o==null?void 0:o.flatMap(d=>d.branches))??t[u]);return i.length===0?te.init("union",e,t):i},iE=({branches:e,ordered:t})=>{if(e.length<2)return e;const r=e.map(()=>!0);for(let n=0;n<e.length;n++)for(let i=n+1;i<e.length&&r[n]&&r[i];i++){if(e[n].equals(e[i])){r[i]=!1;continue}const o=zr(e[n].rawIn,e[i].rawIn,e[0].$);o instanceof te||(t||sE(e[n],e[i]),o.equals(e[n].rawIn)?r[n]=!!t:o.equals(e[i].rawIn)&&(r[i]=!1))}return e.filter((n,i)=>r[i])},sE=(e,t)=>{!e.includesTransform&&!t.includesTransform||(Ui(e.shallowMorphs,t.shallowMorphs)||B(zm(e.expression,t.expression)),Ui(e.flatMorphs,t.flatMorphs,{isEqual:(r,n)=>{var i,o;return r.propString===n.propString&&(r.node.hasKind("morph")&&n.node.hasKind("morph")?r.node.hasEqualMorphs(n.node):r.node.hasKind("intersection")&&n.node.hasKind("intersection")?((i=r.node.structure)==null?void 0:i.structuralMorphRef)===((o=n.node.structure)==null?void 0:o.structuralMorphRef):!1)}})||B(zm(e.expression,t.expression)))},Fm=(e,t)=>e.transform((r,n)=>r==="domain"||r==="unit"?null:n,{shouldTransform:(r,n)=>{const i=Qg(n.path);return t.optionallyChainedPropString.startsWith(i)?r.hasKind("domain")&&r.domain==="object"||(r.hasKind("domain")||t.kind==="unit")&&i===t.optionallyChainedPropString?!0:r.children.length!==0&&r.kind!=="index":!1}}),zm=(e,t)=>`An unordered union of a type including a morph and a type with overlapping input is indeterminate:
Left: ${e}
Right: ${t}`,oE=(e,t)=>`The intersection of two ordered unions is indeterminate:
Left: ${e}
Right: ${t}`,aE=Ue({kind:"unit",hasAssociatedError:!0,keys:{unit:{preserveUndefined:!0,serialize:e=>e instanceof Date?e.toISOString():Wn(e)}},normalize:e=>e,defaults:{description:e=>Se(e.unit),problem:({expected:e,actual:t})=>`${e===t?`must be reference equal to ${e} (serialized to the same value)`:`must be ${e} (was ${t})`}`},intersections:{unit:(e,t)=>te.init("unit",e,t),...wo("unit",(e,t)=>{if(t.allows(e.unit))return e;const r=t.hasKind("intersection")?t.basis:t;if(r){const n=r.hasKind("domain")?r:V.intrinsic.object;if(e.domain!==n.domain){const i=e.domain==="undefined"||e.domain==="null"||e.domain==="boolean"?e.domain:V.intrinsic[e.domain];return te.init("domain",i,n)}}return te.init("assignability",e,t.hasKind("intersection")?t.children.find(n=>!n.allows(e.unit)):t)})}});class uE extends yd{constructor(){super(...arguments);b(this,"compiledValue",this.json.unit);b(this,"serializedValue",typeof this.unit=="string"||this.unit instanceof Date?JSON.stringify(this.compiledValue):`${this.compiledValue}`);b(this,"compiledCondition",qm(this.unit,this.serializedValue));b(this,"compiledNegation",qm(this.unit,this.serializedValue,"negated"));b(this,"expression",Se(this.unit));b(this,"domain",ar(this.unit));b(this,"traverseAllows",this.unit instanceof Date?r=>r instanceof Date&&r.toISOString()===this.compiledValue:Number.isNaN(this.unit)?r=>Number.isNaN(r):r=>r===this.unit)}get defaultShortDescription(){return this.domain==="object"?Tr.object:this.description}innerToJsonSchema(r){return this.unit===null?{type:"null"}:V.intrinsic.jsonPrimitive.allows(this.unit)?{const:this.unit}:r.fallback.unit({code:"unit",base:{},unit:this.unit})}}const Vg={implementation:aE,Node:uE},qm=(e,t,r)=>{if(e instanceof Date){const n=`data instanceof Date && data.toISOString() === ${t}`;return r?`!(${n})`:n}return Number.isNaN(e)?`${r?"!":""}Number.isNaN(data)`:`data ${r?"!":"="}== ${t}`},lE=Ue({kind:"index",hasAssociatedError:!1,intersectionIsOpen:!0,keys:{signature:{child:!0,parse:(e,t)=>{const r=t.$.parseSchema(e);if(!r.extends(V.intrinsic.key))return B(dE(r.expression));const n=r.branches.filter(i=>i.hasKind("unit"));return n.length?B(fE(n.map(i=>Se(i.unit)))):r}},value:{child:!0,parse:(e,t)=>t.$.parseSchema(e)}},normalize:e=>e,defaults:{description:e=>`[${e.signature.expression}]: ${e.value.description}`},intersections:{index:(e,t,r)=>{if(e.signature.equals(t.signature)){const n=rt(e.value,t.value,r),i=n instanceof te?V.intrinsic.never.internal:n;return r.$.node("index",{signature:e.signature,value:i})}return e.signature.extends(t.signature)&&e.value.subsumes(t.value)?t:t.signature.extends(e.signature)&&t.value.subsumes(e.value)?e:null}}});class cE extends Zi{constructor(){super(...arguments);b(this,"impliedBasis",V.intrinsic.object.internal);b(this,"expression",`[${this.signature.expression}]: ${this.value.expression}`);b(this,"flatRefs",De(this.value.flatRefs.map(r=>on([this.signature,...r.path],r.node)),on([this.signature],this.value)));b(this,"traverseAllows",(r,n)=>Xa(r).every(i=>this.signature.traverseAllows(i[0],n)?Fr(i[0],()=>this.value.traverseAllows(i[1],n),n):!0));b(this,"traverseApply",(r,n)=>{for(const i of Xa(r))this.signature.traverseAllows(i[0],n)&&Fr(i[0],()=>this.value.traverseApply(i[1],n),n)})}_transform(r,n){n.path.push(this.signature);const i=super._transform(r,n);return n.path.pop(),i}compile(){}}const Hg={implementation:lE,Node:cE},fE=e=>`Index keys ${e.join(", ")} should be specified as named props.`,dE=e=>`Indexed key definition '${e}' must be a string or symbol`,pE=Ue({kind:"required",hasAssociatedError:!0,intersectionIsOpen:!0,keys:{key:{},value:{child:!0,parse:(e,t)=>t.$.parseSchema(e)}},normalize:e=>e,defaults:{description:e=>`${e.compiledKey}: ${e.value.description}`,expected:e=>e.missingValueDescription,actual:()=>"missing"},intersections:{required:rf,optional:rf}});class hE extends Fg{constructor(){super(...arguments);b(this,"expression",`${this.compiledKey}: ${this.value.expression}`);b(this,"errorContext",Object.freeze({code:"required",missingValueDescription:this.value.defaultShortDescription,relativePath:[this.key],meta:this.meta}));b(this,"compiledErrorContext",Iu(this.errorContext))}}const Wg={implementation:pE,Node:hE},mE=Ue({kind:"sequence",hasAssociatedError:!1,collapsibleKey:"variadic",keys:{prefix:{child:!0,parse:(e,t)=>{if(e.length!==0)return e.map(r=>t.$.parseSchema(r))}},optionals:{child:!0,parse:(e,t)=>{if(e.length!==0)return e.map(r=>t.$.parseSchema(r))}},defaultables:{child:e=>e.map(t=>t[0]),parse:(e,t)=>{if(e.length!==0)return e.map(r=>{const n=t.$.parseSchema(r[0]);return $d(n,r[1],null),[n,r[1]]})},serialize:e=>e.map(t=>[t[0].collapsibleJson,Wn(t[1])]),reduceIo:(e,t,r)=>{if(e==="in"){t.optionals=r.map(n=>n[0].rawIn);return}t.prefix=r.map(n=>n[0].rawOut)}},variadic:{child:!0,parse:(e,t)=>t.$.parseSchema(e,t)},minVariadicLength:{parse:e=>e===0?void 0:e},postfix:{child:!0,parse:(e,t)=>{if(e.length!==0)return e.map(r=>t.$.parseSchema(r))}}},normalize:e=>{var t,r,n;if(typeof e=="string")return{variadic:e};if("variadic"in e||"prefix"in e||"defaultables"in e||"optionals"in e||"postfix"in e||"minVariadicLength"in e){if((t=e.postfix)!=null&&t.length){if(!e.variadic)return B(gE);if((r=e.optionals)!=null&&r.length||(n=e.defaultables)!=null&&n.length)return B(Yg)}return e.minVariadicLength&&!e.variadic?B("minVariadicLength may not be specified without a variadic element"):e}return{variadic:e}},reduce:(e,t)=>{var d,h,m,g,c,v,j;let r=e.minVariadicLength??0;const n=((d=e.prefix)==null?void 0:d.slice())??[],i=((h=e.defaultables)==null?void 0:h.slice())??[],o=((m=e.optionals)==null?void 0:m.slice())??[],u=((g=e.postfix)==null?void 0:g.slice())??[];if(e.variadic){for(;(c=o[o.length-1])!=null&&c.equals(e.variadic);)o.pop();if(o.length===0&&i.length===0)for(;(v=n[n.length-1])!=null&&v.equals(e.variadic);)n.pop(),r++;for(;(j=u[0])!=null&&j.equals(e.variadic);)u.shift(),r++}else o.length===0&&i.length===0&&n.push(...u.splice(0));if(r!==e.minVariadicLength||e.prefix&&e.prefix.length!==n.length)return t.node("sequence",{...e,prefix:n,defaultables:i,optionals:o,postfix:u,minVariadicLength:r},{prereduced:!0})},defaults:{description:e=>e.isVariadicOnly?`${e.variadic.nestableExpression}[]`:`[${e.tuple.map(r=>r.kind==="defaultables"?`${r.node.nestableExpression} = ${Se(r.default)}`:r.kind==="optionals"?`${r.node.nestableExpression}?`:r.kind==="variadic"?`...${r.node.nestableExpression}[]`:r.node.expression).join(", ")}]`},intersections:{sequence:(e,t,r)=>{const n=Ps({l:e.tuple,r:t.tuple,disjoint:new te,result:[],fixedVariants:[],ctx:r}),i=n.disjoint.length===0?[n,...n.fixedVariants]:n.fixedVariants;return i.length===0?n.disjoint:i.length===1?r.$.node("sequence",Bm(i[0].result)):r.$.node("union",i.map(o=>({proto:Array,sequence:Bm(o.result)})))}}});var N$,j$,I$,E$;class $E extends Zi{constructor(){super(...arguments);b(this,"impliedBasis",V.intrinsic.Array.internal);b(this,"tuple",yE(this.inner));b(this,"prefixLength",((N$=this.prefix)==null?void 0:N$.length)??0);b(this,"defaultablesLength",((j$=this.defaultables)==null?void 0:j$.length)??0);b(this,"optionalsLength",((I$=this.optionals)==null?void 0:I$.length)??0);b(this,"postfixLength",((E$=this.postfix)==null?void 0:E$.length)??0);b(this,"defaultablesAndOptionals",[]);b(this,"prevariadic",this.tuple.filter(r=>r.kind==="defaultables"||r.kind==="optionals"?(this.defaultablesAndOptionals.push(r.node),!0):r.kind==="prefix"));b(this,"variadicOrPostfix",zn(this.variadic&&[this.variadic],this.postfix));b(this,"flatRefs",this.addFlatRefs());b(this,"isVariadicOnly",this.prevariadic.length+this.postfixLength===0);b(this,"minVariadicLength",this.inner.minVariadicLength??0);b(this,"minLength",this.prefixLength+this.minVariadicLength+this.postfixLength);b(this,"minLengthNode",this.minLength===0?null:this.$.node("minLength",this.minLength));b(this,"maxLength",this.variadic?null:this.tuple.length);b(this,"maxLengthNode",this.maxLength===null?null:this.$.node("maxLength",this.maxLength));b(this,"impliedSiblings",this.minLengthNode?this.maxLengthNode?[this.minLengthNode,this.maxLengthNode]:[this.minLengthNode]:this.maxLengthNode?[this.maxLengthNode]:[]);b(this,"defaultValueMorphs",vE(this));b(this,"defaultValueMorphsReference",this.defaultValueMorphs.length?wt(this.defaultValueMorphs):void 0);b(this,"traverseAllows",(r,n)=>{for(let i=0;i<r.length;i++)if(!this.elementAtIndex(r,i).node.traverseAllows(r[i],n))return!1;return!0});b(this,"traverseApply",(r,n)=>{let i=0;for(;i<r.length;i++)Fr(i,()=>this.elementAtIndex(r,i).node.traverseApply(r[i],n),n)});b(this,"expression",this.description)}addFlatRefs(){return Em(this.flatRefs,this.prevariadic.flatMap((r,n)=>De(r.node.flatRefs.map(i=>on([`${n}`,...i.path],i.node)),on([`${n}`],r.node)))),Em(this.flatRefs,this.variadicOrPostfix.flatMap(r=>De(r.flatRefs.map(n=>on([V.intrinsic.nonNegativeIntegerString.internal,...n.path],n.node)),on([V.intrinsic.nonNegativeIntegerString.internal],r)))),this.flatRefs}elementAtIndex(r,n){if(n<this.prevariadic.length)return this.tuple[n];const i=r.length-this.postfixLength;return n>=i?{kind:"postfix",node:this.postfix[n-i]}:{kind:"variadic",node:this.variadic??He(`Unexpected attempt to access index ${n} on ${this}`)}}get element(){return this.cacheGetter("element",this.$.node("union",this.children))}compile(r){if(this.prefix)for(const[n,i]of this.prefix.entries())r.traverseKey(`${n}`,`data[${n}]`,i);for(const[n,i]of this.defaultablesAndOptionals.entries()){const o=`${n+this.prefixLength}`;r.if(`${o} >= data.length`,()=>r.traversalKind==="Allows"?r.return(!0):r.return()),r.traverseKey(o,`data[${o}]`,i)}if(this.variadic&&(this.postfix&&r.const("firstPostfixIndex",`data.length${this.postfix?`- ${this.postfix.length}`:""}`),r.for(`i < ${this.postfix?"firstPostfixIndex":"data.length"}`,()=>r.traverseKey("i","data[i]",this.variadic),this.prevariadic.length),this.postfix))for(const[n,i]of this.postfix.entries()){const o=`firstPostfixIndex + ${n}`;r.traverseKey(o,`data[${o}]`,i)}r.traversalKind==="Allows"&&r.return(!0)}_transform(r,n){n.path.push(V.intrinsic.nonNegativeIntegerString.internal);const i=super._transform(r,n);return n.path.pop(),i}reduceJsonSchema(r,n){const i=n.target==="draft-07";if(this.prevariadic.length){const o=this.prevariadic.map(u=>{const d=u.node.toJsonSchemaRecurse(n);if(u.kind==="defaultables"){const h=typeof u.default=="function"?u.default():u.default;d.default=V.intrinsic.jsonData.allows(h)?h:n.fallback.defaultValue({code:"defaultValue",base:d,value:h})}return d});i?r.items=o:r.prefixItems=o}if(this.minLength&&(r.minItems=this.minLength),this.variadic){const o=this.variadic.toJsonSchemaRecurse(n);if(i&&this.prevariadic.length?r.additionalItems=o:r.items=o,this.maxLength&&(r.maxItems=this.maxLength),this.postfix){const u=this.postfix.map(d=>d.toJsonSchemaRecurse(n));r=n.fallback.arrayPostfix({code:"arrayPostfix",base:r,elements:u})}}else i?r.additionalItems=!1:r.items=!1,delete r.maxItems;return r}}const Jl={},vE=e=>{if(!e.defaultables)return[];const t=[];let r="[";const n=e.prefixLength+e.defaultablesLength-1;for(let i=e.prefixLength;i<=n;i++){const[o,u]=e.defaultables[i-e.prefixLength];t.push(qg(i,o,u)),r+=`${i}: ${o.id} = ${Wn(u)}, `}return r+="]",Jl[r]??(Jl[r]=t)},Gg={implementation:mE,Node:$E},yE=e=>{const t=[];if(e.prefix)for(const r of e.prefix)t.push({kind:"prefix",node:r});if(e.defaultables)for(const[r,n]of e.defaultables)t.push({kind:"defaultables",node:r,default:n});if(e.optionals)for(const r of e.optionals)t.push({kind:"optionals",node:r});if(e.variadic&&t.push({kind:"variadic",node:e.variadic}),e.postfix)for(const r of e.postfix)t.push({kind:"postfix",node:r});return t},Bm=e=>e.reduce((t,r)=>(r.kind==="variadic"?t.variadic=r.node:r.kind==="defaultables"?t.defaultables=De(t.defaultables,[[r.node,r.default]]):t[r.kind]=De(t[r.kind],r.node),t),{}),Yg="A postfix required element cannot follow an optional or defaultable element",gE="A postfix element requires a variadic element",Ps=e=>{var c,v;const[t,...r]=e.l,[n,...i]=e.r;if(!t||!n)return e;const o=((c=r[r.length-1])==null?void 0:c.kind)==="postfix",u=((v=i[i.length-1])==null?void 0:v.kind)==="postfix",d=t.kind==="prefix"||n.kind==="prefix"?"prefix":t.kind==="postfix"||n.kind==="postfix"?"postfix":t.kind==="variadic"&&n.kind==="variadic"?"variadic":o||u?"prefix":t.kind==="defaultables"||n.kind==="defaultables"?"defaultables":"optionals";if(t.kind==="prefix"&&n.kind==="variadic"&&u){const j=Ps({...e,fixedVariants:[],r:i.map(C=>({...C,kind:"prefix"}))});j.disjoint.length===0&&e.fixedVariants.push(j)}else if(n.kind==="prefix"&&t.kind==="variadic"&&o){const j=Ps({...e,fixedVariants:[],l:r.map(C=>({...C,kind:"prefix"}))});j.disjoint.length===0&&e.fixedVariants.push(j)}const h=rt(t.node,n.node,e.ctx);if(h instanceof te)if(d==="prefix"||d==="postfix")e.disjoint.push(...h.withPrefixKey(d==="prefix"?e.result.length:`-${r.length+1}`,Um(t)&&Um(n)?"required":"optional")),e.result=[...e.result,{kind:d,node:V.intrinsic.never.internal}];else return d==="optionals"||d==="defaultables"?e:Ps({...e,fixedVariants:[],l:r.map(j=>({...j,kind:"prefix"})),r:r.map(j=>({...j,kind:"prefix"}))});else d==="defaultables"?(t.kind==="defaultables"&&n.kind==="defaultables"&&t.default!==n.default&&B(zg(t.default,n.default)),e.result=[...e.result,{kind:d,node:h,default:t.kind==="defaultables"?t.default:n.kind==="defaultables"?n.default:He(`Unexpected defaultable intersection from ${t.kind} and ${n.kind} elements.`)}]):e.result=[...e.result,{kind:d,node:h}];const m=e.l.length,g=e.r.length;return(t.kind!=="variadic"||m>=g&&(n.kind==="variadic"||g===1))&&(e.l=r),(n.kind!=="variadic"||g>=m&&(t.kind==="variadic"||m===1))&&(e.r=i),Ps(e)},Um=e=>e.kind==="prefix"||e.kind==="postfix",Zg=e=>t=>{var r,n;if(t.props.length||t.index){const i=((r=t.index)==null?void 0:r.map(u=>u[e]))??[];for(const u of t.props)i.push(u[e]);t.undeclared&&i.push(`+ (undeclared): ${t.undeclared}`);const o=`{ ${i.join(", ")} }`;return t.sequence?`${o} & ${t.sequence.description}`:o}return((n=t.sequence)==null?void 0:n.description)??"{}"},bE=Zg("description"),wE=Zg("expression"),Km=(e,t,r)=>{const n=e.required?"required":"optional";if(!t.signature.allows(e.key))return null;const i=zr(e.value,t.value,r);return i instanceof te?n==="optional"?r.node("optional",{key:e.key,value:V.intrinsic.never.internal}):i.withPrefixKey(e.key,e.kind):null},kE=Ue({kind:"structure",hasAssociatedError:!1,normalize:e=>e,applyConfig:(e,t)=>!e.undeclared&&t.onUndeclaredKey!=="ignore"?{...e,undeclared:t.onUndeclaredKey}:e,keys:{required:{child:!0,parse:Ct("required"),reduceIo:(e,t,r)=>{t.required=De(t.required,r.map(n=>e==="in"?n.rawIn:n.rawOut))}},optional:{child:!0,parse:Ct("optional"),reduceIo:(e,t,r)=>{if(e==="in"){t.optional=r.map(n=>n.rawIn);return}for(const n of r)t[n.outProp.kind]=De(t[n.outProp.kind],n.outProp.rawOut)}},index:{child:!0,parse:Ct("index")},sequence:{child:!0,parse:Ct("sequence")},undeclared:{parse:e=>e==="ignore"?void 0:e,reduceIo:(e,t,r)=>{if(r==="reject"){t.undeclared="reject";return}e==="in"?delete t.undeclared:t.undeclared="reject"}}},defaults:{description:bE},intersections:{structure:(e,t,r)=>{const n={...e.inner},i={...t.inner},o=new te;if(e.undeclared){const h=e.keyof();for(const m of t.requiredKeys)h.allows(m)||o.add("presence",V.intrinsic.never.internal,t.propsByKey[m].value,{path:[m]});i.optional&&(i.optional=i.optional.filter(m=>h.allows(m.key))),i.index&&(i.index=i.index.flatMap(m=>{if(m.signature.extends(h))return m;const g=zr(h,m.signature,r.$);if(g instanceof te)return[];const c=nf(g,m.value,r.$);return c.required&&(i.required=zn(i.required,c.required)),c.optional&&(i.optional=zn(i.optional,c.optional)),c.index??[]}))}if(t.undeclared){const h=t.keyof();for(const m of e.requiredKeys)h.allows(m)||o.add("presence",e.propsByKey[m].value,V.intrinsic.never.internal,{path:[m]});n.optional&&(n.optional=n.optional.filter(m=>h.allows(m.key))),n.index&&(n.index=n.index.flatMap(m=>{if(m.signature.extends(h))return m;const g=zr(h,m.signature,r.$);if(g instanceof te)return[];const c=nf(g,m.value,r.$);return c.required&&(n.required=zn(n.required,c.required)),c.optional&&(n.optional=zn(n.optional,c.optional)),c.index??[]}))}const u={};(e.undeclared||t.undeclared)&&(u.undeclared=e.undeclared==="reject"||t.undeclared==="reject"?"reject":"delete");const d=nu({kind:"structure",baseInner:u,l:iu(n),r:iu(i),roots:[],ctx:r});return d instanceof te&&o.push(...d),o.length?o:d}},reduce:(e,t)=>{if(!e.required&&!e.optional)return;const r={};let n=!1;const i=e.optional?[...e.optional]:[];if(e.required)for(let o=0;o<e.required.length;o++){const u=e.required[o];if(u.key in r&&B(Jm(u.key)),r[u.key]=!0,e.index)for(const d of e.index){const h=Km(u,d,t);if(h instanceof te)return h}}if(e.optional)for(let o=0;o<e.optional.length;o++){const u=e.optional[o];if(u.key in r&&B(Jm(u.key)),r[u.key]=!0,e.index)for(const d of e.index){const h=Km(u,d,t);if(h instanceof te)return h;h!==null&&(i[o]=h,n=!0)}}if(n)return t.node("structure",{...e,optional:i},{prereduced:!0})}});var M$,P$;class SE extends Zi{constructor(){super(...arguments);b(this,"impliedBasis",V.intrinsic.object.internal);b(this,"impliedSiblings",this.children.flatMap(r=>r.impliedSiblings??[]));b(this,"props",zn(this.required,this.optional));b(this,"propsByKey",Ce(this.props,(r,n)=>[n.key,n]));b(this,"propsByKeyReference",wt(this.propsByKey));b(this,"expression",wE(this));b(this,"requiredKeys",((M$=this.required)==null?void 0:M$.map(r=>r.key))??[]);b(this,"optionalKeys",((P$=this.optional)==null?void 0:P$.map(r=>r.key))??[]);b(this,"literalKeys",[...this.requiredKeys,...this.optionalKeys]);b(this,"_keyof");b(this,"traverseAllows",(r,n)=>this._traverse("Allows",r,n));b(this,"traverseApply",(r,n)=>this._traverse("Apply",r,n));b(this,"_traverse",(r,n,i)=>{const o=(i==null?void 0:i.currentErrorCount)??0;for(let u=0;u<this.props.length;u++)if(r==="Allows"){if(!this.props[u].traverseAllows(n,i))return!1}else if(this.props[u].traverseApply(n,i),i.failFast&&i.currentErrorCount>o)return!1;if(this.sequence){if(r==="Allows"){if(!this.sequence.traverseAllows(n,i))return!1}else if(this.sequence.traverseApply(n,i),i.failFast&&i.currentErrorCount>o)return!1}if(this.index||this.undeclared==="reject"){const u=Object.keys(n);u.push(...Object.getOwnPropertySymbols(n));for(let d=0;d<u.length;d++){const h=u[d];if(this.index){for(const m of this.index)if(m.signature.traverseAllows(h,i)){if(r==="Allows"){if(!Fr(h,()=>m.value.traverseAllows(n[h],i),i))return!1}else if(Fr(h,()=>m.value.traverseApply(n[h],i),i),i.failFast&&i.currentErrorCount>o)return!1}}if(this.undeclared==="reject"&&!this.declaresKey(h)&&(r==="Allows"||(i.errorFromNodeContext({code:"predicate",expected:"removed",actual:"",relativePath:[h],meta:this.meta}),i.failFast)))return!1}}return this.structuralMorph&&i&&!i.hasError()&&i.queueMorphs([this.structuralMorph]),!0});b(this,"declaresKey",r=>{var n;return r in this.propsByKey||((n=this.index)==null?void 0:n.some(i=>i.signature.allows(r)))||this.sequence!==void 0&&V.intrinsic.nonNegativeIntegerString.allows(r)});b(this,"structuralMorphRef",this.structuralMorph&&wt(this.structuralMorph))}keyof(){if(this._keyof)return this._keyof;let r=this.$.units(this.literalKeys).branches;if(this.index)for(const{signature:n}of this.index)r=r.concat(n.branches);return this._keyof=this.$.node("union",r)}map(r){return this.$.node("structure",this.props.flatMap(r).reduce((n,i)=>{const o=this.propsByKey[i.key];if(gt(i))return i.kind!=="required"&&i.kind!=="optional"?B(`Map result must have kind "required" or "optional" (was ${i.kind})`):(n[i.kind]=De(n[i.kind],i),n);const u=i.kind??(o==null?void 0:o.kind)??"required",d=Ce(i,(h,m)=>h in md.implementation.keys?[h,m]:[]);return n[u]=De(n[u],this.$.node(u,d)),n},{}))}assertHasKeys(r){const n=r.filter(i=>!pa(i,this.keyof()));if(n.length)return B(Qm(this.expression,n))}get(r,...n){var h;let i,o=!1;const u=NE(r);if((typeof u=="string"||typeof u=="symbol")&&this.propsByKey[u]&&(i=this.propsByKey[u].value,o=this.propsByKey[u].required),this.index)for(const m of this.index)pa(u,m.signature)&&(i=(i==null?void 0:i.and(m.value))??m.value);if(this.sequence&&pa(u,V.intrinsic.nonNegativeIntegerString))if(ne(u,"root"))this.sequence.variadic&&(i=(i==null?void 0:i.and(this.sequence.element))??this.sequence.element);else{const m=Number.parseInt(u);if(m<this.sequence.prevariadic.length){const g=this.sequence.prevariadic[m].node;i=(i==null?void 0:i.and(g))??g,o||(o=m<this.sequence.prefixLength)}else if(this.sequence.variadic){const g=this.$.node("union",this.sequence.variadicOrPostfix);i=(i==null?void 0:i.and(g))??g}}if(!i)return(h=this.sequence)!=null&&h.variadic&&ne(u,"root")&&u.extends(V.intrinsic.number)?B(jE(u.expression,this.sequence.expression)):B(Qm(this.expression,[u]));const d=i.get(...n);return o?d:d.or(V.intrinsic.undefined)}pick(...r){return this.assertHasKeys(r),this.$.node("structure",this.filterKeys("pick",r))}omit(...r){return this.assertHasKeys(r),this.$.node("structure",this.filterKeys("omit",r))}optionalize(){const{required:r,...n}=this.inner;return this.$.node("structure",{...n,optional:this.props.map(i=>i.hasKind("required")?this.$.node("optional",i.inner):i)})}require(){const{optional:r,...n}=this.inner;return this.$.node("structure",{...n,required:this.props.map(i=>i.hasKind("optional")?{key:i.key,value:i.value}:i)})}merge(r){const n=this.filterKeys("omit",[r.keyof()]);return r.required&&(n.required=De(n.required,r.required)),r.optional&&(n.optional=De(n.optional,r.optional)),r.index&&(n.index=De(n.index,r.index)),r.sequence&&(n.sequence=r.sequence),r.undeclared?n.undeclared=r.undeclared:delete n.undeclared,this.$.node("structure",n)}filterKeys(r,n){const i=pg(this.inner),o=u=>{const d=n.some(h=>pa(u,h));return r==="pick"?d:!d};return i.required&&(i.required=i.required.filter(u=>o(u.key))),i.optional&&(i.optional=i.optional.filter(u=>o(u.key))),i.index&&(i.index=i.index.filter(u=>o(u.signature))),i}get defaultable(){var r;return this.cacheGetter("defaultable",((r=this.optional)==null?void 0:r.filter(n=>n.hasDefault()))??[])}_compileDeclaresKey(r){const n=[];if(this.props.length&&n.push(`k in ${this.propsByKeyReference}`),this.index)for(const i of this.index)n.push(r.invoke(i.signature,{kind:"Allows",arg:"k"}));return this.sequence&&n.push("$ark.intrinsic.nonNegativeIntegerString.allows(k)"),n.join(" || ")||"false"}get structuralMorph(){return this.cacheGetter("structuralMorph",DE(this))}compile(r){r.traversalKind==="Apply"&&r.initializeErrorCount();for(const n of this.props)r.check(n),r.traversalKind==="Apply"&&r.returnIfFailFast();if(this.sequence&&(r.check(this.sequence),r.traversalKind==="Apply"&&r.returnIfFailFast()),(this.index||this.undeclared==="reject")&&(r.const("keys","Object.keys(data)"),r.line("keys.push(...Object.getOwnPropertySymbols(data))"),r.for("i < keys.length",()=>this.compileExhaustiveEntry(r))),r.traversalKind==="Allows")return r.return(!0);this.structuralMorphRef&&r.if("ctx && !ctx.hasError()",()=>(r.line("ctx.queueMorphs(["),CE(r,this),r.line("])")))}compileExhaustiveEntry(r){if(r.const("k","keys[i]"),this.index)for(const n of this.index)r.if(`${r.invoke(n.signature,{arg:"k",kind:"Allows"})}`,()=>r.traverseKey("k","data[k]",n.value));return this.undeclared==="reject"&&r.if(`!(${this._compileDeclaresKey(r)})`,()=>r.traversalKind==="Allows"?r.return(!1):r.line(`ctx.errorFromNodeContext({ code: "predicate", expected: "removed", actual: "", relativePath: [k], meta: ${this.compiledMeta} })`).if("ctx.failFast",()=>r.return())),r}reduceJsonSchema(r,n){var i;switch(r.type){case"object":return this.reduceObjectJsonSchema(r,n);case"array":const o=((i=this.sequence)==null?void 0:i.reduceJsonSchema(r,n))??r;return this.props.length||this.index?n.fallback.arrayObject({code:"arrayObject",base:o,object:this.reduceObjectJsonSchema({type:"object"},n)}):o;default:return We.throwInternalOperandError("structure",r)}}reduceObjectJsonSchema(r,n){if(this.props.length){r.properties={};for(const i of this.props){const o=i.value.toJsonSchemaRecurse(n);if(typeof i.key=="symbol"){n.fallback.symbolKey({code:"symbolKey",base:r,key:i.key,value:o,optional:i.optional});continue}if(i.hasDefault()){const u=typeof i.default=="function"?i.default():i.default;o.default=V.intrinsic.jsonData.allows(u)?u:n.fallback.defaultValue({code:"defaultValue",base:o,value:u})}r.properties[i.key]=o}this.requiredKeys.length&&r.properties&&(r.required=this.requiredKeys.filter(i=>typeof i=="string"&&i in r.properties))}if(this.index)for(const i of this.index){const o=i.value.toJsonSchemaRecurse(n);if(i.signature.equals(V.intrinsic.string)){r.additionalProperties=o;continue}for(const u of i.signature.branches){if(!u.extends(V.intrinsic.string)){r=n.fallback.symbolKey({code:"symbolKey",base:r,key:null,value:o,optional:!1});continue}let d={type:"string"};if(u.hasKind("morph")&&(d=n.fallback.morph({code:"morph",base:u.rawIn.toJsonSchemaRecurse(n),out:u.rawOut.toJsonSchemaRecurse(n)})),!u.hasKind("intersection"))return He(`Unexpected index branch kind ${u.kind}.`);const{pattern:h}=u.inner;if(h){const m=Object.assign(d,{pattern:h[0].rule});for(let g=1;g<h.length;g++)d=n.fallback.patternIntersection({code:"patternIntersection",base:m,pattern:h[g].rule});r.patternProperties??(r.patternProperties={}),r.patternProperties[m.pattern]=o}}}return this.undeclared&&!r.additionalProperties&&(r.additionalProperties=!1),r}}const Vl={},xE=e=>{var r,n;let t="";for(let i=0;i<e.defaultable.length;i++)t+=e.defaultable[i].defaultValueMorphRef;if((r=e.sequence)!=null&&r.defaultValueMorphsReference&&(t+=(n=e.sequence)==null?void 0:n.defaultValueMorphsReference),e.undeclared==="delete"){if(t+="delete !(",e.required)for(const i of e.required)t+=i.compiledKey+" | ";if(e.optional)for(const i of e.optional)t+=i.compiledKey+" | ";if(e.index)for(const i of e.index)t+=i.signature.id+" | ";if(e.sequence)if(e.sequence.maxLength===null)t+=se.nonNegativeIntegerString.id;else for(let i=0;i<e.sequence.tuple.length;i++)t+=i+" | ";t+=")"}return t},DE=e=>{const t=xE(e);if(!t)return;if(Vl[t])return Vl[t];const r=(n,i)=>{var o;for(let u=0;u<e.defaultable.length;u++)e.defaultable[u].key in n||e.defaultable[u].defaultValueMorph(n,i);if((o=e.sequence)!=null&&o.defaultables)for(let u=n.length-e.sequence.prefixLength;u<e.sequence.defaultables.length;u++)e.sequence.defaultValueMorphs[u](n,i);if(e.undeclared==="delete")for(const u in n)e.declaresKey(u)||delete n[u];return n};return Vl[t]=r},CE=(e,t)=>{var i;const n=`(data${t.defaultable.some(o=>o.defaultValueMorph.length===2)||((i=t.sequence)==null?void 0:i.defaultValueMorphs.some(o=>o.length===2))?", ctx":""})`;return e.block(`${n} => `,o=>{var u;for(let d=0;d<t.defaultable.length;d++){const{serializedKey:h,defaultValueMorphRef:m}=t.defaultable[d];o.if(`!(${h} in data)`,g=>g.line(`${m}${n}`))}return(u=t.sequence)!=null&&u.defaultables&&o.for(`i < ${t.sequence.defaultables.length}`,d=>d.set("data[i]",5),`data.length - ${t.sequence.prefixLength}`),t.undeclared==="delete"&&o.forIn("data",d=>d.if(`!(${t._compileDeclaresKey(d)})`,h=>h.line("delete data[k]"))),o.return("data")})},Xg={implementation:kE,Node:SE},NE=e=>(ne(e,"root")&&e.hasKind("unit")&&(e=e.unit),typeof e=="number"&&(e=`${e}`),e),jE=(e,t)=>`${e} is not allowed as an array index on ${t}. Use the 'nonNegativeIntegerString' keyword instead.`,nf=(e,t,r)=>{const[n,i]=xN(e.branches,u=>u.hasKind("unit"));if(!n.length)return{index:r.node("index",{signature:e,value:t})};const o={};for(const u of n){const d=r.node("required",{key:u.unit,value:t});o[d.kind]=De(o[d.kind],d)}return i.length&&(o.index=r.node("index",{signature:i,value:t})),o},IE=e=>ne(e,"root")?e.expression:Se(e),Qm=(e,t)=>`Key${t.length===1?"":"s"} ${t.map(IE).join(", ")} ${t.length===1?"does":"do"} not exist on ${e}`,Jm=e=>`Duplicate key ${Yi(e)}`,Mu={...yI,alias:vd.implementation,domain:gd.implementation,unit:Vg.implementation,proto:ou.implementation,union:Jg.implementation,morph:Kg.implementation,intersection:Ug.implementation,divisor:xg.implementation,pattern:_g.implementation,predicate:Sg.implementation,required:Wg.implementation,optional:md.implementation,index:Hg.implementation,sequence:Gg.implementation,structure:Xg.implementation};V.defaultConfig=_N(Object.assign(Ce(Mu,(e,t)=>[e,t.defaults]),{jitless:JN(),clone:UN,onUndeclaredKey:"ignore",exactOptionalPropertyTypes:!0,numberAllowsNaN:!1,dateAllowsInvalid:!1,onFail:null,keywords:{},toJsonSchema:We.defaultConfig}));V.resolvedConfig=Zc(V.defaultConfig,V.config);const EE={...gI,alias:vd.Node,domain:gd.Node,unit:Vg.Node,proto:ou.Node,union:Jg.Node,morph:Kg.Node,intersection:Ug.Node,divisor:xg.Node,pattern:_g.Node,predicate:Sg.Node,required:Wg.Node,optional:md.Node,index:Hg.Node,sequence:Gg.Node,structure:Xg.Node};class sf extends PN{get[Lr](){return"module"}}const e0=(e,t)=>new sf(Ce(e,(r,n)=>[r,ne(n,"module")?e0(n,t):t.bindReference(n)])),ME=e=>mt(e)?e:"branches"in e&&mt(e.branches)?e.branches:void 0,PE=(e,t)=>B(`Node of kind ${t} is not valid as a ${e} definition`),Vm=e=>`#${e} duplicates public alias ${e}`,Hl={};V.ambient??(V.ambient={});let Hm;const t0="function $",OE=e=>r0(e,n0(e)),r0=(e,t)=>{const r=t.write(t0,4),n=t.compile()();for(const i of e)i.precompilation||(i.traverseAllows=n[`${i.id}Allows`].bind(n),i.isRoot()&&!i.allowsRequiresContext&&(i.allows=i.traverseAllows),i.traverseApply=n[`${i.id}Apply`].bind(n),n[`${i.id}Optimistic`]&&(i.traverseOptimistic=n[`${i.id}Optimistic`].bind(n)),i.precompilation=r)},n0=e=>new cg().return(e.reduce((t,r)=>{const n=new Ul({kind:"Allows"}).indent();r.compile(n);const i=n.write(`${r.id}Allows`),o=new Ul({kind:"Apply"}).indent();r.compile(o);const u=o.write(`${r.id}Apply`),d=`${t}${i},
${u},
`;if(!r.hasKind("union"))return d;const h=new Ul({kind:"Allows",optimistic:!0}).indent();r.compile(h);const m=h.write(`${r.id}Optimistic`);return`${d}${m},
`},`{
`)+"}");class i0{constructor(t,r){b(this,"config");b(this,"resolvedConfig");b(this,"name");b(this,"referencesById",{});b(this,"references",[]);b(this,"resolutions",{});b(this,"exportedNames",[]);b(this,"aliases",{});b(this,"resolved",!1);b(this,"nodesByHash",{});b(this,"intrinsic");b(this,"_json");b(this,"generic",(...t)=>{const r=this;return(n,i)=>new su(t,i?new kg(n):n,r,r,i??null)});b(this,"units",(t,r)=>{const n=[];for(const o of t)n.includes(o)||n.push(o);const i=n.map(o=>this.node("unit",{unit:o},r));return this.node("union",i,{...r,prereduced:!0})});b(this,"lazyResolutions",[]);b(this,"schema",(t,r)=>this.finalize(this.parseSchema(t,r)));b(this,"parseSchema",(t,r)=>this.node(ja(t),t,r));b(this,"precompilation");b(this,"_exportedResolutions");b(this,"_exports");b(this,"node",(t,r,n={})=>{const i=this.preparseNode(t,r,n);if(gt(i))return this.bindReference(i);const o=this.createParseContext(i),u=Lg(o),d=this.bindReference(u);return Ut[o.id]=d});b(this,"parse",(t,r={})=>this.finalize(this.parseDefinition(t,r)));this.config=Zc(V.config,r),this.resolvedConfig=Zc(V.resolvedConfig,r),this.name=this.resolvedConfig.name??`anonymousScope${Object.keys(Hl).length}`,this.name in Hl&&B(`A Scope already named ${this.name} already exists`),Hl[this.name]=this;const n=Object.entries(t).map(i=>this.preparseOwnAliasEntry(...i));for(const[i,o]of n){let u=i;if(i[0]==="#"?(u=i.slice(1),u in this.aliases&&B(Vm(u)),this.aliases[u]=o):(u in this.aliases&&B(Vm(i)),this.aliases[u]=o,this.exportedNames.push(u)),!ne(o,"module")&&!ne(o,"generic")&&!Du(o)){const d=this.preparseOwnDefinitionFormat(o,{alias:u});this.resolutions[u]=ne(d,"root")?this.bindReference(d):this.createParseContext(d).id}}Hm??(Hm=this.node("union",{branches:["string","number","object","bigint","symbol",{unit:!0},{unit:!1},{unit:void 0},{unit:null}]},{prereduced:!0})),this.nodesByHash[Hm.hash]=this.node("intersection",{},{prereduced:!0}),this.intrinsic=V.intrinsic?Ce(V.intrinsic,(i,o)=>i.startsWith("json")?[]:[i,this.bindReference(o)]):{}}get[Lr](){return"scope"}cacheGetter(t,r){return Object.defineProperty(this,t,{value:r}),r}get internal(){return this}get json(){return this._json||this.export(),this._json}defineSchema(t){return t}lazilyResolve(t,r){const n=this.node("alias",{reference:r??"synthetic",resolve:t},{prereduced:!0});return this.resolved||this.lazyResolutions.push(n),n}preparseNode(t,r,n){var d;let i=typeof t=="string"?t:ja(r,t);if(gt(r)&&r.kind===i)return r;if(i==="alias"&&!(n!=null&&n.prereduced)){const{reference:h}=vd.implementation.normalize(r,this);if(h.startsWith("$")){const m=this.resolveRoot(h.slice(1));r=m,i=m.kind}}else if(i==="union"&&Zn(r,"object")){const h=ME(r);(h==null?void 0:h.length)===1&&(r=h[0],i=ja(r))}if(gt(r)&&r.kind===i)return r;const o=Mu[i],u=((d=o.normalize)==null?void 0:d.call(o,r,this))??r;return gt(u)?u.kind===i?u:PE(i,u.kind):{...n,$:this,kind:i,def:u,prefix:n.alias??i}}bindReference(t){let r;return gt(t)?r=t.$===this?t:new t.constructor(t.attachments,this):r=t.$===this?t:new su(t.params,t.bodyDef,t.$,this,t.hkt),this.resolved||Object.assign(this.referencesById,r.referencesById),r}resolveRoot(t){return this.maybeResolveRoot(t)??B(u0(t))}maybeResolveRoot(t){const r=this.maybeResolve(t);if(!ne(r,"generic"))return r}maybeResolveSubalias(t){return of(this.aliases,t)??of(this.ambient,t)}get ambient(){return V.ambient}maybeResolve(t){var i;const r=this.resolutions[t];if(r){if(typeof r!="string")return this.bindReference(r);const o=Ut[r];if(ne(o,"root"))return this.resolutions[t]=o;if(ne(o,"context")){if(o.phase==="resolving")return this.node("alias",{reference:`$${t}`},{prereduced:!0});if(o.phase==="resolved")return He(`Unexpected resolved context for was uncached by its scope: ${Se(o)}`);o.phase="resolving";const u=this.bindReference(this.parseOwnDefinitionFormat(o.def,o));return o.phase="resolved",Ut[u.id]=u,Ut[o.id]=u,this.resolutions[t]=u}return He(`Unexpected nodesById entry for ${r}: ${Se(o)}`)}let n=this.aliases[t]??((i=this.ambient)==null?void 0:i[t]);return n?(n=this.normalizeRootScopeValue(n),ne(n,"generic")?this.resolutions[t]=this.bindReference(n):ne(n,"module")?(n.root||B(l0(t)),this.resolutions[t]=this.bindReference(n.root)):this.resolutions[t]=this.parse(n,{alias:t})):this.maybeResolveSubalias(t)}createParseContext(t){const r=t.id??Tg(t.prefix);return Ut[r]=Object.assign(t,{[Lr]:"context",$:this,id:r,phase:"unresolved"})}traversal(t){return new Di(t,this.resolvedConfig)}import(...t){return new sf(Ce(this.export(...t),(r,n)=>[`#${r}`,n]))}export(...t){if(!this._exports){this._exports={};for(const n of this.exportedNames){const i=this.aliases[n];this._exports[n]=ne(i,"module")?e0(i,this):Wm(this.maybeResolve(n))}for(const n of this.lazyResolutions)n.resolution;if(this._exportedResolutions=a0(this,this._exports),this._json=o0(this._exportedResolutions),Object.assign(this.resolutions,this._exportedResolutions),this.references=Object.values(this.referencesById),!this.resolvedConfig.jitless){const n=n0(this.references);this.precompilation=n.write(t0,4),r0(this.references,n)}this.resolved=!0}const r=t.length?t:this.exportedNames;return new sf(Ce(r,(n,i)=>[i,this._exports[i]]))}resolve(t){return this.export()[t]}parseDefinition(t,r={}){if(ne(t,"root"))return this.bindReference(t);const n=this.preparseOwnDefinitionFormat(t,r);if(ne(n,"root"))return this.bindReference(n);const i=this.createParseContext(n);Ut[i.id]=i;let o=this.bindReference(this.parseOwnDefinitionFormat(t,i));return o.isCyclic&&(o=xI(o,i.id)),Ut[i.id]=o,o}finalize(t){return Wm(t),!t.precompilation&&!this.resolvedConfig.jitless&&OE(t.references),t}}class s0 extends i0{parseOwnDefinitionFormat(t,r){return Lg(r)}preparseOwnDefinitionFormat(t,r){return this.preparseNode(ja(t),t,r)}preparseOwnAliasEntry(t,r){return[t,r]}normalizeRootScopeValue(t){return t}}const Wm=e=>{const t=e.references.filter(r=>r.hasKind("alias"));for(const r of t){Object.assign(r.referencesById,r.resolution.referencesById);for(const n of e.references)r.id in n.referencesById&&Object.assign(n.referencesById,r.referencesById)}return e},o0=e=>Ce(e,(t,r)=>[t,ne(r,"root")||ne(r,"generic")?r.json:ne(r,"module")?o0(r):He(`Unexpected resolution ${Se(r)}`)]),of=(e,t)=>{const r=t.indexOf(".");if(r===-1)return;const n=t.slice(0,r),i=e[n];if(i===void 0)return;if(!ne(i,"module"))return B(AE(n));const o=t.slice(r+1),u=i[o];if(u===void 0)return of(i,o);if(ne(u,"root")||ne(u,"generic"))return u;if(ne(u,"module"))return u.root??B(l0(t));He(`Unexpected resolution for alias '${t}': ${Se(u)}`)},bd=(e,t)=>new s0(e,t),ko=new s0({}),a0=(e,t)=>{const r={};for(const n in t){const i=t[n];if(ne(i,"module")){const o=a0(e,i),u=Ce(o,(d,h)=>[`${n}.${d}`,h]);Object.assign(r,u)}else ne(i,"root")||ne(i,"generic")?r[n]=i:He(`Unexpected scope resolution ${Se(i)}`)}return r},u0=e=>`'${e}' is unresolvable`,AE=e=>`'${e}' must reference a module to be accessed using dot syntax`,l0=e=>`Reference to submodule '${e}' must specify an alias`;ko.export();const Ne=ko.schema,wd=ko.node;ko.defineSchema;const Br=ko.generic,c0="^(?:0|[1-9]\\d*)$",RE=new RegExp(c0);wt(RE);const f0=bd({bigint:"bigint",boolean:[{unit:!1},{unit:!0}],false:{unit:!1},never:[],null:{unit:null},number:"number",object:"object",string:"string",symbol:"symbol",true:{unit:!0},unknown:{},undefined:{unit:void 0},Array,Date},{prereducedAliases:!0}).export();V.intrinsic={...f0};const d0=bd({integer:{domain:"number",divisor:1},lengthBoundable:["string",Array],key:["string","symbol"],nonNegativeIntegerString:{domain:"string",pattern:c0}},{prereducedAliases:!0}).export();Object.assign(V.intrinsic,d0);const _E=bd({jsonPrimitive:["string","number",{unit:!0},{unit:!1},{unit:null}],jsonObject:{domain:"object",index:{signature:"string",value:"$jsonData"}},jsonData:["$jsonPrimitive","$jsonObject"]},{prereducedAliases:!0}).export(),se={...f0,...d0,..._E,emptyStructure:wd("structure",{},{prereduced:!0})};V.intrinsic={...se};const Gm=(e,t)=>new RegExp(e,t);Object.assign(Gm,{as:Gm});const TE=e=>typeof e=="string"&&e[0]==="d"&&(e[1]==="'"||e[1]==='"')&&e[e.length-1]===e[1],Ym=e=>e.toString()!=="Invalid Date",LE=e=>e.slice(2,-1),p0=e=>`'${e}' could not be parsed by the Date constructor`,FE=(e,t)=>zE(e,t),zE=(e,t)=>{const r=new Date(e);if(Ym(r))return r;const n=cj(e);if(n!==void 0){const i=new Date(n);if(Ym(i))return i}return t?B(t===!0?p0(e):t):void 0},qE=Ne({proto:"Array",sequence:"string",required:{key:"groups",value:["object",{unit:void 0}]}}),Wl=(e,t)=>{const r=e.scanner.shiftUntilEscapable(KE[$0[t]]);if(e.scanner.lookahead==="")return e.error(JE(r,t));if(e.scanner.shift(),t in m0){let n;try{n=new RegExp(r)}catch(i){B(String(i))}e.root=e.ctx.$.node("intersection",{domain:"string",pattern:r},{prereduced:!0}),t==="x/"&&(e.root=e.ctx.$.node("morph",{in:e.root,morphs:i=>n.exec(i),declaredOut:qE}))}else if(vr(t,h0))e.root=e.ctx.$.node("unit",{unit:r});else{const n=FE(r,p0(r));e.root=e.ctx.$.node("unit",{meta:r,unit:n})}},h0={"'":1,'"':1},BE={"/":1,"'":1,'"':1},UE={"d'":"'",'d"':'"',"'":"'",'"':'"'},m0={"/":"/","x/":"/"},$0={...UE,...m0},KE={"'":e=>e.lookahead==="'",'"':e=>e.lookahead==='"',"/":e=>e.lookahead==="/"},QE={'"':"double-quote","'":"single-quote","/":"forward slash"},JE=(e,t)=>`${t}${e} requires a closing ${QE[$0[t]]}`,VE=e=>`Private type references should not include '#'. Use '${e}' instead.`,v0="Optional definitions like 'string?' are only valid as properties in an object or tuple",y0="Defaultable definitions like 'number = 0' are only valid as properties in an object or tuple",es={"<":1,">":1,"=":1,"|":1,"&":1,")":1,"[":1,"%":1,",":1,":":1,"?":1,"#":1,...Cu},HE=(e,t)=>e===">"?t[0]==="="?t[1]==="=":t.trimStart()===""||vr(t.trimStart()[0],es):e==="="?t[0]!=="=":e===","||e==="?",WE=(e,t,r)=>g0(e,t,r,[]),g0=(e,t,r,n)=>{const i=r.parseUntilFinalizer();return n.push(i.root),i.finalizer===">"?n.length!==t.params.length?r.error(b0(e,t.names,n.map(o=>o.expression))):n:i.finalizer===","?g0(e,t,r,n):i.error(ug(">"))},b0=(e,t,r)=>`${e}<${t.join(", ")}> requires exactly ${t.length} args (got ${r.length}${r.length===0?"":`: ${r.join(", ")}`})`,Gl=e=>{const t=e.scanner.shiftUntilLookahead(es);t==="keyof"?e.addPrefix("keyof"):e.root=YE(e,t)},GE=(e,t,r)=>{if(r.scanner.shiftUntilNonWhitespace(),r.scanner.shift()!=="<")return r.error(b0(e,t.names,[]));const i=WE(e,t,r);return t(...i)},YE=(e,t)=>ZE(e,t)??XE(e,t)??e.error(t===""?e.scanner.lookahead==="#"?VE(e.shiftedBy(1).scanner.shiftUntilLookahead(es)):w0(e):u0(t)),ZE=(e,t)=>{var n;if((n=e.ctx.args)!=null&&n[t]){const i=e.ctx.args[t];return typeof i!="string"?i:e.ctx.$.node("alias",{reference:i},{prereduced:!0})}const r=e.ctx.$.maybeResolve(t);if(ne(r,"root"))return r;if(r!==void 0)return ne(r,"generic")?GE(t,r,e):B(`Unexpected resolution ${Se(r)}`)},XE=(e,t)=>{const r=fj(t);if(r!==void 0)return e.ctx.$.node("unit",{unit:r});const n=pj(t);if(n!==void 0)return e.ctx.$.node("unit",{unit:n})},w0=e=>{const t=e.previousOperator();return t?k0(t,e.scanner.unscanned):eM(e.scanner.unscanned)},k0=(e,t="")=>`Token '${e}' requires a right operand${t?` before '${t}'`:""}`,eM=e=>`Expected an expression${e?` before '${e}'`:""}`,S0=e=>e.scanner.lookahead===""?e.error(w0(e)):e.scanner.lookahead==="("?e.shiftedBy(1).reduceGroupOpen():e.scanner.lookaheadIsIn(BE)?Wl(e,e.scanner.shift()):e.scanner.lookaheadIsIn(Cu)?S0(e.shiftedBy(1)):e.scanner.lookahead==="d"?e.scanner.nextLookahead in h0?Wl(e,`${e.scanner.shift()}${e.scanner.shift()}`):Gl(e):e.scanner.lookahead==="x"&&e.scanner.nextLookahead==="/"?e.shiftedBy(2)&&Wl(e,"x/"):Gl(e),tM={">":!0,">=":!0},rM={"<":!0,"<=":!0},au={"<":">",">":"<","<=":">=",">=":"<=","==":"=="},nM=(e,t)=>`Left bounds are only valid when paired with right bounds (try ...${t}${e})`,x0=e=>`Left-bounded expressions must specify their limits using < or <= (was ${e})`,iM=(e,t,r,n)=>`An expression may have at most one left bound (parsed ${e}${au[t]}, ${r}${au[n]})`,sM=(e,t)=>{const r=aM(e,t);if(e.root.hasKind("unit")){if(typeof e.root.unit=="number"){e.reduceLeftBound(e.root.unit,r),e.unsetRoot();return}if(e.root.unit instanceof Date){const n=`d'${e.root.description??e.root.unit.toISOString()}'`;e.unsetRoot(),e.reduceLeftBound(n,r);return}}return lM(e,r)},oM={"<":1,">":1,"=":1},aM=(e,t)=>e.scanner.lookaheadIs("=")?`${t}${e.scanner.shift()}`:t,Zm=(e,t,r,n)=>r.extends(V.intrinsic.number)?typeof t!="number"?B(af(e,t,n)):e==="=="?["min","max"]:e[0]===">"?["min"]:["max"]:r.extends(V.intrinsic.lengthBoundable)?typeof t!="number"?B(af(e,t,n)):e==="=="?["exactLength"]:e[0]===">"?["minLength"]:["maxLength"]:r.extends(V.intrinsic.Date)?e==="=="?["after","before"]:e[0]===">"?["after"]:["before"]:B(nI(r.expression)),uM=e=>({rule:TE(e.limit)?LE(e.limit):e.limit,exclusive:e.comparator.length===1}),lM=(e,t)=>{const r=e.unsetRoot(),n=e.scanner.location;e.parseOperand();const i=e.unsetRoot(),o=e.scanner.sliceChars(n,e.scanner.location);if(e.root=r,!i.hasKind("unit")||typeof i.unit!="number"&&!(i.unit instanceof Date))return e.error(af(t,o,"right"));const u=i.unit,d=t.length===1,h=Zm(t,typeof u=="number"?u:o,r,"right");for(const g of h)e.constrainRoot(g,t==="=="?{rule:u}:{rule:u,exclusive:d});if(!e.branches.leftBound)return;if(!vr(t,rM))return e.error(x0(t));const m=Zm(e.branches.leftBound.comparator,e.branches.leftBound.limit,r,"left");e.constrainRoot(m[0],uM(e.branches.leftBound)),e.branches.leftBound=null},af=(e,t,r)=>`Comparator ${r==="left"?au[e]:e} must be ${r==="left"?"preceded":"followed"} by a corresponding literal (was ${t})`,cM=e=>{e.scanner.shiftUntilNonWhitespace();const t=e.scanner.shiftUntilLookahead(es);e.root=e.root.brand(t)},fM=e=>{e.scanner.shiftUntilNonWhitespace();const t=e.scanner.shiftUntilLookahead(es),r=dj(t,{errorOnFail:Xm(t)});r===0&&e.error(Xm(0)),e.root=e.root.constrain("divisor",r)},Xm=e=>`% operator must be followed by a non-zero integer literal (was ${e})`,D0=e=>{const t=e.scanner.shift();return t===""?e.finalize(""):t==="["?e.scanner.shift()==="]"?e.setRoot(e.root.array()):e.error(dM):t==="|"?e.scanner.lookahead===">"?e.shiftedBy(1).pushRootToBranch("|>"):e.pushRootToBranch(t):t==="&"?e.pushRootToBranch(t):t===")"?e.finalizeGroup():HE(t,e.scanner.unscanned)?e.finalize(t):vr(t,oM)?sM(e,t):t==="%"?fM(e):t==="#"?cM(e):t in Cu?D0(e):e.error(kd(t))},kd=(e,t="")=>`'${e}' is not allowed here${t&&` (should be ${t})`}`,dM="Missing expected ']'",pM=e=>{const t=e.unsetRoot();e.parseOperand();const r=e.unsetRoot();if(!r.hasKind("unit"))return e.error(hM(r.expression));const n=r.unit instanceof Date?()=>new Date(r.unit):r.unit;return[t,"=",n]},hM=e=>`Default value '${e}' must be a literal value`,e$=(e,t)=>{const r=t.$.maybeResolveRoot(e);if(r)return r;if(e.endsWith("[]")){const o=t.$.maybeResolveRoot(e.slice(0,-2));if(o)return o.array()}const n=new Pu(new ag(e),t),i=mM(n);return n.finalizer===">"&&B(kd(">")),i},mM=e=>{e.parseOperand();let t=Sd(e).root;return t?(e.finalizer==="="?t=pM(e):e.finalizer==="?"&&(t=[t,"?"]),e.scanner.shiftUntilNonWhitespace(),e.scanner.lookahead&&B(kd(e.scanner.lookahead)),t):He(`Root was unexpectedly unset after parsing string '${e.scanner.scanned}'`)},Sd=e=>{for(;e.finalizer===void 0;)$M(e);return e},$M=e=>e.hasRoot()?e.parseOperator():e.parseOperand();class Pu{constructor(t,r){b(this,"root");b(this,"branches",{prefixes:[],leftBound:null,intersection:null,union:null,pipe:null});b(this,"finalizer");b(this,"groups",[]);b(this,"scanner");b(this,"ctx");this.scanner=t,this.ctx=r}error(t){return B(t)}hasRoot(){return this.root!==void 0}setRoot(t){this.root=t}unsetRoot(){const t=this.root;return this.root=void 0,t}constrainRoot(...t){this.root=this.root.constrain(t[0],t[1])}finalize(t){if(this.groups.length)return this.error(ug(")"));this.finalizeBranches(),this.finalizer=t}reduceLeftBound(t,r){const n=au[r];if(!vr(n,tM))return this.error(x0(r));if(this.branches.leftBound)return this.error(iM(this.branches.leftBound.limit,this.branches.leftBound.comparator,t,n));this.branches.leftBound={comparator:n,limit:t}}finalizeBranches(){if(this.assertRangeUnset(),this.branches.pipe){this.pushRootToBranch("|>"),this.root=this.branches.pipe;return}if(this.branches.union){this.pushRootToBranch("|"),this.root=this.branches.union;return}if(this.branches.intersection){this.pushRootToBranch("&"),this.root=this.branches.intersection;return}this.applyPrefixes()}finalizeGroup(){this.finalizeBranches();const t=this.groups.pop();if(!t)return this.error(wj(")",this.scanner.unscanned));this.branches=t}addPrefix(t){this.branches.prefixes.push(t)}applyPrefixes(){for(;this.branches.prefixes.length;){const t=this.branches.prefixes.pop();this.root=t==="keyof"?this.root.keyof():He(`Unexpected prefix '${t}'`)}}pushRootToBranch(t){var n,i,o;this.assertRangeUnset(),this.applyPrefixes();const r=this.root;this.root=void 0,this.branches.intersection=((n=this.branches.intersection)==null?void 0:n.rawAnd(r))??r,t!=="&"&&(this.branches.union=((i=this.branches.union)==null?void 0:i.rawOr(this.branches.intersection))??this.branches.intersection,this.branches.intersection=null,t!=="|"&&(this.branches.pipe=((o=this.branches.pipe)==null?void 0:o.rawPipeOnce(this.branches.union))??this.branches.union,this.branches.union=null))}parseUntilFinalizer(){return Sd(new Pu(this.scanner,this.ctx))}parseOperator(){return D0(this)}parseOperand(){return S0(this)}assertRangeUnset(){if(this.branches.leftBound)return this.error(nM(this.branches.leftBound.limit,this.branches.leftBound.comparator))}reduceGroupOpen(){this.groups.push(this.branches),this.branches={prefixes:[],leftBound:null,union:null,intersection:null,pipe:null}}previousOperator(){var t;return((t=this.branches.leftBound)==null?void 0:t.comparator)??this.branches.prefixes[this.branches.prefixes.length-1]??(this.branches.intersection?"&":this.branches.union?"|":this.branches.pipe?"|>":void 0)}shiftedBy(t){return this.scanner.jumpForward(t),this}}const vM="An empty string is not a valid generic parameter name",uf=(e,t,r)=>{e.shiftUntilNonWhitespace();const n=e.shiftUntilLookahead(es);return n===""?e.lookahead===""&&t.length?t:B(vM):(e.shiftUntilNonWhitespace(),yM(e,n,t,r))},t$="extends ",yM=(e,t,r,n)=>{if(e.shiftUntilNonWhitespace(),e.unscanned.startsWith(t$))e.jumpForward(t$.length);else return e.lookahead===","&&e.shift(),r.push(t),uf(e,r,n);const i=Sd(new Pu(e,n));return r.push([t,i.root]),uf(e,r,n)};class gM extends wn{constructor(t){const r={$:t,raw:t.fn};super((...n)=>{const i=n.indexOf(":"),o=i===-1?n.length-1:i-1,u=n.slice(0,o+1),d=t.parse(u).assertHasKind("intersection");let h=t.intrinsic.unknown;if(i!==-1){if(i!==n.length-2)return B(wM);h=t.parse(n[i+1])}return m=>new bM(m,d,h)},{attach:r})}}class bM extends wn{constructor(r,n,i){const o=`typed ${r.name}`,u={[o]:(...h)=>{const m=n.assert(h),g=r(...m);return i.assert(g)}}[o];super(u);b(this,"raw");b(this,"params");b(this,"returns");b(this,"expression");this.raw=r,this.params=n,this.returns=i;let d=n.expression;d[0]==="["&&d[d.length-1]==="]"?d=d.slice(1,-1):d.endsWith("[]")&&(d=`...${d}`),this.expression=`(${d}) => ${(i==null?void 0:i.expression)??"unknown"}`}}const wM=`":" must be followed by exactly one return type e.g:
fn("string", ":", "number")(s => s.length)`;class kM extends wn{constructor(r){super((...n)=>new ha(r)(...n),{bind:r});b(this,"$");this.$=r}in(r){return new ha(this.$,r===void 0?void 0:this.$.parse(r))}at(r,n){return new ha(this.$).at(r,n)}case(r,n){return new ha(this.$).case(r,n)}}class ha extends wn{constructor(r,n){super(i=>this.caseEntries(Object.entries(i).map(([o,u])=>o==="default"?[o,u]:[this.$.parse(o),u])));b(this,"$");b(this,"in");b(this,"key");b(this,"branches",[]);this.$=r,this.in=n}at(r,n){return this.key&&B(xM),this.branches.length&&B(SM),this.key=r,n?this.match(n):this}case(r,n){return this.caseEntry(this.$.parse(r),n)}caseEntry(r,n){const o=(this.key?this.$.parse({[this.key]:r}):r).pipe(n);return this.branches.push(o),this}match(r){return this(r)}strings(r){return this.caseEntries(Object.entries(r).map(([n,i])=>n==="default"?[n,i]:[this.$.node("unit",{unit:n}),i]))}caseEntries(r){for(let n=0;n<r.length;n++){const[i,o]=r[n];if(i==="default")return n!==r.length-1&&B("default may only be specified as the last key of a switch definition"),this.default(o);if(typeof o!="function")return B(`Value for case "${i}" must be a function (was ${ar(o)})`);this.caseEntry(i,o)}return this}default(r){typeof r=="function"&&this.case(se.unknown,r);const n={branches:this.branches,ordered:!0};(r==="never"||r==="assert")&&(n.meta={onFail:r$});const i=this.$.node("union",n);if(!this.in)return this.$.finalize(i);let o=this.in.pipe(i);return(r==="never"||r==="assert")&&(o=o.configureReferences({onFail:r$},"self")),this.$.finalize(o)}}const r$=e=>e.throw(),SM="A key matcher must be specified before the first case i.e. match.at('foo') or match.in<object>().at('bar')",xM="At most one key matcher may be specified per expression",C0=(e,t)=>{if(mt(e)){if(e[1]==="=")return[t.$.parseOwnDefinitionFormat(e[0],t),"=",e[2]];if(e[1]==="?")return[t.$.parseOwnDefinitionFormat(e[0],t),"?"]}return O0(e,t)},DM="Only required keys may make their values optional, e.g. { [mySymbol]: ['number', '?'] }",CM="Only required keys may specify default values, e.g. { value: 'number = 0' }",NM=(e,t)=>{var u;let r;const n={},i=Xa(e);for(const[d,h]of i){const m=EM(d);if(m.kind==="spread"){if(!$o(n))return B(IM);const C=t.$.parseOwnDefinitionFormat(h,t);if(C.equals(se.object))continue;if(!C.hasKind("intersection")||!((u=C.basis)!=null&&u.equals(se.object)))return B(MM(C.expression));r=C.structure;continue}if(m.kind==="undeclared"){h!=="reject"&&h!=="delete"&&h!=="ignore"&&B(jM(h)),n.undeclared=h;continue}const g=C0(h,t),c=m;if(m.kind==="required"){mt(g)?Yl(n,"optional",g[1]==="="?{key:m.normalized,value:g[0],default:g[2]}:{key:m.normalized,value:g[0]},t):Yl(n,"required",{key:m.normalized,value:g},t);continue}if(mt(g)&&(g[1]==="?"&&B(DM),g[1]==="="&&B(CM)),m.kind==="optional"){Yl(n,"optional",{key:m.normalized,value:g},t);continue}const v=t.$.parseOwnDefinitionFormat(c.normalized,t),j=nf(v,g,t.$);j.index&&(n.index=De(n.index,j.index)),j.required&&(n.required=De(n.required,j.required))}const o=t.$.node("structure",n);return t.$.parseSchema({domain:"object",structure:(r==null?void 0:r.merge(o))??o})},Yl=(e,t,r,n)=>{e[t]=De(e[t],n.$.node(t,r))},jM=e=>`Value of '+' key must be 'reject', 'delete', or 'ignore' (was ${Se(e)})`,IM="Spread operator may only be used as the first key in an object",EM=e=>typeof e=="symbol"?{kind:"required",normalized:e}:e[e.length-1]==="?"?e[e.length-2]===Bs?{kind:"required",normalized:`${e.slice(0,-2)}?`}:{kind:"optional",normalized:e.slice(0,-1)}:e[0]==="["&&e[e.length-1]==="]"?{kind:"index",normalized:e.slice(1,-1)}:e[0]===Bs&&e[1]==="["&&e[e.length-1]==="]"?{kind:"required",normalized:e.slice(1)}:e==="..."?{kind:"spread"}:e==="+"?{kind:"undeclared"}:{kind:"required",normalized:e==="\\..."?"...":e==="\\+"?"+":e},MM=e=>`Spread operand must resolve to an object literal type (was ${e})`,PM=(e,t)=>BM(e)?E0[e[0]](e,t):zM(e)?I0[e[1]](e,t):null,OM=(e,t)=>t.$.parseOwnDefinitionFormat(e[1],t).keyof(),Zl=(e,t)=>{if(e[2]===void 0)return B(k0(e[1],""));const r=t.$.parseOwnDefinitionFormat(e[0],t),n=t.$.parseOwnDefinitionFormat(e[2],t);if(e[1]==="|")return t.$.node("union",{branches:[r,n]});const i=e[1]==="&"?zr(r,n,t.$):ef(r,n,t.$);return i instanceof te?i.throw():i},AM=(e,t)=>t.$.parseOwnDefinitionFormat(e[0],t).array(),RM=(e,t)=>typeof e[2]!="function"?B(N0("=>",e[2])):t.$.parseOwnDefinitionFormat(e[0],t).pipe(e[2]),N0=(e,t)=>`${e===":"?"Narrow":"Morph"} expression requires a function following '${e}' (was ${typeof t})`,_M=(e,t)=>typeof e[2]!="function"?B(N0(":",e[2])):t.$.parseOwnDefinitionFormat(e[0],t).constrain("predicate",e[2]),TM=(e,t)=>t.$.parseOwnDefinitionFormat(e[0],t).configure(e[2],e[3]),j0=e=>e,LM=j0({"[]":AM,"?":()=>B(v0)}),FM=j0({"|":Zl,"&":Zl,":":_M,"=>":RM,"|>":Zl,"@":TM,"=":()=>B(y0)}),I0={...LM,...FM},zM=e=>I0[e[1]]!==void 0,qM=e=>e,E0=qM({keyof:OM,instanceof:(e,t)=>{if(typeof e[1]!="function")return B(n$(Vc(e[1])));const r=e.slice(1).map(n=>typeof n=="function"?t.$.node("proto",{proto:n}):B(n$(Vc(n))));return r.length===1?r[0]:t.$.node("union",{branches:r})},"===":(e,t)=>t.$.units(e.slice(1))}),BM=e=>E0[e[0]]!==void 0,n$=e=>`Expected a constructor following 'instanceof' operator (was ${e})`,UM=(e,t)=>{let r=[{}],n=0;for(;n<e.length;){let i=!1;e[n]==="..."&&n<e.length-1&&(i=!0,n++);const o=C0(e[n],t),[u,d,h]=mt(o)?o:[o];if(n++,i){if(!u.extends(V.intrinsic.Array))return B(JM(u.expression));r=r.flatMap(m=>u.distribute(g=>QM(pg(m),g)))}else r=r.map(m=>d==="?"?M0(m,u):d==="="?KM(m,u,h):lf(m,u))}return t.$.parseSchema(r.map(i=>$o(i)?{proto:Array,exactLength:0}:{proto:Array,sequence:i}))},lf=(e,t)=>e.defaultables||e.optionals?B(e.variadic?Yg:VM):(e.variadic?e.postfix=De(e.postfix,t):e.prefix=De(e.prefix,t),e),M0=(e,t)=>e.variadic?B(P0):(e.optionals=De(e.optionals,t),e),KM=(e,t,r)=>e.variadic?B(P0):e.optionals?B(HM):(e.defaultables=De(e.defaultables,[[t,r]]),e),i$=(e,t)=>(e.postfix&&B(s$),e.variadic?e.variadic.equals(t)||B(s$):e.variadic=t.internal,e),QM=(e,t)=>{const r=t.select({method:"find",kind:"sequence"});if(!r)return i$(e,V.intrinsic.unknown);if(r.prefix)for(const n of r.prefix)lf(e,n);if(r.optionals)for(const n of r.optionals)M0(e,n);if(r.variadic&&i$(e,r.variadic),r.postfix)for(const n of r.postfix)lf(e,n);return e},JM=e=>`Spread element must be an array (was ${e})`,s$="A tuple may have at most one variadic element",VM="A required element may not follow an optional element",P0="An optional element may not follow a variadic element",HM="A defaultable element may not follow an optional element without a default",Xl={},O0=(e,t)=>{var r;if(typeof e=="string"){if(t.args&&Object.keys(t.args).some(i=>e.includes(i)))return e$(e,t);const n=Xl[r=t.$.name]??(Xl[r]={});return n[e]??(n[e]=e$(e,t))}return Zn(e,"object")?WM(e,t):B(cf(ar(e)))},WM=(e,t)=>{const r=ad(e);switch(r){case void 0:return ne(e,"root")?e:"~standard"in e?GM(e,t):NM(e,t);case"Array":return YM(e,t);case"RegExp":return t.$.node("intersection",{domain:"string",pattern:e},{prereduced:!0});case"Function":{const n=Du(e)?e():e;return ne(n,"root")?n:B(cf("Function"))}default:return B(cf(r??Se(e)))}},GM=(e,t)=>t.$.intrinsic.unknown.pipe((r,n)=>{const i=e["~standard"].validate(r);if(!i.issues)return i.value;for(const{message:o,path:u}of i.issues)u?u.length?n.error({problem:YN(o),relativePath:u.map(d=>typeof d=="object"?d.key:d)}):n.error({message:o}):n.error({message:o})}),YM=(e,t)=>PM(e,t)??UM(e,t),cf=e=>`Type definitions must be strings or objects (was ${e})`;class ZM extends wn{constructor(t){const r=Object.assign({errors:vn,hkt:yr,$:t,raw:t.parse,module:t.constructor.module,scope:t.constructor.scope,declare:t.declare,define:t.define,match:t.match,generic:t.generic,schema:t.schema,keywords:t.ambient,unit:t.unit,enumerated:t.enumerated,instanceOf:t.instanceOf,valueOf:t.valueOf,or:t.or,and:t.and,merge:t.merge,pipe:t.pipe,fn:t.fn},t.ambientAttachments);super((...n)=>{if(n.length===1)return t.parse(n[0]);if(n.length===2&&typeof n[0]=="string"&&n[0][0]==="<"&&n[0][n[0].length-1]===">"){const i=n[0].slice(1,-1),o=t.parseGenericParams(i,{});return new su(o,n[1],t,t,null)}return t.parse(n)},{attach:r})}}const uo=V,Ni=class Ni extends i0{constructor(){super(...arguments);b(this,"unit",r=>this.units([r]));b(this,"valueOf",r=>this.units(TN(r)));b(this,"enumerated",(...r)=>this.units(r));b(this,"instanceOf",r=>this.node("proto",{proto:r},{prereduced:!0}));b(this,"or",(...r)=>this.schema(r.map(n=>this.parse(n))));b(this,"and",(...r)=>r.reduce((n,i)=>n.and(this.parse(i)),this.intrinsic.unknown));b(this,"merge",(...r)=>r.reduce((n,i)=>n.merge(this.parse(i)),this.intrinsic.object));b(this,"pipe",(...r)=>this.intrinsic.unknown.pipe(...r));b(this,"fn",new gM(this));b(this,"match",new kM(this));b(this,"declare",()=>({type:this.type}));b(this,"type",new ZM(this))}get ambientAttachments(){if(uo.typeAttachments)return this.cacheGetter("ambientAttachments",Ce(uo.typeAttachments,(r,n)=>[r,this.bindReference(n)]))}preparseOwnAliasEntry(r,n){var d;const i=r.indexOf("<");if(i===-1){if(ne(n,"module")||ne(n,"generic"))return[r,n];const h=this.name==="ark"?r:r==="root"?this.name:`${this.name}.${r}`,m=(d=this.resolvedConfig.keywords)==null?void 0:d[h];return m&&(n=[n,"@",m]),[r,n]}r[r.length-1]!==">"&&B("'>' must be the last character of a generic declaration in a scope");const o=r.slice(0,i),u=r.slice(i+1,-1);return[o,()=>{const h=this.parseGenericParams(u,{alias:o});return Uj(h,n,this)}]}parseGenericParams(r,n){return uf(new ag(r),[],this.createParseContext({...n,def:r,prefix:"generic"}))}normalizeRootScopeValue(r){return Du(r)&&!ne(r,"generic")?r():r}preparseOwnDefinitionFormat(r,n){return{...n,def:r,prefix:n.alias??"type"}}parseOwnDefinitionFormat(r,n){!(n.alias&&n.alias in this.aliases)&&!n.args&&(n.args={this:n.id});const o=O0(r,n);if(mt(o)){if(o[1]==="=")return B(y0);if(o[1]==="?")return B(v0)}return o}define(r){return r}};b(Ni,"scope",(r,n={})=>new Ni(r,n)),b(Ni,"module",(r,n={})=>Ni.scope(r,n).export());let uu=Ni;const XM=Object.assign(uu.scope,{define:e=>e}),ge=uu;class eP extends yr{constructor(){super(...arguments);b(this,"description",'merge an object\'s properties onto another like `Merge(User, { isAdmin: "true" })`')}}const tP=Br(["base",se.object],["props",se.object])(e=>e.base.merge(e.props),eP),rP=ge.module({Key:se.key,Merge:tP});class nP extends yr{}const iP=Br("element")(e=>{const t=e.element.exclude(se.Array),r=t.array();return t.rawOr(r).pipe(mo).distribute(n=>n.assertHasKind("morph").declareOut(r),Ne)},nP),sP=ge.module({root:se.Array,readonly:"root",index:se.nonNegativeIntegerString,liftFrom:iP},{name:"Array"}),ff=Ne(["string",vo.FileConstructor]),oP=ff.rawOr(ff.array()),o$=Ne({meta:"an object representing parsed form data",domain:"object",index:{signature:"string",value:oP}}),aP=ge.module({root:["instanceof",FormData],value:ff,parsed:o$,parse:Ne({in:FormData,morphs:e=>{const t={};for(const[r,n]of e)if(r in t){const i=t[r];typeof i=="string"||i instanceof vo.FileConstructor?t[r]=[i,n]:i.push(n)}else t[r]=n;return t},declaredOut:o$})},{name:"FormData"}),uP=ge.module({Int8:["instanceof",Int8Array],Uint8:["instanceof",Uint8Array],Uint8Clamped:["instanceof",Uint8ClampedArray],Int16:["instanceof",Int16Array],Uint16:["instanceof",Uint16Array],Int32:["instanceof",Int32Array],Uint32:["instanceof",Uint32Array],Float32:["instanceof",Float32Array],Float64:["instanceof",Float64Array],BigInt64:["instanceof",BigInt64Array],BigUint64:["instanceof",BigUint64Array]},{name:"TypedArray"}),lP={Boolean:1,Number:1,String:1},cP=ge.module({...Ce({...Gy,...Zy},(e,t)=>e in lP?[]:[e,["instanceof",t]]),Array:sP,TypedArray:uP,FormData:aP}),fP=Ne({domain:{domain:"number",meta:"a number representing a Unix timestamp"},divisor:{rule:1,meta:"an integer representing a Unix timestamp"},min:{rule:-864e13,meta:"a Unix timestamp after -8640000000000000"},max:{rule:864e13,meta:"a Unix timestamp before 8640000000000000"},meta:"an integer representing a safe Unix timestamp"}),dP=Ne({domain:"number",divisor:1}),A0=ge.module({root:se.number,integer:dP,epoch:fP,safe:Ne({domain:{domain:"number",numberAllowsNaN:!1},min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER}),NaN:["===",Number.NaN],Infinity:["===",Number.POSITIVE_INFINITY],NegativeInfinity:["===",Number.NEGATIVE_INFINITY]},{name:"number"}),Pe=(e,t,r)=>{const n={domain:"string",pattern:{rule:e.source,flags:e.flags,meta:t}};return r&&(n.meta={format:r}),wd("intersection",n)},a$=Pe(eu,"a well-formed integer string"),R0=ge.module({root:a$,parse:Ne({in:a$,morphs:(e,t)=>{const r=Number.parseInt(e);return Number.isSafeInteger(r)?r:t.error("an integer in the range Number.MIN_SAFE_INTEGER to Number.MAX_SAFE_INTEGER")},declaredOut:se.integer})},{name:"string.integer"}),pP=Pe(/^[\dA-Fa-f]+$/,"hex characters only"),hP=ge.module({root:Pe(/^(?:[\d+/A-Za-z]{4})*(?:[\d+/A-Za-z]{2}==|[\d+/A-Za-z]{3}=)?$/,"base64-encoded"),url:Pe(/^(?:[\w-]{4})*(?:[\w-]{2}(?:==|%3D%3D)?|[\w-]{3}(?:=|%3D)?)?$/,"base64url-encoded")},{name:"string.base64"}),u$=Pe(/^[A-Z].*$/,"capitalized"),mP=ge.module({root:Ne({in:"string",morphs:e=>e.charAt(0).toUpperCase()+e.slice(1),declaredOut:u$}),preformatted:u$},{name:"string.capitalize"}),$P=e=>{const t=e.replace(/[ -]+/g,"");let r=0,n,i,o=!1;for(let u=t.length-1;u>=0;u--)n=t.substring(u,u+1),i=Number.parseInt(n,10),o?(i*=2,r+=i>=10?i%10+1:i):r+=i,o=!o;return!!(r%10===0&&t)},vP=/^(?:4\d{12}(?:\d{3,6})?|5[1-5]\d{14}|(222[1-9]|22[3-9]\d|2[3-6]\d{2}|27[01]\d|2720)\d{12}|6(?:011|5\d\d)\d{12,15}|3[47]\d{13}|3(?:0[0-5]|[68]\d)\d{11}|(?:2131|1800|35\d{3})\d{11}|6[27]\d{14}|^(81\d{14,17}))$/,yP=Ne({domain:"string",pattern:{meta:"a credit card number",rule:vP.source},predicate:{meta:"a credit card number",predicate:$P}}),gP=/^([+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))(T((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([,.]\d+(?!:))?)?(\17[0-5]\d([,.]\d+)?)?([Zz]|([+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,bP=e=>!Number.isNaN(new Date(e).valueOf()),l$=Ne({domain:"string",predicate:{meta:"a parsable date",predicate:bP}}).assertHasKind("intersection"),c$=R0.root.internal.narrow((e,t)=>{const r=Number.parseInt(e),n=A0.epoch(r);return n instanceof vn?(t.errors.merge(n),!1):!0}).configure({description:"an integer string representing a safe Unix timestamp"},"self").assertHasKind("intersection"),wP=ge.module({root:c$,parse:Ne({in:c$,morphs:e=>new Date(e),declaredOut:se.Date})},{name:"string.date.epoch"}),f$=Pe(gP,"an ISO 8601 (YYYY-MM-DDTHH:mm:ss.sssZ) date").internal.assertHasKind("intersection"),kP=ge.module({root:f$,parse:Ne({in:f$,morphs:e=>new Date(e),declaredOut:se.Date})},{name:"string.date.iso"}),SP=ge.module({root:l$,parse:Ne({declaredIn:l$,in:"string",morphs:(e,t)=>{const r=new Date(e);return Number.isNaN(r.valueOf())?t.error("a parsable date"):r},declaredOut:se.Date}),iso:kP,epoch:wP},{name:"string.date"}),xP=Pe(/^[\w%+.-]+@[\d.A-Za-z-]+\.[A-Za-z]{2,}$/,"an email address","email"),d$="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",Gr=`(${d$}[.]){3}${d$}`,DP=new RegExp(`^${Gr}$`),Je="(?:[0-9a-fA-F]{1,4})",CP=new RegExp(`^((?:${Je}:){7}(?:${Je}|:)|(?:${Je}:){6}(?:${Gr}|:${Je}|:)|(?:${Je}:){5}(?::${Gr}|(:${Je}){1,2}|:)|(?:${Je}:){4}(?:(:${Je}){0,1}:${Gr}|(:${Je}){1,3}|:)|(?:${Je}:){3}(?:(:${Je}){0,2}:${Gr}|(:${Je}){1,4}|:)|(?:${Je}:){2}(?:(:${Je}){0,3}:${Gr}|(:${Je}){1,5}|:)|(?:${Je}:){1}(?:(:${Je}){0,4}:${Gr}|(:${Je}){1,6}|:)|(?::((?::${Je}){0,5}:${Gr}|(?::${Je}){1,7}|:)))(%[0-9a-zA-Z.]{1,})?$`),NP=ge.module({root:["v4 | v6","@","an IP address"],v4:Pe(DP,"an IPv4 address","ipv4"),v6:Pe(CP,"an IPv6 address","ipv6")},{name:"string.ip"}),Ri="a JSON string",_0=e=>{if(!(e instanceof SyntaxError))throw e;return`must be ${Ri} (${e})`},jP=Ne({meta:Ri,domain:"string",predicate:{meta:Ri,predicate:(e,t)=>{try{return JSON.parse(e),!0}catch(r){return t.reject({code:"predicate",expected:Ri,problem:_0(r)})}}}}),IP=(e,t)=>{if(e.length===0)return t.error({code:"predicate",expected:Ri,actual:"empty"});try{return JSON.parse(e)}catch(r){return t.error({code:"predicate",expected:Ri,problem:_0(r)})}},EP=ge.module({root:jP,parse:Ne({meta:"safe JSON string parser",in:"string",morphs:IP,declaredOut:se.jsonObject})},{name:"string.json"}),p$=Pe(/^[a-z]*$/,"only lowercase letters"),MP=ge.module({root:Ne({in:"string",morphs:e=>e.toLowerCase(),declaredOut:p$}),preformatted:p$},{name:"string.lower"}),T0=["NFC","NFD","NFKC","NFKD"],So=Ce(T0,(e,t)=>[t,Ne({domain:"string",predicate:r=>r.normalize(t)===r,meta:`${t}-normalized unicode`})]),Ou=Ce(T0,(e,t)=>[t,Ne({in:"string",morphs:r=>r.normalize(t),declaredOut:So[t]})]),PP=ge.module({root:Ou.NFC,preformatted:So.NFC},{name:"string.normalize.NFC"}),OP=ge.module({root:Ou.NFD,preformatted:So.NFD},{name:"string.normalize.NFD"}),AP=ge.module({root:Ou.NFKC,preformatted:So.NFKC},{name:"string.normalize.NFKC"}),RP=ge.module({root:Ou.NFKD,preformatted:So.NFKD},{name:"string.normalize.NFKD"}),_P=ge.module({root:"NFC",NFC:PP,NFD:OP,NFKC:AP,NFKD:RP},{name:"string.normalize"}),h$=Pe(Hc,"a well-formed numeric string"),TP=ge.module({root:h$,parse:Ne({in:h$,morphs:e=>Number.parseFloat(e),declaredOut:se.number})},{name:"string.numeric"}),m$="a regex pattern",LP=Ne({domain:"string",predicate:{meta:m$,predicate:(e,t)=>{try{return new RegExp(e),!0}catch(r){return t.reject({code:"predicate",expected:m$,problem:String(r)})}}},meta:{format:"regex"}}),FP=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[A-Za-z-][\dA-Za-z-]*)(?:\.(?:0|[1-9]\d*|\d*[A-Za-z-][\dA-Za-z-]*))*))?(?:\+([\dA-Za-z-]+(?:\.[\dA-Za-z-]+)*))?$/,zP=Pe(FP,"a semantic version (see https://semver.org/)"),$$=Pe(/^\S.*\S$|^\S?$/,"trimmed"),qP=ge.module({root:Ne({in:"string",morphs:e=>e.trim(),declaredOut:$$}),preformatted:$$},{name:"string.trim"}),v$=Pe(/^[A-Z]*$/,"only uppercase letters"),BP=ge.module({root:Ne({in:"string",morphs:e=>e.toUpperCase(),declaredOut:v$}),preformatted:v$},{name:"string.upper"}),UP=e=>URL.canParse(e),y$=Ne({domain:"string",predicate:{meta:"a URL string",predicate:UP},meta:{format:"uri"}}),KP=ge.module({root:y$,parse:Ne({declaredIn:y$,in:"string",morphs:(e,t)=>{try{return new URL(e)}catch{return t.error("a URL string")}},declaredOut:Ne(URL)})},{name:"string.url"}),QP=ge.module({root:["versioned | nil | max","@",{description:"a UUID",format:"uuid"}],"#nil":"'00000000-0000-0000-0000-000000000000'","#max":"'ffffffff-ffff-ffff-ffff-ffffffffffff'","#versioned":/[\da-f]{8}-[\da-f]{4}-[1-8][\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}/i,v1:Pe(/^[\da-f]{8}-[\da-f]{4}-1[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv1"),v2:Pe(/^[\da-f]{8}-[\da-f]{4}-2[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv2"),v3:Pe(/^[\da-f]{8}-[\da-f]{4}-3[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv3"),v4:Pe(/^[\da-f]{8}-[\da-f]{4}-4[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv4"),v5:Pe(/^[\da-f]{8}-[\da-f]{4}-5[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv5"),v6:Pe(/^[\da-f]{8}-[\da-f]{4}-6[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv6"),v7:Pe(/^[\da-f]{8}-[\da-f]{4}-7[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv7"),v8:Pe(/^[\da-f]{8}-[\da-f]{4}-8[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv8")},{name:"string.uuid"}),JP=ge.module({root:se.string,alpha:Pe(/^[A-Za-z]*$/,"only letters"),alphanumeric:Pe(/^[\dA-Za-z]*$/,"only letters and digits 0-9"),hex:pP,base64:hP,capitalize:mP,creditCard:yP,date:SP,digits:Pe(/^\d*$/,"only digits 0-9"),email:xP,integer:R0,ip:NP,json:EP,lower:MP,normalize:_P,numeric:TP,regex:LP,semver:zP,trim:qP,upper:BP,url:KP,uuid:QP},{name:"string"}),VP=ge.module({bigint:se.bigint,boolean:se.boolean,false:se.false,never:se.never,null:se.null,number:se.number,object:se.object,string:se.string,symbol:se.symbol,true:se.true,unknown:se.unknown,undefined:se.undefined}),HP=ge.module({root:se.unknown,any:se.unknown},{name:"unknown"}),WP=ge.module({root:se.jsonObject,stringify:wd("morph",{in:se.jsonObject,morphs:e=>JSON.stringify(e),declaredOut:se.string})},{name:"object.json"}),GP=ge.module({root:se.object,json:WP},{name:"object"});class YP extends yr{constructor(){super(...arguments);b(this,"description",'instantiate an object from an index signature and corresponding value type like `Record("string", "number")`')}}const ZP=Br(["K",se.key],"V")(e=>({domain:"object",index:{signature:e.K,value:e.V}}),YP);class XP extends yr{constructor(){super(...arguments);b(this,"description",'pick a set of properties from an object like `Pick(User, "name | age")`')}}const eO=Br(["T",se.object],["K",se.key])(e=>e.T.pick(e.K),XP);class tO extends yr{constructor(){super(...arguments);b(this,"description",'omit a set of properties from an object like `Omit(User, "age")`')}}const rO=Br(["T",se.object],["K",se.key])(e=>e.T.omit(e.K),tO);class nO extends yr{constructor(){super(...arguments);b(this,"description","make all named properties of an object optional like `Partial(User)`")}}const iO=Br(["T",se.object])(e=>e.T.partial(),nO);class sO extends yr{constructor(){super(...arguments);b(this,"description","make all named properties of an object required like `Required(User)`")}}const oO=Br(["T",se.object])(e=>e.T.required(),sO);class aO extends yr{constructor(){super(...arguments);b(this,"description",'exclude branches of a union like `Exclude("boolean", "true")`')}}const uO=Br("T","U")(e=>e.T.exclude(e.U),aO);class lO extends yr{constructor(){super(...arguments);b(this,"description",'extract branches of a union like `Extract("0 | false | 1", "number")`')}}const cO=Br("T","U")(e=>e.T.extract(e.U),lO),fO=ge.module({Exclude:uO,Extract:cO,Omit:rO,Partial:iO,Pick:eO,Record:ZP,Required:oO}),kn=XM({...VP,...fO,...cP,...rP,string:JP,number:A0,object:GP,unknown:HP},{prereducedAliases:!0,name:"ark"}),et=kn.export();Object.assign(uo.ambient,et);uo.typeAttachments={string:et.string.root,number:et.number.root,bigint:et.bigint,boolean:et.boolean,symbol:et.symbol,undefined:et.undefined,null:et.null,object:et.object.root,unknown:et.unknown.root,false:et.false,true:et.true,never:et.never,arrayIndex:et.Array.index,Key:et.Key,Record:et.Record,Array:et.Array.root,Date:et.Date};const Ur=Object.assign(kn.type,uo.typeAttachments);kn.match;kn.fn;kn.generic;kn.schema;kn.define;kn.declare;const xd=Ur("number").pipe(e=>new Date(e*1e3)),L0=Ur("boolean").or("number").pipe(e=>typeof e=="number"?e!==0:e),dO=Ur({userId:"number",role:"string"}),pO=Ur({}),g$={user:{id:!0,name:!0,email:!0,createdAt:!0,posts:{id:!0,title:!0,content:!0,published:!0,createdAt:!0}},post:{id:!0,title:!0,content:!0,published:!0,createdAt:!0,authorUserId:!0,users:{id:!0,name:!0,email:!0}}},hO=Ur({id:"number",title:"string",content:"string",published:L0,createdAt:xd}),mO=Ur({id:"number",name:"string | null",email:"string | null",createdAt:xd,posts:hO.array()}),$O=Ur({id:"number",name:"string | null",email:"string | null"}),vO=Ur({id:"number",title:"string",content:"string",published:L0,createdAt:xd,authorUserId:"number",users:$O.or("null")}),yO=Ur({user:mO.array(),post:vO.array()}),gO={id:"40c6d28ff9e87d82dc765286575586ec6fd57d8ab03e7f3f5e3ba7cc969ff2a0",operation:"query",session_args:["userId"],InputValidator:pO,SessionValidator:dO,ReturnData:yO,queryShape:g$,toQueryShape:e=>g$};function bO({client:e,isSelected:t,onSelect:r}){const[n,i]=me.useState({user:null,posts:[]});me.useEffect(()=>{if(!e.pyreClient||!e.connected){i({user:null,posts:[]});return}const u=e.pyreClient.run(gO,{},d=>{var c;const h=e.userId||e.requestedUserId||0,m=((c=d.user)==null?void 0:c.find(v=>v.id===h))||null,g=d.post||[];i({user:m,posts:g})});return()=>{u&&typeof u=="object"&&"unsubscribe"in u&&u.unsubscribe()}},[e.pyreClient,e.connected,e.userId,e.requestedUserId]);const o=()=>{var u,d;return(u=n.user)!=null&&u.name?n.user.name:(d=n.user)!=null&&d.email?n.user.email:e.name};return L.jsxs("div",{className:"clients-client-wrapper",children:[L.jsxs("div",{className:"clients-client-name",children:[o()," ",L.jsxs("span",{className:"clients-client-id",children:["(",e.userId??e.requestedUserId??e.id,")"]})]}),L.jsx("div",{className:`clients-client-card ${t?"selected":""}`,onClick:r,children:L.jsx("div",{className:"clients-posts-grid",children:n.posts.length===0?L.jsx("div",{className:"clients-empty",children:"No posts"}):n.posts.map(u=>L.jsxs("div",{className:`clients-post-card ${u.published?"":"unpublished"}`,children:[L.jsx("div",{className:"clients-post-title",children:u.title||"Untitled"}),L.jsx("div",{className:"clients-post-content",children:u.content||""})]},u.id))})})]})}function wO({clients:e,selectedClientId:t,onSelectClient:r,onAddClient:n}){return L.jsxs("div",{className:"clients",children:[L.jsx("h2",{children:"Clients"}),L.jsxs("div",{className:"clients-grid",children:[e.map(i=>L.jsx(bO,{client:i,isSelected:t===i.id,onSelect:()=>r(i.id)},i.id)),L.jsx("div",{className:"clients-client-wrapper clients-add-client-wrapper",children:L.jsx("div",{className:"clients-add-client-card",onClick:n,children:L.jsx("div",{className:"clients-add-client-text",children:"Add client"})})})]})]})}async function kO(){try{const e=await fetch("http://localhost:3000/queries");if(!e.ok)throw new Error(`Failed to fetch queries: ${e.statusText}`);return await e.json()}catch(e){return console.error("Failed to discover queries:",e),[]}}function SO(e){if(!e)throw new Error("Elm scope is required");return function(t){function r(s,a,l){return l.a=s,l.f=a,l}function n(s){return r(2,s,function(a){return function(l){return s(a,l)}})}function i(s){return r(3,s,function(a){return function(l){return function(f){return s(a,l,f)}}})}function o(s){return r(4,s,function(a){return function(l){return function(f){return function(p){return s(a,l,f,p)}}}})}function u(s){return r(5,s,function(a){return function(l){return function(f){return function(p){return function($){return s(a,l,f,p,$)}}}}})}function d(s){return r(6,s,function(a){return function(l){return function(f){return function(p){return function($){return function(y){return s(a,l,f,p,$,y)}}}}}})}function h(s){return r(7,s,function(a){return function(l){return function(f){return function(p){return function($){return function(y){return function(w){return s(a,l,f,p,$,y,w)}}}}}}})}function m(s){return r(8,s,function(a){return function(l){return function(f){return function(p){return function($){return function(y){return function(w){return function(D){return s(a,l,f,p,$,y,w,D)}}}}}}}})}function g(s){return r(9,s,function(a){return function(l){return function(f){return function(p){return function($){return function(y){return function(w){return function(D){return function(N){return s(a,l,f,p,$,y,w,D,N)}}}}}}}}})}function c(s,a,l){return s.a===2?s.f(a,l):s(a)(l)}function v(s,a,l,f){return s.a===3?s.f(a,l,f):s(a)(l)(f)}function j(s,a,l,f,p){return s.a===4?s.f(a,l,f,p):s(a)(l)(f)(p)}function C(s,a,l,f,p,$){return s.a===5?s.f(a,l,f,p,$):s(a)(l)(f)(p)($)}function T(s,a,l,f,p,$,y){return s.a===6?s.f(a,l,f,p,$,y):s(a)(l)(f)(p)($)(y)}function H(s,a,l,f,p,$,y,w){return s.a===7?s.f(a,l,f,p,$,y,w):s(a)(l)(f)(p)($)(y)(w)}var S=[];function k(s){return s.length}var x=i(function(s,a,l){for(var f=new Array(s),p=0;p<s;p++)f[p]=l(a+p);return f}),E=n(function(s,a){for(var l=new Array(s),f=0;f<s&&a.b;f++)l[f]=a.a,a=a.b;return l.length=f,I(l,a)});n(function(s,a){return a[s]}),i(function(s,a,l){for(var f=l.length,p=new Array(f),$=0;$<f;$++)p[$]=l[$];return p[s]=a,p}),n(function(s,a){for(var l=a.length,f=new Array(l+1),p=0;p<l;p++)f[p]=a[p];return f[l]=s,f}),i(function(s,a,l){for(var f=l.length,p=0;p<f;p++)a=c(s,l[p],a);return a});var O=i(function(s,a,l){for(var f=l.length-1;f>=0;f--)a=c(s,l[f],a);return a});n(function(s,a){for(var l=a.length,f=new Array(l),p=0;p<l;p++)f[p]=s(a[p]);return f}),i(function(s,a,l){for(var f=l.length,p=new Array(f),$=0;$<f;$++)p[$]=c(s,a+$,l[$]);return p}),i(function(s,a,l){return l.slice(s,a)}),i(function(s,a,l){var f=a.length,p=s-f;p>l.length&&(p=l.length);for(var $=f+p,y=new Array($),w=0;w<f;w++)y[w]=a[w];for(var w=0;w<p;w++)y[w+f]=l[w];return y}),n(function(s,a){return a}),n(function(s,a){return console.log(s+": "+F()),a});function F(s){return"<internals>"}function Q(s){throw new Error("https://github.com/elm/core/blob/1.0.0/hints/"+s+".md")}function z(s,a){for(var l,f=[],p=$e(s,a,0,f);p&&(l=f.pop());p=$e(l.a,l.b,0,f));return p}function $e(s,a,l,f){if(s===a)return!0;if(typeof s!="object"||s===null||a===null)return typeof s=="function"&&Q(5),!1;if(l>100)return f.push(I(s,a)),!0;s.$<0&&(s=Eo(s),a=Eo(a));for(var p in s)if(!$e(s[p],a[p],l+1,f))return!1;return!0}n(z),n(function(s,a){return!z(s,a)});function ee(s,a,l){if(typeof s!="object")return s===a?0:s<a?-1:1;if(typeof s.$>"u")return(l=ee(s.a,a.a))||(l=ee(s.b,a.b))?l:ee(s.c,a.c);for(;s.b&&a.b&&!(l=ee(s.a,a.a));s=s.b,a=a.b);return l||(s.b?1:a.b?-1:0)}n(function(s,a){return ee(s,a)<0}),n(function(s,a){return ee(s,a)<1}),n(function(s,a){return ee(s,a)>0}),n(function(s,a){return ee(s,a)>=0});var Ze=n(function(s,a){var l=ee(s,a);return l<0?Td:l?tw:_d}),ve=0;function I(s,a){return{a:s,b:a}}function ts(s,a,l){return{a:s,b:a,c:l}}function Dd(s){return s}function ae(s,a){var l={};for(var f in s)l[f]=s[f];for(var f in a)l[f]=a[f];return l}n(it);function it(s,a){if(typeof s=="string")return s+a;if(!s.b)return a;var l=re(s.a,a);s=s.b;for(var f=l;s.b;s=s.b)f=f.b=re(s.a,a);return l}var A={$:0};function re(s,a){return{$:1,a:s,b:a}}var le=n(re);function U(s){for(var a=A,l=s.length;l--;)a=re(s[l],a);return a}function ze(s){for(var a=[];s.b;s=s.b)a.push(s.a);return a}var Xn=i(function(s,a,l){for(var f=[];a.b&&l.b;a=a.b,l=l.b)f.push(c(s,a.a,l.a));return U(f)});o(function(s,a,l,f){for(var p=[];a.b&&l.b&&f.b;a=a.b,l=l.b,f=f.b)p.push(v(s,a.a,l.a,f.a));return U(p)}),u(function(s,a,l,f,p){for(var $=[];a.b&&l.b&&f.b&&p.b;a=a.b,l=l.b,f=f.b,p=p.b)$.push(j(s,a.a,l.a,f.a,p.a));return U($)}),d(function(s,a,l,f,p,$){for(var y=[];a.b&&l.b&&f.b&&p.b&&$.b;a=a.b,l=l.b,f=f.b,p=p.b,$=$.b)y.push(C(s,a.a,l.a,f.a,p.a,$.a));return U(y)}),n(function(s,a){return U(ze(a).sort(function(l,f){return ee(s(l),s(f))}))});var gr=n(function(s,a){return U(ze(a).sort(function(l,f){var p=c(s,l,f);return p===_d?0:p===Td?-1:1}))});n(function(s,a){return s+a}),n(function(s,a){return s-a}),n(function(s,a){return s*a}),n(function(s,a){return s/a}),n(function(s,a){return s/a|0}),n(Math.pow),n(function(s,a){return a%s}),n(function(s,a){var l=a%s;return s===0?Q(11):l>0&&s<0||l<0&&s>0?l+s:l}),n(Math.atan2);var rs=Math.ceil,br=Math.floor,Sn=Math.log;function q0(s){return!s}n(function(s,a){return s&&a}),n(function(s,a){return s||a}),n(function(s,a){return s!==a}),n(function(s,a){return s+a});function B0(s){var a=s.charCodeAt(0);return isNaN(a)?K:Y(55296<=a&&a<=56319?I(s[0]+s[1],s.slice(2)):I(s[0],s.slice(1)))}n(function(s,a){return s+a}),n(function(s,a){for(var l=a.length,f=new Array(l),p=0;p<l;){var $=a.charCodeAt(p);if(55296<=$&&$<=56319){f[p]=s(a[p]+a[p+1]),p+=2;continue}f[p]=s(a[p]),p++}return f.join("")}),n(function(s,a){for(var l=[],f=a.length,p=0;p<f;){var $=a[p],y=a.charCodeAt(p);p++,55296<=y&&y<=56319&&($+=a[p],p++),s($)&&l.push($)}return l.join("")}),i(function(s,a,l){for(var f=l.length,p=0;p<f;){var $=l[p],y=l.charCodeAt(p);p++,55296<=y&&y<=56319&&($+=l[p],p++),a=c(s,$,a)}return a}),i(function(s,a,l){for(var f=l.length;f--;){var p=l[f],$=l.charCodeAt(f);56320<=$&&$<=57343&&(f--,p=l[f]+p),a=c(s,p,a)}return a});var U0=n(function(s,a){return a.split(s)}),K0=n(function(s,a){return a.join(s)});i(function(s,a,l){return l.slice(s,a)});function Q0(s){return s.toLowerCase()}n(function(s,a){for(var l=a.length;l--;){var f=a[l],p=a.charCodeAt(l);if(56320<=p&&p<=57343&&(l--,f=a[l]+f),s(f))return!0}return!1});var J0=n(function(s,a){for(var l=a.length;l--;){var f=a[l],p=a.charCodeAt(l);if(56320<=p&&p<=57343&&(l--,f=a[l]+f),!s(f))return!1}return!0});n(function(s,a){return a.indexOf(s)>-1}),n(function(s,a){return a.indexOf(s)===0}),n(function(s,a){return a.length>=s.length&&a.lastIndexOf(s)===a.length-s.length}),n(function(s,a){var l=s.length;if(l<1)return A;for(var f=0,p=[];(f=a.indexOf(s,f))>-1;)p.push(f),f=f+l;return U(p)});function V0(s){return s+""}function H0(s){if(s.length===0||/[\sxbo]/.test(s))return K;var a=+s;return a===a?Y(a):K}function W0(s){var a=s.charCodeAt(0);return 55296<=a&&a<=56319?(a-55296)*1024+s.charCodeAt(1)-56320+65536:a}function G0(s){return{$:0,a:s}}function Y0(s){return{$:1,a:s}}function ns(s){return{$:2,b:s}}var Z0=ns(function(s){return typeof s!="number"?Lt("an INT",s):-2147483647<s&&s<2147483647&&(s|0)===s||isFinite(s)&&!(s%1)?Xe(s):Lt("an INT",s)}),X0=ns(function(s){return typeof s=="boolean"?Xe(s):Lt("a BOOL",s)}),eb=ns(function(s){return typeof s=="number"?Xe(s):Lt("a FLOAT",s)}),tb=ns(function(s){return Xe(s)}),rb=ns(function(s){return typeof s=="string"?Xe(s):s instanceof String?Xe(s+""):Lt("a STRING",s)});function nb(s){return{$:3,b:s}}function ib(s){return{$:5,c:s}}var sb=n(function(s,a){return{$:6,d:s,b:a}}),ob=n(function(s,a){return{$:7,e:s,b:a}});function ab(s){return{$:8,b:s}}function Kr(s,a){return{$:9,f:s,g:a}}var ub=n(function(s,a){return{$:10,b:a,h:s}});function lb(s){return{$:11,g:s}}var cb=n(function(s,a){return Kr(s,[a])}),fb=i(function(s,a,l){return Kr(s,[a,l])}),db=o(function(s,a,l,f){return Kr(s,[a,l,f])}),pb=u(function(s,a,l,f,p){return Kr(s,[a,l,f,p])}),hb=d(function(s,a,l,f,p,$){return Kr(s,[a,l,f,p,$])});h(function(s,a,l,f,p,$,y){return Kr(s,[a,l,f,p,$,y])}),m(function(s,a,l,f,p,$,y,w){return Kr(s,[a,l,f,p,$,y,w])}),g(function(s,a,l,f,p,$,y,w,D){return Kr(s,[a,l,f,p,$,y,w,D])});var mb=n(function(s,a){try{var l=JSON.parse(a);return ur(s,l)}catch(f){return qe(c(qu,"This is not valid JSON! "+f.message,a))}}),Au=n(function(s,a){return ur(s,a)});function ur(s,a){switch(s.$){case 2:return s.b(a);case 5:return a===null?Xe(s.c):Lt("null",a);case 3:return xo(a)?Cd(s.b,a,U):Lt("a LIST",a);case 4:return xo(a)?Cd(s.b,a,$b):Lt("an ARRAY",a);case 6:var l=s.d;if(typeof a!="object"||a===null||!(l in a))return Lt("an OBJECT with a field named `"+l+"`",a);var N=ur(s.b,a[l]);return kr(N)?N:qe(c(Ld,l,N.a));case 7:var f=s.e;if(!xo(a))return Lt("an ARRAY",a);if(f>=a.length)return Lt("a LONGER array. Need index "+f+" but only see "+a.length+" entries",a);var N=ur(s.b,a[f]);return kr(N)?N:qe(c(Fd,f,N.a));case 8:if(typeof a!="object"||a===null||xo(a))return Lt("an OBJECT",a);var p=A;for(var $ in a)if(Object.prototype.hasOwnProperty.call(a,$)){var N=ur(s.b,a[$]);if(!kr(N))return qe(c(Ld,$,N.a));p=re(I($,N.a),p)}return Xe(lr(p));case 9:for(var y=s.f,w=s.g,D=0;D<w.length;D++){var N=ur(w[D],a);if(!kr(N))return N;y=y(N.a)}return Xe(y);case 10:var N=ur(s.b,a);return kr(N)?ur(s.h(N.a),a):N;case 11:for(var R=A,P=s.g;P.b;P=P.b){var N=ur(P.a,a);if(kr(N))return N;R=re(N.a,R)}return qe(iw(lr(R)));case 1:return qe(c(qu,s.a,a));case 0:return Xe(s.a)}}function Cd(s,a,l){for(var f=a.length,p=new Array(f),$=0;$<f;$++){var y=ur(s,a[$]);if(!kr(y))return qe(c(Fd,$,y.a));p[$]=y.a}return Xe(l(p))}function xo(s){return Array.isArray(s)||typeof FileList<"u"&&s instanceof FileList}function $b(s){return c(kw,s.length,function(a){return s[a]})}function Lt(s,a){return qe(c(qu,"Expecting "+s,a))}var vb=n(function(s,a){return JSON.stringify(a,null,s)+""});function Do(s){return s}function zO(s){return s}function yb(){return[]}function Nd(){return{}}var jd=i(function(s,a,l){var f=a;return s==="toJSON"&&typeof f=="function"||(l[s]=f),l});function gb(s){return n(function(a,l){return l.push(s(a)),l})}var bb=null;function xn(s){return{$:0,a:s}}function ei(s){return{$:2,b:s,c:null}}var Ru=n(function(s,a){return{$:3,b:s,d:a}});n(function(s,a){return{$:4,b:s,d:a}});function wb(s){return{$:5,b:s}}var kb=0;function Co(s){var a={$:0,e:kb++,f:s,g:null,h:[]};return Tu(a),a}function Sb(s){return ei(function(a){a(xn(Co(s)))})}function Id(s,a){s.h.push(a),Tu(s)}var xb=n(function(s,a){return ei(function(l){Id(s,a),l(xn(ve))})});function Db(s){return ei(function(a){var l=s.f;l.$===2&&l.c&&l.c(),s.f=null,a(xn(ve))})}var _u=!1,Ed=[];function Tu(s){if(Ed.push(s),!_u){for(_u=!0;s=Ed.shift();)Cb(s);_u=!1}}function Cb(s){for(;s.f;){var a=s.f.$;if(a===0||a===1){for(;s.g&&s.g.$!==a;)s.g=s.g.i;if(!s.g)return;s.f=s.g.b(s.f.a),s.g=s.g.i}else if(a===2){s.f.c=s.f.b(function(l){s.f=l,Tu(s)});return}else if(a===5){if(s.h.length===0)return;s.f=s.f.b(s.h.shift())}else s.g={$:a===3?0:1,b:s.f.b,i:s.g},s.f=s.f.d}}function Nb(s){return ei(function(a){var l=setTimeout(function(){a(xn(ve))},s);return function(){clearTimeout(l)}})}var jb=o(function(s,a,l,f){return Ib(a,f,s.bU,s.ct,s.l,function(){return function(){}})});function Ib(s,a,l,f,p,$){var y=c(Au,s,a?a.flags:void 0);kr(y)||Q(2);var w={},D=l(y.a),N=D.a,R=$(M,N),P=Eb(w,M);function M(_,J){var G=c(f,_,N);R(N=G.a,J),Od(w,G.b,p(N))}return Od(w,D.b,p(N)),P?{ports:P}:{}}var xt={};function Eb(s,a){var l;for(var f in xt){var p=xt[f];p.a&&(l=l||{},l[f]=p.a(f,a)),s[f]=Pb(p,a)}return l}function Mb(s,a,l,f,p){return{b:s,c:a,d:l,e:f,f:p}}function Pb(s,a){var l={g:a,h:void 0},f=s.c,p=s.d,$=s.e,y=s.f;function w(D){return c(Ru,w,wb(function(N){var R=N.a;return N.$===0?v(p,l,R,D):$&&y?j(f,l,R.i,R.j,D):v(f,l,$?R.i:R.j,D)}))}return l.h=Co(c(Ru,w,s.b))}var Ob=n(function(s,a){return ei(function(l){s.g(a),l(xn(ve))})}),Ab=n(function(s,a){return c(xb,s.h,{$:0,a})});function Lu(s){return function(a){return{$:1,k:s,l:a}}}function Md(s){return{$:2,m:s}}var Rb=n(function(s,a){return{$:3,n:s,o:a}}),Pd=[],Fu=!1;function Od(s,a,l){if(Pd.push({p:s,q:a,r:l}),!Fu){Fu=!0;for(var f;f=Pd.shift();)_b(f.p,f.q,f.r);Fu=!1}}function _b(s,a,l){var f={};No(!0,a,f,null),No(!1,l,f,null);for(var p in s)Id(s[p],{$:"fx",a:f[p]||{i:A,j:A}})}function No(s,a,l,f){switch(a.$){case 1:var p=a.k,$=Tb(s,p,f,a.l);l[p]=Lb(s,$,l[p]);return;case 2:for(var y=a.m;y.b;y=y.b)No(s,y.a,l,f);return;case 3:No(s,a.o,l,{s:a.n,t:f});return}}function Tb(s,a,l,f){function p(y){for(var w=l;w;w=w.t)y=w.s(y);return y}var $=s?xt[a].e:xt[a].f;return c($,p,f)}function Lb(s,a,l){return l=l||{i:A,j:A},s?l.i=re(a,l.i):l.j=re(a,l.j),l}function Ad(s){xt[s]&&Q(3)}function ti(s,a){return Ad(s),xt[s]={e:Fb,u:a,a:zb},Lu(s)}var Fb=n(function(s,a){return a});function zb(s){var a=[],l=xt[s].u,f=Nb(0);xt[s].b=f,xt[s].c=i(function(y,w,D){for(;w.b;w=w.b)for(var N=a,R=l(w.a),P=0;P<N.length;P++)N[P](R);return f});function p(y){a.push(y)}function $(y){a=a.slice();var w=a.indexOf(y);w>=0&&a.splice(w,1)}return{subscribe:p,unsubscribe:$}}function is(s,a){return Ad(s),xt[s]={f:qb,u:a,a:Bb},Lu(s)}var qb=n(function(s,a){return function(l){return s(a(l))}});function Bb(s,a){var l=A,f=xt[s].u,p=xn(null);xt[s].b=p,xt[s].c=i(function(y,w,D){return l=w,p});function $(y){var w=c(Au,f,y);kr(w)||Q(4,s,w.a);for(var D=w.a,N=l;N.b;N=N.b)a(N.a(D))}return{send:$}}function Ub(s){t.Elm?Rd(t.Elm,s):t.Elm=s}function Rd(s,a){for(var l in a)l in s?l=="init"?Q(6):Rd(s[l],a[l]):s[l]=a[l]}function Kb(s){return encodeURIComponent(s)}var Qb=i(function(s,a,l){return ei(function(f){function p(y){f(a(l.bL.a(y)))}var $=new XMLHttpRequest;$.addEventListener("error",function(){p(sx)}),$.addEventListener("timeout",function(){p(ux)}),$.addEventListener("load",function(){p(Vb(l.bL.b,$))}),Yp(l.cq)&&ew(s,$,l.cq.a);try{$.open(l.b_,l.cu,!0)}catch{return p(nx(l.cu))}return Jb($,l),l.bD.a&&$.setRequestHeader("Content-Type",l.bD.a),$.send(l.bD.b),function(){$.c=!0,$.abort()}})});function Jb(s,a){for(var l=a.bR;l.b;l=l.b)s.setRequestHeader(l.a.a,l.a.b);s.timeout=a.co.a||0,s.responseType=a.bL.d,s.withCredentials=a.bA}function Vb(s,a){return c(200<=a.status&&a.status<300?ix:rx,Hb(a),s(a.response))}function Hb(s){return{cu:s.responseURL,cj:s.status,ck:s.statusText,bR:Wb(s.getAllResponseHeaders())}}function Wb(s){if(!s)return Ie;for(var a=Ie,l=s.split(`\r
`),f=l.length;f--;){var p=l[f],$=p.indexOf(": ");if($>0){var y=p.substring(0,$),w=p.substring($+2);a=v(ml,y,function(D){return Y(Yp(D)?w+", "+D.a:w)},a)}}return a}var Gb=i(function(s,a,l){return{$:0,d:s,b:a,a:l}}),Yb=n(function(s,a){return{$:0,d:a.d,b:a.b,a:function(l){return s(a.a(l))}}}),Zb={$:0},Xb=n(function(s,a){return{$:0,a:s,b:a}});n(function(s,a){return new Blob([a],{type:s})});function ew(s,a,l){a.upload.addEventListener("progress",function(f){a.c||Co(c(Zp,s,I(l,ax({ci:f.loaded,bm:f.total}))))}),a.addEventListener("progress",function(f){a.c||Co(c(Zp,s,I(l,ox({cc:f.loaded,bm:f.lengthComputable?Y(f.total):K}))))})}var de=le,jo=O;i(function(s,a,l){var f=l.c,p=l.d,$=n(function(y,w){if(y.$){var N=y.a;return v(jo,s,w,N)}else{var D=y.a;return v(jo,$,w,D)}});return v(jo,$,v(jo,s,a,p),f)});var Io=i(function(s,a,l){e:for(;;){if(l.$===-2)return a;var f=l.b,p=l.c,$=l.d,y=l.e,w=s,D=v(s,f,p,v(Io,s,a,y)),N=$;s=w,a=D,l=N;continue e}}),Eo=function(s){return v(Io,i(function(a,l,f){return c(de,I(a,l),f)}),A,s)},zu=function(s){return v(Io,i(function(a,l,f){return c(de,a,f)}),A,s)},_d=1,tw=2,Td=0,rw=i(function(s,a,l){return{aB:l,q:s,av:a}}),nw=function(s){return{aN:s}},qe=function(s){return{$:1,a:s}},qu=n(function(s,a){return{$:3,a:s,b:a}}),Ld=n(function(s,a){return{$:0,a:s,b:a}}),Fd=n(function(s,a){return{$:1,a:s,b:a}}),Xe=function(s){return{$:0,a:s}},iw=function(s){return{$:2,a:s}},Y=function(s){return{$:0,a:s}},K={$:1},sw=J0,Bu=vb,wr=V0,Qr=n(function(s,a){return c(K0,s,ze(a))}),Uu=n(function(s,a){return U(c(U0,s,a))}),zd=function(s){return c(Qr,`
    `,c(Uu,`
`,s))},Qe=i(function(s,a,l){e:for(;;)if(l.b){var f=l.a,p=l.b,$=s,y=c(s,f,a),w=p;s=$,a=y,l=w;continue e}else return a}),ri=function(s){return v(Qe,n(function(a,l){return l+1}),0,s)},Dn=Xn,ow=i(function(s,a,l){e:for(;;)if(ee(s,a)<1){var f=s,p=a-1,$=c(de,a,l);s=f,a=p,l=$;continue e}else return l}),qd=n(function(s,a){return v(ow,s,a,A)}),Ku=n(function(s,a){return v(Dn,s,c(qd,0,ri(a)-1),a)}),Qu=W0,Bd=function(s){var a=Qu(s);return 97<=a&&a<=122},Ud=function(s){var a=Qu(s);return a<=90&&65<=a},aw=function(s){return Bd(s)||Ud(s)},uw=function(s){var a=Qu(s);return a<=57&&48<=a},lw=function(s){return Bd(s)||Ud(s)||uw(s)},lr=function(s){return v(Qe,de,A,s)},cw=B0,fw=n(function(s,a){return`

(`+(wr(s+1)+(") "+zd(Cn(a))))}),Cn=function(s){return c(dw,s,A)},dw=n(function(s,a){e:for(;;)switch(s.$){case 0:var l=s.a,y=s.b,f=function(){var G=cw(l);if(G.$===1)return!1;var ue=G.a,ie=ue.a,oe=ue.b;return aw(ie)&&c(sw,lw,oe)}(),p=f?"."+l:"['"+(l+"']"),D=y,N=c(de,p,a);s=D,a=N;continue e;case 1:var $=s.a,y=s.b,w="["+(wr($)+"]"),D=y,N=c(de,w,a);s=D,a=N;continue e;case 2:var R=s.a;if(R.b)if(R.b.b){var P=function(){return a.b?"The Json.Decode.oneOf at json"+c(Qr,"",lr(a)):"Json.Decode.oneOf"}(),J=P+(" failed in the following "+(wr(ri(R))+" ways:"));return c(Qr,`

`,c(de,J,c(Ku,fw,R)))}else{var y=R.a,D=y,N=a;s=D,a=N;continue e}else return"Ran into a Json.Decode.oneOf with no possibilities"+function(){return a.b?" at json"+c(Qr,"",lr(a)):"!"}();default:var M=s.a,_=s.b,J=function(){return a.b?"Problem with the value at json"+(c(Qr,"",lr(a))+`:

    `):`Problem with the given value:

`}();return J+(zd(c(Bu,4,_))+(`

`+M))}}),Gt=32,Ju=o(function(s,a,l,f){return{$:0,a:s,b:a,c:l,d:f}}),Vu=S,Kd=rs,Qd=n(function(s,a){return Sn(a)/Sn(s)}),Hu=Kd(c(Qd,2,Gt)),pw=j(Ju,0,Hu,Vu,Vu),Jd=x,hw=function(s){return{$:1,a:s}};n(function(s,a){return s(a)}),n(function(s,a){return a(s)});var mw=br,Vd=k,Hd=n(function(s,a){return ee(s,a)>0?s:a}),$w=function(s){return{$:0,a:s}},Wd=E,vw=n(function(s,a){e:for(;;){var l=c(Wd,Gt,s),f=l.a,p=l.b,$=c(de,$w(f),a);if(p.b){var y=p,w=$;s=y,a=w;continue e}else return lr($)}}),yw=function(s){var a=s.a;return a},gw=n(function(s,a){e:for(;;){var l=Kd(a/Gt);if(l===1)return c(Wd,Gt,s).a;var f=c(vw,s,A),p=l;s=f,a=p;continue e}}),bw=n(function(s,a){if(a.g){var l=a.g*Gt,f=mw(c(Qd,Gt,l-1)),p=s?lr(a.j):a.j,$=c(gw,p,a.g);return j(Ju,Vd(a.i)+l,c(Hd,5,f*Hu),$,a.i)}else return j(Ju,Vd(a.i),Hu,Vu,a.i)}),ww=u(function(s,a,l,f,p){e:for(;;){if(a<0)return c(bw,!1,{j:f,g:l/Gt|0,i:p});var $=hw(v(Jd,Gt,a,s)),y=s,w=a-Gt,D=l,N=c(de,$,f),R=p;s=y,a=w,l=D,f=N,p=R;continue e}}),kw=n(function(s,a){if(s<=0)return pw;var l=s%Gt,f=v(Jd,l,s-l,a),p=s-l-Gt;return C(ww,a,p,s,A,f)}),kr=function(s){return!s.$},Ft=ub,zt=Y0,pe=rb,st=G0,Sw=c(Ft,function(s){switch(s){case"sse":return st(0);case"websocket":return st(1);default:return zt("Unknown live sync transport: "+s)}},pe),X=sb,xe=cb,xw=c(xe,nw,c(X,"transport",Sw)),Dw=n(function(s,a){return{aF:a,ab:s}}),Cw=i(function(s,a,l){return{bT:l,bZ:a,b1:s}}),Nw=i(function(s,a,l){return{bP:s,cb:l,cs:a}}),ni=X0,Jr=db,jw=j(Jr,Nw,c(X,"field",pe),c(X,"unique",ni),c(X,"primary",ni)),Iw=i(function(s,a,l){return{bQ:a,cp:l,cr:s}}),Ew=n(function(s,a){return{bH:a,bs:s}}),Nn=fb,Mw=v(Nn,Ew,c(X,"table",pe),c(X,"column",pe)),Pw=c(Ft,function(s){switch(s){case"many-to-one":return st(0);case"one-to-many":return st(1);case"one-to-one":return st(2);default:return zt("Unknown link type: "+s)}},pe),Ow=j(Jr,Iw,c(X,"type",Pw),c(X,"from",pe),c(X,"to",Mw)),cr={$:-2},Ie=cr,ce=u(function(s,a,l,f,p){return{$:-1,a:s,b:a,c:l,d:f,e:p}}),ii=u(function(s,a,l,f,p){if(p.$===-1&&!p.a){p.a;var $=p.b,y=p.c,w=p.d,D=p.e;if(f.$===-1&&!f.a){f.a;var N=f.b,R=f.c,P=f.d,M=f.e;return C(ce,0,a,l,C(ce,1,N,R,P,M),C(ce,1,$,y,w,D))}else return C(ce,s,$,y,C(ce,0,a,l,f,w),D)}else if(f.$===-1&&!f.a&&f.d.$===-1&&!f.d.a){f.a;var N=f.b,R=f.c,_=f.d;_.a;var J=_.b,G=_.c,ue=_.d,ie=_.e,M=f.e;return C(ce,0,N,R,C(ce,1,J,G,ue,ie),C(ce,1,a,l,M,p))}else return C(ce,s,a,l,f,p)}),Gd=Ze,Wu=i(function(s,a,l){if(l.$===-2)return C(ce,0,s,a,cr,cr);var f=l.a,p=l.b,$=l.c,y=l.d,w=l.e,D=c(Gd,s,p);switch(D){case 0:return C(ii,f,p,$,v(Wu,s,a,y),w);case 1:return C(ce,f,p,a,y,w);default:return C(ii,f,p,$,y,v(Wu,s,a,w))}}),be=i(function(s,a,l){var f=v(Wu,s,a,l);if(f.$===-1&&!f.a){f.a;var p=f.b,$=f.c,y=f.d,w=f.e;return C(ce,1,p,$,y,w)}else{var D=f;return D}}),jn=function(s){return v(Qe,n(function(a,l){var f=a.a,p=a.b;return v(be,f,p,l)}),Ie,s)},Yd=ab,Yt=function(s){return c(xe,jn,Yd(s))},qt=nb,Aw=j(Jr,Cw,c(X,"name",pe),c(X,"links",Yt(Ow)),c(X,"indices",qt(jw))),Rw=v(Nn,Dw,c(X,"tables",Yt(Aw)),c(X,"queryFieldToTable",Yt(pe))),_w=n(function(s,a){return{aQ:s,aT:a}}),Tw=v(Nn,_w,c(X,"baseUrl",pe),c(X,"catchupPath",pe)),Sr=lb,Lw=j(Jr,rw,c(X,"schema",Rw),c(X,"server",Tw),Sr(U([c(X,"liveSync",xw),st({aN:0})]))),Zt=Au,Zd={$:0},Xt=Md,Fw={$:0},zw=function(s){return{B:Ie,E:!1,ai:!1,av:s,P:Fw,J:0}},qw={l:Ie},Bw={bT:Ie,ab:Ie},Uw={$:0},Gu=Do,Ae=i(function(s,a,l){e:for(;;){if(l.$===-2)return a;var f=l.b,p=l.c,$=l.d,y=l.e,w=s,D=v(s,f,p,v(Ae,s,a,$)),N=y;s=w,a=D,l=N;continue e}}),Vr=i(function(s,a,l){return v(Ae,i(function(f,p,$){return v(jd,s(f),a(p),$)}),Nd(),l)}),Xd=Do,lt=function(s){return s},xr=Do,Dr=n(function(s,a){return v(Qe,gb(s),yb(),a)}),ep=bb,he=Do,In=function(s){switch(s.$){case 0:var a=s.a;return he(a);case 1:var l=s.a;return xr(l);case 2:var f=s.a;return Xd(f);case 3:var p=s.a;return Gu(p);case 4:return ep;case 5:var $=s.a;return c(Dr,In,$);default:var y=s.a;return v(Vr,lt,In,y)}},Re=function(s){return v(Qe,n(function(a,l){var f=a.a,p=a.b;return v(jd,f,p,l)}),Nd(),s)},Kw=function(s){return Re(U([I("table_name",he(s.cm)),I("headers",c(Dr,he,s.bR)),I("rows",c(Dr,Dr(In),s.ar))]))},Qw=function(s){if(s.$){var a=s.a;return Re(U([I("type",he("writeDelta")),I("tableGroups",c(Dr,Kw,a))]))}else return Re(U([I("type",he("requestInitialData"))]))},Jw=ti("indexedDbOut",lt),tp=function(s){return Jw(Qw(s))},Vw=tp(Uw),rp=function(s){return I({M:zw(s.av),ad:Bw,Z:!1,ak:s.aB.aN,c:qw,q:s.q,Q:Zd},Xt(U([Vw])))},Mo=function(s){return{$:6,a:s}},Hw=function(s){return{$:0,a:s}},Ww=function(s){return{$:1,a:s}},Gw=function(s){return{$:3,a:s}},Yw=function(s){return{$:2,a:s}},np=Md,Zw=function(s){return{ab:s}},ip=function(s){return{$:5,a:s}},Xw=function(s){return{$:3,a:s}},e1=function(s){return{$:2,a:s}},t1=function(s){return{$:1,a:s}},En={$:4},sp=function(s){return{$:6,a:s}},r1=function(s){return{$:0,a:s}},op=eb,ss=Z0,Yu=function(s){return c(Ft,s,st(0))},Zu=ib;function Po(){return Sr(U([c(xe,r1,pe),c(xe,t1,ss),c(xe,e1,op),c(xe,Xw,ni),Zu(En),c(xe,ip,qt(Yu(function(s){return Po()}))),c(xe,sp,Yt(Yu(function(s){return Po()})))]))}var os=Po();Po=function(){return os};var n1=c(xe,Zw,c(X,"tables",Yt(qt(Yt(os))))),i1=c(Ft,function(s){return s==="initialData"?c(xe,lt,c(X,"data",n1)):zt("Unknown IndexedDB incoming type: "+s)},c(X,"type",pe)),Dt=tb,s1=is("receiveIndexedDbMessage",Dt),o1=function(s){return s1(function(a){return s(c(Zt,i1,a))})},a1=function(s){return{$:0,a:s}},u1=function(s){return{$:2,a:s}},l1=function(s){return{$:3,a:s}},c1={$:4},f1=function(s){return{$:1,a:s}},d1=function(s){return{cl:s}},p1=i(function(s,a,l){return{bR:a,ar:l,cm:s}}),h1=j(Jr,p1,c(X,"table_name",pe),c(X,"headers",qt(pe)),c(X,"rows",qt(qt(os)))),m1=c(xe,d1,qt(h1)),$1=u(function(s,a,l,f,p){return{aU:f,N:p,bs:s,J:a,bv:l}}),v1=hb,Xu=function(s){return Sr(U([c(xe,Y,s),st(K)]))},y1=T(v1,$1,Xu(c(X,"table",pe)),c(X,"tablesSynced",ss),Xu(c(X,"totalTables",ss)),c(X,"complete",ni),Xu(c(X,"error",pe))),ap=c(Ft,function(s){switch(s){case"delta":return c(xe,a1,c(X,"data",m1));case"syncProgress":return c(xe,f1,c(X,"data",y1));case"connected":return c(xe,u1,c(X,"sessionId",pe));case"error":return c(xe,l1,c(X,"error",pe));case"syncComplete":return st(c1);default:return zt("Unknown live sync incoming type: "+s)}},c(X,"type",pe)),g1=is("receiveSSEMessage",Dt),b1=is("receiveWebSocketMessage",Dt),w1=function(s){return np(U([g1(function(a){return s(c(Zt,ap,a))}),b1(function(a){return s(c(Zt,ap,a))})]))},k1=o(function(s,a,l,f){return{$:0,a:s,b:a,c:l,d:f}}),S1=o(function(s,a,l,f){return{$:3,a:s,b:a,c:l,d:f}}),x1=function(s){return{$:2,a:s}},D1=i(function(s,a,l){return{$:1,a:s,b:a,c:l}}),up=ob,si=n(function(s,a){return I(s,a)}),C1=v(Nn,si,c(up,0,pe),c(up,1,pe)),N1=qt(C1),j1={$:0},I1=function(s){return{$:1,a:s}},E1=n(function(s,a){return{aY:a,bP:s}}),M1=Q0,P1=c(Ft,function(s){var a=M1(s);return st(a==="desc"?1:0)},pe),lp=v(Nn,E1,c(X,"field",pe),c(X,"direction",P1)),O1=Sr(U([qt(lp),c(xe,function(s){return U([s])},lp)])),A1=function(s){return{$:3,a:s}},R1={$:1},_1=function(s){return{$:2,a:s}},T1=function(s){return{$:4,a:s}},cp=function(s){return{$:0,a:s}},W=n(function(s,a){e:for(;;){if(a.$===-2)return K;var l=a.b,f=a.c,p=a.d,$=a.e,y=c(Gd,s,l);switch(y){case 0:var w=s,D=p;s=w,a=D;continue e;case 1:return Y(f);default:var w=s,D=$;s=w,a=D;continue e}}}),Oo=n(function(s,a){var l=c(W,s,a);return!l.$}),fp=function(s){switch(s){case"$eq":return Y(0);case"$ne":return Y(1);case"$gt":return Y(2);case"$gte":return Y(3);case"$lt":return Y(4);case"$lte":return Y(5);case"$in":return Y(6);case"$nin":return Y(7);case"$like":return Y(8);case"$nlike":return Y(9);default:return K}},L1=function(s){var a=i(function(l,f,p){var $=fp(l);if($.$)return zt("Unknown operator");var y=c(Zt,Ro(),f);if(y.$)return zt("Invalid operator value");var w=y.a;return st(v(be,l,w,p))});return c(xe,_1,v(Ae,i(function(l,f,p){return c(Ft,function($){return v(a,l,f,$)},p)}),st(Ie),s))};function Ao(){return Yt(Ro())}function Ro(){return Sr(U([Zu(R1),c(Ft,function(s){return c(Oo,"$and",s)?c(xe,A1,c(X,"$and",qt(Ao()))):c(Oo,"$or",s)?c(xe,T1,c(X,"$or",qt(Ao()))):L1(s)},Yt(Dt)),c(xe,cp,os)]))}var dp=Ao();Ao=function(){return dp};var F1=Ro();Ro=function(){return F1};var z1=function(s){return C(q1,Ie,K,K,K,s)},q1=u(function(s,a,l,f,p){e:for(;;)if(p.b){var $=p.a,y=$.a,w=$.b,D=p.b;switch(y){case"@where":var N=c(Zt,dp,w);if(N.$)return zt("Invalid @where clause");var R=N.a,P=s,M=Y(R),_=l,J=f,G=D;s=P,a=M,l=_,f=J,p=G;continue e;case"@sort":var ue=c(Zt,O1,w);if(ue.$)return zt("Invalid @sort clause");var ie=ue.a,P=s,M=a,_=Y(ie),J=f,G=D;s=P,a=M,l=_,f=J,p=G;continue e;case"@limit":var oe=c(Zt,ss,w);if(oe.$)return zt("Invalid @limit value");var we=oe.a,P=s,M=a,_=l,J=Y(we),G=D;s=P,a=M,l=_,f=J,p=G;continue e;default:var Ee=c(Zt,tl(),w);if(Ee.$){var P=s,M=a,_=l,J=f,G=D;s=P,a=M,l=_,f=J,p=G;continue e}else{var vt=Ee.a,P=v(be,y,vt,s),M=a,_=l,J=f,G=D;s=P,a=M,l=_,f=J,p=G;continue e}}}else return st({bY:f,aI:s,bo:l,bw:a})});function el(){return c(Ft,z1,Yd(Dt))}function tl(){return Sr(U([c(Ft,function(s){return s?st(j1):zt("false is not a valid selection")},ni),c(xe,I1,Yu(function(s){return el()}))]))}var pp=el();el=function(){return pp};var B1=tl();tl=function(){return B1};var rl=Yt(pp),hp=pb,U1=c(Ft,function(s){switch(s){case"registerQuery":return C(hp,k1,c(X,"queryId",pe),c(X,"query",rl),c(X,"input",Dt),c(X,"callbackPort",pe));case"updateQueryInput":return j(Jr,D1,c(X,"queryId",pe),Sr(U([c(xe,Y,c(X,"query",rl)),st(K)])),c(X,"input",Dt));case"unregisterQuery":return c(xe,x1,c(X,"queryId",pe));case"sendMutation":return C(hp,S1,c(X,"hash",pe),c(X,"baseUrl",pe),Sr(U([c(X,"headers",N1),st(A)])),c(X,"input",Dt));default:return zt("Unknown QueryManager incoming type: "+s)}},c(X,"type",pe)),K1=is("receiveQueryManagerMessage",Dt),Q1=function(s){return K1(function(a){return s(c(Zt,U1,a))})},J1=i(function(s,a,l){return{$:0,a:s,b:a,c:l}}),V1=function(s){return{$:2,a:s}},H1=n(function(s,a){return{$:1,a:s,b:a}}),W1=c(Ft,function(s){switch(s){case"register":return j(Jr,J1,c(X,"queryId",pe),c(X,"querySource",rl),c(X,"queryInput",Dt));case"update-input":return v(Nn,H1,c(X,"queryId",pe),c(X,"queryInput",Dt));case"unregister":return c(xe,V1,c(X,"queryId",pe));default:return zt("Unknown QueryClient incoming type: "+s)}},c(X,"type",pe)),G1=is("receiveQueryClientMessage",Dt),Y1=function(s){return G1(function(a){return s(c(Zt,W1,a))})},Z1=function(s){return np(U([o1(function(a){if(a.$){var f=a.a;return Mo("Failed to decode IndexedDB message: "+Cn(f))}else{var l=a.a;return Hw(l)}}),w1(function(a){if(a.$){var f=a.a;return Mo("Failed to decode LiveSync message: "+Cn(f))}else{var l=a.a;return Ww(l)}}),Q1(function(a){if(a.$){var f=a.a;return Mo("Failed to decode QueryManager message: "+Cn(f))}else{var l=a.a;return Yw(l)}}),Y1(function(a){if(a.$){var f=a.a;return Mo("Failed to decode QueryClient message: "+Cn(f))}else{var l=a.a;return Gw(l)}})]))},_o=function(s){return{$:5,a:s}},X1=n(function(s,a){return{$:0,a:s,b:a}}),ek=function(s){return{$:7,a:s}},mp=o(function(s,a,l,f){if(f.b){var p=f.a,$=f.b;if($.b){var y=$.a,w=$.b;if(w.b){var D=w.a,N=w.b;if(N.b){var R=N.a,P=N.b,M=l>500?v(Qe,s,a,lr(P)):j(mp,s,a,l+1,P);return c(s,p,c(s,y,c(s,D,c(s,R,M))))}else return c(s,p,c(s,y,c(s,D,a)))}else return c(s,p,c(s,y,a))}else return c(s,p,a)}else return a}),Mn=i(function(s,a,l){return j(mp,s,a,0,l)}),ct=n(function(s,a){return v(Mn,n(function(l,f){return c(de,s(l),f)}),A,a)}),as=Rb,$t=Xt(A),tk=i(function(s,a,l){return{$:2,a:s,b:a,c:l}}),rk=i(function(s,a,l){return{$:3,a:s,b:a,c:l}}),us=function(s){if(s.$){var a=s.a;return"s:"+a}else{var a=s.a;return"i:"+wr(a)}},nl=n(function(s,a){e:for(;;){if(s<=0)return a;if(a.b){a.a;var l=a.b,f=s-1,p=l;s=f,a=p;continue e}else return a}}),nk=i(function(s,a,l){e:for(;;){if(s<=0)return l;if(a.b){var f=a.a,p=a.b,$=s-1,y=p,w=c(de,f,l);s=$,a=y,l=w;continue e}else return l}}),ik=n(function(s,a){return lr(v(nk,s,a,A))}),$p=i(function(s,a,l){if(a<=0)return A;var f=I(a,l);e:for(;;){t:for(;;)if(f.b.b)if(f.b.b.b)switch(f.a){case 1:break e;case 2:var p=f.b,oe=p.a,$=p.b,y=$.a;return U([oe,y]);case 3:if(f.b.b.b.b){var w=f.b,oe=w.a,D=w.b,y=D.a,N=D.b,R=N.a;return U([oe,y,R])}else break t;default:if(f.b.b.b.b&&f.b.b.b.b.b){var P=f.b,oe=P.a,M=P.b,y=M.a,_=M.b,R=_.a,J=_.b,G=J.a,ue=J.b;return s>1e3?c(de,oe,c(de,y,c(de,R,c(de,G,c(ik,a-4,ue))))):c(de,oe,c(de,y,c(de,R,c(de,G,v($p,s+1,a-4,ue)))))}else break t}else{if(f.a===1)break e;break t}else return l;return l}var ie=f.b,oe=ie.a;return U([oe])}),To=n(function(s,a){return v($p,0,s,a)}),sk=i(function(s,a,l){var f=c(To,s,l),p=c(nl,s,l);return it(f,c(de,a,p))}),ok=function(s){var a=s.b;return a},ak=n(function(s,a){var l=n(function(f,p){var $=p.a,y=p.b;return y.$?z(f,s)?I($+1,Y($)):I($+1,K):I($+1,y)});return v(Qe,l,I(0,K),a).b}),il=function(s){return"."+s},Pn=n(function(s,a){e:for(;;)if(a.b){var l=a.a,f=a.b;if(s(l))return!0;var p=s,$=f;s=p,a=$;continue e}else return!1}),ls=n(function(s,a){return c(Pn,function(l){return z(l,s)},a)}),uk=i(function(s,a,l){if(z(s,a))return l;var f=c(nl,s,l),p=c(To,s,l);if(f.b){var $=f.a,y=f.b,w=it(p,y),D=c(To,a,w),N=c(nl,a,w);return it(D,c(de,$,N))}else return l}),lk=n(function(s,a){return{$:4,a:s,b:a}}),ck=i(function(s,a,l){var f=ri(l),p=c(qd,a,f-1);return c(ct,function($){return c(lk,il(s),$)},lr(p))}),fk=o(function(s,a,l,f){var p=c(ct,us,a),$=jn(v(Dn,n(function(P,M){return I(us(P),M)}),l,f)),y=c(ct,us,l),w=v(Qe,n(function(P,M){var _=P.a,J=P.b,G=M.a,ue=M.b;if(c(ls,J,ue)){var ie=c(ak,J,ue);if(ie.$)return I(G,ue);var oe=ie.a;if(z(oe,_))return I(G,ue);var we=v(uk,oe,_,ue);return I(it(G,U([v(rk,il(s),oe,_)])),we)}else{var Ee=c(W,J,$);if(Ee.$)return I(G,ue);var vt=Ee.a,we=v(sk,_,J,ue);return I(it(G,U([v(tk,il(s),_,vt)])),we)}}),I(A,p),c(Ku,si,y)),D=w.a,N=w.b,R=v(ck,s,ri(y),N);return it(D,R)}),dk=n(function(s,a){return{$:0,a:s,b:a}}),pk=i(function(s,a,l){var f=s(a);if(f.$)return l;var p=f.a;return c(de,p,l)}),On=n(function(s,a){return v(Mn,pk(s),A,a)}),hk=i(function(s,a,l){return s(a(l))}),mk=q0,vp=n(function(s,a){return!c(Pn,c(hk,mk,s),a)}),yp=n(function(s,a){e:for(;;){if(a.$===-2)return s;var l=a.d,f=a.e,p=c(yp,s+1,f),$=l;s=p,a=$;continue e}}),sl=function(s){return c(yp,0,s)},$k=n(function(s,a){return z(ri(s),ri(a))?c(vp,lt,v(Dn,bp,s,a)):!1}),gp=n(function(s,a){return z(sl(s),sl(a))?v(Ae,i(function(l,f,p){if(p){var $=c(W,l,a);if($.$)return!1;var y=$.a;return c(bp,f,y)}else return!1}),!0,s):!1}),bp=n(function(s,a){var l=I(s,a);e:for(;;)switch(l.a.$){case 0:if(l.b.$)break e;var f=l.a.a,p=l.b.a;return z(f,p);case 1:if(l.b.$===1){var f=l.a.a,p=l.b.a;return z(f,p)}else break e;case 2:if(l.b.$===2){var f=l.a.a,p=l.b.a;return z(f,p)}else break e;case 3:if(l.b.$===3){var f=l.a.a,p=l.b.a;return z(f,p)}else break e;case 4:if(l.b.$===4)return l.a,l.b,!0;break e;case 5:if(l.b.$===5){var f=l.a.a,p=l.b.a;return c($k,f,p)}else break e;default:if(l.b.$===6){var f=l.a.a,p=l.b.a;return c(gp,f,p)}else break e}return!1}),vk=n(function(s,a){return"."+(s+("["+(wr(a)+"]")))}),yk=u(function(s,a,l,f,p){var $=jn(v(Dn,n(function(w,D){return I(us(w),D)}),a,f)),y=v(Dn,si,l,p);return c(On,function(w){var D=w.a,N=w.b,R=N.a,P=N.b,M=us(R),_=c(W,M,$);if(_.$)return K;var J=_.a;return c(gp,J,P)?K:Y(c(dk,c(vk,s,D),P))},c(Ku,si,y))}),gk=function(s){return{$:0,a:s}},bk=function(s){return{$:1,a:s}},wk=function(s){var a=c(W,"id",s);e:for(;;){if(a.$)break e;switch(a.a.$){case 1:var l=a.a.a;return Y(gk(l));case 0:var l=a.a.a;return Y(bk(l));default:break e}}return K},kk=function(s){return v(Mn,n(function(a,l){var f=I(a,l);if(!f.a.$&&!f.b.$){var p=f.a.a,$=f.b.a;return Y(c(de,p,$))}else return K}),Y(A),s)},wp=function(s){return kk(c(ct,wk,s))},Bt=n(function(s,a){if(a.$)return s;var l=a.a;return l}),Sk=i(function(s,a,l){var f=c(Bt,A,c(W,s,a)),p=c(Bt,A,c(W,s,l)),$=I(wp(f),wp(p));if(!$.a.$&&!$.b.$){var y=$.a.a,w=$.b.a,D=C(yk,s,y,w,f,p),N=j(fk,s,y,w,p);return Xe(it(N,D))}else return qe("Missing id field for query result rows in "+s)}),xk=n(function(s,a){var l=v(Qe,n(function(f,p){return c(ls,f,p)?p:c(de,f,p)}),zu(s),zu(a));return v(Qe,n(function(f,p){if(p.$===1)return p;var $=p.a,y=v(Sk,f,s,a);if(y.$){var D=y.a;return qe(D)}else{var w=y.a;return Xe(it($,w))}}),Xe(A),l)}),Dk=function(s){return v(Vr,lt,function(a){return c(Dr,function(l){return v(Vr,lt,In,l)},a)},s)},Ck=n(function(s,a){if(s.$)return a;var l=s.a;return c(To,l,a)}),cs=n(function(s,a){var l=I(s,a);e:for(;;)switch(l.a.$){case 1:if(l.b.$===1){var f=l.a.a,p=l.b.a;return f-p}else break e;case 2:if(l.b.$===2){var $=l.a.a,y=l.b.a;return ee($,y)>0?1:ee($,y)<0?-1:0}else break e;case 0:if(l.b.$)break e;var w=l.a.a,D=l.b.a;return ee(w,D)>0?1:ee(w,D)<0?-1:0;default:break e}return 0}),Nk=gr,jk=n(function(s,a){if(s.$)return a;var l=s.a;return c(Nk,n(function(f,p){var $=f.b,y=p.b,w=v(Qe,n(function(N,R){if(R.$){var P=c(Bt,En,c(W,N.bP,y)),M=c(Bt,En,c(W,N.bP,$)),_=c(cs,M,P),J=N.aY===1?-1*_:_;return J<0?Y(0):J>0?Y(2):K}else return R}),K,l);if(w.$)return 1;var D=w.a;return D}),a)}),fs=n(function(s,a){if(a.$)return K;var l=a.a;return s(l)}),Ik=n(function(s,a){return a.b?v(Mn,de,a,s):s}),Ek=function(s){return v(Mn,Ik,A,s)},Mk=n(function(s,a){return Ek(c(ct,s,a))}),Lo=Ie,Fo=n(function(s,a){var l=a;return v(be,s,0,l)}),ds=function(s){return v(Qe,Fo,Lo,s)},ol=n(function(s,a){var l=a;return c(Bt,A,c(W,s,l))}),al=function(s){switch(s){case 0:return"$eq";case 1:return"$ne";case 2:return"$gt";case 3:return"$gte";case 4:return"$lt";case 5:return"$lte";case 6:return"$in";case 7:return"$nin";case 8:return"$like";default:return"$nlike"}},ps=function(s){switch(s.$){case 1:var a=s.a;return Y(wr(a));case 0:var l=s.a;return Y(l);case 4:return K;default:return K}},kp=o(function(s,a,l,f){var p=I(a,l),$=c(fs,function(M){if(!M.$&&M.a.$===5){var _=M.a.a;return Y(_)}else return K},c(W,al(6),f)),y=function(M){var _=c(W,p,s);if(_.$)return K;var J=_.a,G=ps(M);if(G.$)return K;var ue=G.a;return Y(ds(c(ol,ue,J)))},w=c(fs,function(M){if(M.$)return K;var _=M.a;return Y(_)},c(W,al(0),f));if(w.$){if($.$)return K;var N=$.a,R=c(W,p,s);if(R.$)return K;var P=R.a;return Y(ds(c(Mk,function(M){return c(ol,M,P)},c(On,ps,N))))}else{var D=w.a;return y(D)}}),Pk=i(function(s,a,l){e:for(;;)if(l.b){var f=l.a,p=l.b,$=v(Sp,s,a,f);if($.$){var w=s,D=a,N=p;s=w,a=D,l=N;continue e}else{var y=$.a;return Y(y)}}else return K}),Sp=i(function(s,a,l){var f=function(){var $=c(W,"$and",l);if(!$.$&&$.a.$===3){var y=$.a.a;return v(Pk,s,a,y)}else return K}(),p=v(Ae,i(function($,y,w){if(w.$)switch(y.$){case 2:var D=y.a;return j(kp,s,a,$,D);case 0:var N=y.a;return j(kp,s,a,$,jn(U([I(al(0),cp(N))])));default:return K}else return w}),K,l);return p.$?f:p}),Ok=i(function(s,a,l){var f=I(a,l);e:for(;;){if(f.b.$)break e;switch(f.a){case 0:f.a;var p=f.b.a;return z(s,p);case 1:f.a;var p=f.b.a;return!z(s,p);case 2:f.a;var p=f.b.a;return c(cs,s,p)>0;case 3:f.a;var p=f.b.a;return c(cs,s,p)>=0;case 4:f.a;var p=f.b.a;return c(cs,s,p)<0;case 5:f.a;var p=f.b.a;return c(cs,s,p)<=0;case 6:if(f.b.a.$===5){f.a;var $=f.b.a.a;return c(ls,s,$)}else break e;default:break e}}return!1}),xp=n(function(s,a){switch(a.$){case 1:return z(s,En);case 0:var l=a.a;return z(s,l);case 2:var f=a.a;return v(Ae,i(function(p,$,y){if(y){var w=fp(p);if(w.$)return!1;var D=w.a;return v(Ok,s,D,$)}else return!1}),!0,f);case 3:return!1;default:return!1}}),hs=n(function(s,a){var l=c(W,"$and",a);if(!l.$&&l.a.$===3){var f=l.a.a;return c(vp,function($){return c(hs,s,$)},f)}else{var p=c(W,"$or",a);if(!p.$&&p.a.$===4){var f=p.a.a;return c(Pn,function(y){return c(hs,s,y)},f)}else return v(Ae,i(function($,y,w){if(w){var D=c(W,$,s);if(D.$)return c(xp,En,y);var N=D.a;return c(xp,N,y)}else return!1}),!0,a)}}),Hr=n(function(s,a){return v(Mn,n(function(l,f){return s(l)?c(de,l,f):f}),A,a)}),zo=n(function(s,a){var l=a;return c(Oo,s,l)}),Ak=o(function(s,a,l,f){if(l.$)return f;var p=l.a,$=v(Sp,s,a,p);if($.$)return c(Hr,function(w){var D=w.b;return c(hs,D,p)},f);var y=$.a;return c(Hr,function(w){var D=w.a,N=w.b;return c(zo,D,y)&&c(hs,N,p)},f)}),ul=function(s){return s.$===-2},Rk=i(function(s,a,l){var f=c(W,a,s.ab);if(f.$)return"";var p=f.a,$=c(W,l,p.bZ);if($.$)return"";var y=$.a;return y.cp.bs}),_k=function(s){if(s.$===1){var a=s.a;return Y(a)}else return K},Dp=o(function(s,a,l,f){var p=c(W,a,s);if(p.$)return K;var $=p.a,y=_k(f);if(y.$)return K;var w=y.a;return c(W,w,$)}),Cp=function(s){return v(Io,i(function(a,l,f){return c(de,l,f)}),A,s)},Tk=o(function(s,a,l,f){var p=c(W,a,s);if(p.$)return K;var $=p.a,y=c(Hr,function(w){return z(c(W,l,w),Y(f))},Cp($));return Y(y)}),Lk=u(function(s,a,l,f,p){var $=I(l,f),y=I(c(W,$,s),ps(p));if(!y.a.$&&!y.b.$){var w=y.a.a,D=y.b.a,N=c(ol,D,w),R=function(){var P=c(W,l,a);if(P.$)return A;var M=P.a;return c(On,function(_){return c(W,_,M)},N)}();return Y(R)}else return j(Tk,a,l,f,p)}),qo=n(function(s,a){if(a.$)return K;var l=a.a;return Y(s(l))}),Np=function(s){return U([s])},Fk=d(function(s,a,l,f,p,$){var y=c(W,a,s.ab);if(y.$)return K;var w=y.a,D=c(W,l,w.bZ);if(D.$)return K;var N=D.a,R=N.cr;switch(R){case 1:var P=c(W,"id",f);if(P.$)return K;var M=P.a;return C(Lk,$,p,N.cp.bs,N.cp.bH,M);case 0:var _=c(W,N.bQ,f);if(_.$)return K;var J=_.a;return c(qo,Np,j(Dp,p,N.cp.bs,N.cp.bH,J));default:var G=c(W,N.bQ,f);if(G.$)return K;var J=G.a;return c(qo,Np,j(Dp,p,N.cp.bs,N.cp.bH,J))}}),jp=d(function(s,a,l,f,p,$){return v(Ae,i(function(y,w,D){if(w.$){var P=w.a,M=T(Fk,s,a,y,l,p,$);if(M.$)return v(be,y,En,D);var _=M.a,J=v(Rk,s,a,y),G=c(ct,function(ie){return T(jp,s,J,ie,P.aI,p,$)},_),ue=ip(c(ct,sp,G));return v(be,y,ue,D)}else{var N=c(W,y,l);if(N.$)return D;var R=N.a;return v(be,y,R,D)}}),Ie,f)}),zk=d(function(s,a,l,f,p,$){return ul(l)?$:c(ct,function(y){return T(jp,s,a,y,l,f,p)},$)}),qk=u(function(s,a,l,f,p){var $=c(W,f,s.aF);if($.$)return I(A,Lo);var y=$.a,w=c(W,y,a);if(w.$)return I(A,Lo);var D=w.a,N=Eo(D),R=j(Ak,l,y,p.bw,N),P=c(jk,p.bo,R),M=c(Ck,p.bY,P),_=ds(c(ct,yw,M)),J=T(zk,s,y,p.aI,a,l,c(ct,ok,M));return I(J,_)}),oi=n(function(s,a){if(a.$===-2)return cr;var l=a.a,f=a.b,p=a.c,$=a.d,y=a.e;return C(ce,l,f,c(s,f,p),c(oi,s,$),c(oi,s,y))}),ai=i(function(s,a,l){var f=c(oi,n(function(y,w){return C(qk,s,a.ab,a.bT,y,w)}),l),p=c(oi,n(function(y,w){var D=w.b;return D}),f),$=c(oi,n(function(y,w){var D=w.a;return D}),f);return{aH:$,ch:p}}),ll=function(s){return!s.b},ms=function(s){return s===""},Ip=function(s){switch(s.$){case 0:var p=s.a,a=s.b;return Re(U([I("op",he("set-row")),I("path",he(p)),I("row",v(Vr,lt,In,a))]));case 1:var p=s.a;return Re(U([I("op",he("remove-row")),I("path",he(p))]));case 2:var p=s.a,$=s.b,a=s.c;return Re(U([I("op",he("insert-row")),I("path",he(p)),I("index",xr($)),I("row",v(Vr,lt,In,a))]));case 3:var p=s.a,l=s.b,f=s.c;return Re(U([I("op",he("move-row")),I("path",he(p)),I("from",xr(l)),I("to",xr(f))]));default:var p=s.a,$=s.b;return Re(U([I("op",he("remove-row-by-index")),I("path",he(p)),I("index",xr($))]))}},Ep=ti("queryClientOut",lt),Bk=i(function(s,a,l){return Ep(Re(U([I("type",he("delta")),I("queryId",he(s)),I("revision",xr(a)),I("delta",Re(U([I("ops",c(Dr,Ip,l))])))])))}),Bo=i(function(s,a,l){return Ep(Re(U([I("type",he("full")),I("queryId",he(s)),I("revision",xr(a)),I("result",l)])))}),Uk=i(function(s,a,l){return{$:2,a:s,b:a,c:l}}),Kk=function(s){switch(s.$){case 0:var a=s.a,y=s.b;return Re(U([I("type",he("queryResult")),I("callbackPort",he(a)),I("result",y)]));case 1:var l=s.a,f=s.b,y=s.c;return Re(U([I("type",he("queryFull")),I("queryId",he(l)),I("revision",xr(f)),I("result",y)]));case 2:var l=s.a,f=s.b,p=s.c;return Re(U([I("type",he("queryDelta")),I("queryId",he(l)),I("revision",xr(f)),I("delta",Re(U([I("ops",c(Dr,Ip,p))])))]));default:var $=s.a,y=s.b;return Re(U([I("type",he("mutationResult")),I("hash",he($)),I("result",function(){if(y.$){var D=y.a;return Re(U([I("ok",Gu(!1)),I("error",he(D))]))}else{var w=y.a;return Re(U([I("ok",Gu(!0)),I("value",w)]))}}())]))}},Qk=ti("queryManagerOut",lt),cl=function(s){return Qk(Kk(s))},Jk=i(function(s,a,l){return cl(v(Uk,s,a,l))}),Vk=i(function(s,a,l){return{$:1,a:s,b:a,c:l}}),Uo=i(function(s,a,l){return cl(v(Vk,s,a,l))}),Hk=n(function(s,a){return v(Ae,be,a,s)}),Mp=n(function(s,a){var l=s,f=a;return c(Hk,l,f)}),fl=function(s){return v(Ae,i(function(a,l,f){switch(l.$){case 3:var p=l.a;return v(Qe,n(function($,y){return c(Mp,y,fl($))}),f,p);case 4:var p=l.a;return v(Qe,n(function($,y){return c(Mp,y,fl($))}),f,p);case 2:return c(Fo,a,f);case 0:return c(Fo,a,f);default:return c(Fo,a,f)}}),Lo,s)},Pp=i(function(s,a,l){var f=l;return v(Ae,i(function(p,$,y){return c(s,p,y)}),a,f)}),Wk=i(function(s,a,l){var f=fl(s);return v(Pp,n(function(p,$){return $?!0:!z(c(W,p,a),c(W,p,l))}),!1,f)}),dl=function(s){if(s.b){var a=s.a;return s.b,Y(a)}else return K},pl=n(function(s,a){return jn(v(Dn,si,s,a))}),Gk=u(function(s,a,l,f,p){var $=c(Bt,Ie,c(W,a,s.ab)),y=dl(c(Hr,function(D){return z(D.cm,a)},p.cl)),w=function(){if(y.$)return!1;var D=y.a;return c(Pn,function(N){if(N.b&&N.a.$===1){var R=N.a.a;if(c(zo,R,l)){var P=c(W,R,$);if(P.$)return!0;var M=P.a,_=c(pl,D.bR,N);return v(Wk,f,M,_)}else return!1}else return!1},D.ar)}();return w}),Yk=u(function(s,a,l,f,p){var $=c(Bt,Ie,c(W,a,s.ab)),y=dl(c(Hr,function(D){return z(D.cm,a)},p.cl)),w=function(){if(y.$)return!1;var D=y.a;return c(Pn,function(N){if(N.b&&N.a.$===1){var R=N.a.a;if(c(zo,R,l)){var P=c(W,R,$);if(P.$)return!0;var M=P.a,_=c(pl,D.bR,N);return v(Pp,n(function(J,G){return G?!0:!z(c(W,J,M),c(W,J,_))}),!1,f)}else return!1}else return!1},D.ar)}();return w}),Zk=d(function(s,a,l,f,p,$){var y=v(Ae,i(function(G,ue,ie){if(ie.$){var oe=c(W,G,s.aF);if(oe.$)return K;var we=oe.a;return z(we,f)?Y(ue):K}else return ie}),K,l.I);if(y.$)return!0;var w=y.a,D=!z(w.bY,K)||!z(w.bo,K);if(D){var N=w.bo;if(N.$)return!0;var R=N.a,P=ds(c(ct,function(G){return G.bP},R)),M=C(Yk,a,f,p,P,$);return M}else{var _=w.bw;if(_.$)return!0;var J=_.a;return C(Gk,a,f,p,J,$)}}),hl=function(s){var a=s;return ul(a)},Xk=n(function(s,a){if(s.$)return!0;var l=s.a;return c(hs,a,l)}),eS=Xk,tS=d(function(s,a,l,f,p,$){if(hl(f))return!1;var y=v(Ae,i(function(M,_,J){if(J.$){var G=c(W,M,s.aF);if(G.$)return K;var ue=G.a;return z(ue,l)?Y(_):K}else return J}),K,p.I),w=dl(c(Hr,function(M){return z(M.cm,l)},$.cl)),D=I(y,w);if(!D.a.$&&!D.b.$){var N=D.a.a,R=D.b.a,P=N.bw;return P.$?!0:c(Pn,function(M){if(M.b&&M.a.$===1){var _=M.a.a;if(c(zo,_,f)){var J=c(pl,R.bR,M);return c(eS,P,J)}else return!1}else return!1},R.ar)}else return!0}),rS=function(s){e:for(;;)if(s.$===-1&&s.d.$===-1){var a=s.d,l=a;s=l;continue e}else return s},Op=function(s){if(s.$===-1&&s.d.$===-1&&s.e.$===-1)if(s.e.d.$===-1&&!s.e.d.a){var a=s.a,l=s.b,f=s.c,p=s.d;p.a;var $=p.b,y=p.c,w=p.d,D=p.e,N=s.e;N.a;var R=N.b,P=N.c,M=N.d;M.a;var _=M.b,J=M.c,G=M.d,ue=M.e,ie=N.e;return C(ce,0,_,J,C(ce,1,l,f,C(ce,0,$,y,w,D),G),C(ce,1,R,P,ue,ie))}else{var a=s.a,l=s.b,f=s.c,oe=s.d;oe.a;var $=oe.b,y=oe.c,w=oe.d,D=oe.e,we=s.e;we.a;var R=we.b,P=we.c,M=we.d,ie=we.e;return C(ce,1,l,f,C(ce,0,$,y,w,D),C(ce,0,R,P,M,ie))}else return s},Ap=function(s){if(s.$===-1&&s.d.$===-1&&s.e.$===-1)if(s.d.d.$===-1&&!s.d.d.a){var a=s.a,l=s.b,f=s.c,p=s.d;p.a;var $=p.b,y=p.c,w=p.d;w.a;var D=w.b,N=w.c,R=w.d,P=w.e,M=p.e,_=s.e;_.a;var J=_.b,G=_.c,ue=_.d,ie=_.e;return C(ce,0,$,y,C(ce,1,D,N,R,P),C(ce,1,l,f,M,C(ce,0,J,G,ue,ie)))}else{var a=s.a,l=s.b,f=s.c,oe=s.d;oe.a;var $=oe.b,y=oe.c,we=oe.d,M=oe.e,Ee=s.e;Ee.a;var J=Ee.b,G=Ee.c,ue=Ee.d,ie=Ee.e;return C(ce,1,l,f,C(ce,0,$,y,we,M),C(ce,0,J,G,ue,ie))}else return s},nS=h(function(s,a,l,f,p,$,y){if($.$===-1&&!$.a){$.a;var w=$.b,D=$.c,N=$.d,R=$.e;return C(ce,l,w,D,N,C(ce,0,f,p,R,y))}else{e:for(;;)if(y.$===-1&&y.a===1)if(y.d.$===-1)if(y.d.a===1){y.a;var P=y.d;return P.a,Ap(a)}else break e;else return y.a,y.d,Ap(a);else break e;return a}}),Ko=function(s){if(s.$===-1&&s.d.$===-1){var a=s.a,l=s.b,f=s.c,p=s.d,$=p.a,y=p.d,w=s.e;if($===1){if(y.$===-1&&!y.a)return y.a,C(ce,a,l,f,Ko(p),w);var D=Op(s);if(D.$===-1){var N=D.a,R=D.b,P=D.c,M=D.d,_=D.e;return C(ii,N,R,P,Ko(M),_)}else return cr}else return C(ce,a,l,f,Ko(p),w)}else return cr},$s=n(function(s,a){if(a.$===-2)return cr;var l=a.a,f=a.b,p=a.c,$=a.d,y=a.e;if(ee(s,f)<0)if($.$===-1&&$.a===1){$.a;var w=$.d;if(w.$===-1&&!w.a)return w.a,C(ce,l,f,p,c($s,s,$),y);var D=Op(a);if(D.$===-1){var N=D.a,R=D.b,P=D.c,M=D.d,_=D.e;return C(ii,N,R,P,c($s,s,M),_)}else return cr}else return C(ce,l,f,p,c($s,s,$),y);else return c(iS,s,H(nS,s,a,l,f,p,$,y))}),iS=n(function(s,a){if(a.$===-1){var l=a.a,f=a.b,p=a.c,$=a.d,y=a.e;if(z(s,f)){var w=rS(y);if(w.$===-1){var D=w.b,N=w.c;return C(ii,l,D,N,$,Ko(y))}else return cr}else return C(ii,l,f,p,$,c($s,s,y))}else return cr}),vs=n(function(s,a){var l=c($s,s,a);if(l.$===-1&&!l.a){l.a;var f=l.b,p=l.c,$=l.d,y=l.e;return C(ce,1,f,p,$,y)}else{var w=l;return w}}),sS=n(function(s,a){return v(Ae,i(function(l,f,p){return c(vs,l,p)}),s,a)}),Rp=n(function(s,a){var l=s,f=a;return c(sS,l,f)}),oS=function(s){return v(Qe,n(function(a,l){var f=ds(c(On,function(p){if(p.b&&p.a.$===1){var $=p.a.a;return Y($)}else return K},a.ar));return v(be,a.cm,f,l)}),Ie,s.cl)},aS=n(function(s,a){return v(Ae,i(function(l,f,p){var $=c(W,l,s.aF);if($.$)return p;var y=$.a;return c(ls,y,p)?p:c(de,y,p)}),A,a)}),uS=n(function(s,a){return v(Ae,i(function(l,f,p){return c(s,l,f)?v(be,l,f,p):p}),Ie,a)}),lS=n(function(s,a){return c(uS,n(function(l,f){return c(Oo,l,a)}),s)}),cS=n(function(s,a){var l=s,f=a;return c(lS,l,f)}),fS=o(function(s,a,l,f){var p=c(aS,s,l.I),$=oS(f),y=c(Pn,function(w){var D=I(c(W,w,$),c(W,w,l.ap));if(D.a.$)return D.a,!1;if(D.b.$)return D.b,!0;var N=D.a.a,R=D.b.a,P=c(cS,N,R),M=!hl(c(Rp,N,R));return hl(P)?M?T(tS,s,a,w,c(Rp,N,R),l,f):!1:T(Zk,s,a,l,w,P,f)},p);return y?1:0}),_p=o(function(s,a,l,f){return v(Ae,i(function(p,$,y){var w=y.a,D=y.b,N=ms($.aS),R=N?Bk:Jk,P=N?Bo:Uo,M=j(fS,s,a,$,f);if(M===1){var _=v(ai,s,a,$.I),J=Dk(_.aH),G=ae($,{aj:Y(_.aH),ap:_.ch}),ue=function(){var Vo=$.aj;if(Vo.$)return qe("Missing previous result");var Qx=Vo.a;return c(xk,Qx,_.aH)}();if(ue.$){var Ee=$.aa+1,vt=ae(G,{aa:Ee}),Cr=v(be,p,vt,w.l),we=ae(w,{l:Cr});return I(we,c(de,v(P,$.aG,Ee,J),D))}else{var ie=ue.a;if(ll(ie)){var oe=v(be,p,G,w.l),we=ae(w,{l:oe});return I(we,D)}else{var Ee=$.aa+1,vt=ae(G,{aa:Ee}),Cr=v(be,p,vt,w.l),we=ae(w,{l:Cr});return I(we,c(de,v(R,$.aG,Ee,ie),D))}}}else return I(w,D)}),I(l,A),l.l)}),dS=ti("errorOut",he),Tp=function(s){return dS(s)},Lp=function(s){switch(s){case 0:return Re(U([I("type",he("connectSSE"))]));case 1:return Re(U([I("type",he("disconnectSSE"))]));case 2:return Re(U([I("type",he("connectWebSocket"))]));default:return Re(U([I("type",he("disconnectWebSocket"))]))}},pS=ti("sseOut",lt),hS=function(s){return pS(Lp(s))},mS=ti("webSocketOut",lt),$S=function(s){return mS(Lp(s))},Fp=function(s){var a=s.aN;return a?$S(2):hS(0)},zp=function(s){return s.P},vS=function(s){var a=I(s.Z,zp(s.M));e:for(;;){if(a.a)break e;switch(a.b.$){case 2:return a.b,I(ae(s,{Z:!0}),Fp({aN:s.ak}));case 3:return I(ae(s,{Z:!0}),Fp({aN:s.ak}));default:break e}}return I(s,$t)},qp=function(s){return{$:3,a:s}},Bp={$:2},Up=function(s){return{$:1,a:s}},yS=function(s){var a=zp(s);switch(a.$){case 0:return Zd;case 1:var l=a.a;return Up(l);case 2:return Bp;default:var f=a.a;return qp(f)}},Kp=n(function(s,a){var l=ae(a,{M:s.am,ad:s.ad,Q:yS(s.am)}),f=function(){var M=s.N;if(M.$)return $t;var _=M.a;return Tp(_)}(),p=c(ct,as(_o),s.ae),$=function(){var M=s.af;if(M.$)return I(a.c,A);var _=M.a;return j(_p,a.q,s.ad,a.c,_)}(),y=$.a,w=$.b,D=vS(l),N=D.a,R=D.b,P=it(U([c(as,ek,s.ac),f,Xt(w),R]),p);return I(ae(N,{c:y}),Xt(P))}),gS={$:0},ys=function(s){return v(Vr,lt,function(a){return c(Dr,function(l){return v(Vr,lt,In,l)},a)},s)},bS=i(function(s,a,l){return v(Ae,i(function(f,p,$){var y=$.a,w=$.b,D=ms(p.aS)?Bo:Uo,N=p.aa+1,R=v(ai,s,a,p.I),P=ys(R.aH),M=ae(p,{aj:Y(R.aH),ap:R.ch,aa:N}),_=v(be,p.aG,M,y.l),J=ae(y,{l:_});return I(J,c(de,v(D,p.aG,N,P),w))}),I(l,A),l.l)}),wS=H0,kS=function(s){switch(s.$){case 1:var a=s.a;return Y(a);case 2:var l=s.a;return Y(l);case 0:var f=s.a;return wS(f);default:return K}},SS=n(function(s,a){var l=c(W,"updatedAt",s);if(l.$)return a;var f=l.a,p=kS(f);if(p.$)return a;var $=p.a;return Y(function(){if(a.$)return $;var y=a.a;return c(Hd,$,y)}())}),xS=function(s){return v(Qe,SS,K,Cp(s))},DS=n(function(s,a){return v(Ae,i(function(l,f,p){var $=xS(f),y=c(Bt,"",c(qo,function(D){return D.H},c(W,l,a))),w={F:function(){return $.$?c(Bt,K,c(qo,function(D){return D.F},c(W,l,a))):$}(),H:y};return v(be,l,w,p)}),a,s.ab)}),CS=function(s){return{$:3,a:s}},NS={$:2},Qp=function(s){return{$:1,a:s}},Jp=function(s){return{$:1,a:s}},jS=n(function(s,a){var l=a.ar;if(l.b){var f=l.a,p=zu(f),$=c(ct,function(y){return c(ct,function(w){return c(Bt,En,c(W,w,y))},p)},a.ar);return Y({bR:p,ar:$,cm:s})}else return K}),IS=u(function(s,a,l,f,p){return v(Ae,i(function($,y,w){var D=$.a,N=$.b;if(z(D,a)){var R=c(fs,ps,c(fs,W(N),f)),P=c(fs,ps,c(W,N,p));return z(R,P)?w:c(de,{ah:I(D,N),an:P,ao:R,aq:l},w)}else return w}),A,s)}),Vp=function(s){var a=c(W,"id",s);if(!a.$&&a.a.$===1){var l=a.a.a;return Y(l)}else return K},ES=n(function(s,a){return jn(v(Dn,si,s,a))}),MS=u(function(s,a,l,f,p){return v(Qe,n(function($,y){var w=y.a,D=y.b,N=c(ES,f,$),R=Vp(N);if(R.$)return I(w,D);var P=R.a,M=v(be,P,N,w),_=c(W,P,w),J=C(IS,s,a,P,_,N);return I(M,it(D,J))}),I(l,A),p)}),PS=i(function(s,a,l){return v(Qe,n(function(f,p){var $=p.a,y=p.b,w=f.cm,D=c(Bt,Ie,c(W,w,$)),N=C(MS,s,w,D,f.bR,f.ar),R=N.a,P=N.b;return I(v(be,w,R,$),it(y,P))}),I(a,A),l.cl)}),ml=i(function(s,a,l){var f=a(c(W,s,l));if(f.$)return c(vs,s,l);var p=f.a;return v(be,s,p,l)}),Hp=i(function(s,a,l){var f=l;return v(ml,s,function(p){if(p.$)return Y(U([a]));var $=p.a;return c(ls,a,$)?Y($):Y(c(de,a,$))},f)}),OS=i(function(s,a,l){var f=l;return v(ml,s,function(p){if(p.$)return K;var $=p.a,y=c(Hr,function(w){return!z(w,a)},$);return ll(y)?K:Y(y)},f)}),AS=n(function(s,a){var l=s.ao,f=s.an,p=s.aq,$=function(){if(l.$)return a;var w=l.a;return v(OS,w,p,a)}();if(f.$)return $;var y=f.a;return v(Hp,y,p,$)}),RS=n(function(s,a){return v(Qe,n(function(l,f){var p=c(W,l.ah,f);if(p.$)return f;var $=p.a,y=c(AS,{an:l.an,ao:l.ao,aq:l.aq},$);return v(be,l.ah,y,f)}),a,s)}),_S=n(function(s,a){var l=v(PS,a.bT,a.ab,s),f=l.a,p=l.b,$=c(RS,p,a.bT);return{bT:$,ab:f}}),TS=Ie,LS=function(s){switch(s.$){case 1:var a=s.a;return Y(wr(a));case 0:var l=s.a;return Y(l);case 4:return K;default:return K}},Wp=n(function(s,a){return v(Ae,i(function(l,f,p){var $=c(W,a,f);if($.$)return p;var y=$.a,w=LS(y);if(w.$)return p;var D=w.a;return v(Hp,D,l,p)}),TS,s)}),FS=n(function(s,a){return v(Ae,i(function(l,f,p){var $=v(Ae,i(function(w,D,N){var R=D.cr;if(R===1){var P=c(W,D.cp.bs,a);if(P.$)return N;var M=P.a,_=I(D.cp.bs,D.cp.bH),J=c(Wp,M,D.cp.bH);return v(be,_,J,N)}else return N}),p,f.bZ),y=v(Qe,n(function(w,D){var N=c(W,l,a);if(N.$)return D;var R=N.a,P=I(l,w.bP),M=c(Wp,R,w.bP);return v(be,P,M,D)}),$,f.bT);return y}),Ie,s.ab)}),zS=function(s){return c(oi,n(function(a,l){return jn(c(On,function(f){var p=Vp(f);if(p.$)return K;var $=p.a;return Y(I($,f))},l))}),s.ab)},qS=n(function(s,a){var l=zS(a),f=c(FS,s,l);return{bT:f,ab:l}}),BS=function(s){return{$:1,a:s}},US=function(s){return tp(BS(s))},Qo=n(function(s,a){if(s.$){var $=s.a,y=c(_S,$,a);return I(y,US($.cl))}else{var l=s.a,f=s.b,p=f;return I(c(qS,l,p),$t)}}),KS=n(function(s,a){var l=c(On,function(w){var D=w.a,N=w.b;return c(jS,D,N)},Eo(s.ab));if(ll(l))return ts(K,a,A);var f={cl:l},p=c(Qo,Jp(f),a),$=p.a,y=p.b;return ts(Y(f),$,U([y]))}),QS=function(s){switch(s.$){case 0:var a=s.a;return"Bad URL: "+a;case 1:return"Timeout";case 2:return"Network Error";case 3:var l=s.a;return"Bad Status: "+wr(l);default:var f=s.a;return"Decode Error: "+f}},JS=function(s){return{$:1,a:s}},VS=Kb,HS=n(function(s,a){var l=c(Uu,"?",s);if(l.b){var f=l.a,p=l.b,$=c(Qr,"?",p),y=c(ct,function(D){var N=D.a,R=D.b;return N+("="+VS(R))},a),w=c(Qr,"&",c(Hr,function(D){return!ms(D)},c(de,$,y)));return ms(w)?f:f+("?"+w)}else return s}),WS=n(function(s,a){return{V:a,ab:s}}),GS=i(function(s,a,l){return{F:l,H:a,ar:s}}),YS=Sr(U([Zu(K),c(xe,Y,op),c(xe,function(s){return Y(s)},ss)])),ZS=j(Jr,GS,c(X,"rows",qt(Yt(os))),c(X,"permission_hash",pe),c(X,"last_seen_updated_at",YS)),XS=v(Nn,WS,c(X,"tables",Yt(ZS)),c(X,"has_more",ni)),ex=function(s){return Re(U([I("last_seen_updated_at",function(){var a=s.F;if(a.$)return ep;var l=a.a;return Xd(l)}()),I("permission_hash",he(s.H))]))},tx=function(s){return Re(U([I("tables",v(Vr,lt,ex,s))]))},Gp=mb,rx=n(function(s,a){return{$:3,a:s,b:a}}),nx=function(s){return{$:0,a:s}},ix=n(function(s,a){return{$:4,a:s,b:a}}),sx={$:2},ox=function(s){return{$:1,a:s}},ax=function(s){return{$:0,a:s}},ux={$:1},Yp=function(s){return!s.$},Zp=Ab,Xp=i(function(s,a,l){return a(s(l))}),eh=n(function(s,a){return v(Gb,"",lt,c(Xp,a,s))}),th=n(function(s,a){if(a.$){var f=a.a;return qe(s(f))}else{var l=a.a;return Xe(l)}}),rh=function(s){return{$:4,a:s}},nh=function(s){return{$:3,a:s}},ih=function(s){return{$:0,a:s}},sh={$:2},oh={$:1},lx=n(function(s,a){switch(a.$){case 0:var l=a.a;return qe(ih(l));case 1:return qe(oh);case 2:return qe(sh);case 3:var f=a.a;return qe(nh(f.cj));default:var p=a.b;return c(th,rh,s(p))}}),cx=n(function(s,a){return c(eh,s,lx(function(l){return c(th,Cn,c(Gp,a,l))}))}),fx=Zb,ah=function(s){return{$:1,a:s}},uh=n(function(s,a){return{bi:s,br:a}}),ui=xn,dx=ui(c(uh,Ie,A)),li=Ru,px=Db,lh=Ob,hx=Sb,Jo=i(function(s,a,l){e:for(;;)if(a.b){var f=a.a,p=a.b;if(f.$){var P=f.a;return c(li,function(M){var _=P.cq;if(_.$===1)return v(Jo,s,p,l);var J=_.a;return v(Jo,s,p,v(be,J,M,l))},hx(v(Qb,s,lh(s),P)))}else{var $=f.a,y=c(W,$,l);if(y.$===1){var w=s,D=p,N=l;s=w,a=D,l=N;continue e}else{var R=y.a;return c(li,function(M){return v(Jo,s,p,c(vs,$,l))},px(R))}}}else return ui(l)}),mx=o(function(s,a,l,f){return c(li,function(p){return ui(c(uh,p,l))},v(Jo,s,a,f.bi))}),$x=o(function(s,a,l,f){var p=f.a,$=f.b;return z(a,p)?Y(c(lh,s,$(l))):K}),vx=i(function(s,a,l){return c(li,function(f){return c(li,function(p){return ui(c(s,f,p))},l)},a)}),yx=function(s){return v(Mn,vx(de),ui(A),s)},gx=i(function(s,a,l){var f=a.a,p=a.b;return c(li,function($){return ui(l)},yx(c(On,v($x,s,f,p),l.br)))}),bx=function(s){return{$:0,a:s}},wx=n(function(s,a){if(a.$){var f=a.a;return ah({bA:f.bA,bD:f.bD,bL:c(Yb,s,f.bL),bR:f.bR,b_:f.b_,co:f.co,cq:f.cq,cu:f.cu})}else{var l=a.a;return bx(l)}}),kx=n(function(s,a){return{$:0,a:s,b:a}}),Sx=n(function(s,a){var l=a.a,f=a.b;return c(kx,l,c(Xp,f,s))});xt.Http=Mb(dx,mx,gx,wx,Sx);var xx=Lu("Http"),ch=function(s){return xx(ah({bA:!1,bD:s.bD,bL:s.bL,bR:s.bR,b_:s.b_,co:s.co,cq:s.cq,cu:s.cu}))},Dx=function(s){return ch({bD:fx,bL:s.bL,bR:A,b_:"GET",co:K,cq:K,cu:s.cu})},fh=n(function(s,a){var l=ul(s)?A:U([I("syncCursor",c(Bu,0,tx(s)))]),f=c(HS,it(a.aQ,a.aT),l);return Dx({bL:c(cx,JS,XS),cu:f})}),Cx=n(function(s,a){return v(Ae,i(function(l,f,p){return v(be,l,{F:f.F,H:f.H},p)}),a,s.ab)}),Nx=i(function(s,a,l){if(s.$){var ue=s.a,ie=QS(ue);return{ac:$t,ad:l,ae:A,af:K,N:Y(ie),am:ae(a,{E:!1,P:CS(ie)})}}else{var f=s.a,p=c(Cx,f,a.B),$=a.J+sl(f.ab),y={aU:!f.V,N:K,bs:K,J:$,bv:K},w=f.V?Qp(y):NS,D=ae(a,{B:p,E:f.V,P:w,J:$}),N=c(KS,f,l),R=N.a,P=N.b,M=N.c,_=f.V?I(D,c(fh,p,a.av)):I(ae(D,{E:!1}),$t),J=_.a,G=_.b;return{ac:G,ad:P,ae:M,af:R,N:K,am:J}}}),jx=function(s){var a=I(s.ai,s.E);if(a.a&&!a.b){var l={aU:!1,N:K,bs:K,J:s.J,bv:K};return I(ae(s,{E:!0,P:Qp(l)}),c(fh,s.B,s.av))}else return I(s,$t)},dh=i(function(s,a,l){if(s.$){var D=s.a;return v(Nx,D,a,l)}else{var f=c(DS,l,a.B),p=ae(a,{B:f,ai:!0}),$=jx(p),y=$.a,w=$.b;return{ac:w,ad:l,ae:A,af:K,N:K,am:y}}}),Ix=n(function(s,a){var l=v(bS,a.q,a.ad,a.c),f=l.a,p=l.b,$=ae(a,{c:f}),y=c(Kp,v(dh,gS,a.M,a.ad),$),w=y.a,D=y.b;return I(w,Xt(U([Xt(p),D])))}),Ex=n(function(s,a){switch(s.$){case 0:var l=s.a,f=c(Qo,Jp(l),a.ad),p=f.a,$=f.b,y=j(_p,a.q,p,a.c,l),w=y.a,D=y.b;return I(ae(a,{ad:p,c:w}),Xt(U([c(as,_o,$),Xt(D)])));case 2:return I(a,$t);case 3:var N=s.a;return I(ae(a,{Q:qp(N)}),$t);case 1:var R=s.a;return I(ae(a,{Q:Up(R)}),$t);default:return I(ae(a,{Q:Bp}),$t)}}),ph=h(function(s,a,l,f,p,$,y){return{aS:f,a5:l,aj:y,I:a,aG:s,ap:p,aa:$}}),Mx=n(function(s,a){switch(s.$){case 0:var _=s.a,l=s.b,f=s.c,p=H(ph,_,l,f,"",Ie,0,K),J=v(be,_,p,a.c.l),$=1,y=v(ai,a.q,a.ad,l),w=ae(p,{aj:Y(y.aH),ap:y.ch,aa:$}),D=v(be,_,w,J),G={l:D},N=ys(y.aH);return I(ae(a,{c:G}),U([v(Bo,_,$,N)]));case 1:var _=s.a,R=s.b,P=c(W,_,a.c.l);if(P.$)return I(a,A);var p=P.a,M=ae(p,{a5:R,aj:K,ap:Ie}),$=p.aa+1,y=v(ai,a.q,a.ad,p.I),w=ae(M,{aj:Y(y.aH),ap:y.ch,aa:$}),J=v(be,_,w,a.c.l),G={l:J},N=ys(y.aH);return I(ae(a,{c:G}),U([v(Bo,_,$,N)]));default:var _=s.a,J=c(vs,_,a.c.l),G={l:J};return I(ae(a,{c:G}),A)}}),Px=o(function(s,a,l,f){return{$:4,a:s,b:a,c:l,d:f}}),Ox=n(function(s,a){var l=c(Uu,"?",s);if(l.b){var f=l.a,p=l.b,$=c(Qr,"?",p);return ms($)?f+("/"+a):f+("/"+(a+("?"+$)))}else return s+("/"+a)}),Ax=n(function(s,a){return{$:0,a:s,b:a}}),Rx=Ax,_x=function(s){return c(Xb,"application/json",c(Bu,0,s))},Tx=n(function(s,a){switch(s.$){case 0:var w=s.a,l=s.b,G=s.c;s.d;var f=function(){var ie=c(W,w,a.c.l);if(ie.$)return 1;var oe=ie.a;return oe.aa+1}(),p=v(ai,a.q,a.ad,l),$=ys(p.aH),y=function(){var ie=c(W,w,a.c.l);if(ie.$)return a.c;var oe=ie.a,we=ae(oe,{aj:Y(p.aH),ap:p.ch,aa:f}),Ee=v(be,w,we,a.c.l);return{l:Ee}}();return I(ae(a,{c:y}),U([v(Uo,w,f,$)]));case 1:var w=s.a;s.c;var D=c(W,w,a.c.l);if(D.$)return I(a,A);var N=D.a,f=N.aa+1,p=v(ai,a.q,a.ad,N.I),$=ys(p.aH),R=ae(N,{aj:Y(p.aH),ap:p.ch,aa:f}),P=v(be,w,R,a.c.l),y={l:P};return I(ae(a,{c:y}),U([v(Uo,w,f,$)]));case 2:return I(a,A);default:var M=s.a,_=s.b,J=s.c,G=s.d,ue=c(Ox,_,M);return I(a,U([ch({bD:_x(G),bL:c(eh,v(Px,M,_,G),function(ie){switch(ie.$){case 0:var oe=ie.a;return qe(ih(oe));case 1:return qe(oh);case 2:return qe(sh);case 3:var we=ie.a,Ee=ie.b;return qe(nh(we.cj));default:var Ee=ie.b,vt=c(Gp,Dt,Ee);if(vt.$){var Vo=vt.a;return qe(rh(Cn(Vo)))}else{var Cr=vt.a;return Xe(Cr)}}}),bR:c(ct,function(ie){var oe=ie.a,we=ie.b;return c(Rx,oe,we)},J),b_:"POST",co:K,cq:K,cu:ue})]))}}),Lx=function(s){switch(s.$){case 0:var a=s.a;return"Bad URL: "+a;case 1:return"Timeout";case 2:return"Network Error";case 3:var l=s.a;return"Bad Status: "+wr(l);default:var f=s.a;return"Decode Error: "+f}},Fx=n(function(s,a){return{$:3,a:s,b:a}}),hh=n(function(s,a){return cl(c(Fx,s,a))}),zx=n(function(s,a){switch(s.$){case 0:var M=s.a,l=s.b,f=s.c,p=s.d,$=H(ph,M,l,f,p,Ie,0,K),y=v(be,M,$,a.l);return I(ae(a,{l:y}),$t);case 1:var M=s.a,w=s.b,D=s.c,N=c(W,M,a.l);if(N.$)return I(a,$t);var $=N.a,R=c(Bt,$.I,w),P=ae($,{a5:D,aj:K,I:R,ap:Ie}),y=v(be,M,P,a.l);return I(ae(a,{l:y}),$t);case 2:var M=s.a;return I(ae(a,{l:c(vs,M,a.l)}),$t);default:return I(a,$t)}}),qx=n(function(s,a){var l=s;return c(zx,l,a)}),Bx=n(function(s,a){switch(s.$){case 0:var N=s.a,l=c(Qo,c(X1,a.q,N),a.ad),vt=l.a,Cr=l.b,f=ae(a,{ad:vt}),p=c(Ix,N,f),P=p.a,$=p.b;return I(P,Xt(U([c(as,_o,Cr),$])));case 1:var N=s.a;return c(Ex,N,a);case 2:var N=s.a,y=c(qx,N,a.c),w=y.a,D=c(Tx,N,ae(a,{c:w})),P=D.a,M=D.b;return I(P,Xt(M));case 3:var N=s.a,R=c(Mx,N,a),P=R.a,M=R.b;return I(P,Xt(M));case 4:var _=s.a;s.b,s.c;var J=s.d;if(J.$){var ue=J.a;return I(a,c(hh,_,qe(Lx(ue))))}else{var G=J.a;return I(a,c(hh,_,Xe(G)))}case 6:var ie=s.a;return I(a,Tp(ie));case 7:var oe=s.a;return c(Kp,v(dh,oe,a.M,a.ad),a);default:var we=s.a,Ee=c(Qo,we,a.ad),vt=Ee.a,Cr=Ee.b;return I(ae(a,{ad:vt}),c(as,_o,Cr))}}),Ux=jb,Kx=Ux({bU:function(s){var a=c(Zt,Lw,s);if(a.$)return a.a,rp({aB:{aN:0},q:{aF:Ie,ab:Ie},av:{aQ:"",aT:""}});var l=a.a;return rp(l)},l:Z1,ct:Bx});Ub({Main:{init:Kx(Dt)(0)}})}(e),e.Elm}const xO=1;class DO{constructor(t){this.db=null,this.initPromise=null,this.dbName=t}async init(){return this.db?this.db:this.initPromise?this.initPromise:(this.initPromise=new Promise((t,r)=>{const n=indexedDB.open(this.dbName,xO);n.onerror=()=>{this.initPromise=null,r(new Error(`Failed to open IndexedDB: ${n.error}`))},n.onsuccess=()=>{this.db=n.result,this.initPromise=null,t(this.db)},n.onupgradeneeded=i=>{const o=i.target.result;if(!o.objectStoreNames.contains("tables")){const u=o.createObjectStore("tables",{keyPath:["tableName","id"]});u.createIndex("byTable","tableName",{unique:!1}),u.createIndex("byUpdatedAt","updatedAt",{unique:!1})}o.objectStoreNames.contains("syncCursor")||o.createObjectStore("syncCursor")}}),this.initPromise)}async getDB(){if(this.db||await this.init(),!this.db)throw new Error("Failed to initialize database");return this.db}async getAllRows(t){const r=await this.getDB();return new Promise((n,i)=>{const d=r.transaction(["tables"],"readonly").objectStore("tables").index("byTable"),h=IDBKeyRange.only(t),m=d.getAll(h);m.onsuccess=()=>{const g=m.result||[];n(g.map(c=>{const{tableName:v,...j}=c;return j}))},m.onerror=()=>{i(new Error(`Failed to read rows: ${m.error}`))}})}async getAllTables(){const t=await this.getDB(),r={};return new Promise((n,i)=>{const d=t.transaction(["tables"],"readonly").objectStore("tables").getAll();d.onsuccess=()=>{const h=d.result||[];for(const m of h){const g=m.tableName;r[g]||(r[g]=[]);const{tableName:c,...v}=m;r[g].push(v)}n(r)},d.onerror=()=>{i(new Error(`Failed to read tables: ${d.error}`))}})}async putRows(t,r){if(r.length===0)return;const n=await this.getDB();return new Promise((i,o)=>{const u=n.transaction(["tables"],"readwrite"),d=u.objectStore("tables");let h=null;const m=new Array(r.length);let g=0;u.oncomplete=()=>{h?o(h):i()},u.onerror=()=>{o(new Error(`Transaction failed: ${u.error}`))},r.forEach((v,j)=>{const C=d.get([t,v.id]);C.onsuccess=()=>{m[j]=C.result||null,g+=1,g===r.length&&c()},C.onerror=()=>{m[j]=null,g+=1,g===r.length&&c()}});const c=()=>{r.forEach((v,j)=>{const C=m[j];if(C&&C.updatedAt!=null&&v.updatedAt!=null){const S=typeof C.updatedAt=="number"?C.updatedAt:new Date(C.updatedAt).getTime()/1e3,k=typeof v.updatedAt=="number"?v.updatedAt:new Date(v.updatedAt).getTime()/1e3;if(S>k)return}else if(C&&C.updatedAt!=null&&v.updatedAt==null)return;const T={...v,tableName:t},H=d.put(T);H.onerror=()=>{h=new Error(`Failed to write row: ${H.error}`)}})}})}async deleteDatabase(){return this.db&&(this.db.close(),this.db=null),new Promise((t,r)=>{const n=indexedDB.deleteDatabase(this.dbName);n.onsuccess=()=>t(),n.onerror=()=>r(new Error(`Failed to delete database: ${n.error}`)),n.onblocked=()=>r(new Error("Database deletion blocked"))})}}class CO{constructor(t){this.elmApp=null,this.storage=t}attachPorts(t){this.elmApp=t,t.ports.indexedDbOut&&t.ports.indexedDbOut.subscribe(r=>{console.log("[PyreClient] port indexedDbOut <-",r),this.handleMessage(r).catch(n=>{console.error("[PyreClient] IndexedDB handler failed:",n)})})}async handleMessage(t){if(t.type==="requestInitialData"){await this.sendInitialData();return}t.type==="writeDelta"&&await this.writeDelta(t.tableGroups||[])}async sendInitialData(){var t;if((t=this.elmApp)!=null&&t.ports.receiveIndexedDbMessage)try{await this.storage.init();const r=await this.storage.getAllTables();this.elmApp.ports.receiveIndexedDbMessage.send({type:"initialData",data:{tables:r}}),console.log("[PyreClient] port receiveIndexedDbMessage ->",{type:"initialData",data:{tables:r}})}catch(r){console.error("[PyreClient] Failed to load initial data:",r);const n={type:"initialData",data:{tables:{}}};this.elmApp.ports.receiveIndexedDbMessage.send(n),console.log("[PyreClient] port receiveIndexedDbMessage ->",n)}}async writeDelta(t){try{await this.storage.init();for(const r of t){const n=r.table_name;if(!n)continue;const i=r.rows.map(o=>{const u={};return r.headers.forEach((d,h)=>{u[d]=o[h]}),u});await this.storage.putRows(n,i)}}catch(r){console.error("[PyreClient] Failed to write delta:",r)}}}class NO{constructor(t){this.elmApp=null,this.queryStates=new Map,this.hasPorts=!1,this.logger=t??(r=>{console.error("[PyreClient] QueryClient error",r)})}attachPorts(t){this.elmApp=t,this.hasPorts=!!(t.ports.queryClientOut&&t.ports.receiveQueryClientMessage),t.ports.queryClientOut&&t.ports.queryClientOut.subscribe(r=>{this.handleMessage(r).catch(n=>{this.logError({message:"Failed to handle QueryDelta message",details:n instanceof Error?n.message:String(n)})})})}isAvailable(){return this.hasPorts}registerQuery(t,r){var i,o;console.log("[QueryClient] registerQuery:",t.queryId),this.queryStates.set(t.queryId,{input:t.input,result:null,revision:-1,callback:r});const n={type:"register",queryId:t.queryId,querySource:t.querySource,queryInput:t.input};console.log("[QueryClient] sending register message to Elm:",n),(o=(i=this.elmApp)==null?void 0:i.ports.receiveQueryClientMessage)==null||o.send(n)}updateQueryInput(t,r){var o,u;const n=this.queryStates.get(t);n&&(n.input=r);const i={type:"update-input",queryId:t,queryInput:r};(u=(o=this.elmApp)==null?void 0:o.ports.receiveQueryClientMessage)==null||u.send(i)}unregisterQuery(t){var n,i;console.log("[QueryClient] unregisterQuery:",t),this.queryStates.delete(t);const r={type:"unregister",queryId:t};(i=(n=this.elmApp)==null?void 0:n.ports.receiveQueryClientMessage)==null||i.send(r)}async handleMessage(t){if(console.log("[QueryClient] handleMessage received:",t),!t||typeof t!="object"){console.log("[QueryClient] handleMessage: message is not an object");return}const r=t;if(r.type!=="full"&&r.type!=="delta"){console.log("[QueryClient] handleMessage: unknown type",t.type);return}const n=this.queryStates.get(r.queryId);if(console.log("[QueryClient] handleMessage: queryId =",r.queryId,"state =",n?"found":"NOT FOUND"),console.log("[QueryClient] handleMessage: registered queryIds =",Array.from(this.queryStates.keys())),!n){this.logError({message:"QueryDelta received for unknown query",queryId:r.queryId});return}if(r.revision<=n.revision){this.logError({message:"QueryDelta revision out of order",queryId:r.queryId,details:`received=${r.revision} current=${n.revision}`});return}if(r.type==="full"){console.log("[QueryClient] handleMessage: full result, calling callback with:",r.result),n.result=r.result,n.revision=r.revision,n.callback(n.result),console.log("[QueryClient] handleMessage: callback completed");return}const i=this.applyDelta(r.queryId,n.result,r.delta);n.result=i,n.revision=r.revision,n.callback(n.result)}applyDelta(t,r,n){let i=r;for(const o of n.ops){const u=this.applyOp(t,i,o);u.ok&&(i=u.node)}return i}applyOp(t,r,n){const i=jO(n.path);if(!i.ok)return this.logError({message:"QueryDelta op failed: invalid path",queryId:t,op:n.op,path:n.path,details:i.details}),{ok:!1,details:i.details};const o=i.segments;if(n.op==="set-row"){const u=Xr(r,o,()=>({ok:!0,node:n.row}));return u.ok||this.logError({message:"QueryDelta op failed: set-row",queryId:t,op:n.op,path:n.path,details:u.details}),u}if(n.op==="remove-row"){if(o.length===0)return this.failOp(t,n,"Empty path");const u=o[o.length-1];if(u.type==="field"){const m=Xr(r,o,()=>({ok:!0,node:null}));return m.ok||this.logError({message:"QueryDelta op failed: remove-row",queryId:t,op:n.op,path:n.path,details:m.details}),m}const d=o.slice(0,-1),h=Xr(r,d,m=>{if(!Array.isArray(m))return{ok:!1,details:"Expected list for row removal"};const g=u.type==="index"?u.index:z0(m,u.id);if(g<0||g>=m.length)return{ok:!1,details:"Row not found for removal"};const c=m.slice();return c.splice(g,1),{ok:!0,node:c}});return h.ok||this.logError({message:"QueryDelta op failed: remove-row",queryId:t,op:n.op,path:n.path,details:h.details}),h}if(n.op==="insert-row"){const u=Xr(r,o,d=>{if(!Array.isArray(d))return{ok:!1,details:"Expected list for insert-row"};const h=Math.min(Math.max(0,n.index),d.length),m=d.slice();return m.splice(h,0,n.row),{ok:!0,node:m}});return u.ok||this.logError({message:"QueryDelta op failed: insert-row",queryId:t,op:n.op,path:n.path,details:u.details}),u}if(n.op==="move-row"){const u=Xr(r,o,d=>{if(!Array.isArray(d))return{ok:!1,details:"Expected list for move-row"};if(n.from<0||n.from>=d.length||n.to<0||n.to>=d.length)return{ok:!1,details:"move-row index out of bounds"};const h=d.slice(),[m]=h.splice(n.from,1);return h.splice(n.to,0,m),{ok:!0,node:h}});return u.ok||this.logError({message:"QueryDelta op failed: move-row",queryId:t,op:n.op,path:n.path,details:u.details}),u}if(n.op==="remove-row-by-index"){const u=Xr(r,o,d=>{if(!Array.isArray(d))return{ok:!1,details:"Expected list for remove-row-by-index"};if(n.index<0||n.index>=d.length)return{ok:!1,details:"remove-row-by-index out of bounds"};const h=d.slice();return h.splice(n.index,1),{ok:!0,node:h}});return u.ok||this.logError({message:"QueryDelta op failed: remove-row-by-index",queryId:t,op:n.op,path:n.path,details:u.details}),u}return this.failOp(t,n,"Unknown op")}failOp(t,r,n){return this.logError({message:"QueryDelta op failed",queryId:t,op:r.op,path:"path"in r?r.path:void 0,details:n}),{ok:!1,details:n}}logError(t){this.logger(t)}}const F0=e=>typeof e=="object"&&e!==null&&!Array.isArray(e),Xr=(e,t,r)=>{if(t.length===0)return r(e);const[n,...i]=t;if(n.type==="field"){if(!F0(e))return{ok:!1,details:`Expected object before field '${n.name}'`};if(!(n.name in e))return{ok:!1,details:`Missing field '${n.name}'`};const m=e[n.name],g=Xr(m,i,r);return g.ok?g.node===m?{ok:!0,node:e}:{ok:!0,node:{...e,[n.name]:g.node}}:g}if(!Array.isArray(e))return{ok:!1,details:"Expected list before index selector"};const o=n.type==="index"?n.index:z0(e,n.id);if(o<0||o>=e.length)return{ok:!1,details:"Row not found for selector"};const u=e[o],d=Xr(u,i,r);if(!d.ok)return d;if(d.node===u)return{ok:!0,node:e};const h=e.slice();return h[o]=d.node,{ok:!0,node:h}},jO=e=>{if(!e.startsWith("."))return{ok:!1,details:"Path must start with a dot"};const t=e.slice(1).split(".");if(t.length===0)return{ok:!1,details:"Empty path"};const r=[];for(const n of t){if(!n)return{ok:!1,details:"Empty path segment"};let i=0,o="";for(;i<n.length&&n[i]!=="#"&&n[i]!=="[";)o+=n[i],i+=1;if(!o)return{ok:!1,details:"Missing field name"};for(r.push({type:"field",name:o});i<n.length;){if(n[i]==="#"){if(n[i+1]!=="(")return{ok:!1,details:"Invalid id selector"};i+=2;const u=IO(n,i);if(!u.ok)return{ok:!1,details:u.details};r.push({type:"id",id:u.id}),i=u.next;continue}if(n[i]==="["){const u=n.indexOf("]",i+1);if(u===-1)return{ok:!1,details:"Unclosed index selector"};const d=n.slice(i+1,u);if(!d||!/^[0-9]+$/.test(d))return{ok:!1,details:"Invalid index selector"};r.push({type:"index",index:Number(d)}),i=u+1;continue}return{ok:!1,details:"Invalid selector segment"}}}return{ok:!0,segments:r}},IO=(e,t)=>{let r=t,n="";for(;r<e.length;){const i=e[r];if(i===")")return{ok:!0,id:n,next:r+1};if(i==="\\"){const o=e[r+1];if(o===void 0)return{ok:!1,details:"Dangling escape in id selector"};n+=o,r+=2;continue}n+=i,r+=1}return{ok:!1,details:"Unclosed id selector"}},z0=(e,t)=>e.findIndex(r=>!F0(r)||!("id"in r)?!1:String(r.id)===t);function EO(e,t,r){let n=t??{};const i=[];for(const o of r.ops){const u=MO(o.path);if(!u.ok||!u.segments){i.push({message:"QueryDelta op failed: invalid path",queryId:e,op:o.op,path:o.path,details:u.error});continue}let d;switch(o.op){case"set-row":if(!Ci(o.row)){i.push({message:"QueryDelta op failed: row is not an object",queryId:e,op:o.op,path:o.path});continue}d=_n(n,u.segments,h=>Ci(h)?{value:o.row}:{error:"Path did not resolve to a row object"});break;case"remove-row":d=_n(n,u.segments,h=>Ci(h)?{value:null}:{error:"Path did not resolve to a row object"});break;case"insert-row":if(!Ci(o.row)){i.push({message:"QueryDelta op failed: row is not an object",queryId:e,op:o.op,path:o.path});continue}d=_n(n,u.segments,h=>{if(!Array.isArray(h))return{error:"Path did not resolve to a list"};if(!Number.isInteger(o.index)||o.index<0||o.index>h.length)return{error:`Index ${o.index} out of bounds`};const m=h.slice();return m.splice(o.index,0,o.row),{value:m}});break;case"move-row":d=_n(n,u.segments,h=>{if(!Array.isArray(h))return{error:"Path did not resolve to a list"};if(!Number.isInteger(o.from)||!Number.isInteger(o.to))return{error:"Indices must be integers"};if(o.from<0||o.from>=h.length)return{error:`From index ${o.from} out of bounds`};if(o.to<0||o.to>=h.length)return{error:`To index ${o.to} out of bounds`};const m=h.slice(),[g]=m.splice(o.from,1);return m.splice(o.to,0,g),{value:m}});break;case"remove-row-by-index":d=_n(n,u.segments,h=>{if(!Array.isArray(h))return{error:"Path did not resolve to a list"};if(!Number.isInteger(o.index)||o.index<0||o.index>=h.length)return{error:`Index ${o.index} out of bounds`};const m=h.slice();return m.splice(o.index,1),{value:m}});break;default:d={error:"Unknown op"}}if(d.error){i.push({message:"QueryDelta op failed",queryId:e,op:o.op,path:o.path,details:d.error});continue}n=d.value??n}return{result:n,errors:i}}function MO(e){if(!e.startsWith("."))return{ok:!1,error:"Path must start with ."};const t=[];let r=1;for(;r<e.length;){e[r]==="."&&(r+=1);const n=r;for(;r<e.length;){const o=e[r];if(o==="."||o==="["||o==="#"&&e[r+1]==="(")break;r+=1}if(n===r)return{ok:!1,error:"Missing field segment"};const i=e.slice(n,r);for(t.push({kind:"field",name:i});r<e.length;){const o=e[r];if(o===".")break;if(o==="["){const u=e.indexOf("]",r);if(u===-1)return{ok:!1,error:"Unclosed index selector"};const d=e.slice(r+1,u);if(!/^-?\d+$/.test(d))return{ok:!1,error:`Invalid index selector: ${d}`};t.push({kind:"index",index:Number(d)}),r=u+1;continue}if(o==="#"&&e[r+1]==="("){const u=PO(e,r+2);if(!u.ok||u.id===void 0||u.nextIndex===void 0)return{ok:!1,error:u.error??"Invalid id selector"};t.push({kind:"id",id:u.id}),r=u.nextIndex;continue}return{ok:!1,error:`Unexpected path character: ${o}`}}}return{ok:!0,segments:t}}function PO(e,t){let r=t,n="";for(;r<e.length;){const o=e[r];if(o==="\\"){const u=e[r+1];if(u===void 0)return{ok:!1,error:"Invalid escape sequence in id selector"};n+=u,r+=2;continue}if(o===")"){r+=1;break}n+=o,r+=1}return r>e.length||e[r-1]!==")"?{ok:!1,error:"Unclosed id selector"}:{ok:!0,id:/^-?\d+$/.test(n)?Number(n):n,nextIndex:r}}function _n(e,t,r){if(t.length===0)return r(e);const[n,...i]=t;if(n.kind==="field"){if(!Ci(e))return{error:`Expected object for field "${n.name}"`};if(!(n.name in e))return{error:`Missing field "${n.name}"`};const g=e[n.name],c=_n(g,i,r);return c.error?c:c.value===g?{value:e}:{value:{...e,[n.name]:c.value}}}if(!Array.isArray(e))return{error:"Expected list for selector"};const o=e,u=n.kind==="index"?n.index:OO(o,n.id);if(u===null)return{error:"Row id not found in list"};if(u<0||u>=o.length)return{error:`Index ${u} out of bounds`};const d=o[u],h=_n(d,i,r);if(h.error)return h;if(h.value===d)return{value:e};const m=o.slice();return m[u]=h.value,{value:m}}function OO(e,t){for(let r=0;r<e.length;r+=1){const n=e[r];if(!Ci(n))continue;const i=n.id;if(t===i||typeof t=="number"&&typeof i=="string"&&i===String(t)||typeof t=="string"&&typeof i=="number"&&t===String(i))return r}return null}function Ci(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}class AO{constructor(){this.elmApp=null,this.queryCallbacks=new Map,this.callbackPortToQueryId=new Map,this.queryStates=new Map,this.mutationCallbacks=new Map}attachPorts(t){this.elmApp=t,t.ports.queryManagerOut&&t.ports.queryManagerOut.subscribe(r=>{console.log("[PyreClient] port queryManagerOut <-",r),this.handleMessage(r).catch(n=>{console.error("[PyreClient] Query manager handler failed:",n)})})}registerQuery(t,r){var i,o;this.queryCallbacks.set(t.callbackPort,r),this.callbackPortToQueryId.set(t.callbackPort,t.queryId),this.queryStates.set(t.queryId,{queryId:t.queryId,callbackPort:t.callbackPort,result:{},revision:0});const n={type:"registerQuery",queryId:t.queryId,query:t.query,input:t.input,callbackPort:t.callbackPort};(o=(i=this.elmApp)==null?void 0:i.ports.receiveQueryManagerMessage)==null||o.send(n),console.log("[PyreClient] port receiveQueryManagerMessage ->",n)}updateQueryInput(t,r,n){var o,u;const i={type:"updateQueryInput",queryId:t,query:n,input:r};(u=(o=this.elmApp)==null?void 0:o.ports.receiveQueryManagerMessage)==null||u.send(i),console.log("[PyreClient] port receiveQueryManagerMessage ->",i)}unregisterQuery(t,r){var i,o;this.queryCallbacks.delete(r),this.callbackPortToQueryId.delete(r),this.queryStates.delete(t);const n={type:"unregisterQuery",queryId:t};(o=(i=this.elmApp)==null?void 0:i.ports.receiveQueryManagerMessage)==null||o.send(n),console.log("[PyreClient] port receiveQueryManagerMessage ->",n)}sendMutation(t,r,n,i,o){var h,m;if(i){const g=this.mutationCallbacks.get(t)??[];g.push(i),this.mutationCallbacks.set(t,g)}const u=o?Object.entries(o):void 0,d={type:"sendMutation",id:t,baseUrl:r,input:n,headers:u};(m=(h=this.elmApp)==null?void 0:h.ports.receiveQueryManagerMessage)==null||m.send(d),console.log("[PyreClient] port receiveQueryManagerMessage ->",d)}async handleMessage(t){if(t.type==="queryResult"){const r=t;if(!r.callbackPort)return;const n=this.callbackPortToQueryId.get(r.callbackPort);if(n){const o=this.queryStates.get(n);o&&(o.result=r.result??{},o.revision+=1)}const i=this.queryCallbacks.get(r.callbackPort);i&&i(r.result);return}if(t.type==="queryFull"){const r=t;if(!r.queryId||r.revision===void 0)return;const n=this.queryStates.get(r.queryId);if(!n||r.revision<=n.revision)return;n.result=r.result??{},n.revision=r.revision;const i=this.queryCallbacks.get(n.callbackPort);i&&i(n.result);return}if(t.type==="queryDelta"){const r=t;if(!r.queryId||r.revision===void 0||!r.delta)return;const n=this.queryStates.get(r.queryId);if(!n||r.revision<=n.revision)return;const{result:i,errors:o}=EO(r.queryId,n.result,r.delta);o.length>0&&o.forEach(d=>{console.warn("[PyreClient] QueryDelta op failed:",d)}),n.result=i,n.revision=r.revision;const u=this.queryCallbacks.get(n.callbackPort);u&&u(n.result);return}if(t.type==="mutationResult"){const r=t;if(!r.id)return;const n=this.mutationCallbacks.get(r.id);if(!n||n.length===0)return;const i=n.shift();i&&i(r.result??{ok:!1,error:"Missing mutation result"}),n.length===0?this.mutationCallbacks.delete(r.id):this.mutationCallbacks.set(r.id,n)}}}class RO{constructor(t,r){this.eventSource=null,this.sessionId=null,this.config=null,this.shouldReconnect=!0,this.onMessage=null,this.elmApp=null,this.config=t,this.onMessage=r??null}setOnMessage(t){this.onMessage=t}attachPorts(t){this.elmApp=t,t.ports.sseOut&&t.ports.sseOut.subscribe(r=>{console.log("[PyreClient] port sseOut <-",r);const n=r;n.type==="connectSSE"?this.connect():n.type==="disconnectSSE"&&this.disconnect()})}connect(){this.shouldReconnect=!0,this.attemptConnect()}emitMessage(t){var r,n,i;(r=this.onMessage)==null||r.call(this,t),(i=(n=this.elmApp)==null?void 0:n.ports.receiveSSEMessage)==null||i.send(t),console.log("[PyreClient] port receiveSSEMessage ->",t)}attemptConnect(){if(this.config)try{const t=`${this.config.baseUrl}${this.config.eventsPath}`,r=new EventSource(t);r.onopen=()=>{this.eventSource=r},r.addEventListener("connected",n=>{try{const i=JSON.parse(n.data);if(i.sessionId){this.sessionId=i.sessionId;const o={type:"connected",sessionId:i.sessionId};this.emitMessage(o)}}catch(i){console.error("Failed to parse SSE connected message:",i);const o={type:"error",error:"Failed to parse connection message"};this.emitMessage(o)}}),r.addEventListener("delta",n=>{try{const o={type:"delta",data:JSON.parse(n.data).data};this.emitMessage(o)}catch(i){console.error("Failed to parse SSE delta message:",i)}}),r.addEventListener("syncProgress",n=>{try{const o={type:"syncProgress",data:JSON.parse(n.data).data};this.emitMessage(o)}catch(i){console.error("Failed to parse SSE sync progress message:",i)}}),r.addEventListener("syncComplete",()=>{const n={type:"syncComplete"};this.emitMessage(n)}),r.onerror=()=>{const n=r.readyState;if(n===EventSource.CLOSED)console.warn("[PyreClient] SSE connection closed"),this.shouldReconnect;else if(n===EventSource.CONNECTING&&!this.sessionId){const i={type:"error",error:"SSE connection failed"};this.emitMessage(i)}}}catch(t){const r={type:"error",error:`SSE connection error: ${t}`};this.emitMessage(r)}}disconnect(){this.shouldReconnect=!1,this.eventSource&&(this.eventSource.close(),this.eventSource=null),this.sessionId=null}}class _O{constructor(t,r){this.socket=null,this.shouldReconnect=!0,this.reconnectTimer=null,this.onMessage=null,this.elmApp=null,this.config=t,this.onMessage=r??null}setOnMessage(t){this.onMessage=t}attachPorts(t){this.elmApp=t,t.ports.webSocketOut&&t.ports.webSocketOut.subscribe(r=>{console.log("[PyreClient] port webSocketOut <-",r);const n=r;n.type==="connectWebSocket"?this.connect():n.type==="disconnectWebSocket"&&this.disconnect()})}connect(){this.shouldReconnect=!0,this.openSocket()}emitMessage(t){var r,n,i;(r=this.onMessage)==null||r.call(this,t),(i=(n=this.elmApp)==null?void 0:n.ports.receiveWebSocketMessage)==null||i.send(t),console.log("[PyreClient] port receiveWebSocketMessage ->",t)}openSocket(){const t=this.buildWebSocketUrl(),r=new WebSocket(t);r.onopen=()=>{this.socket=r},r.onmessage=n=>{if(typeof n.data=="string")try{const i=JSON.parse(n.data);this.emitMessage(i)}catch(i){console.error("[PyreClient] Failed to parse WebSocket message:",i);const o={type:"error",error:"Failed to parse WebSocket message"};this.emitMessage(o)}},r.onerror=()=>{const n={type:"error",error:"WebSocket connection error"};this.emitMessage(n)},r.onclose=()=>{if(this.socket=null,!this.shouldReconnect||this.reconnectTimer!==null)return;const n=this.config.reconnectDelayMs??1e3;this.reconnectTimer=window.setTimeout(()=>{this.reconnectTimer=null,this.shouldReconnect&&this.openSocket()},n)}}buildWebSocketUrl(){const t=new URL(this.config.eventsPath,this.config.baseUrl);return t.protocol=t.protocol==="https:"?"wss:":"ws:",t.toString()}disconnect(){this.shouldReconnect=!1,this.reconnectTimer!==null&&(window.clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.socket&&(this.socket.close(),this.socket=null)}}class TO{constructor(t){this.sessionId=null,this.syncProgressCallbacks=new Set,this.sessionCallbacks=new Set,this.lastSyncProgress=null,this.queryCounter=0,this.handleLiveSyncMessage=o=>{if(o.type==="connected"&&o.sessionId&&(this.sessionId=o.sessionId,this.sessionCallbacks.forEach(u=>{u(o.sessionId)})),o.type==="syncProgress"&&o.data){const u=o.data;this.lastSyncProgress=u,this.syncProgressCallbacks.forEach(d=>{d(u)})}if(o.type==="syncComplete"&&this.lastSyncProgress){const u={...this.lastSyncProgress,complete:!0};this.lastSyncProgress=u,this.syncProgressCallbacks.forEach(d=>{d(u)})}};const r=t.indexedDbName??"pyre-client",n=t.server.liveSyncTransport??"sse";this.server=t.server,this.endpoints={catchup:"/sync",events:"/sync/events",query:"/db",...t.server.endpoints};const i=SO(Object.create(globalThis));this.elmApp=i.Main.init({flags:{schema:t.schema,server:{baseUrl:t.server.baseUrl,catchupPath:this.endpoints.catchup},liveSync:{transport:n}}}),this.storage=new DO(r),this.indexedDbService=new CO(this.storage),this.sseManager=new RO({baseUrl:t.server.baseUrl,eventsPath:this.endpoints.events}),this.webSocketManager=new _O({baseUrl:t.server.baseUrl,eventsPath:this.endpoints.events}),this.queryManager=new AO,this.queryClient=new NO(o=>{t.onError?t.onError(new Error(o.message)):console.error("[PyreClient] QueryClient error",o)}),this.indexedDbService.attachPorts(this.elmApp),this.sseManager.setOnMessage(this.handleLiveSyncMessage),this.webSocketManager.setOnMessage(this.handleLiveSyncMessage),this.sseManager.attachPorts(this.elmApp),this.webSocketManager.attachPorts(this.elmApp),this.queryManager.attachPorts(this.elmApp),this.queryClient.attachPorts(this.elmApp),this.elmApp.ports.errorOut&&this.elmApp.ports.errorOut.subscribe(o=>{console.log("[PyreClient] port errorOut <-",o);const u=new Error(o);t.onError?t.onError(u):console.error("[PyreClient]",o)})}async init(){await this.storage.init()}onSyncProgress(t){return this.syncProgressCallbacks.add(t),this.lastSyncProgress&&t(this.lastSyncProgress),()=>{this.syncProgressCallbacks.delete(t)}}onSession(t){return this.sessionCallbacks.add(t),this.sessionId&&t(this.sessionId),()=>{this.sessionCallbacks.delete(t)}}getSessionId(){return this.sessionId}run(t,r,n){if(t.operation==="query")return this.runQuery(t,r,n);this.runMutation(t,r,n)}disconnect(){this.sseManager.disconnect(),this.webSocketManager.disconnect(),this.sessionId=null}async deleteDatabase(){await this.storage.deleteDatabase()}runQuery(t,r,n){const i=r??{},o=t.toQueryShape?t.toQueryShape(i):t.queryShape;if(!o)throw new Error("Query module is missing queryShape");const u=`query_${this.queryCounter}_${Date.now()}`;return this.queryCounter+=1,this.queryClient.registerQuery({queryId:u,querySource:o,input:i},n),{unsubscribe:()=>{this.queryClient.unregisterQuery(u)},update:d=>{this.queryClient.updateQueryInput(u,d)}}}runMutation(t,r,n){const i=t.id;if(!i)throw new Error("Mutation module is missing id");const o=r??{},u=`${this.server.baseUrl}${this.endpoints.query}`;this.queryManager.sendMutation(i,u,o,n,this.server.headers)}}const LO={tables:{users:{name:"users",links:{posts:{type:"one-to-many",from:"id",to:{table:"posts",column:"authorUserId"}}},indices:[{field:"id",unique:!0,primary:!0},{field:"updatedAt",unique:!1,primary:!1}]},posts:{name:"posts",links:{users:{type:"many-to-one",from:"authorUserId",to:{table:"users",column:"id"}}},indices:[{field:"id",unique:!0,primary:!0},{field:"updatedAt",unique:!1,primary:!1}]}},queryFieldToTable:{user:"users",post:"posts"}};function FO(){const[e,t]=me.useState([{id:"1",name:"Client 1",pyreClient:null,sessionId:null,connected:!1,userId:null,requestedUserId:1,indexedDbName:"pyre-sync-playground-1"}]),[r,n]=me.useState("clients"),i=me.useRef([]),o=me.useRef(!1),u=me.useRef(2),d=me.useRef(new Map);me.useEffect(()=>{i.current=e},[e]);const[h,m]=me.useState("1"),[g,c]=me.useState([]),[v,j]=me.useState([]);me.useEffect(()=>{(async()=>{try{const E=await kO();j(E)}catch(E){console.error("Failed to discover queries:",E)}})()},[]);const C=me.useCallback(x=>{c(E=>[...E,{...x,id:`${Date.now()}-${Math.random()}`,timestamp:new Date}])},[]),T=me.useCallback(async x=>{const E=i.current.find(ve=>ve.id===x);if(!E||E.connected||E.pyreClient)return;let O;E.requestedUserId!=null?O=E.requestedUserId:x==="1"?(O=1,t(ve=>ve.map(I=>I.id===x?{...I,requestedUserId:1}:I))):(O=u.current,u.current=O+1,t(ve=>ve.map(I=>I.id===x?{...I,requestedUserId:O}:I)));let F=null;try{const ve=await fetch(`http://localhost:3000/login?userId=${encodeURIComponent(String(O))}`);if(!ve.ok)throw new Error(`Login failed: ${ve.status}`);F=(await ve.json()).sessionId}catch(ve){console.error("Failed to login:",ve),C({type:"query_response",data:{error:ve.message||"Failed to login"},clientId:x});return}const Q=new URLSearchParams({sessionId:String(F)}).toString(),z="websocket",$e=`ws://localhost:3000/sync/events?${Q}`,ee=`pyre-sync-playground-${x}`;C({type:"query_sent",data:{message:"Connecting to server...",url:$e,method:"WS"},clientId:x});const Ze=new TO({schema:LO,server:{baseUrl:"http://localhost:3000",liveSyncTransport:z,endpoints:{catchup:`/sync?${Q}`,events:`/sync/events?${Q}`,query:`/db?${Q}`}},indexedDbName:ee});d.current.set(x,Ze),Ze.onSyncProgress(ve=>{ve.complete?C({type:"query_response",data:{message:"Sync complete",tablesSynced:ve.tablesSynced},clientId:x}):C({type:"query_response",data:{message:`Syncing table: ${ve.table}`,tablesSynced:ve.tablesSynced},clientId:x})});try{await Ze.init(),t(ve=>ve.map(I=>I.id===x?{...I,pyreClient:Ze,connected:!0,userId:O,sessionId:F,indexedDbName:ee}:I)),C({type:"query_response",data:{message:"Connected",sessionId:F},clientId:x})}catch(ve){console.error("Failed to initialize PyreClient:",ve),C({type:"query_response",data:{error:ve.message||"Failed to connect"},clientId:x}),d.current.delete(x)}},[C]);me.useEffect(()=>{o.current||(o.current=!0,T("1"))},[T]);const H=me.useCallback(()=>{const x=u.current;u.current=x+1,t(E=>{const O=`${E.length+1}`,F={id:O,name:`Client ${O}`,pyreClient:null,sessionId:null,connected:!1,userId:null,requestedUserId:x,indexedDbName:`pyre-sync-playground-${O}`};return setTimeout(()=>{T(O)},0),[...E,F]})},[T]);me.useCallback((x,E)=>{t(O=>O.map(F=>F.id===x?{...F,requestedUserId:E}:F))},[]);const S=me.useCallback(async(x,E)=>{if(!h)throw new Error("No client selected");const O=e.find($e=>$e.id===h);if(!O)throw new Error("Client not found");const F=O.sessionId,Q=F?`http://localhost:3000/db/${x}?sessionId=${F}`:`http://localhost:3000/db/${x}`,z="POST";C({type:"query_sent",data:{queryId:x,params:E,url:Q,method:z,sessionId:F},clientId:h});try{const ee=await(await fetch(Q,{method:z,headers:{"Content-Type":"application/json"},body:JSON.stringify(E)})).json();return C({type:"query_response",data:ee,clientId:h}),ee}catch($e){const ee={error:$e.message};throw C({type:"query_response",data:ee,clientId:h}),$e}},[h,e,C]);me.useEffect(()=>()=>{for(const x of d.current.values())x.disconnect();d.current.clear()},[]);const k=me.useCallback(async()=>{if(!confirm("Are you sure you want to delete all clients and clear all IndexedDB data? This cannot be undone."))return;for(const[O,F]of d.current.entries())F&&F.disconnect();await new Promise(O=>setTimeout(O,200));const x=[],E=[];for(const[O,F]of d.current.entries())if(F){const Q=i.current.find(z=>z.id===O);Q!=null&&Q.indexedDbName&&(E.push(Q.indexedDbName),console.log(`[Reset] Will delete database for client ${O}: ${Q.indexedDbName}`)),x.push(F.deleteDatabase().catch(z=>{console.error(`Error deleting database for client ${O}:`,z)}))}for(let O=1;O<=10;O++){const F=`pyre-sync-playground-${O}`;E.includes(F)||E.push(F)}try{await Promise.all(x),console.log("[Reset] All client databases deleted via PyreClient"),console.log("[Reset] Attempting direct deletion of databases:",E);for(const O of E)try{const F=indexedDB.deleteDatabase(O);await new Promise(Q=>{F.onsuccess=()=>{console.log(`[Reset] Directly deleted database: ${O}`),Q()},F.onerror=()=>{console.warn(`[Reset] Failed to directly delete ${O}:`,F.error),Q()},F.onblocked=()=>{console.warn(`[Reset] Database deletion blocked: ${O}`),Q()}})}catch(F){console.warn(`[Reset] Exception deleting ${O}:`,F)}console.log("[Reset] Database deletion complete")}catch(O){console.error("[Reset] Error deleting databases:",O)}d.current.clear(),t([{id:"1",name:"Client 1",pyreClient:null,sessionId:null,connected:!1,userId:null,requestedUserId:1,indexedDbName:"pyre-sync-playground-1"}]),m("1"),c([]),u.current=2,o.current=!1,setTimeout(()=>{T("1")},1e3)},[T]);return L.jsxs("div",{className:"app",children:[L.jsxs("header",{className:"app-header",children:[L.jsx("h1",{children:"Pyre Sync Playground"}),L.jsx("button",{onClick:k,className:"reset-button",title:"Delete all clients and clear IndexedDB",children:"Reset All"})]}),L.jsxs("div",{className:"app-content",children:[L.jsxs("div",{className:"left-panel",children:[L.jsxs("div",{className:"left-panel-tabs",children:[L.jsx("button",{className:`tab-button ${r==="clients"?"active":""}`,onClick:()=>n("clients"),children:"Clients"}),L.jsx("button",{className:`tab-button ${r==="messages"?"active":""}`,onClick:()=>n("messages"),children:"Messages"})]}),L.jsx("div",{className:"left-panel-content",children:r==="messages"?L.jsx(SN,{events:g,clients:e}):L.jsx(wO,{clients:e,selectedClientId:h,onSelectClient:m,onAddClient:H})})]}),L.jsx("div",{className:"right-panel",children:L.jsx(kN,{queries:v,onSubmit:S,selectedClient:e.find(x=>x.id===h)})})]})]})}ec.createRoot(document.getElementById("root")).render(L.jsx(cD.StrictMode,{children:L.jsx(FO,{})}));
