var Tx=Object.defineProperty;var Lx=(e,t,r)=>t in e?Tx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var b=(e,t,r)=>Lx(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function Fx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var N$={exports:{}},iu={},E$={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var io=Symbol.for("react.element"),zx=Symbol.for("react.portal"),Bx=Symbol.for("react.fragment"),qx=Symbol.for("react.strict_mode"),Ux=Symbol.for("react.profiler"),Kx=Symbol.for("react.provider"),Qx=Symbol.for("react.context"),Jx=Symbol.for("react.forward_ref"),Vx=Symbol.for("react.suspense"),Hx=Symbol.for("react.memo"),Wx=Symbol.for("react.lazy"),lh=Symbol.iterator;function Gx(e){return e===null||typeof e!="object"?null:(e=lh&&e[lh]||e["@@iterator"],typeof e=="function"?e:null)}var j$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I$=Object.assign,M$={};function Ji(e,t,r){this.props=e,this.context=t,this.refs=M$,this.updater=r||j$}Ji.prototype.isReactComponent={};Ji.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ji.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function P$(){}P$.prototype=Ji.prototype;function uf(e,t,r){this.props=e,this.context=t,this.refs=M$,this.updater=r||j$}var lf=uf.prototype=new P$;lf.constructor=uf;I$(lf,Ji.prototype);lf.isPureReactComponent=!0;var ch=Array.isArray,O$=Object.prototype.hasOwnProperty,cf={current:null},A$={key:!0,ref:!0,__self:!0,__source:!0};function _$(e,t,r){var n,i={},o=null,u=null;if(t!=null)for(n in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(o=""+t.key),t)O$.call(t,n)&&!A$.hasOwnProperty(n)&&(i[n]=t[n]);var d=arguments.length-2;if(d===1)i.children=r;else if(1<d){for(var h=Array(d),m=0;m<d;m++)h[m]=arguments[m+2];i.children=h}if(e&&e.defaultProps)for(n in d=e.defaultProps,d)i[n]===void 0&&(i[n]=d[n]);return{$$typeof:io,type:e,key:o,ref:u,props:i,_owner:cf.current}}function Yx(e,t){return{$$typeof:io,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ff(e){return typeof e=="object"&&e!==null&&e.$$typeof===io}function Zx(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var fh=/\/+/g;function dl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Zx(""+e.key):t.toString(36)}function ca(e,t,r,n,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(o){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case io:case zx:u=!0}}if(u)return u=e,i=i(u),e=n===""?"."+dl(u,0):n,ch(i)?(r="",e!=null&&(r=e.replace(fh,"$&/")+"/"),ca(i,t,r,"",function(m){return m})):i!=null&&(ff(i)&&(i=Yx(i,r+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(fh,"$&/")+"/")+e)),t.push(i)),1;if(u=0,n=n===""?".":n+":",ch(e))for(var d=0;d<e.length;d++){o=e[d];var h=n+dl(o,d);u+=ca(o,t,r,h,i)}else if(h=Gx(e),typeof h=="function")for(e=h.call(e),d=0;!(o=e.next()).done;)o=o.value,h=n+dl(o,d++),u+=ca(o,t,r,h,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function Uo(e,t,r){if(e==null)return e;var n=[],i=0;return ca(e,n,"","",function(o){return t.call(r,o,i++)}),n}function Xx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var bt={current:null},fa={transition:null},eD={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:fa,ReactCurrentOwner:cf};function R$(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Uo,forEach:function(e,t,r){Uo(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Uo(e,function(){t++}),t},toArray:function(e){return Uo(e,function(t){return t})||[]},only:function(e){if(!ff(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};le.Component=Ji;le.Fragment=Bx;le.Profiler=Ux;le.PureComponent=uf;le.StrictMode=qx;le.Suspense=Vx;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eD;le.act=R$;le.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=I$({},e.props),i=e.key,o=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,u=cf.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var d=e.type.defaultProps;for(h in t)O$.call(t,h)&&!A$.hasOwnProperty(h)&&(n[h]=t[h]===void 0&&d!==void 0?d[h]:t[h])}var h=arguments.length-2;if(h===1)n.children=r;else if(1<h){d=Array(h);for(var m=0;m<h;m++)d[m]=arguments[m+2];n.children=d}return{$$typeof:io,type:e.type,key:i,ref:o,props:n,_owner:u}};le.createContext=function(e){return e={$$typeof:Qx,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Kx,_context:e},e.Consumer=e};le.createElement=_$;le.createFactory=function(e){var t=_$.bind(null,e);return t.type=e,t};le.createRef=function(){return{current:null}};le.forwardRef=function(e){return{$$typeof:Jx,render:e}};le.isValidElement=ff;le.lazy=function(e){return{$$typeof:Wx,_payload:{_status:-1,_result:e},_init:Xx}};le.memo=function(e,t){return{$$typeof:Hx,type:e,compare:t===void 0?null:t}};le.startTransition=function(e){var t=fa.transition;fa.transition={};try{e()}finally{fa.transition=t}};le.unstable_act=R$;le.useCallback=function(e,t){return bt.current.useCallback(e,t)};le.useContext=function(e){return bt.current.useContext(e)};le.useDebugValue=function(){};le.useDeferredValue=function(e){return bt.current.useDeferredValue(e)};le.useEffect=function(e,t){return bt.current.useEffect(e,t)};le.useId=function(){return bt.current.useId()};le.useImperativeHandle=function(e,t,r){return bt.current.useImperativeHandle(e,t,r)};le.useInsertionEffect=function(e,t){return bt.current.useInsertionEffect(e,t)};le.useLayoutEffect=function(e,t){return bt.current.useLayoutEffect(e,t)};le.useMemo=function(e,t){return bt.current.useMemo(e,t)};le.useReducer=function(e,t,r){return bt.current.useReducer(e,t,r)};le.useRef=function(e){return bt.current.useRef(e)};le.useState=function(e){return bt.current.useState(e)};le.useSyncExternalStore=function(e,t,r){return bt.current.useSyncExternalStore(e,t,r)};le.useTransition=function(){return bt.current.useTransition()};le.version="18.3.1";E$.exports=le;var he=E$.exports;const tD=Fx(he);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rD=he,nD=Symbol.for("react.element"),iD=Symbol.for("react.fragment"),sD=Object.prototype.hasOwnProperty,oD=rD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aD={key:!0,ref:!0,__self:!0,__source:!0};function T$(e,t,r){var n,i={},o=null,u=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(u=t.ref);for(n in t)sD.call(t,n)&&!aD.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:nD,type:e,key:o,ref:u,props:i,_owner:oD.current}}iu.Fragment=iD;iu.jsx=T$;iu.jsxs=T$;N$.exports=iu;var L=N$.exports,Gl={},L$={exports:{}},Ot={},F$={exports:{}},z$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(_,re){var oe=_.length;_.push(re);e:for(;0<oe;){var U=oe-1>>>1,Le=_[U];if(0<i(Le,re))_[U]=re,_[oe]=Le,oe=U;else break e}}function r(_){return _.length===0?null:_[0]}function n(_){if(_.length===0)return null;var re=_[0],oe=_.pop();if(oe!==re){_[0]=oe;e:for(var U=0,Le=_.length,Zn=Le>>>1;U<Zn;){var yr=2*(U+1)-1,es=_[yr],gr=yr+1,wn=_[gr];if(0>i(es,oe))gr<Le&&0>i(wn,es)?(_[U]=wn,_[gr]=oe,U=gr):(_[U]=es,_[yr]=oe,U=yr);else if(gr<Le&&0>i(wn,oe))_[U]=wn,_[gr]=oe,U=gr;else break e}}return re}function i(_,re){var oe=_.sortIndex-re.sortIndex;return oe!==0?oe:_.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var h=[],m=[],g=1,c=null,v=3,E=!1,C=!1,R=!1,H=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(_){for(var re=r(m);re!==null;){if(re.callback===null)n(m);else if(re.startTime<=_)n(m),re.sortIndex=re.expirationTime,t(h,re);else break;re=r(m)}}function I(_){if(R=!1,x(_),!C)if(r(h)!==null)C=!0,fe(O);else{var re=r(m);re!==null&&nt(I,re.startTime-_)}}function O(_,re){C=!1,R&&(R=!1,S(z),z=-1),E=!0;var oe=v;try{for(x(re),c=r(h);c!==null&&(!(c.expirationTime>re)||_&&!Ye());){var U=c.callback;if(typeof U=="function"){c.callback=null,v=c.priorityLevel;var Le=U(c.expirationTime<=re);re=e.unstable_now(),typeof Le=="function"?c.callback=Le:c===r(h)&&n(h),x(re)}else n(h);c=r(h)}if(c!==null)var Zn=!0;else{var yr=r(m);yr!==null&&nt(I,yr.startTime-re),Zn=!1}return Zn}finally{c=null,v=oe,E=!1}}var F=!1,K=null,z=-1,me=5,X=-1;function Ye(){return!(e.unstable_now()-X<me)}function $e(){if(K!==null){var _=e.unstable_now();X=_;var re=!0;try{re=K(!0,_)}finally{re?j():(F=!1,K=null)}}else F=!1}var j;if(typeof k=="function")j=function(){k($e)};else if(typeof MessageChannel<"u"){var Xi=new MessageChannel,wd=Xi.port2;Xi.port1.onmessage=$e,j=function(){wd.postMessage(null)}}else j=function(){H($e,0)};function fe(_){K=_,F||(F=!0,j())}function nt(_,re){z=H(function(){_(e.unstable_now())},re)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(_){_.callback=null},e.unstable_continueExecution=function(){C||E||(C=!0,fe(O))},e.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):me=0<_?Math.floor(1e3/_):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return r(h)},e.unstable_next=function(_){switch(v){case 1:case 2:case 3:var re=3;break;default:re=v}var oe=v;v=re;try{return _()}finally{v=oe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(_,re){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var oe=v;v=_;try{return re()}finally{v=oe}},e.unstable_scheduleCallback=function(_,re,oe){var U=e.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?U+oe:U):oe=U,_){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=oe+Le,_={id:g++,callback:re,priorityLevel:_,startTime:oe,expirationTime:Le,sortIndex:-1},oe>U?(_.sortIndex=oe,t(m,_),r(h)===null&&_===r(m)&&(R?(S(z),z=-1):R=!0,nt(I,oe-U))):(_.sortIndex=Le,t(h,_),C||E||(C=!0,fe(O))),_},e.unstable_shouldYield=Ye,e.unstable_wrapCallback=function(_){var re=v;return function(){var oe=v;v=re;try{return _.apply(this,arguments)}finally{v=oe}}}})(z$);F$.exports=z$;var uD=F$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lD=he,Pt=uD;function B(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var B$=new Set,Fs={};function Wn(e,t){Ai(e,t),Ai(e+"Capture",t)}function Ai(e,t){for(Fs[e]=t,e=0;e<t.length;e++)B$.add(t[e])}var Mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yl=Object.prototype.hasOwnProperty,cD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dh={},ph={};function fD(e){return Yl.call(ph,e)?!0:Yl.call(dh,e)?!1:cD.test(e)?ph[e]=!0:(dh[e]=!0,!1)}function dD(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function pD(e,t,r,n){if(t===null||typeof t>"u"||dD(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function wt(e,t,r,n,i,o,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=u}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){at[e]=new wt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];at[t]=new wt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){at[e]=new wt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){at[e]=new wt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){at[e]=new wt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){at[e]=new wt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){at[e]=new wt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){at[e]=new wt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){at[e]=new wt(e,5,!1,e.toLowerCase(),null,!1,!1)});var df=/[\-:]([a-z])/g;function pf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(df,pf);at[t]=new wt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(df,pf);at[t]=new wt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(df,pf);at[t]=new wt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){at[e]=new wt(e,1,!1,e.toLowerCase(),null,!1,!1)});at.xlinkHref=new wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){at[e]=new wt(e,1,!1,e.toLowerCase(),null,!0,!0)});function hf(e,t,r,n){var i=at.hasOwnProperty(t)?at[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(pD(t,r,i,n)&&(r=null),n||i===null?fD(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Fr=lD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ko=Symbol.for("react.element"),fi=Symbol.for("react.portal"),di=Symbol.for("react.fragment"),mf=Symbol.for("react.strict_mode"),Zl=Symbol.for("react.profiler"),q$=Symbol.for("react.provider"),U$=Symbol.for("react.context"),$f=Symbol.for("react.forward_ref"),Xl=Symbol.for("react.suspense"),ec=Symbol.for("react.suspense_list"),vf=Symbol.for("react.memo"),Wr=Symbol.for("react.lazy"),K$=Symbol.for("react.offscreen"),hh=Symbol.iterator;function hs(e){return e===null||typeof e!="object"?null:(e=hh&&e[hh]||e["@@iterator"],typeof e=="function"?e:null)}var Te=Object.assign,pl;function ks(e){if(pl===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);pl=t&&t[1]||""}return`
`+pl+e}var hl=!1;function ml(e,t){if(!e||hl)return"";hl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var n=m}Reflect.construct(e,[],t)}else{try{t.call()}catch(m){n=m}e.call(t.prototype)}else{try{throw Error()}catch(m){n=m}e()}}catch(m){if(m&&n&&typeof m.stack=="string"){for(var i=m.stack.split(`
`),o=n.stack.split(`
`),u=i.length-1,d=o.length-1;1<=u&&0<=d&&i[u]!==o[d];)d--;for(;1<=u&&0<=d;u--,d--)if(i[u]!==o[d]){if(u!==1||d!==1)do if(u--,d--,0>d||i[u]!==o[d]){var h=`
`+i[u].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=u&&0<=d);break}}}finally{hl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ks(e):""}function hD(e){switch(e.tag){case 5:return ks(e.type);case 16:return ks("Lazy");case 13:return ks("Suspense");case 19:return ks("SuspenseList");case 0:case 2:case 15:return e=ml(e.type,!1),e;case 11:return e=ml(e.type.render,!1),e;case 1:return e=ml(e.type,!0),e;default:return""}}function tc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case di:return"Fragment";case fi:return"Portal";case Zl:return"Profiler";case mf:return"StrictMode";case Xl:return"Suspense";case ec:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case U$:return(e.displayName||"Context")+".Consumer";case q$:return(e._context.displayName||"Context")+".Provider";case $f:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case vf:return t=e.displayName||null,t!==null?t:tc(e.type)||"Memo";case Wr:t=e._payload,e=e._init;try{return tc(e(t))}catch{}}return null}function mD(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tc(t);case 8:return t===mf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function pn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Q$(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $D(e){var t=Q$(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(u){n=""+u,o.call(this,u)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(u){n=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Qo(e){e._valueTracker||(e._valueTracker=$D(e))}function J$(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Q$(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function xa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function rc(e,t){var r=t.checked;return Te({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function mh(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=pn(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function V$(e,t){t=t.checked,t!=null&&hf(e,"checked",t,!1)}function nc(e,t){V$(e,t);var r=pn(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ic(e,t.type,r):t.hasOwnProperty("defaultValue")&&ic(e,t.type,pn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function $h(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ic(e,t,r){(t!=="number"||xa(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ss=Array.isArray;function Ci(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+pn(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function sc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(B(91));return Te({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function vh(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(B(92));if(Ss(r)){if(1<r.length)throw Error(B(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:pn(r)}}function H$(e,t){var r=pn(t.value),n=pn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function yh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function W$(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?W$(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Jo,G$=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Jo=Jo||document.createElement("div"),Jo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Jo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function zs(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Es={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vD=["Webkit","ms","Moz","O"];Object.keys(Es).forEach(function(e){vD.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Es[t]=Es[e]})});function Y$(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Es.hasOwnProperty(e)&&Es[e]?(""+t).trim():t+"px"}function Z$(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Y$(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var yD=Te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ac(e,t){if(t){if(yD[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(B(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(B(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(B(61))}if(t.style!=null&&typeof t.style!="object")throw Error(B(62))}}function uc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lc=null;function yf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cc=null,Ni=null,Ei=null;function gh(e){if(e=ao(e)){if(typeof cc!="function")throw Error(B(280));var t=e.stateNode;t&&(t=lu(t),cc(e.stateNode,e.type,t))}}function X$(e){Ni?Ei?Ei.push(e):Ei=[e]:Ni=e}function ev(){if(Ni){var e=Ni,t=Ei;if(Ei=Ni=null,gh(e),t)for(e=0;e<t.length;e++)gh(t[e])}}function tv(e,t){return e(t)}function rv(){}var $l=!1;function nv(e,t,r){if($l)return e(t,r);$l=!0;try{return tv(e,t,r)}finally{$l=!1,(Ni!==null||Ei!==null)&&(rv(),ev())}}function Bs(e,t){var r=e.stateNode;if(r===null)return null;var n=lu(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(B(231,t,typeof r));return r}var fc=!1;if(Mr)try{var ms={};Object.defineProperty(ms,"passive",{get:function(){fc=!0}}),window.addEventListener("test",ms,ms),window.removeEventListener("test",ms,ms)}catch{fc=!1}function gD(e,t,r,n,i,o,u,d,h){var m=Array.prototype.slice.call(arguments,3);try{t.apply(r,m)}catch(g){this.onError(g)}}var js=!1,Da=null,Ca=!1,dc=null,bD={onError:function(e){js=!0,Da=e}};function wD(e,t,r,n,i,o,u,d,h){js=!1,Da=null,gD.apply(bD,arguments)}function kD(e,t,r,n,i,o,u,d,h){if(wD.apply(this,arguments),js){if(js){var m=Da;js=!1,Da=null}else throw Error(B(198));Ca||(Ca=!0,dc=m)}}function Gn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function iv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function bh(e){if(Gn(e)!==e)throw Error(B(188))}function SD(e){var t=e.alternate;if(!t){if(t=Gn(e),t===null)throw Error(B(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return bh(i),e;if(o===n)return bh(i),t;o=o.sibling}throw Error(B(188))}if(r.return!==n.return)r=i,n=o;else{for(var u=!1,d=i.child;d;){if(d===r){u=!0,r=i,n=o;break}if(d===n){u=!0,n=i,r=o;break}d=d.sibling}if(!u){for(d=o.child;d;){if(d===r){u=!0,r=o,n=i;break}if(d===n){u=!0,n=o,r=i;break}d=d.sibling}if(!u)throw Error(B(189))}}if(r.alternate!==n)throw Error(B(190))}if(r.tag!==3)throw Error(B(188));return r.stateNode.current===r?e:t}function sv(e){return e=SD(e),e!==null?ov(e):null}function ov(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ov(e);if(t!==null)return t;e=e.sibling}return null}var av=Pt.unstable_scheduleCallback,wh=Pt.unstable_cancelCallback,xD=Pt.unstable_shouldYield,DD=Pt.unstable_requestPaint,Ue=Pt.unstable_now,CD=Pt.unstable_getCurrentPriorityLevel,gf=Pt.unstable_ImmediatePriority,uv=Pt.unstable_UserBlockingPriority,Na=Pt.unstable_NormalPriority,ND=Pt.unstable_LowPriority,lv=Pt.unstable_IdlePriority,su=null,hr=null;function ED(e){if(hr&&typeof hr.onCommitFiberRoot=="function")try{hr.onCommitFiberRoot(su,e,void 0,(e.current.flags&128)===128)}catch{}}var nr=Math.clz32?Math.clz32:MD,jD=Math.log,ID=Math.LN2;function MD(e){return e>>>=0,e===0?32:31-(jD(e)/ID|0)|0}var Vo=64,Ho=4194304;function xs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ea(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,o=e.pingedLanes,u=r&268435455;if(u!==0){var d=u&~i;d!==0?n=xs(d):(o&=u,o!==0&&(n=xs(o)))}else u=r&~i,u!==0?n=xs(u):o!==0&&(n=xs(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-nr(t),i=1<<r,n|=e[r],t&=~i;return n}function PD(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OD(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var u=31-nr(o),d=1<<u,h=i[u];h===-1?(!(d&r)||d&n)&&(i[u]=PD(d,t)):h<=t&&(e.expiredLanes|=d),o&=~d}}function pc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function cv(){var e=Vo;return Vo<<=1,!(Vo&4194240)&&(Vo=64),e}function vl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function so(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-nr(t),e[t]=r}function AD(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-nr(r),o=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~o}}function bf(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-nr(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var be=0;function fv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var dv,wf,pv,hv,mv,hc=!1,Wo=[],sn=null,on=null,an=null,qs=new Map,Us=new Map,Zr=[],_D="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kh(e,t){switch(e){case"focusin":case"focusout":sn=null;break;case"dragenter":case"dragleave":on=null;break;case"mouseover":case"mouseout":an=null;break;case"pointerover":case"pointerout":qs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Us.delete(t.pointerId)}}function $s(e,t,r,n,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},t!==null&&(t=ao(t),t!==null&&wf(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function RD(e,t,r,n,i){switch(t){case"focusin":return sn=$s(sn,e,t,r,n,i),!0;case"dragenter":return on=$s(on,e,t,r,n,i),!0;case"mouseover":return an=$s(an,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return qs.set(o,$s(qs.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Us.set(o,$s(Us.get(o)||null,e,t,r,n,i)),!0}return!1}function $v(e){var t=Rn(e.target);if(t!==null){var r=Gn(t);if(r!==null){if(t=r.tag,t===13){if(t=iv(r),t!==null){e.blockedOn=t,mv(e.priority,function(){pv(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function da(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=mc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);lc=n,r.target.dispatchEvent(n),lc=null}else return t=ao(r),t!==null&&wf(t),e.blockedOn=r,!1;t.shift()}return!0}function Sh(e,t,r){da(e)&&r.delete(t)}function TD(){hc=!1,sn!==null&&da(sn)&&(sn=null),on!==null&&da(on)&&(on=null),an!==null&&da(an)&&(an=null),qs.forEach(Sh),Us.forEach(Sh)}function vs(e,t){e.blockedOn===t&&(e.blockedOn=null,hc||(hc=!0,Pt.unstable_scheduleCallback(Pt.unstable_NormalPriority,TD)))}function Ks(e){function t(i){return vs(i,e)}if(0<Wo.length){vs(Wo[0],e);for(var r=1;r<Wo.length;r++){var n=Wo[r];n.blockedOn===e&&(n.blockedOn=null)}}for(sn!==null&&vs(sn,e),on!==null&&vs(on,e),an!==null&&vs(an,e),qs.forEach(t),Us.forEach(t),r=0;r<Zr.length;r++)n=Zr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Zr.length&&(r=Zr[0],r.blockedOn===null);)$v(r),r.blockedOn===null&&Zr.shift()}var ji=Fr.ReactCurrentBatchConfig,ja=!0;function LD(e,t,r,n){var i=be,o=ji.transition;ji.transition=null;try{be=1,kf(e,t,r,n)}finally{be=i,ji.transition=o}}function FD(e,t,r,n){var i=be,o=ji.transition;ji.transition=null;try{be=4,kf(e,t,r,n)}finally{be=i,ji.transition=o}}function kf(e,t,r,n){if(ja){var i=mc(e,t,r,n);if(i===null)Nl(e,t,n,Ia,r),kh(e,n);else if(RD(i,e,t,r,n))n.stopPropagation();else if(kh(e,n),t&4&&-1<_D.indexOf(e)){for(;i!==null;){var o=ao(i);if(o!==null&&dv(o),o=mc(e,t,r,n),o===null&&Nl(e,t,n,Ia,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else Nl(e,t,n,null,r)}}var Ia=null;function mc(e,t,r,n){if(Ia=null,e=yf(n),e=Rn(e),e!==null)if(t=Gn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=iv(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ia=e,null}function vv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(CD()){case gf:return 1;case uv:return 4;case Na:case ND:return 16;case lv:return 536870912;default:return 16}default:return 16}}var tn=null,Sf=null,pa=null;function yv(){if(pa)return pa;var e,t=Sf,r=t.length,n,i="value"in tn?tn.value:tn.textContent,o=i.length;for(e=0;e<r&&t[e]===i[e];e++);var u=r-e;for(n=1;n<=u&&t[r-n]===i[o-n];n++);return pa=i.slice(e,1<n?1-n:void 0)}function ha(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Go(){return!0}function xh(){return!1}function At(e){function t(r,n,i,o,u){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=u,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(r=e[d],this[d]=r?r(o):o[d]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Go:xh,this.isPropagationStopped=xh,this}return Te(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Go)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Go)},persist:function(){},isPersistent:Go}),t}var Vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xf=At(Vi),oo=Te({},Vi,{view:0,detail:0}),zD=At(oo),yl,gl,ys,ou=Te({},oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Df,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ys&&(ys&&e.type==="mousemove"?(yl=e.screenX-ys.screenX,gl=e.screenY-ys.screenY):gl=yl=0,ys=e),yl)},movementY:function(e){return"movementY"in e?e.movementY:gl}}),Dh=At(ou),BD=Te({},ou,{dataTransfer:0}),qD=At(BD),UD=Te({},oo,{relatedTarget:0}),bl=At(UD),KD=Te({},Vi,{animationName:0,elapsedTime:0,pseudoElement:0}),QD=At(KD),JD=Te({},Vi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),VD=At(JD),HD=Te({},Vi,{data:0}),Ch=At(HD),WD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZD(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=YD[e])?!!t[e]:!1}function Df(){return ZD}var XD=Te({},oo,{key:function(e){if(e.key){var t=WD[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ha(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?GD[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Df,charCode:function(e){return e.type==="keypress"?ha(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ha(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),eC=At(XD),tC=Te({},ou,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nh=At(tC),rC=Te({},oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Df}),nC=At(rC),iC=Te({},Vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),sC=At(iC),oC=Te({},ou,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),aC=At(oC),uC=[9,13,27,32],Cf=Mr&&"CompositionEvent"in window,Is=null;Mr&&"documentMode"in document&&(Is=document.documentMode);var lC=Mr&&"TextEvent"in window&&!Is,gv=Mr&&(!Cf||Is&&8<Is&&11>=Is),Eh=" ",jh=!1;function bv(e,t){switch(e){case"keyup":return uC.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var pi=!1;function cC(e,t){switch(e){case"compositionend":return wv(t);case"keypress":return t.which!==32?null:(jh=!0,Eh);case"textInput":return e=t.data,e===Eh&&jh?null:e;default:return null}}function fC(e,t){if(pi)return e==="compositionend"||!Cf&&bv(e,t)?(e=yv(),pa=Sf=tn=null,pi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gv&&t.locale!=="ko"?null:t.data;default:return null}}var dC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ih(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!dC[e.type]:t==="textarea"}function kv(e,t,r,n){X$(n),t=Ma(t,"onChange"),0<t.length&&(r=new xf("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Ms=null,Qs=null;function pC(e){Ov(e,0)}function au(e){var t=$i(e);if(J$(t))return e}function hC(e,t){if(e==="change")return t}var Sv=!1;if(Mr){var wl;if(Mr){var kl="oninput"in document;if(!kl){var Mh=document.createElement("div");Mh.setAttribute("oninput","return;"),kl=typeof Mh.oninput=="function"}wl=kl}else wl=!1;Sv=wl&&(!document.documentMode||9<document.documentMode)}function Ph(){Ms&&(Ms.detachEvent("onpropertychange",xv),Qs=Ms=null)}function xv(e){if(e.propertyName==="value"&&au(Qs)){var t=[];kv(t,Qs,e,yf(e)),nv(pC,t)}}function mC(e,t,r){e==="focusin"?(Ph(),Ms=t,Qs=r,Ms.attachEvent("onpropertychange",xv)):e==="focusout"&&Ph()}function $C(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return au(Qs)}function vC(e,t){if(e==="click")return au(t)}function yC(e,t){if(e==="input"||e==="change")return au(t)}function gC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var sr=typeof Object.is=="function"?Object.is:gC;function Js(e,t){if(sr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Yl.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function Oh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ah(e,t){var r=Oh(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Oh(r)}}function Dv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Dv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Cv(){for(var e=window,t=xa();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=xa(e.document)}return t}function Nf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function bC(e){var t=Cv(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Dv(r.ownerDocument.documentElement,r)){if(n!==null&&Nf(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!e.extend&&o>n&&(i=n,n=o,o=i),i=Ah(r,o);var u=Ah(r,n);i&&u&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var wC=Mr&&"documentMode"in document&&11>=document.documentMode,hi=null,$c=null,Ps=null,vc=!1;function _h(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;vc||hi==null||hi!==xa(n)||(n=hi,"selectionStart"in n&&Nf(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ps&&Js(Ps,n)||(Ps=n,n=Ma($c,"onSelect"),0<n.length&&(t=new xf("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=hi)))}function Yo(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var mi={animationend:Yo("Animation","AnimationEnd"),animationiteration:Yo("Animation","AnimationIteration"),animationstart:Yo("Animation","AnimationStart"),transitionend:Yo("Transition","TransitionEnd")},Sl={},Nv={};Mr&&(Nv=document.createElement("div").style,"AnimationEvent"in window||(delete mi.animationend.animation,delete mi.animationiteration.animation,delete mi.animationstart.animation),"TransitionEvent"in window||delete mi.transitionend.transition);function uu(e){if(Sl[e])return Sl[e];if(!mi[e])return e;var t=mi[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Nv)return Sl[e]=t[r];return e}var Ev=uu("animationend"),jv=uu("animationiteration"),Iv=uu("animationstart"),Mv=uu("transitionend"),Pv=new Map,Rh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $n(e,t){Pv.set(e,t),Wn(t,[e])}for(var xl=0;xl<Rh.length;xl++){var Dl=Rh[xl],kC=Dl.toLowerCase(),SC=Dl[0].toUpperCase()+Dl.slice(1);$n(kC,"on"+SC)}$n(Ev,"onAnimationEnd");$n(jv,"onAnimationIteration");$n(Iv,"onAnimationStart");$n("dblclick","onDoubleClick");$n("focusin","onFocus");$n("focusout","onBlur");$n(Mv,"onTransitionEnd");Ai("onMouseEnter",["mouseout","mouseover"]);Ai("onMouseLeave",["mouseout","mouseover"]);Ai("onPointerEnter",["pointerout","pointerover"]);Ai("onPointerLeave",["pointerout","pointerover"]);Wn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ds="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ds));function Th(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,kD(n,t,void 0,e),e.currentTarget=null}function Ov(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var u=n.length-1;0<=u;u--){var d=n[u],h=d.instance,m=d.currentTarget;if(d=d.listener,h!==o&&i.isPropagationStopped())break e;Th(i,d,m),o=h}else for(u=0;u<n.length;u++){if(d=n[u],h=d.instance,m=d.currentTarget,d=d.listener,h!==o&&i.isPropagationStopped())break e;Th(i,d,m),o=h}}}if(Ca)throw e=dc,Ca=!1,dc=null,e}function Ee(e,t){var r=t[kc];r===void 0&&(r=t[kc]=new Set);var n=e+"__bubble";r.has(n)||(Av(t,e,2,!1),r.add(n))}function Cl(e,t,r){var n=0;t&&(n|=4),Av(r,e,n,t)}var Zo="_reactListening"+Math.random().toString(36).slice(2);function Vs(e){if(!e[Zo]){e[Zo]=!0,B$.forEach(function(r){r!=="selectionchange"&&(xC.has(r)||Cl(r,!1,e),Cl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Zo]||(t[Zo]=!0,Cl("selectionchange",!1,t))}}function Av(e,t,r,n){switch(vv(t)){case 1:var i=LD;break;case 4:i=FD;break;default:i=kf}r=i.bind(null,t,r,e),i=void 0,!fc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Nl(e,t,r,n,i){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var u=n.tag;if(u===3||u===4){var d=n.stateNode.containerInfo;if(d===i||d.nodeType===8&&d.parentNode===i)break;if(u===4)for(u=n.return;u!==null;){var h=u.tag;if((h===3||h===4)&&(h=u.stateNode.containerInfo,h===i||h.nodeType===8&&h.parentNode===i))return;u=u.return}for(;d!==null;){if(u=Rn(d),u===null)return;if(h=u.tag,h===5||h===6){n=o=u;continue e}d=d.parentNode}}n=n.return}nv(function(){var m=o,g=yf(r),c=[];e:{var v=Pv.get(e);if(v!==void 0){var E=xf,C=e;switch(e){case"keypress":if(ha(r)===0)break e;case"keydown":case"keyup":E=eC;break;case"focusin":C="focus",E=bl;break;case"focusout":C="blur",E=bl;break;case"beforeblur":case"afterblur":E=bl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Dh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=qD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=nC;break;case Ev:case jv:case Iv:E=QD;break;case Mv:E=sC;break;case"scroll":E=zD;break;case"wheel":E=aC;break;case"copy":case"cut":case"paste":E=VD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=Nh}var R=(t&4)!==0,H=!R&&e==="scroll",S=R?v!==null?v+"Capture":null:v;R=[];for(var k=m,x;k!==null;){x=k;var I=x.stateNode;if(x.tag===5&&I!==null&&(x=I,S!==null&&(I=Bs(k,S),I!=null&&R.push(Hs(k,I,x)))),H)break;k=k.return}0<R.length&&(v=new E(v,C,null,r,g),c.push({event:v,listeners:R}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",E=e==="mouseout"||e==="pointerout",v&&r!==lc&&(C=r.relatedTarget||r.fromElement)&&(Rn(C)||C[Pr]))break e;if((E||v)&&(v=g.window===g?g:(v=g.ownerDocument)?v.defaultView||v.parentWindow:window,E?(C=r.relatedTarget||r.toElement,E=m,C=C?Rn(C):null,C!==null&&(H=Gn(C),C!==H||C.tag!==5&&C.tag!==6)&&(C=null)):(E=null,C=m),E!==C)){if(R=Dh,I="onMouseLeave",S="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(R=Nh,I="onPointerLeave",S="onPointerEnter",k="pointer"),H=E==null?v:$i(E),x=C==null?v:$i(C),v=new R(I,k+"leave",E,r,g),v.target=H,v.relatedTarget=x,I=null,Rn(g)===m&&(R=new R(S,k+"enter",C,r,g),R.target=x,R.relatedTarget=H,I=R),H=I,E&&C)t:{for(R=E,S=C,k=0,x=R;x;x=ui(x))k++;for(x=0,I=S;I;I=ui(I))x++;for(;0<k-x;)R=ui(R),k--;for(;0<x-k;)S=ui(S),x--;for(;k--;){if(R===S||S!==null&&R===S.alternate)break t;R=ui(R),S=ui(S)}R=null}else R=null;E!==null&&Lh(c,v,E,R,!1),C!==null&&H!==null&&Lh(c,H,C,R,!0)}}e:{if(v=m?$i(m):window,E=v.nodeName&&v.nodeName.toLowerCase(),E==="select"||E==="input"&&v.type==="file")var O=hC;else if(Ih(v))if(Sv)O=yC;else{O=$C;var F=mC}else(E=v.nodeName)&&E.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(O=vC);if(O&&(O=O(e,m))){kv(c,O,r,g);break e}F&&F(e,v,m),e==="focusout"&&(F=v._wrapperState)&&F.controlled&&v.type==="number"&&ic(v,"number",v.value)}switch(F=m?$i(m):window,e){case"focusin":(Ih(F)||F.contentEditable==="true")&&(hi=F,$c=m,Ps=null);break;case"focusout":Ps=$c=hi=null;break;case"mousedown":vc=!0;break;case"contextmenu":case"mouseup":case"dragend":vc=!1,_h(c,r,g);break;case"selectionchange":if(wC)break;case"keydown":case"keyup":_h(c,r,g)}var K;if(Cf)e:{switch(e){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else pi?bv(e,r)&&(z="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(z="onCompositionStart");z&&(gv&&r.locale!=="ko"&&(pi||z!=="onCompositionStart"?z==="onCompositionEnd"&&pi&&(K=yv()):(tn=g,Sf="value"in tn?tn.value:tn.textContent,pi=!0)),F=Ma(m,z),0<F.length&&(z=new Ch(z,e,null,r,g),c.push({event:z,listeners:F}),K?z.data=K:(K=wv(r),K!==null&&(z.data=K)))),(K=lC?cC(e,r):fC(e,r))&&(m=Ma(m,"onBeforeInput"),0<m.length&&(g=new Ch("onBeforeInput","beforeinput",null,r,g),c.push({event:g,listeners:m}),g.data=K))}Ov(c,t)})}function Hs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ma(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Bs(e,r),o!=null&&n.unshift(Hs(e,o,i)),o=Bs(e,t),o!=null&&n.push(Hs(e,o,i))),e=e.return}return n}function ui(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Lh(e,t,r,n,i){for(var o=t._reactName,u=[];r!==null&&r!==n;){var d=r,h=d.alternate,m=d.stateNode;if(h!==null&&h===n)break;d.tag===5&&m!==null&&(d=m,i?(h=Bs(r,o),h!=null&&u.unshift(Hs(r,h,d))):i||(h=Bs(r,o),h!=null&&u.push(Hs(r,h,d)))),r=r.return}u.length!==0&&e.push({event:t,listeners:u})}var DC=/\r\n?/g,CC=/\u0000|\uFFFD/g;function Fh(e){return(typeof e=="string"?e:""+e).replace(DC,`
`).replace(CC,"")}function Xo(e,t,r){if(t=Fh(t),Fh(e)!==t&&r)throw Error(B(425))}function Pa(){}var yc=null,gc=null;function bc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var wc=typeof setTimeout=="function"?setTimeout:void 0,NC=typeof clearTimeout=="function"?clearTimeout:void 0,zh=typeof Promise=="function"?Promise:void 0,EC=typeof queueMicrotask=="function"?queueMicrotask:typeof zh<"u"?function(e){return zh.resolve(null).then(e).catch(jC)}:wc;function jC(e){setTimeout(function(){throw e})}function El(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),Ks(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Ks(t)}function un(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Bh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Hi=Math.random().toString(36).slice(2),pr="__reactFiber$"+Hi,Ws="__reactProps$"+Hi,Pr="__reactContainer$"+Hi,kc="__reactEvents$"+Hi,IC="__reactListeners$"+Hi,MC="__reactHandles$"+Hi;function Rn(e){var t=e[pr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Pr]||r[pr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Bh(e);e!==null;){if(r=e[pr])return r;e=Bh(e)}return t}e=r,r=e.parentNode}return null}function ao(e){return e=e[pr]||e[Pr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function $i(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(B(33))}function lu(e){return e[Ws]||null}var Sc=[],vi=-1;function vn(e){return{current:e}}function Ie(e){0>vi||(e.current=Sc[vi],Sc[vi]=null,vi--)}function Ce(e,t){vi++,Sc[vi]=e.current,e.current=t}var hn={},ht=vn(hn),Ct=vn(!1),Un=hn;function _i(e,t){var r=e.type.contextTypes;if(!r)return hn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Nt(e){return e=e.childContextTypes,e!=null}function Oa(){Ie(Ct),Ie(ht)}function qh(e,t,r){if(ht.current!==hn)throw Error(B(168));Ce(ht,t),Ce(Ct,r)}function _v(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(B(108,mD(e)||"Unknown",i));return Te({},r,n)}function Aa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hn,Un=ht.current,Ce(ht,e),Ce(Ct,Ct.current),!0}function Uh(e,t,r){var n=e.stateNode;if(!n)throw Error(B(169));r?(e=_v(e,t,Un),n.__reactInternalMemoizedMergedChildContext=e,Ie(Ct),Ie(ht),Ce(ht,e)):Ie(Ct),Ce(Ct,r)}var Cr=null,cu=!1,jl=!1;function Rv(e){Cr===null?Cr=[e]:Cr.push(e)}function PC(e){cu=!0,Rv(e)}function yn(){if(!jl&&Cr!==null){jl=!0;var e=0,t=be;try{var r=Cr;for(be=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Cr=null,cu=!1}catch(i){throw Cr!==null&&(Cr=Cr.slice(e+1)),av(gf,yn),i}finally{be=t,jl=!1}}return null}var yi=[],gi=0,_a=null,Ra=0,Bt=[],qt=0,Kn=null,Er=1,jr="";function On(e,t){yi[gi++]=Ra,yi[gi++]=_a,_a=e,Ra=t}function Tv(e,t,r){Bt[qt++]=Er,Bt[qt++]=jr,Bt[qt++]=Kn,Kn=e;var n=Er;e=jr;var i=32-nr(n)-1;n&=~(1<<i),r+=1;var o=32-nr(t)+i;if(30<o){var u=i-i%5;o=(n&(1<<u)-1).toString(32),n>>=u,i-=u,Er=1<<32-nr(t)+i|r<<i|n,jr=o+e}else Er=1<<o|r<<i|n,jr=e}function Ef(e){e.return!==null&&(On(e,1),Tv(e,1,0))}function jf(e){for(;e===_a;)_a=yi[--gi],yi[gi]=null,Ra=yi[--gi],yi[gi]=null;for(;e===Kn;)Kn=Bt[--qt],Bt[qt]=null,jr=Bt[--qt],Bt[qt]=null,Er=Bt[--qt],Bt[qt]=null}var Mt=null,It=null,Oe=!1,rr=null;function Lv(e,t){var r=Ut(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Kh(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Mt=e,It=un(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Mt=e,It=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Kn!==null?{id:Er,overflow:jr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ut(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Mt=e,It=null,!0):!1;default:return!1}}function xc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Dc(e){if(Oe){var t=It;if(t){var r=t;if(!Kh(e,t)){if(xc(e))throw Error(B(418));t=un(r.nextSibling);var n=Mt;t&&Kh(e,t)?Lv(n,r):(e.flags=e.flags&-4097|2,Oe=!1,Mt=e)}}else{if(xc(e))throw Error(B(418));e.flags=e.flags&-4097|2,Oe=!1,Mt=e}}}function Qh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Mt=e}function ea(e){if(e!==Mt)return!1;if(!Oe)return Qh(e),Oe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!bc(e.type,e.memoizedProps)),t&&(t=It)){if(xc(e))throw Fv(),Error(B(418));for(;t;)Lv(e,t),t=un(t.nextSibling)}if(Qh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(B(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){It=un(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}It=null}}else It=Mt?un(e.stateNode.nextSibling):null;return!0}function Fv(){for(var e=It;e;)e=un(e.nextSibling)}function Ri(){It=Mt=null,Oe=!1}function If(e){rr===null?rr=[e]:rr.push(e)}var OC=Fr.ReactCurrentBatchConfig;function gs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(B(309));var n=r.stateNode}if(!n)throw Error(B(147,e));var i=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(u){var d=i.refs;u===null?delete d[o]:d[o]=u},t._stringRef=o,t)}if(typeof e!="string")throw Error(B(284));if(!r._owner)throw Error(B(290,e))}return e}function ta(e,t){throw e=Object.prototype.toString.call(t),Error(B(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Jh(e){var t=e._init;return t(e._payload)}function zv(e){function t(S,k){if(e){var x=S.deletions;x===null?(S.deletions=[k],S.flags|=16):x.push(k)}}function r(S,k){if(!e)return null;for(;k!==null;)t(S,k),k=k.sibling;return null}function n(S,k){for(S=new Map;k!==null;)k.key!==null?S.set(k.key,k):S.set(k.index,k),k=k.sibling;return S}function i(S,k){return S=dn(S,k),S.index=0,S.sibling=null,S}function o(S,k,x){return S.index=x,e?(x=S.alternate,x!==null?(x=x.index,x<k?(S.flags|=2,k):x):(S.flags|=2,k)):(S.flags|=1048576,k)}function u(S){return e&&S.alternate===null&&(S.flags|=2),S}function d(S,k,x,I){return k===null||k.tag!==6?(k=Rl(x,S.mode,I),k.return=S,k):(k=i(k,x),k.return=S,k)}function h(S,k,x,I){var O=x.type;return O===di?g(S,k,x.props.children,I,x.key):k!==null&&(k.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Wr&&Jh(O)===k.type)?(I=i(k,x.props),I.ref=gs(S,k,x),I.return=S,I):(I=wa(x.type,x.key,x.props,null,S.mode,I),I.ref=gs(S,k,x),I.return=S,I)}function m(S,k,x,I){return k===null||k.tag!==4||k.stateNode.containerInfo!==x.containerInfo||k.stateNode.implementation!==x.implementation?(k=Tl(x,S.mode,I),k.return=S,k):(k=i(k,x.children||[]),k.return=S,k)}function g(S,k,x,I,O){return k===null||k.tag!==7?(k=Bn(x,S.mode,I,O),k.return=S,k):(k=i(k,x),k.return=S,k)}function c(S,k,x){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Rl(""+k,S.mode,x),k.return=S,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ko:return x=wa(k.type,k.key,k.props,null,S.mode,x),x.ref=gs(S,null,k),x.return=S,x;case fi:return k=Tl(k,S.mode,x),k.return=S,k;case Wr:var I=k._init;return c(S,I(k._payload),x)}if(Ss(k)||hs(k))return k=Bn(k,S.mode,x,null),k.return=S,k;ta(S,k)}return null}function v(S,k,x,I){var O=k!==null?k.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return O!==null?null:d(S,k,""+x,I);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ko:return x.key===O?h(S,k,x,I):null;case fi:return x.key===O?m(S,k,x,I):null;case Wr:return O=x._init,v(S,k,O(x._payload),I)}if(Ss(x)||hs(x))return O!==null?null:g(S,k,x,I,null);ta(S,x)}return null}function E(S,k,x,I,O){if(typeof I=="string"&&I!==""||typeof I=="number")return S=S.get(x)||null,d(k,S,""+I,O);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Ko:return S=S.get(I.key===null?x:I.key)||null,h(k,S,I,O);case fi:return S=S.get(I.key===null?x:I.key)||null,m(k,S,I,O);case Wr:var F=I._init;return E(S,k,x,F(I._payload),O)}if(Ss(I)||hs(I))return S=S.get(x)||null,g(k,S,I,O,null);ta(k,I)}return null}function C(S,k,x,I){for(var O=null,F=null,K=k,z=k=0,me=null;K!==null&&z<x.length;z++){K.index>z?(me=K,K=null):me=K.sibling;var X=v(S,K,x[z],I);if(X===null){K===null&&(K=me);break}e&&K&&X.alternate===null&&t(S,K),k=o(X,k,z),F===null?O=X:F.sibling=X,F=X,K=me}if(z===x.length)return r(S,K),Oe&&On(S,z),O;if(K===null){for(;z<x.length;z++)K=c(S,x[z],I),K!==null&&(k=o(K,k,z),F===null?O=K:F.sibling=K,F=K);return Oe&&On(S,z),O}for(K=n(S,K);z<x.length;z++)me=E(K,S,z,x[z],I),me!==null&&(e&&me.alternate!==null&&K.delete(me.key===null?z:me.key),k=o(me,k,z),F===null?O=me:F.sibling=me,F=me);return e&&K.forEach(function(Ye){return t(S,Ye)}),Oe&&On(S,z),O}function R(S,k,x,I){var O=hs(x);if(typeof O!="function")throw Error(B(150));if(x=O.call(x),x==null)throw Error(B(151));for(var F=O=null,K=k,z=k=0,me=null,X=x.next();K!==null&&!X.done;z++,X=x.next()){K.index>z?(me=K,K=null):me=K.sibling;var Ye=v(S,K,X.value,I);if(Ye===null){K===null&&(K=me);break}e&&K&&Ye.alternate===null&&t(S,K),k=o(Ye,k,z),F===null?O=Ye:F.sibling=Ye,F=Ye,K=me}if(X.done)return r(S,K),Oe&&On(S,z),O;if(K===null){for(;!X.done;z++,X=x.next())X=c(S,X.value,I),X!==null&&(k=o(X,k,z),F===null?O=X:F.sibling=X,F=X);return Oe&&On(S,z),O}for(K=n(S,K);!X.done;z++,X=x.next())X=E(K,S,z,X.value,I),X!==null&&(e&&X.alternate!==null&&K.delete(X.key===null?z:X.key),k=o(X,k,z),F===null?O=X:F.sibling=X,F=X);return e&&K.forEach(function($e){return t(S,$e)}),Oe&&On(S,z),O}function H(S,k,x,I){if(typeof x=="object"&&x!==null&&x.type===di&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ko:e:{for(var O=x.key,F=k;F!==null;){if(F.key===O){if(O=x.type,O===di){if(F.tag===7){r(S,F.sibling),k=i(F,x.props.children),k.return=S,S=k;break e}}else if(F.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Wr&&Jh(O)===F.type){r(S,F.sibling),k=i(F,x.props),k.ref=gs(S,F,x),k.return=S,S=k;break e}r(S,F);break}else t(S,F);F=F.sibling}x.type===di?(k=Bn(x.props.children,S.mode,I,x.key),k.return=S,S=k):(I=wa(x.type,x.key,x.props,null,S.mode,I),I.ref=gs(S,k,x),I.return=S,S=I)}return u(S);case fi:e:{for(F=x.key;k!==null;){if(k.key===F)if(k.tag===4&&k.stateNode.containerInfo===x.containerInfo&&k.stateNode.implementation===x.implementation){r(S,k.sibling),k=i(k,x.children||[]),k.return=S,S=k;break e}else{r(S,k);break}else t(S,k);k=k.sibling}k=Tl(x,S.mode,I),k.return=S,S=k}return u(S);case Wr:return F=x._init,H(S,k,F(x._payload),I)}if(Ss(x))return C(S,k,x,I);if(hs(x))return R(S,k,x,I);ta(S,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,k!==null&&k.tag===6?(r(S,k.sibling),k=i(k,x),k.return=S,S=k):(r(S,k),k=Rl(x,S.mode,I),k.return=S,S=k),u(S)):r(S,k)}return H}var Ti=zv(!0),Bv=zv(!1),Ta=vn(null),La=null,bi=null,Mf=null;function Pf(){Mf=bi=La=null}function Of(e){var t=Ta.current;Ie(Ta),e._currentValue=t}function Cc(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ii(e,t){La=e,Mf=bi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Dt=!0),e.firstContext=null)}function Qt(e){var t=e._currentValue;if(Mf!==e)if(e={context:e,memoizedValue:t,next:null},bi===null){if(La===null)throw Error(B(308));bi=e,La.dependencies={lanes:0,firstContext:e}}else bi=bi.next=e;return t}var Tn=null;function Af(e){Tn===null?Tn=[e]:Tn.push(e)}function qv(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,Af(t)):(r.next=i.next,i.next=r),t.interleaved=r,Or(e,n)}function Or(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Gr=!1;function _f(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ir(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ln(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ve&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Or(e,r)}return i=n.interleaved,i===null?(t.next=t,Af(n)):(t.next=i.next,i.next=t),n.interleaved=t,Or(e,r)}function ma(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,bf(e,r)}}function Vh(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var u={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=u:o=o.next=u,r=r.next}while(r!==null);o===null?i=o=t:o=o.next=t}else i=o=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Fa(e,t,r,n){var i=e.updateQueue;Gr=!1;var o=i.firstBaseUpdate,u=i.lastBaseUpdate,d=i.shared.pending;if(d!==null){i.shared.pending=null;var h=d,m=h.next;h.next=null,u===null?o=m:u.next=m,u=h;var g=e.alternate;g!==null&&(g=g.updateQueue,d=g.lastBaseUpdate,d!==u&&(d===null?g.firstBaseUpdate=m:d.next=m,g.lastBaseUpdate=h))}if(o!==null){var c=i.baseState;u=0,g=m=h=null,d=o;do{var v=d.lane,E=d.eventTime;if((n&v)===v){g!==null&&(g=g.next={eventTime:E,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var C=e,R=d;switch(v=t,E=r,R.tag){case 1:if(C=R.payload,typeof C=="function"){c=C.call(E,c,v);break e}c=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=R.payload,v=typeof C=="function"?C.call(E,c,v):C,v==null)break e;c=Te({},c,v);break e;case 2:Gr=!0}}d.callback!==null&&d.lane!==0&&(e.flags|=64,v=i.effects,v===null?i.effects=[d]:v.push(d))}else E={eventTime:E,lane:v,tag:d.tag,payload:d.payload,callback:d.callback,next:null},g===null?(m=g=E,h=c):g=g.next=E,u|=v;if(d=d.next,d===null){if(d=i.shared.pending,d===null)break;v=d,d=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(g===null&&(h=c),i.baseState=h,i.firstBaseUpdate=m,i.lastBaseUpdate=g,t=i.shared.interleaved,t!==null){i=t;do u|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Jn|=u,e.lanes=u,e.memoizedState=c}}function Hh(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(B(191,i));i.call(n)}}}var uo={},mr=vn(uo),Gs=vn(uo),Ys=vn(uo);function Ln(e){if(e===uo)throw Error(B(174));return e}function Rf(e,t){switch(Ce(Ys,t),Ce(Gs,e),Ce(mr,uo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=oc(t,e)}Ie(mr),Ce(mr,t)}function Li(){Ie(mr),Ie(Gs),Ie(Ys)}function Kv(e){Ln(Ys.current);var t=Ln(mr.current),r=oc(t,e.type);t!==r&&(Ce(Gs,e),Ce(mr,r))}function Tf(e){Gs.current===e&&(Ie(mr),Ie(Gs))}var _e=vn(0);function za(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Il=[];function Lf(){for(var e=0;e<Il.length;e++)Il[e]._workInProgressVersionPrimary=null;Il.length=0}var $a=Fr.ReactCurrentDispatcher,Ml=Fr.ReactCurrentBatchConfig,Qn=0,Re=null,We=null,et=null,Ba=!1,Os=!1,Zs=0,AC=0;function ft(){throw Error(B(321))}function Ff(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!sr(e[r],t[r]))return!1;return!0}function zf(e,t,r,n,i,o){if(Qn=o,Re=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$a.current=e===null||e.memoizedState===null?LC:FC,e=r(n,i),Os){o=0;do{if(Os=!1,Zs=0,25<=o)throw Error(B(301));o+=1,et=We=null,t.updateQueue=null,$a.current=zC,e=r(n,i)}while(Os)}if($a.current=qa,t=We!==null&&We.next!==null,Qn=0,et=We=Re=null,Ba=!1,t)throw Error(B(300));return e}function Bf(){var e=Zs!==0;return Zs=0,e}function fr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Re.memoizedState=et=e:et=et.next=e,et}function Jt(){if(We===null){var e=Re.alternate;e=e!==null?e.memoizedState:null}else e=We.next;var t=et===null?Re.memoizedState:et.next;if(t!==null)et=t,We=e;else{if(e===null)throw Error(B(310));We=e,e={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},et===null?Re.memoizedState=et=e:et=et.next=e}return et}function Xs(e,t){return typeof t=="function"?t(e):t}function Pl(e){var t=Jt(),r=t.queue;if(r===null)throw Error(B(311));r.lastRenderedReducer=e;var n=We,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var u=i.next;i.next=o.next,o.next=u}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var d=u=null,h=null,m=o;do{var g=m.lane;if((Qn&g)===g)h!==null&&(h=h.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),n=m.hasEagerState?m.eagerState:e(n,m.action);else{var c={lane:g,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};h===null?(d=h=c,u=n):h=h.next=c,Re.lanes|=g,Jn|=g}m=m.next}while(m!==null&&m!==o);h===null?u=n:h.next=d,sr(n,t.memoizedState)||(Dt=!0),t.memoizedState=n,t.baseState=u,t.baseQueue=h,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do o=i.lane,Re.lanes|=o,Jn|=o,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ol(e){var t=Jt(),r=t.queue;if(r===null)throw Error(B(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(i!==null){r.pending=null;var u=i=i.next;do o=e(o,u.action),u=u.next;while(u!==i);sr(o,t.memoizedState)||(Dt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function Qv(){}function Jv(e,t){var r=Re,n=Jt(),i=t(),o=!sr(n.memoizedState,i);if(o&&(n.memoizedState=i,Dt=!0),n=n.queue,qf(Wv.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||et!==null&&et.memoizedState.tag&1){if(r.flags|=2048,eo(9,Hv.bind(null,r,n,i,t),void 0,null),rt===null)throw Error(B(349));Qn&30||Vv(r,t,i)}return i}function Vv(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Re.updateQueue,t===null?(t={lastEffect:null,stores:null},Re.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Hv(e,t,r,n){t.value=r,t.getSnapshot=n,Gv(t)&&Yv(e)}function Wv(e,t,r){return r(function(){Gv(t)&&Yv(e)})}function Gv(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!sr(e,r)}catch{return!0}}function Yv(e){var t=Or(e,1);t!==null&&ir(t,e,1,-1)}function Wh(e){var t=fr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:e},t.queue=e,e=e.dispatch=TC.bind(null,Re,e),[t.memoizedState,e]}function eo(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Re.updateQueue,t===null?(t={lastEffect:null,stores:null},Re.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Zv(){return Jt().memoizedState}function va(e,t,r,n){var i=fr();Re.flags|=e,i.memoizedState=eo(1|t,r,void 0,n===void 0?null:n)}function fu(e,t,r,n){var i=Jt();n=n===void 0?null:n;var o=void 0;if(We!==null){var u=We.memoizedState;if(o=u.destroy,n!==null&&Ff(n,u.deps)){i.memoizedState=eo(t,r,o,n);return}}Re.flags|=e,i.memoizedState=eo(1|t,r,o,n)}function Gh(e,t){return va(8390656,8,e,t)}function qf(e,t){return fu(2048,8,e,t)}function Xv(e,t){return fu(4,2,e,t)}function ey(e,t){return fu(4,4,e,t)}function ty(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ry(e,t,r){return r=r!=null?r.concat([e]):null,fu(4,4,ty.bind(null,t,e),r)}function Uf(){}function ny(e,t){var r=Jt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ff(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function iy(e,t){var r=Jt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ff(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function sy(e,t,r){return Qn&21?(sr(r,t)||(r=cv(),Re.lanes|=r,Jn|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Dt=!0),e.memoizedState=r)}function _C(e,t){var r=be;be=r!==0&&4>r?r:4,e(!0);var n=Ml.transition;Ml.transition={};try{e(!1),t()}finally{be=r,Ml.transition=n}}function oy(){return Jt().memoizedState}function RC(e,t,r){var n=fn(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},ay(e))uy(t,r);else if(r=qv(e,t,r,n),r!==null){var i=yt();ir(r,e,n,i),ly(r,t,n)}}function TC(e,t,r){var n=fn(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(ay(e))uy(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var u=t.lastRenderedState,d=o(u,r);if(i.hasEagerState=!0,i.eagerState=d,sr(d,u)){var h=t.interleaved;h===null?(i.next=i,Af(t)):(i.next=h.next,h.next=i),t.interleaved=i;return}}catch{}finally{}r=qv(e,t,i,n),r!==null&&(i=yt(),ir(r,e,n,i),ly(r,t,n))}}function ay(e){var t=e.alternate;return e===Re||t!==null&&t===Re}function uy(e,t){Os=Ba=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function ly(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,bf(e,r)}}var qa={readContext:Qt,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},LC={readContext:Qt,useCallback:function(e,t){return fr().memoizedState=[e,t===void 0?null:t],e},useContext:Qt,useEffect:Gh,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,va(4194308,4,ty.bind(null,t,e),r)},useLayoutEffect:function(e,t){return va(4194308,4,e,t)},useInsertionEffect:function(e,t){return va(4,2,e,t)},useMemo:function(e,t){var r=fr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=fr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=RC.bind(null,Re,e),[n.memoizedState,e]},useRef:function(e){var t=fr();return e={current:e},t.memoizedState=e},useState:Wh,useDebugValue:Uf,useDeferredValue:function(e){return fr().memoizedState=e},useTransition:function(){var e=Wh(!1),t=e[0];return e=_C.bind(null,e[1]),fr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Re,i=fr();if(Oe){if(r===void 0)throw Error(B(407));r=r()}else{if(r=t(),rt===null)throw Error(B(349));Qn&30||Vv(n,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,Gh(Wv.bind(null,n,o,e),[e]),n.flags|=2048,eo(9,Hv.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=fr(),t=rt.identifierPrefix;if(Oe){var r=jr,n=Er;r=(n&~(1<<32-nr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Zs++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=AC++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},FC={readContext:Qt,useCallback:ny,useContext:Qt,useEffect:qf,useImperativeHandle:ry,useInsertionEffect:Xv,useLayoutEffect:ey,useMemo:iy,useReducer:Pl,useRef:Zv,useState:function(){return Pl(Xs)},useDebugValue:Uf,useDeferredValue:function(e){var t=Jt();return sy(t,We.memoizedState,e)},useTransition:function(){var e=Pl(Xs)[0],t=Jt().memoizedState;return[e,t]},useMutableSource:Qv,useSyncExternalStore:Jv,useId:oy,unstable_isNewReconciler:!1},zC={readContext:Qt,useCallback:ny,useContext:Qt,useEffect:qf,useImperativeHandle:ry,useInsertionEffect:Xv,useLayoutEffect:ey,useMemo:iy,useReducer:Ol,useRef:Zv,useState:function(){return Ol(Xs)},useDebugValue:Uf,useDeferredValue:function(e){var t=Jt();return We===null?t.memoizedState=e:sy(t,We.memoizedState,e)},useTransition:function(){var e=Ol(Xs)[0],t=Jt().memoizedState;return[e,t]},useMutableSource:Qv,useSyncExternalStore:Jv,useId:oy,unstable_isNewReconciler:!1};function er(e,t){if(e&&e.defaultProps){t=Te({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Nc(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Te({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var du={isMounted:function(e){return(e=e._reactInternals)?Gn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=yt(),i=fn(e),o=Ir(n,i);o.payload=t,r!=null&&(o.callback=r),t=ln(e,o,i),t!==null&&(ir(t,e,i,n),ma(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=yt(),i=fn(e),o=Ir(n,i);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=ln(e,o,i),t!==null&&(ir(t,e,i,n),ma(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=yt(),n=fn(e),i=Ir(r,n);i.tag=2,t!=null&&(i.callback=t),t=ln(e,i,n),t!==null&&(ir(t,e,n,r),ma(t,e,n))}};function Yh(e,t,r,n,i,o,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,u):t.prototype&&t.prototype.isPureReactComponent?!Js(r,n)||!Js(i,o):!0}function cy(e,t,r){var n=!1,i=hn,o=t.contextType;return typeof o=="object"&&o!==null?o=Qt(o):(i=Nt(t)?Un:ht.current,n=t.contextTypes,o=(n=n!=null)?_i(e,i):hn),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=du,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Zh(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&du.enqueueReplaceState(t,t.state,null)}function Ec(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},_f(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Qt(o):(o=Nt(t)?Un:ht.current,i.context=_i(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Nc(e,t,o,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&du.enqueueReplaceState(i,i.state,null),Fa(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Fi(e,t){try{var r="",n=t;do r+=hD(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function Al(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function jc(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var BC=typeof WeakMap=="function"?WeakMap:Map;function fy(e,t,r){r=Ir(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ka||(Ka=!0,Fc=n),jc(e,t)},r}function dy(e,t,r){r=Ir(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){jc(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){jc(e,t),typeof n!="function"&&(cn===null?cn=new Set([this]):cn.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),r}function Xh(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new BC;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=tN.bind(null,e,t,r),t.then(e,e))}function em(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function tm(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ir(-1,1),t.tag=2,ln(r,t,1))),r.lanes|=1),e)}var qC=Fr.ReactCurrentOwner,Dt=!1;function $t(e,t,r,n){t.child=e===null?Bv(t,null,r,n):Ti(t,e.child,r,n)}function rm(e,t,r,n,i){r=r.render;var o=t.ref;return Ii(t,i),n=zf(e,t,r,n,o,i),r=Bf(),e!==null&&!Dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ar(e,t,i)):(Oe&&r&&Ef(t),t.flags|=1,$t(e,t,n,i),t.child)}function nm(e,t,r,n,i){if(e===null){var o=r.type;return typeof o=="function"&&!Yf(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,py(e,t,o,n,i)):(e=wa(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var u=o.memoizedProps;if(r=r.compare,r=r!==null?r:Js,r(u,n)&&e.ref===t.ref)return Ar(e,t,i)}return t.flags|=1,e=dn(o,n),e.ref=t.ref,e.return=t,t.child=e}function py(e,t,r,n,i){if(e!==null){var o=e.memoizedProps;if(Js(o,n)&&e.ref===t.ref)if(Dt=!1,t.pendingProps=n=o,(e.lanes&i)!==0)e.flags&131072&&(Dt=!0);else return t.lanes=e.lanes,Ar(e,t,i)}return Ic(e,t,r,n,i)}function hy(e,t,r){var n=t.pendingProps,i=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(ki,jt),jt|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ce(ki,jt),jt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Ce(ki,jt),jt|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,Ce(ki,jt),jt|=n;return $t(e,t,i,r),t.child}function my(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ic(e,t,r,n,i){var o=Nt(r)?Un:ht.current;return o=_i(t,o),Ii(t,i),r=zf(e,t,r,n,o,i),n=Bf(),e!==null&&!Dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ar(e,t,i)):(Oe&&n&&Ef(t),t.flags|=1,$t(e,t,r,i),t.child)}function im(e,t,r,n,i){if(Nt(r)){var o=!0;Aa(t)}else o=!1;if(Ii(t,i),t.stateNode===null)ya(e,t),cy(t,r,n),Ec(t,r,n,i),n=!0;else if(e===null){var u=t.stateNode,d=t.memoizedProps;u.props=d;var h=u.context,m=r.contextType;typeof m=="object"&&m!==null?m=Qt(m):(m=Nt(r)?Un:ht.current,m=_i(t,m));var g=r.getDerivedStateFromProps,c=typeof g=="function"||typeof u.getSnapshotBeforeUpdate=="function";c||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(d!==n||h!==m)&&Zh(t,u,n,m),Gr=!1;var v=t.memoizedState;u.state=v,Fa(t,n,u,i),h=t.memoizedState,d!==n||v!==h||Ct.current||Gr?(typeof g=="function"&&(Nc(t,r,g,n),h=t.memoizedState),(d=Gr||Yh(t,r,d,n,v,h,m))?(c||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=h),u.props=n,u.state=h,u.context=m,n=d):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{u=t.stateNode,Uv(e,t),d=t.memoizedProps,m=t.type===t.elementType?d:er(t.type,d),u.props=m,c=t.pendingProps,v=u.context,h=r.contextType,typeof h=="object"&&h!==null?h=Qt(h):(h=Nt(r)?Un:ht.current,h=_i(t,h));var E=r.getDerivedStateFromProps;(g=typeof E=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(d!==c||v!==h)&&Zh(t,u,n,h),Gr=!1,v=t.memoizedState,u.state=v,Fa(t,n,u,i);var C=t.memoizedState;d!==c||v!==C||Ct.current||Gr?(typeof E=="function"&&(Nc(t,r,E,n),C=t.memoizedState),(m=Gr||Yh(t,r,m,n,v,C,h)||!1)?(g||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(n,C,h),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(n,C,h)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||d===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=C),u.props=n,u.state=C,u.context=h,n=m):(typeof u.componentDidUpdate!="function"||d===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),n=!1)}return Mc(e,t,r,n,o,i)}function Mc(e,t,r,n,i,o){my(e,t);var u=(t.flags&128)!==0;if(!n&&!u)return i&&Uh(t,r,!1),Ar(e,t,o);n=t.stateNode,qC.current=t;var d=u&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&u?(t.child=Ti(t,e.child,null,o),t.child=Ti(t,null,d,o)):$t(e,t,d,o),t.memoizedState=n.state,i&&Uh(t,r,!0),t.child}function $y(e){var t=e.stateNode;t.pendingContext?qh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&qh(e,t.context,!1),Rf(e,t.containerInfo)}function sm(e,t,r,n,i){return Ri(),If(i),t.flags|=256,$t(e,t,r,n),t.child}var Pc={dehydrated:null,treeContext:null,retryLane:0};function Oc(e){return{baseLanes:e,cachePool:null,transitions:null}}function vy(e,t,r){var n=t.pendingProps,i=_e.current,o=!1,u=(t.flags&128)!==0,d;if((d=u)||(d=e!==null&&e.memoizedState===null?!1:(i&2)!==0),d?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ce(_e,i&1),e===null)return Dc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=n.children,e=n.fallback,o?(n=t.mode,o=t.child,u={mode:"hidden",children:u},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=u):o=mu(u,n,0,null),e=Bn(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Oc(r),t.memoizedState=Pc,e):Kf(t,u));if(i=e.memoizedState,i!==null&&(d=i.dehydrated,d!==null))return UC(e,t,u,n,d,i,r);if(o){o=n.fallback,u=t.mode,i=e.child,d=i.sibling;var h={mode:"hidden",children:n.children};return!(u&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=h,t.deletions=null):(n=dn(i,h),n.subtreeFlags=i.subtreeFlags&14680064),d!==null?o=dn(d,o):(o=Bn(o,u,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,u=e.child.memoizedState,u=u===null?Oc(r):{baseLanes:u.baseLanes|r,cachePool:null,transitions:u.transitions},o.memoizedState=u,o.childLanes=e.childLanes&~r,t.memoizedState=Pc,n}return o=e.child,e=o.sibling,n=dn(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Kf(e,t){return t=mu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ra(e,t,r,n){return n!==null&&If(n),Ti(t,e.child,null,r),e=Kf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function UC(e,t,r,n,i,o,u){if(r)return t.flags&256?(t.flags&=-257,n=Al(Error(B(422))),ra(e,t,u,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,i=t.mode,n=mu({mode:"visible",children:n.children},i,0,null),o=Bn(o,i,u,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Ti(t,e.child,null,u),t.child.memoizedState=Oc(u),t.memoizedState=Pc,o);if(!(t.mode&1))return ra(e,t,u,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var d=n.dgst;return n=d,o=Error(B(419)),n=Al(o,n,void 0),ra(e,t,u,n)}if(d=(u&e.childLanes)!==0,Dt||d){if(n=rt,n!==null){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|u)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Or(e,i),ir(n,e,i,-1))}return Gf(),n=Al(Error(B(421))),ra(e,t,u,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=rN.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,It=un(i.nextSibling),Mt=t,Oe=!0,rr=null,e!==null&&(Bt[qt++]=Er,Bt[qt++]=jr,Bt[qt++]=Kn,Er=e.id,jr=e.overflow,Kn=t),t=Kf(t,n.children),t.flags|=4096,t)}function om(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Cc(e.return,t,r)}function _l(e,t,r,n,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function yy(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if($t(e,t,n.children,r),n=_e.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&om(e,r,t);else if(e.tag===19)om(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ce(_e,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&za(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),_l(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&za(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}_l(t,!0,r,null,o);break;case"together":_l(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ya(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ar(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Jn|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(B(153));if(t.child!==null){for(e=t.child,r=dn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=dn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function KC(e,t,r){switch(t.tag){case 3:$y(t),Ri();break;case 5:Kv(t);break;case 1:Nt(t.type)&&Aa(t);break;case 4:Rf(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Ce(Ta,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ce(_e,_e.current&1),t.flags|=128,null):r&t.child.childLanes?vy(e,t,r):(Ce(_e,_e.current&1),e=Ar(e,t,r),e!==null?e.sibling:null);Ce(_e,_e.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return yy(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ce(_e,_e.current),n)break;return null;case 22:case 23:return t.lanes=0,hy(e,t,r)}return Ar(e,t,r)}var gy,Ac,by,wy;gy=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ac=function(){};by=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Ln(mr.current);var o=null;switch(r){case"input":i=rc(e,i),n=rc(e,n),o=[];break;case"select":i=Te({},i,{value:void 0}),n=Te({},n,{value:void 0}),o=[];break;case"textarea":i=sc(e,i),n=sc(e,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Pa)}ac(r,n);var u;r=null;for(m in i)if(!n.hasOwnProperty(m)&&i.hasOwnProperty(m)&&i[m]!=null)if(m==="style"){var d=i[m];for(u in d)d.hasOwnProperty(u)&&(r||(r={}),r[u]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Fs.hasOwnProperty(m)?o||(o=[]):(o=o||[]).push(m,null));for(m in n){var h=n[m];if(d=i!=null?i[m]:void 0,n.hasOwnProperty(m)&&h!==d&&(h!=null||d!=null))if(m==="style")if(d){for(u in d)!d.hasOwnProperty(u)||h&&h.hasOwnProperty(u)||(r||(r={}),r[u]="");for(u in h)h.hasOwnProperty(u)&&d[u]!==h[u]&&(r||(r={}),r[u]=h[u])}else r||(o||(o=[]),o.push(m,r)),r=h;else m==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,d=d?d.__html:void 0,h!=null&&d!==h&&(o=o||[]).push(m,h)):m==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(m,""+h):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Fs.hasOwnProperty(m)?(h!=null&&m==="onScroll"&&Ee("scroll",e),o||d===h||(o=[])):(o=o||[]).push(m,h))}r&&(o=o||[]).push("style",r);var m=o;(t.updateQueue=m)&&(t.flags|=4)}};wy=function(e,t,r,n){r!==n&&(t.flags|=4)};function bs(e,t){if(!Oe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function QC(e,t,r){var n=t.pendingProps;switch(jf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(t),null;case 1:return Nt(t.type)&&Oa(),dt(t),null;case 3:return n=t.stateNode,Li(),Ie(Ct),Ie(ht),Lf(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ea(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,rr!==null&&(qc(rr),rr=null))),Ac(e,t),dt(t),null;case 5:Tf(t);var i=Ln(Ys.current);if(r=t.type,e!==null&&t.stateNode!=null)by(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(B(166));return dt(t),null}if(e=Ln(mr.current),ea(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[pr]=t,n[Ws]=o,e=(t.mode&1)!==0,r){case"dialog":Ee("cancel",n),Ee("close",n);break;case"iframe":case"object":case"embed":Ee("load",n);break;case"video":case"audio":for(i=0;i<Ds.length;i++)Ee(Ds[i],n);break;case"source":Ee("error",n);break;case"img":case"image":case"link":Ee("error",n),Ee("load",n);break;case"details":Ee("toggle",n);break;case"input":mh(n,o),Ee("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Ee("invalid",n);break;case"textarea":vh(n,o),Ee("invalid",n)}ac(r,o),i=null;for(var u in o)if(o.hasOwnProperty(u)){var d=o[u];u==="children"?typeof d=="string"?n.textContent!==d&&(o.suppressHydrationWarning!==!0&&Xo(n.textContent,d,e),i=["children",d]):typeof d=="number"&&n.textContent!==""+d&&(o.suppressHydrationWarning!==!0&&Xo(n.textContent,d,e),i=["children",""+d]):Fs.hasOwnProperty(u)&&d!=null&&u==="onScroll"&&Ee("scroll",n)}switch(r){case"input":Qo(n),$h(n,o,!0);break;case"textarea":Qo(n),yh(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Pa)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{u=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=W$(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=u.createElement(r,{is:n.is}):(e=u.createElement(r),r==="select"&&(u=e,n.multiple?u.multiple=!0:n.size&&(u.size=n.size))):e=u.createElementNS(e,r),e[pr]=t,e[Ws]=n,gy(e,t,!1,!1),t.stateNode=e;e:{switch(u=uc(r,n),r){case"dialog":Ee("cancel",e),Ee("close",e),i=n;break;case"iframe":case"object":case"embed":Ee("load",e),i=n;break;case"video":case"audio":for(i=0;i<Ds.length;i++)Ee(Ds[i],e);i=n;break;case"source":Ee("error",e),i=n;break;case"img":case"image":case"link":Ee("error",e),Ee("load",e),i=n;break;case"details":Ee("toggle",e),i=n;break;case"input":mh(e,n),i=rc(e,n),Ee("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Te({},n,{value:void 0}),Ee("invalid",e);break;case"textarea":vh(e,n),i=sc(e,n),Ee("invalid",e);break;default:i=n}ac(r,i),d=i;for(o in d)if(d.hasOwnProperty(o)){var h=d[o];o==="style"?Z$(e,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&G$(e,h)):o==="children"?typeof h=="string"?(r!=="textarea"||h!=="")&&zs(e,h):typeof h=="number"&&zs(e,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Fs.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Ee("scroll",e):h!=null&&hf(e,o,h,u))}switch(r){case"input":Qo(e),$h(e,n,!1);break;case"textarea":Qo(e),yh(e);break;case"option":n.value!=null&&e.setAttribute("value",""+pn(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?Ci(e,!!n.multiple,o,!1):n.defaultValue!=null&&Ci(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Pa)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return dt(t),null;case 6:if(e&&t.stateNode!=null)wy(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(B(166));if(r=Ln(Ys.current),Ln(mr.current),ea(t)){if(n=t.stateNode,r=t.memoizedProps,n[pr]=t,(o=n.nodeValue!==r)&&(e=Mt,e!==null))switch(e.tag){case 3:Xo(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xo(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[pr]=t,t.stateNode=n}return dt(t),null;case 13:if(Ie(_e),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Oe&&It!==null&&t.mode&1&&!(t.flags&128))Fv(),Ri(),t.flags|=98560,o=!1;else if(o=ea(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(B(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(B(317));o[pr]=t}else Ri(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;dt(t),o=!1}else rr!==null&&(qc(rr),rr=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||_e.current&1?Ge===0&&(Ge=3):Gf())),t.updateQueue!==null&&(t.flags|=4),dt(t),null);case 4:return Li(),Ac(e,t),e===null&&Vs(t.stateNode.containerInfo),dt(t),null;case 10:return Of(t.type._context),dt(t),null;case 17:return Nt(t.type)&&Oa(),dt(t),null;case 19:if(Ie(_e),o=t.memoizedState,o===null)return dt(t),null;if(n=(t.flags&128)!==0,u=o.rendering,u===null)if(n)bs(o,!1);else{if(Ge!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=za(e),u!==null){for(t.flags|=128,bs(o,!1),n=u.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,u=o.alternate,u===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ce(_e,_e.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ue()>zi&&(t.flags|=128,n=!0,bs(o,!1),t.lanes=4194304)}else{if(!n)if(e=za(u),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),bs(o,!0),o.tail===null&&o.tailMode==="hidden"&&!u.alternate&&!Oe)return dt(t),null}else 2*Ue()-o.renderingStartTime>zi&&r!==1073741824&&(t.flags|=128,n=!0,bs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(r=o.last,r!==null?r.sibling=u:t.child=u,o.last=u)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ue(),t.sibling=null,r=_e.current,Ce(_e,n?r&1|2:r&1),t):(dt(t),null);case 22:case 23:return Wf(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?jt&1073741824&&(dt(t),t.subtreeFlags&6&&(t.flags|=8192)):dt(t),null;case 24:return null;case 25:return null}throw Error(B(156,t.tag))}function JC(e,t){switch(jf(t),t.tag){case 1:return Nt(t.type)&&Oa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Li(),Ie(Ct),Ie(ht),Lf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Tf(t),null;case 13:if(Ie(_e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(B(340));Ri()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ie(_e),null;case 4:return Li(),null;case 10:return Of(t.type._context),null;case 22:case 23:return Wf(),null;case 24:return null;default:return null}}var na=!1,pt=!1,VC=typeof WeakSet=="function"?WeakSet:Set,W=null;function wi(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Be(e,t,n)}else r.current=null}function _c(e,t,r){try{r()}catch(n){Be(e,t,n)}}var am=!1;function HC(e,t){if(yc=ja,e=Cv(),Nf(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var u=0,d=-1,h=-1,m=0,g=0,c=e,v=null;t:for(;;){for(var E;c!==r||i!==0&&c.nodeType!==3||(d=u+i),c!==o||n!==0&&c.nodeType!==3||(h=u+n),c.nodeType===3&&(u+=c.nodeValue.length),(E=c.firstChild)!==null;)v=c,c=E;for(;;){if(c===e)break t;if(v===r&&++m===i&&(d=u),v===o&&++g===n&&(h=u),(E=c.nextSibling)!==null)break;c=v,v=c.parentNode}c=E}r=d===-1||h===-1?null:{start:d,end:h}}else r=null}r=r||{start:0,end:0}}else r=null;for(gc={focusedElem:e,selectionRange:r},ja=!1,W=t;W!==null;)if(t=W,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,W=e;else for(;W!==null;){t=W;try{var C=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var R=C.memoizedProps,H=C.memoizedState,S=t.stateNode,k=S.getSnapshotBeforeUpdate(t.elementType===t.type?R:er(t.type,R),H);S.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(I){Be(t,t.return,I)}if(e=t.sibling,e!==null){e.return=t.return,W=e;break}W=t.return}return C=am,am=!1,C}function As(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&_c(t,r,o)}i=i.next}while(i!==n)}}function pu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Rc(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function ky(e){var t=e.alternate;t!==null&&(e.alternate=null,ky(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[pr],delete t[Ws],delete t[kc],delete t[IC],delete t[MC])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Sy(e){return e.tag===5||e.tag===3||e.tag===4}function um(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Sy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Tc(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Pa));else if(n!==4&&(e=e.child,e!==null))for(Tc(e,t,r),e=e.sibling;e!==null;)Tc(e,t,r),e=e.sibling}function Lc(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Lc(e,t,r),e=e.sibling;e!==null;)Lc(e,t,r),e=e.sibling}var st=null,tr=!1;function Vr(e,t,r){for(r=r.child;r!==null;)xy(e,t,r),r=r.sibling}function xy(e,t,r){if(hr&&typeof hr.onCommitFiberUnmount=="function")try{hr.onCommitFiberUnmount(su,r)}catch{}switch(r.tag){case 5:pt||wi(r,t);case 6:var n=st,i=tr;st=null,Vr(e,t,r),st=n,tr=i,st!==null&&(tr?(e=st,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):st.removeChild(r.stateNode));break;case 18:st!==null&&(tr?(e=st,r=r.stateNode,e.nodeType===8?El(e.parentNode,r):e.nodeType===1&&El(e,r),Ks(e)):El(st,r.stateNode));break;case 4:n=st,i=tr,st=r.stateNode.containerInfo,tr=!0,Vr(e,t,r),st=n,tr=i;break;case 0:case 11:case 14:case 15:if(!pt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,u=o.destroy;o=o.tag,u!==void 0&&(o&2||o&4)&&_c(r,t,u),i=i.next}while(i!==n)}Vr(e,t,r);break;case 1:if(!pt&&(wi(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(d){Be(r,t,d)}Vr(e,t,r);break;case 21:Vr(e,t,r);break;case 22:r.mode&1?(pt=(n=pt)||r.memoizedState!==null,Vr(e,t,r),pt=n):Vr(e,t,r);break;default:Vr(e,t,r)}}function lm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new VC),t.forEach(function(n){var i=nN.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Xt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=e,u=t,d=u;e:for(;d!==null;){switch(d.tag){case 5:st=d.stateNode,tr=!1;break e;case 3:st=d.stateNode.containerInfo,tr=!0;break e;case 4:st=d.stateNode.containerInfo,tr=!0;break e}d=d.return}if(st===null)throw Error(B(160));xy(o,u,i),st=null,tr=!1;var h=i.alternate;h!==null&&(h.return=null),i.return=null}catch(m){Be(i,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Dy(t,e),t=t.sibling}function Dy(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xt(t,e),cr(e),n&4){try{As(3,e,e.return),pu(3,e)}catch(R){Be(e,e.return,R)}try{As(5,e,e.return)}catch(R){Be(e,e.return,R)}}break;case 1:Xt(t,e),cr(e),n&512&&r!==null&&wi(r,r.return);break;case 5:if(Xt(t,e),cr(e),n&512&&r!==null&&wi(r,r.return),e.flags&32){var i=e.stateNode;try{zs(i,"")}catch(R){Be(e,e.return,R)}}if(n&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,u=r!==null?r.memoizedProps:o,d=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{d==="input"&&o.type==="radio"&&o.name!=null&&V$(i,o),uc(d,u);var m=uc(d,o);for(u=0;u<h.length;u+=2){var g=h[u],c=h[u+1];g==="style"?Z$(i,c):g==="dangerouslySetInnerHTML"?G$(i,c):g==="children"?zs(i,c):hf(i,g,c,m)}switch(d){case"input":nc(i,o);break;case"textarea":H$(i,o);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var E=o.value;E!=null?Ci(i,!!o.multiple,E,!1):v!==!!o.multiple&&(o.defaultValue!=null?Ci(i,!!o.multiple,o.defaultValue,!0):Ci(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ws]=o}catch(R){Be(e,e.return,R)}}break;case 6:if(Xt(t,e),cr(e),n&4){if(e.stateNode===null)throw Error(B(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(R){Be(e,e.return,R)}}break;case 3:if(Xt(t,e),cr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ks(t.containerInfo)}catch(R){Be(e,e.return,R)}break;case 4:Xt(t,e),cr(e);break;case 13:Xt(t,e),cr(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Vf=Ue())),n&4&&lm(e);break;case 22:if(g=r!==null&&r.memoizedState!==null,e.mode&1?(pt=(m=pt)||g,Xt(t,e),pt=m):Xt(t,e),cr(e),n&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!g&&e.mode&1)for(W=e,g=e.child;g!==null;){for(c=W=g;W!==null;){switch(v=W,E=v.child,v.tag){case 0:case 11:case 14:case 15:As(4,v,v.return);break;case 1:wi(v,v.return);var C=v.stateNode;if(typeof C.componentWillUnmount=="function"){n=v,r=v.return;try{t=n,C.props=t.memoizedProps,C.state=t.memoizedState,C.componentWillUnmount()}catch(R){Be(n,r,R)}}break;case 5:wi(v,v.return);break;case 22:if(v.memoizedState!==null){fm(c);continue}}E!==null?(E.return=v,W=E):fm(c)}g=g.sibling}e:for(g=null,c=e;;){if(c.tag===5){if(g===null){g=c;try{i=c.stateNode,m?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(d=c.stateNode,h=c.memoizedProps.style,u=h!=null&&h.hasOwnProperty("display")?h.display:null,d.style.display=Y$("display",u))}catch(R){Be(e,e.return,R)}}}else if(c.tag===6){if(g===null)try{c.stateNode.nodeValue=m?"":c.memoizedProps}catch(R){Be(e,e.return,R)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===e)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;c.sibling===null;){if(c.return===null||c.return===e)break e;g===c&&(g=null),c=c.return}g===c&&(g=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Xt(t,e),cr(e),n&4&&lm(e);break;case 21:break;default:Xt(t,e),cr(e)}}function cr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Sy(r)){var n=r;break e}r=r.return}throw Error(B(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(zs(i,""),n.flags&=-33);var o=um(e);Lc(e,o,i);break;case 3:case 4:var u=n.stateNode.containerInfo,d=um(e);Tc(e,d,u);break;default:throw Error(B(161))}}catch(h){Be(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function WC(e,t,r){W=e,Cy(e)}function Cy(e,t,r){for(var n=(e.mode&1)!==0;W!==null;){var i=W,o=i.child;if(i.tag===22&&n){var u=i.memoizedState!==null||na;if(!u){var d=i.alternate,h=d!==null&&d.memoizedState!==null||pt;d=na;var m=pt;if(na=u,(pt=h)&&!m)for(W=i;W!==null;)u=W,h=u.child,u.tag===22&&u.memoizedState!==null?dm(i):h!==null?(h.return=u,W=h):dm(i);for(;o!==null;)W=o,Cy(o),o=o.sibling;W=i,na=d,pt=m}cm(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,W=o):cm(e)}}function cm(e){for(;W!==null;){var t=W;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:pt||pu(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!pt)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:er(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Hh(t,o,n);break;case 3:var u=t.updateQueue;if(u!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Hh(t,u,r)}break;case 5:var d=t.stateNode;if(r===null&&t.flags&4){r=d;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&r.focus();break;case"img":h.src&&(r.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var g=m.memoizedState;if(g!==null){var c=g.dehydrated;c!==null&&Ks(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}pt||t.flags&512&&Rc(t)}catch(v){Be(t,t.return,v)}}if(t===e){W=null;break}if(r=t.sibling,r!==null){r.return=t.return,W=r;break}W=t.return}}function fm(e){for(;W!==null;){var t=W;if(t===e){W=null;break}var r=t.sibling;if(r!==null){r.return=t.return,W=r;break}W=t.return}}function dm(e){for(;W!==null;){var t=W;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{pu(4,t)}catch(h){Be(t,r,h)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(h){Be(t,i,h)}}var o=t.return;try{Rc(t)}catch(h){Be(t,o,h)}break;case 5:var u=t.return;try{Rc(t)}catch(h){Be(t,u,h)}}}catch(h){Be(t,t.return,h)}if(t===e){W=null;break}var d=t.sibling;if(d!==null){d.return=t.return,W=d;break}W=t.return}}var GC=Math.ceil,Ua=Fr.ReactCurrentDispatcher,Qf=Fr.ReactCurrentOwner,Kt=Fr.ReactCurrentBatchConfig,ve=0,rt=null,Je=null,ot=0,jt=0,ki=vn(0),Ge=0,to=null,Jn=0,hu=0,Jf=0,_s=null,xt=null,Vf=0,zi=1/0,Dr=null,Ka=!1,Fc=null,cn=null,ia=!1,rn=null,Qa=0,Rs=0,zc=null,ga=-1,ba=0;function yt(){return ve&6?Ue():ga!==-1?ga:ga=Ue()}function fn(e){return e.mode&1?ve&2&&ot!==0?ot&-ot:OC.transition!==null?(ba===0&&(ba=cv()),ba):(e=be,e!==0||(e=window.event,e=e===void 0?16:vv(e.type)),e):1}function ir(e,t,r,n){if(50<Rs)throw Rs=0,zc=null,Error(B(185));so(e,r,n),(!(ve&2)||e!==rt)&&(e===rt&&(!(ve&2)&&(hu|=r),Ge===4&&Xr(e,ot)),Et(e,n),r===1&&ve===0&&!(t.mode&1)&&(zi=Ue()+500,cu&&yn()))}function Et(e,t){var r=e.callbackNode;OD(e,t);var n=Ea(e,e===rt?ot:0);if(n===0)r!==null&&wh(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&wh(r),t===1)e.tag===0?PC(pm.bind(null,e)):Rv(pm.bind(null,e)),EC(function(){!(ve&6)&&yn()}),r=null;else{switch(fv(n)){case 1:r=gf;break;case 4:r=uv;break;case 16:r=Na;break;case 536870912:r=lv;break;default:r=Na}r=Ay(r,Ny.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Ny(e,t){if(ga=-1,ba=0,ve&6)throw Error(B(327));var r=e.callbackNode;if(Mi()&&e.callbackNode!==r)return null;var n=Ea(e,e===rt?ot:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ja(e,n);else{t=n;var i=ve;ve|=2;var o=jy();(rt!==e||ot!==t)&&(Dr=null,zi=Ue()+500,zn(e,t));do try{XC();break}catch(d){Ey(e,d)}while(!0);Pf(),Ua.current=o,ve=i,Je!==null?t=0:(rt=null,ot=0,t=Ge)}if(t!==0){if(t===2&&(i=pc(e),i!==0&&(n=i,t=Bc(e,i))),t===1)throw r=to,zn(e,0),Xr(e,n),Et(e,Ue()),r;if(t===6)Xr(e,n);else{if(i=e.current.alternate,!(n&30)&&!YC(i)&&(t=Ja(e,n),t===2&&(o=pc(e),o!==0&&(n=o,t=Bc(e,o))),t===1))throw r=to,zn(e,0),Xr(e,n),Et(e,Ue()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(B(345));case 2:An(e,xt,Dr);break;case 3:if(Xr(e,n),(n&130023424)===n&&(t=Vf+500-Ue(),10<t)){if(Ea(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){yt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=wc(An.bind(null,e,xt,Dr),t);break}An(e,xt,Dr);break;case 4:if(Xr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var u=31-nr(n);o=1<<u,u=t[u],u>i&&(i=u),n&=~o}if(n=i,n=Ue()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*GC(n/1960))-n,10<n){e.timeoutHandle=wc(An.bind(null,e,xt,Dr),n);break}An(e,xt,Dr);break;case 5:An(e,xt,Dr);break;default:throw Error(B(329))}}}return Et(e,Ue()),e.callbackNode===r?Ny.bind(null,e):null}function Bc(e,t){var r=_s;return e.current.memoizedState.isDehydrated&&(zn(e,t).flags|=256),e=Ja(e,t),e!==2&&(t=xt,xt=r,t!==null&&qc(t)),e}function qc(e){xt===null?xt=e:xt.push.apply(xt,e)}function YC(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xr(e,t){for(t&=~Jf,t&=~hu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-nr(t),n=1<<r;e[r]=-1,t&=~n}}function pm(e){if(ve&6)throw Error(B(327));Mi();var t=Ea(e,0);if(!(t&1))return Et(e,Ue()),null;var r=Ja(e,t);if(e.tag!==0&&r===2){var n=pc(e);n!==0&&(t=n,r=Bc(e,n))}if(r===1)throw r=to,zn(e,0),Xr(e,t),Et(e,Ue()),r;if(r===6)throw Error(B(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,An(e,xt,Dr),Et(e,Ue()),null}function Hf(e,t){var r=ve;ve|=1;try{return e(t)}finally{ve=r,ve===0&&(zi=Ue()+500,cu&&yn())}}function Vn(e){rn!==null&&rn.tag===0&&!(ve&6)&&Mi();var t=ve;ve|=1;var r=Kt.transition,n=be;try{if(Kt.transition=null,be=1,e)return e()}finally{be=n,Kt.transition=r,ve=t,!(ve&6)&&yn()}}function Wf(){jt=ki.current,Ie(ki)}function zn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,NC(r)),Je!==null)for(r=Je.return;r!==null;){var n=r;switch(jf(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Oa();break;case 3:Li(),Ie(Ct),Ie(ht),Lf();break;case 5:Tf(n);break;case 4:Li();break;case 13:Ie(_e);break;case 19:Ie(_e);break;case 10:Of(n.type._context);break;case 22:case 23:Wf()}r=r.return}if(rt=e,Je=e=dn(e.current,null),ot=jt=t,Ge=0,to=null,Jf=hu=Jn=0,xt=_s=null,Tn!==null){for(t=0;t<Tn.length;t++)if(r=Tn[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var u=o.next;o.next=i,n.next=u}r.pending=n}Tn=null}return e}function Ey(e,t){do{var r=Je;try{if(Pf(),$a.current=qa,Ba){for(var n=Re.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ba=!1}if(Qn=0,et=We=Re=null,Os=!1,Zs=0,Qf.current=null,r===null||r.return===null){Ge=1,to=t,Je=null;break}e:{var o=e,u=r.return,d=r,h=t;if(t=ot,d.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var m=h,g=d,c=g.tag;if(!(g.mode&1)&&(c===0||c===11||c===15)){var v=g.alternate;v?(g.updateQueue=v.updateQueue,g.memoizedState=v.memoizedState,g.lanes=v.lanes):(g.updateQueue=null,g.memoizedState=null)}var E=em(u);if(E!==null){E.flags&=-257,tm(E,u,d,o,t),E.mode&1&&Xh(o,m,t),t=E,h=m;var C=t.updateQueue;if(C===null){var R=new Set;R.add(h),t.updateQueue=R}else C.add(h);break e}else{if(!(t&1)){Xh(o,m,t),Gf();break e}h=Error(B(426))}}else if(Oe&&d.mode&1){var H=em(u);if(H!==null){!(H.flags&65536)&&(H.flags|=256),tm(H,u,d,o,t),If(Fi(h,d));break e}}o=h=Fi(h,d),Ge!==4&&(Ge=2),_s===null?_s=[o]:_s.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var S=fy(o,h,t);Vh(o,S);break e;case 1:d=h;var k=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof k.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(cn===null||!cn.has(x)))){o.flags|=65536,t&=-t,o.lanes|=t;var I=dy(o,d,t);Vh(o,I);break e}}o=o.return}while(o!==null)}My(r)}catch(O){t=O,Je===r&&r!==null&&(Je=r=r.return);continue}break}while(!0)}function jy(){var e=Ua.current;return Ua.current=qa,e===null?qa:e}function Gf(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),rt===null||!(Jn&268435455)&&!(hu&268435455)||Xr(rt,ot)}function Ja(e,t){var r=ve;ve|=2;var n=jy();(rt!==e||ot!==t)&&(Dr=null,zn(e,t));do try{ZC();break}catch(i){Ey(e,i)}while(!0);if(Pf(),ve=r,Ua.current=n,Je!==null)throw Error(B(261));return rt=null,ot=0,Ge}function ZC(){for(;Je!==null;)Iy(Je)}function XC(){for(;Je!==null&&!xD();)Iy(Je)}function Iy(e){var t=Oy(e.alternate,e,jt);e.memoizedProps=e.pendingProps,t===null?My(e):Je=t,Qf.current=null}function My(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=JC(r,t),r!==null){r.flags&=32767,Je=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ge=6,Je=null;return}}else if(r=QC(r,t,jt),r!==null){Je=r;return}if(t=t.sibling,t!==null){Je=t;return}Je=t=e}while(t!==null);Ge===0&&(Ge=5)}function An(e,t,r){var n=be,i=Kt.transition;try{Kt.transition=null,be=1,eN(e,t,r,n)}finally{Kt.transition=i,be=n}return null}function eN(e,t,r,n){do Mi();while(rn!==null);if(ve&6)throw Error(B(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(B(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(AD(e,o),e===rt&&(Je=rt=null,ot=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ia||(ia=!0,Ay(Na,function(){return Mi(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Kt.transition,Kt.transition=null;var u=be;be=1;var d=ve;ve|=4,Qf.current=null,HC(e,r),Dy(r,e),bC(gc),ja=!!yc,gc=yc=null,e.current=r,WC(r),DD(),ve=d,be=u,Kt.transition=o}else e.current=r;if(ia&&(ia=!1,rn=e,Qa=i),o=e.pendingLanes,o===0&&(cn=null),ED(r.stateNode),Et(e,Ue()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Ka)throw Ka=!1,e=Fc,Fc=null,e;return Qa&1&&e.tag!==0&&Mi(),o=e.pendingLanes,o&1?e===zc?Rs++:(Rs=0,zc=e):Rs=0,yn(),null}function Mi(){if(rn!==null){var e=fv(Qa),t=Kt.transition,r=be;try{if(Kt.transition=null,be=16>e?16:e,rn===null)var n=!1;else{if(e=rn,rn=null,Qa=0,ve&6)throw Error(B(331));var i=ve;for(ve|=4,W=e.current;W!==null;){var o=W,u=o.child;if(W.flags&16){var d=o.deletions;if(d!==null){for(var h=0;h<d.length;h++){var m=d[h];for(W=m;W!==null;){var g=W;switch(g.tag){case 0:case 11:case 15:As(8,g,o)}var c=g.child;if(c!==null)c.return=g,W=c;else for(;W!==null;){g=W;var v=g.sibling,E=g.return;if(ky(g),g===m){W=null;break}if(v!==null){v.return=E,W=v;break}W=E}}}var C=o.alternate;if(C!==null){var R=C.child;if(R!==null){C.child=null;do{var H=R.sibling;R.sibling=null,R=H}while(R!==null)}}W=o}}if(o.subtreeFlags&2064&&u!==null)u.return=o,W=u;else e:for(;W!==null;){if(o=W,o.flags&2048)switch(o.tag){case 0:case 11:case 15:As(9,o,o.return)}var S=o.sibling;if(S!==null){S.return=o.return,W=S;break e}W=o.return}}var k=e.current;for(W=k;W!==null;){u=W;var x=u.child;if(u.subtreeFlags&2064&&x!==null)x.return=u,W=x;else e:for(u=k;W!==null;){if(d=W,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:pu(9,d)}}catch(O){Be(d,d.return,O)}if(d===u){W=null;break e}var I=d.sibling;if(I!==null){I.return=d.return,W=I;break e}W=d.return}}if(ve=i,yn(),hr&&typeof hr.onPostCommitFiberRoot=="function")try{hr.onPostCommitFiberRoot(su,e)}catch{}n=!0}return n}finally{be=r,Kt.transition=t}}return!1}function hm(e,t,r){t=Fi(r,t),t=fy(e,t,1),e=ln(e,t,1),t=yt(),e!==null&&(so(e,1,t),Et(e,t))}function Be(e,t,r){if(e.tag===3)hm(e,e,r);else for(;t!==null;){if(t.tag===3){hm(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(cn===null||!cn.has(n))){e=Fi(r,e),e=dy(t,e,1),t=ln(t,e,1),e=yt(),t!==null&&(so(t,1,e),Et(t,e));break}}t=t.return}}function tN(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=yt(),e.pingedLanes|=e.suspendedLanes&r,rt===e&&(ot&r)===r&&(Ge===4||Ge===3&&(ot&130023424)===ot&&500>Ue()-Vf?zn(e,0):Jf|=r),Et(e,t)}function Py(e,t){t===0&&(e.mode&1?(t=Ho,Ho<<=1,!(Ho&130023424)&&(Ho=4194304)):t=1);var r=yt();e=Or(e,t),e!==null&&(so(e,t,r),Et(e,r))}function rN(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Py(e,r)}function nN(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(B(314))}n!==null&&n.delete(t),Py(e,r)}var Oy;Oy=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ct.current)Dt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Dt=!1,KC(e,t,r);Dt=!!(e.flags&131072)}else Dt=!1,Oe&&t.flags&1048576&&Tv(t,Ra,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ya(e,t),e=t.pendingProps;var i=_i(t,ht.current);Ii(t,r),i=zf(null,t,n,e,i,r);var o=Bf();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nt(n)?(o=!0,Aa(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_f(t),i.updater=du,t.stateNode=i,i._reactInternals=t,Ec(t,n,e,r),t=Mc(null,t,n,!0,o,r)):(t.tag=0,Oe&&o&&Ef(t),$t(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ya(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=sN(n),e=er(n,e),i){case 0:t=Ic(null,t,n,e,r);break e;case 1:t=im(null,t,n,e,r);break e;case 11:t=rm(null,t,n,e,r);break e;case 14:t=nm(null,t,n,er(n.type,e),r);break e}throw Error(B(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:er(n,i),Ic(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:er(n,i),im(e,t,n,i,r);case 3:e:{if($y(t),e===null)throw Error(B(387));n=t.pendingProps,o=t.memoizedState,i=o.element,Uv(e,t),Fa(t,n,null,r);var u=t.memoizedState;if(n=u.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Fi(Error(B(423)),t),t=sm(e,t,n,r,i);break e}else if(n!==i){i=Fi(Error(B(424)),t),t=sm(e,t,n,r,i);break e}else for(It=un(t.stateNode.containerInfo.firstChild),Mt=t,Oe=!0,rr=null,r=Bv(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ri(),n===i){t=Ar(e,t,r);break e}$t(e,t,n,r)}t=t.child}return t;case 5:return Kv(t),e===null&&Dc(t),n=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,u=i.children,bc(n,i)?u=null:o!==null&&bc(n,o)&&(t.flags|=32),my(e,t),$t(e,t,u,r),t.child;case 6:return e===null&&Dc(t),null;case 13:return vy(e,t,r);case 4:return Rf(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ti(t,null,n,r):$t(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:er(n,i),rm(e,t,n,i,r);case 7:return $t(e,t,t.pendingProps,r),t.child;case 8:return $t(e,t,t.pendingProps.children,r),t.child;case 12:return $t(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ce(Ta,n._currentValue),n._currentValue=u,o!==null)if(sr(o.value,u)){if(o.children===i.children&&!Ct.current){t=Ar(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var d=o.dependencies;if(d!==null){u=o.child;for(var h=d.firstContext;h!==null;){if(h.context===n){if(o.tag===1){h=Ir(-1,r&-r),h.tag=2;var m=o.updateQueue;if(m!==null){m=m.shared;var g=m.pending;g===null?h.next=h:(h.next=g.next,g.next=h),m.pending=h}}o.lanes|=r,h=o.alternate,h!==null&&(h.lanes|=r),Cc(o.return,r,t),d.lanes|=r;break}h=h.next}}else if(o.tag===10)u=o.type===t.type?null:o.child;else if(o.tag===18){if(u=o.return,u===null)throw Error(B(341));u.lanes|=r,d=u.alternate,d!==null&&(d.lanes|=r),Cc(u,r,t),u=o.sibling}else u=o.child;if(u!==null)u.return=o;else for(u=o;u!==null;){if(u===t){u=null;break}if(o=u.sibling,o!==null){o.return=u.return,u=o;break}u=u.return}o=u}$t(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Ii(t,r),i=Qt(i),n=n(i),t.flags|=1,$t(e,t,n,r),t.child;case 14:return n=t.type,i=er(n,t.pendingProps),i=er(n.type,i),nm(e,t,n,i,r);case 15:return py(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:er(n,i),ya(e,t),t.tag=1,Nt(n)?(e=!0,Aa(t)):e=!1,Ii(t,r),cy(t,n,i),Ec(t,n,i,r),Mc(null,t,n,!0,e,r);case 19:return yy(e,t,r);case 22:return hy(e,t,r)}throw Error(B(156,t.tag))};function Ay(e,t){return av(e,t)}function iN(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(e,t,r,n){return new iN(e,t,r,n)}function Yf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function sN(e){if(typeof e=="function")return Yf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$f)return 11;if(e===vf)return 14}return 2}function dn(e,t){var r=e.alternate;return r===null?(r=Ut(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function wa(e,t,r,n,i,o){var u=2;if(n=e,typeof e=="function")Yf(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case di:return Bn(r.children,i,o,t);case mf:u=8,i|=8;break;case Zl:return e=Ut(12,r,t,i|2),e.elementType=Zl,e.lanes=o,e;case Xl:return e=Ut(13,r,t,i),e.elementType=Xl,e.lanes=o,e;case ec:return e=Ut(19,r,t,i),e.elementType=ec,e.lanes=o,e;case K$:return mu(r,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q$:u=10;break e;case U$:u=9;break e;case $f:u=11;break e;case vf:u=14;break e;case Wr:u=16,n=null;break e}throw Error(B(130,e==null?e:typeof e,""))}return t=Ut(u,r,t,i),t.elementType=e,t.type=n,t.lanes=o,t}function Bn(e,t,r,n){return e=Ut(7,e,n,t),e.lanes=r,e}function mu(e,t,r,n){return e=Ut(22,e,n,t),e.elementType=K$,e.lanes=r,e.stateNode={isHidden:!1},e}function Rl(e,t,r){return e=Ut(6,e,null,t),e.lanes=r,e}function Tl(e,t,r){return t=Ut(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function oN(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vl(0),this.expirationTimes=vl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vl(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Zf(e,t,r,n,i,o,u,d,h){return e=new oN(e,t,r,d,h),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Ut(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},_f(o),e}function aN(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fi,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function _y(e){if(!e)return hn;e=e._reactInternals;e:{if(Gn(e)!==e||e.tag!==1)throw Error(B(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(B(171))}if(e.tag===1){var r=e.type;if(Nt(r))return _v(e,r,t)}return t}function Ry(e,t,r,n,i,o,u,d,h){return e=Zf(r,n,!0,e,i,o,u,d,h),e.context=_y(null),r=e.current,n=yt(),i=fn(r),o=Ir(n,i),o.callback=t??null,ln(r,o,i),e.current.lanes=i,so(e,i,n),Et(e,n),e}function $u(e,t,r,n){var i=t.current,o=yt(),u=fn(i);return r=_y(r),t.context===null?t.context=r:t.pendingContext=r,t=Ir(o,u),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ln(i,t,u),e!==null&&(ir(e,i,u,o),ma(e,i,u)),u}function Va(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function mm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Xf(e,t){mm(e,t),(e=e.alternate)&&mm(e,t)}function uN(){return null}var Ty=typeof reportError=="function"?reportError:function(e){console.error(e)};function ed(e){this._internalRoot=e}vu.prototype.render=ed.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(B(409));$u(e,t,null,null)};vu.prototype.unmount=ed.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Vn(function(){$u(null,e,null,null)}),t[Pr]=null}};function vu(e){this._internalRoot=e}vu.prototype.unstable_scheduleHydration=function(e){if(e){var t=hv();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Zr.length&&t!==0&&t<Zr[r].priority;r++);Zr.splice(r,0,e),r===0&&$v(e)}};function td(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function yu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function $m(){}function lN(e,t,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var m=Va(u);o.call(m)}}var u=Ry(t,n,e,0,null,!1,!1,"",$m);return e._reactRootContainer=u,e[Pr]=u.current,Vs(e.nodeType===8?e.parentNode:e),Vn(),u}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var d=n;n=function(){var m=Va(h);d.call(m)}}var h=Zf(e,0,!1,null,null,!1,!1,"",$m);return e._reactRootContainer=h,e[Pr]=h.current,Vs(e.nodeType===8?e.parentNode:e),Vn(function(){$u(t,h,r,n)}),h}function gu(e,t,r,n,i){var o=r._reactRootContainer;if(o){var u=o;if(typeof i=="function"){var d=i;i=function(){var h=Va(u);d.call(h)}}$u(t,u,e,i)}else u=lN(r,t,e,i,n);return Va(u)}dv=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=xs(t.pendingLanes);r!==0&&(bf(t,r|1),Et(t,Ue()),!(ve&6)&&(zi=Ue()+500,yn()))}break;case 13:Vn(function(){var n=Or(e,1);if(n!==null){var i=yt();ir(n,e,1,i)}}),Xf(e,1)}};wf=function(e){if(e.tag===13){var t=Or(e,134217728);if(t!==null){var r=yt();ir(t,e,134217728,r)}Xf(e,134217728)}};pv=function(e){if(e.tag===13){var t=fn(e),r=Or(e,t);if(r!==null){var n=yt();ir(r,e,t,n)}Xf(e,t)}};hv=function(){return be};mv=function(e,t){var r=be;try{return be=e,t()}finally{be=r}};cc=function(e,t,r){switch(t){case"input":if(nc(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=lu(n);if(!i)throw Error(B(90));J$(n),nc(n,i)}}}break;case"textarea":H$(e,r);break;case"select":t=r.value,t!=null&&Ci(e,!!r.multiple,t,!1)}};tv=Hf;rv=Vn;var cN={usingClientEntryPoint:!1,Events:[ao,$i,lu,X$,ev,Hf]},ws={findFiberByHostInstance:Rn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fN={bundleType:ws.bundleType,version:ws.version,rendererPackageName:ws.rendererPackageName,rendererConfig:ws.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=sv(e),e===null?null:e.stateNode},findFiberByHostInstance:ws.findFiberByHostInstance||uN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sa.isDisabled&&sa.supportsFiber)try{su=sa.inject(fN),hr=sa}catch{}}Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cN;Ot.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!td(t))throw Error(B(200));return aN(e,t,null,r)};Ot.createRoot=function(e,t){if(!td(e))throw Error(B(299));var r=!1,n="",i=Ty;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Zf(e,1,!1,null,null,r,!1,n,i),e[Pr]=t.current,Vs(e.nodeType===8?e.parentNode:e),new ed(t)};Ot.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(B(188)):(e=Object.keys(e).join(","),Error(B(268,e)));return e=sv(t),e=e===null?null:e.stateNode,e};Ot.flushSync=function(e){return Vn(e)};Ot.hydrate=function(e,t,r){if(!yu(t))throw Error(B(200));return gu(null,e,t,!0,r)};Ot.hydrateRoot=function(e,t,r){if(!td(e))throw Error(B(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",u=Ty;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(u=r.onRecoverableError)),t=Ry(t,null,e,1,r??null,i,!1,o,u),e[Pr]=t.current,Vs(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new vu(t)};Ot.render=function(e,t,r){if(!yu(t))throw Error(B(200));return gu(null,e,t,!1,r)};Ot.unmountComponentAtNode=function(e){if(!yu(e))throw Error(B(40));return e._reactRootContainer?(Vn(function(){gu(null,null,e,!1,function(){e._reactRootContainer=null,e[Pr]=null})}),!0):!1};Ot.unstable_batchedUpdates=Hf;Ot.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!yu(r))throw Error(B(200));if(e==null||e._reactInternals===void 0)throw Error(B(38));return gu(e,t,r,!1,n)};Ot.version="18.3.1-next-f1338f8080-20240426";function Ly(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ly)}catch(e){console.error(e)}}Ly(),L$.exports=Ot;var dN=L$.exports,vm=dN;Gl.createRoot=vm.createRoot,Gl.hydrateRoot=vm.hydrateRoot;function pN({queries:e,onSubmit:t,selectedClient:r}){const[n,i]=he.useState(null),[o,u]=he.useState({}),[d,h]=he.useState(!1),[m,g]=he.useState(null),[c,v]=he.useState(!1),E=e.find(S=>S.id===n);he.useEffect(()=>{g(null)},[n]);const C=S=>{i(S);const k=e.find(I=>I.id===S),x={};k!=null&&k.inputFields&&k.inputFields.forEach(I=>{I.type==="boolean"&&(x[I.name]=!1)}),u(x)},R=(S,k,x)=>{let I=k;if(x==="boolean")I=k;else if(x==="number"){const O=Number(k);I=k===""?"":isNaN(O)?k:O}else I=k;u(O=>({...O,[S]:I}))},H=async S=>{if(S.preventDefault(),!n||!(r!=null&&r.connected))return;const k={...o};E!=null&&E.inputFields&&E.inputFields.forEach(x=>{x.type==="boolean"&&k[x.name]===void 0&&(k[x.name]=!1)}),g(null),h(!0),v(!0);try{const x=await t(n,k);g(x);const I={};E!=null&&E.inputFields&&E.inputFields.forEach(O=>{O.type==="boolean"&&(I[O.name]=!1)}),u(I)}catch(x){g({error:x.message||"An error occurred"})}finally{h(!1),v(!1)}};return r?r.connected?L.jsxs("div",{className:"query-form",children:[L.jsx("h2",{children:"Query Form"}),L.jsxs("form",{onSubmit:H,children:[L.jsxs("div",{className:"form-group",children:[L.jsx("label",{htmlFor:"query-select",children:"Select Query:"}),L.jsxs("select",{id:"query-select",value:n||"",onChange:S=>C(S.target.value),className:"query-select",children:[L.jsx("option",{value:"",children:"-- Select a query --"}),e.map((S,k)=>L.jsx("option",{value:S.id,children:S.name},`${S.id}-${k}`))]})]}),E&&L.jsx("div",{className:"form-params",children:E.inputFields&&E.inputFields.length>0?E.inputFields.map((S,k)=>{const x=o[S.name],I=S.type==="boolean",O=S.type==="number";return L.jsx("div",{className:"form-group",children:I?L.jsx(L.Fragment,{children:L.jsxs("label",{htmlFor:`param-${S.name}-${k}`,style:{display:"flex",alignItems:"center",gap:"8px"},children:[L.jsx("input",{id:`param-${S.name}-${k}`,type:"checkbox",checked:x===!0,onChange:F=>R(S.name,F.target.checked,S.type),className:"param-checkbox"}),L.jsx("span",{children:S.name})]})}):L.jsxs(L.Fragment,{children:[L.jsxs("label",{htmlFor:`param-${S.name}-${k}`,children:[S.name,":"]}),L.jsx("input",{id:`param-${S.name}-${k}`,type:O?"number":"text",value:x!==void 0?String(x):"",onChange:F=>R(S.name,F.target.value,S.type),placeholder:`Enter ${S.name}...`,className:"param-input"})]})},`${S.name}-${k}`)}):L.jsx("p",{className:"no-params",children:"No parameters required"})}),L.jsx("button",{type:"submit",disabled:!n||d,className:"submit-btn",children:d?"Submitting...":"Submit Query"})]}),(c||m)&&L.jsxs("div",{className:"query-response",children:[L.jsx("h3",{children:"Response"}),c?L.jsx("div",{className:"response-loading",children:"Loading..."}):L.jsx("pre",{className:"response-data",children:JSON.stringify(m,null,2)})]})]}):L.jsx("div",{className:"query-form",children:L.jsx("p",{className:"no-client",children:"Client not connected"})}):L.jsx("div",{className:"query-form",children:L.jsx("p",{className:"no-client",children:"Select a client to run queries"})})}function hN({events:e,clients:t}){const r=he.useRef(null),[n,i]=he.useState(new Set);he.useEffect(()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)},[e]);const o=m=>{if(!m)return"Unknown";const g=t.find(c=>c.id===m);return(g==null?void 0:g.name)||m},u=m=>{i(g=>{const c=new Set(g);return c.has(m)?c.delete(m):c.add(m),c})},d=async m=>{try{await navigator.clipboard.writeText(m)}catch(g){console.error("Failed to copy:",g)}},h=he.useMemo(()=>{const m=[],g=new Map;for(const c of e)if(c.type==="query_sent"){const v=c.clientId||"unknown",E=g.get(v)||[];E.push(c),g.set(v,E)}else if(c.type==="query_response"){const v=c.clientId||"unknown",E=g.get(v);if(E&&E.length>0){const C=E.shift();m.push({type:"request_response",request:C,response:c}),E.length===0&&g.delete(v)}else m.push({type:"sse",event:c})}else m.push({type:"sse",event:c});for(const c of g.values())for(const v of c)m.push({type:"sse",event:v});return m},[e]);return L.jsxs("div",{className:"message-pane",children:[L.jsx("h2",{children:"Message Stream"}),L.jsx("div",{className:"message-list",ref:r,children:h.length===0?L.jsx("div",{className:"no-messages",children:"No messages yet"}):h.map((m,g)=>{if(m.type==="request_response"){const c=()=>{const H=m.request.data;if(H!=null&&H.url){const S=H.method||"GET",k=new URL(H.url);return`${S} ${k.pathname}${k.search}`}return H!=null&&H.queryId?`${H.method||"POST"} /db/${H.queryId}`:"GET /db/:req"},v=()=>{const H=m.request.data;if(H!=null&&H.url)return H.url;if(H!=null&&H.queryId){const S=H.sessionId;return S?`http://localhost:3000/db/${H.queryId}?sessionId=${S}`:`http://localhost:3000/db/${H.queryId}`}return""},E=`${m.request.id}-${m.response.id}`,C=n.has(E),R=v();return L.jsxs("div",{className:"message-item message-item-grouped",children:[L.jsxs("div",{className:`message-group-header ${C?"expanded":""}`,onClick:()=>u(E),style:{cursor:"pointer"},children:[L.jsxs("div",{className:"message-group-header-left",children:[L.jsx("svg",{className:`message-caret ${C?"expanded":""}`,width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:L.jsx("path",{d:"M4.5 3L7.5 6L4.5 9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),R&&L.jsx("button",{className:"message-clipboard-btn",onClick:H=>{H.stopPropagation(),d(R)},title:`Copy URL to clipboard: ${R}`,children:L.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[L.jsx("path",{d:"M9.5 1.5H4.5C3.67157 1.5 3 2.17157 3 3V9.5C3 10.3284 3.67157 11 4.5 11H9.5C10.3284 11 11 10.3284 11 9.5V3C11 2.17157 10.3284 1.5 9.5 1.5Z",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),L.jsx("path",{d:"M6.5 1.5V3.5C6.5 4.05228 6.94772 4.5 7.5 4.5H9.5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),L.jsx("div",{className:"message-group-label",children:c()})]}),L.jsxs("div",{className:"message-group-meta",children:[L.jsx("span",{className:"message-time",children:m.request.timestamp.toLocaleTimeString()}),m.request.clientId&&L.jsx("span",{className:"message-client",children:o(m.request.clientId)})]})]}),C&&L.jsxs("div",{className:"message-group-content",children:[L.jsxs("div",{className:"message-group-section",children:[L.jsx("div",{className:"message-section-header",style:{color:"#007bff"},children:"REQUEST"}),L.jsx("pre",{className:"message-data",children:JSON.stringify(m.request.data,null,2)})]}),L.jsxs("div",{className:"message-group-section",children:[L.jsx("div",{className:"message-section-header",style:{color:"#28a745"},children:"RESPONSE"}),L.jsx("pre",{className:"message-data",children:JSON.stringify(m.response.data,null,2)})]})]})]},E)}else{const c=m.event,v=c.type==="sync_delta"?"#ffc107":"#666",E=c.id,C=n.has(E);return L.jsxs("div",{className:"message-item",children:[L.jsxs("div",{className:"message-header",onClick:()=>u(E),style:{cursor:"pointer"},children:[L.jsxs("div",{className:"message-header-left",children:[L.jsx("svg",{className:`message-caret ${C?"expanded":""}`,width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:L.jsx("path",{d:"M4.5 3L7.5 6L4.5 9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),L.jsx("span",{className:"message-type",style:{color:v},children:c.type})]}),L.jsxs("div",{className:"message-header-right",children:[L.jsx("span",{className:"message-time",children:c.timestamp.toLocaleTimeString()}),c.clientId&&L.jsx("span",{className:"message-client",children:o(c.clientId)})]})]}),C&&L.jsx("pre",{className:"message-data",children:JSON.stringify(c.data,null,2)})]},E)}})})]})}const lo=e=>Array.isArray(e)?e:[e],mN=(e,t)=>{const r=[[],[]];for(const n of e)t(n)?r[0].push(n):r[1].push(n);return r},Fy=Array,Nr=(e,t)=>e.includes(t),$N=(e,t=0)=>[...new Array(e)].map((r,n)=>n+t),ke=(e,t,r)=>e===void 0?t===void 0?[]:Array.isArray(t)?t:[t]:(Array.isArray(t)?e.push(...t):e.push(t),e),Fn=(e,t)=>t==null?e??[]:e==null?lo(t):e.concat(t),vN=(...e)=>e.reduce(Fn,[]),qn=(e,t,r)=>{if(e===void 0)return Array.isArray(t)?t:[t];const n=(r==null?void 0:r.isEqual)??((i,o)=>i===o);for(const i of lo(t))e.some(o=>n(o,i))||e.push(i);return e},yN=(e,t)=>e.reduce((r,n)=>{const i=n[t];return r[i]=ke(r[i],n),r},{}),Bi=(e,t,r)=>e.length===t.length&&e.every(r!=null&&r.isEqual?(n,i)=>r.isEqual(n,t[i]):(n,i)=>n===t[i]),Yn=(e,t)=>or(e)===t,or=e=>{const t=typeof e;return t==="object"?e===null?"null":"object":t==="function"?"object":t},_r={boolean:"boolean",null:"null",undefined:"undefined",bigint:"a bigint",number:"a number",object:"an object",string:"a string",symbol:"a symbol"},gN={..._r,function:"a function"};class bN extends Error{}const Ve=e=>qi(e,bN),qi=(e,t=Error)=>{throw new t(e)};class wN extends Error{constructor(){super(...arguments);b(this,"name","ParseError")}}const q=e=>qi(e,wN),zy=e=>` ${e}`,kN="",Se=(e,t)=>{const r={},n=Array.isArray(e);let i=!1;for(const[o,u]of Object.entries(e).entries()){const d=n?t(o,u[1]):t(...u,o);i||(i=typeof d[0]=="number");const h=Array.isArray(d[0])||d.length===0?d:[d];for(const[m,g]of h)typeof m=="object"?r[m.group]=ke(r[m.group],g):r[m]=g}return i?Object.values(r):r},By=Object.entries,$r=(e,t)=>e in t,rd=(e,t)=>t in e;class SN{constructor(t){Object.assign(this,t)}}const xN=class{};class qy extends xN{}const DN=(e,t)=>{const r={},n={};let i;for(i in e)i in t?r[i]=e[i]:n[i]=e[i];return[r,n]},Uy=(e,t)=>DN(e,t)[1],co=e=>Object.keys(e).length===0,Ha=e=>[...Object.entries(e),...Object.getOwnPropertySymbols(e).map(t=>[t,e[t]])],CN=(e,t)=>Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)),NN=e=>{const t=Object.keys(e).sort(),r={};for(let n=0;n<t.length;n++)r[t[n]]=e[t[n]];return r},dr=zy(`unset${kN}`),EN=e=>Object.values(e).filter(t=>typeof t=="number"?!0:typeof e[t]!="number"),Ky={Array,Boolean,Date,Error,Function,Map,Number,Promise,RegExp,Set,String,WeakMap,WeakSet},Qy=globalThis.File??Blob,Jy={ArrayBuffer,Blob,File:Qy,FormData,Headers,Request,Response,URL},jN={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array},Ui={...Ky,...Jy,...jN,String,Number,Boolean},nd=e=>{var n;let t=Object.getPrototypeOf(e);for(;t!=null&&t.constructor&&(!$r(t.constructor.name,Ui)||!(e instanceof Ui[t.constructor.name]));)t=Object.getPrototypeOf(t);const r=(n=t==null?void 0:t.constructor)==null?void 0:n.name;if(!(r===void 0||r==="Object"))return r},Uc=e=>typeof e=="object"&&e!==null?nd(e)??"object":or(e),mt=Array.isArray,IN={Array:"an array",Function:"a function",Date:"a Date",RegExp:"a RegExp",Error:"an Error",Map:"a Map",Set:"a Set",String:"a String object",Number:"a Number object",Boolean:"a Boolean object",Promise:"a Promise",WeakMap:"a WeakMap",WeakSet:"a WeakSet"},MN={ArrayBuffer:"an ArrayBuffer instance",Blob:"a Blob instance",File:"a File instance",FormData:"a FormData instance",Headers:"a Headers instance",Request:"a Request instance",Response:"a Response instance",URL:"a URL instance"},PN={Int8Array:"an Int8Array",Uint8Array:"a Uint8Array",Uint8ClampedArray:"a Uint8ClampedArray",Int16Array:"an Int16Array",Uint16Array:"a Uint16Array",Int32Array:"an Int32Array",Uint32Array:"a Uint32Array",Float32Array:"a Float32Array",Float64Array:"a Float64Array",BigInt64Array:"a BigInt64Array",BigUint64Array:"a BigUint64Array"},ON={...IN,...MN,...PN},id=e=>{const t=Object(e).name??null;return t&&$r(t,Ui)&&Ui[t]===e?t:null},ym=(e,t)=>{let r=e.prototype;for(;r!==null;){if(r===t.prototype)return!0;r=Object.getPrototypeOf(r)}return!1},AN=e=>Vy(e,new Map),Vy=(e,t)=>{if(typeof e!="object"||e===null)return e;if(t!=null&&t.has(e))return t.get(e);const r=id(e.constructor);if(r==="Date")return new Date(e.getTime());if(r&&r!=="Array")return e;const n=Array.isArray(e)?e.slice():Object.create(Object.getPrototypeOf(e)),i=Object.getOwnPropertyDescriptors(e);if(t){t.set(e,n);for(const o in i){const u=i[o];"get"in u||"set"in u||(u.value=Vy(u.value,t))}}return Object.defineProperties(n,i),n},_N=e=>{let t=dr;return()=>t===dr?t=e():t},bu=e=>typeof e=="function"&&e.length===0,RN=class extends Function{constructor(...e){const t=e.slice(0,-1),r=e[e.length-1];try{super(...t,r)}catch(n){return Ve(`Encountered an unexpected error while compiling your definition:
                Message: ${n} 
                Source: (${e.slice(0,-1)}) => {
                    ${e[e.length-1]}
                }`)}}};class gn{constructor(t,...[r]){return Object.assign(Object.setPrototypeOf(t.bind((r==null?void 0:r.bind)??this),this.constructor.prototype),r==null?void 0:r.attach)}}const TN=_N(()=>{try{return new Function("return false")()}catch{return!0}});class vr{constructor(){}}const LN=()=>{var e,t,r;try{return(((r=(((t=(e=new Error().stack)==null?void 0:e.split(`
`)[2])==null?void 0:t.trim())||"").match(/\(?(.+?)(?::\d+:\d+)?\)?$/))==null?void 0:r[1])||"unknown").replace(/^file:\/\//,"")}catch{return"unknown"}};var h$;const FN=((h$=globalThis.process)==null?void 0:h$.env)??{},zN={fileName:LN,env:FN},BN=e=>e[0].toUpperCase()+e.slice(1),qN=e=>e[0].toLowerCase()+e.slice(1),Hy=e=>new RegExp(UN(e),typeof e=="string"?"":e.flags),UN=e=>`^(?:${typeof e=="string"?e:e.source})$`,en={negativeLookahead:e=>`(?!${e})`,nonCapturingGroup:e=>`(?:${e})`},Ts="\\",wu={" ":1,"\n":1,"	":1},KN=/^-0\.?0*$/.source,Wy=/[1-9]\d*/.source,QN=/\.\d+/.source,JN=/\.\d*[1-9]/.source,Gy=e=>Hy(en.negativeLookahead(KN)+en.nonCapturingGroup("-?"+en.nonCapturingGroup(en.nonCapturingGroup("0|"+Wy)+en.nonCapturingGroup(e.decimalPattern)+"?")+(e.allowDecimalOnly?"|"+e.decimalPattern:"")+"?")),gm=Gy({decimalPattern:JN,allowDecimalOnly:!1}),VN=gm.test.bind(gm),Kc=Gy({decimalPattern:QN,allowDecimalOnly:!0});Kc.test.bind(Kc);const HN=/^-?\d*\.?\d*$/,WN=e=>e.length!==0&&HN.test(e),Wa=Hy(en.negativeLookahead("^-0$")+"-?"+en.nonCapturingGroup(en.nonCapturingGroup("0|"+Wy))),GN=Wa.test.bind(Wa),Qc=/^-?\d+$/,YN=Qc.test.bind(Qc),Yy={number:"a number",bigint:"a bigint",integer:"an integer"},Zy=(e,t)=>`'${e}' was parsed as ${Yy[t]} but could not be narrowed to a literal value. Avoid unnecessary leading or trailing zeros and other abnormal notation`,ZN=(e,t)=>t==="number"?VN(e):GN(e),XN=(e,t)=>t==="number"?Number(e):Number.parseInt(e),eE=(e,t)=>t==="number"?WN(e):YN(e),tE=(e,t)=>sd(e,"number",t),rE=(e,t)=>sd(e,"number",{...t,strict:!0}),nE=(e,t)=>sd(e,"integer",t),sd=(e,t,r)=>{const n=XN(e,t);return!Number.isNaN(n)&&eE(e,t)?r!=null&&r.strict?ZN(e,t)?n:q(Zy(e,t)):n:r!=null&&r.errorOnFail?q((r==null?void 0:r.errorOnFail)===!0?`Failed to parse ${Yy[t]} from '${e}'`:r==null?void 0:r.errorOnFail):void 0},iE=e=>{if(e[e.length-1]!=="n")return;const t=e.slice(0,-1);let r;try{r=BigInt(t)}catch{return}if(Wa.test(t))return r;if(Qc.test(t))return q(Zy(e,"bigint"))},sE="0.56.0",oE={version:sE,filename:zN.fileName(),FileConstructor:Qy},fo=oE,bm=new Map,Ll=Object.create(null),Jc=e=>{const t=bm.get(e);if(t)return t;let r=aE(e);return Ll[r]?r=`${r}${Ll[r]++}`:Ll[r]=1,fo[r]=e,bm.set(e,r),r},ro=e=>/^[$A-Z_a-z][\w$]*$/.test(e),aE=e=>{switch(typeof e){case"object":{if(e===null)break;const t=nd(e)??"object";return t[0].toLowerCase()+t.slice(1)}case"function":return ro(e.name)?e.name:"fn";case"symbol":return e.description&&ro(e.description)?e.description:"symbol"}return Ve(`Unexpected attempt to register serializable value of type ${or(e)}`)},od=e=>typeof e=="string"?JSON.stringify(e):typeof e=="bigint"?`${e}n`:`${e}`,uE=(e,t={})=>Ls(e,{onUndefined:"$ark.undefined",onBigInt:r=>`$ark.bigint-${r}`,...t},[]),we=(e,t)=>{var r;switch(or(e)){case"object":const n=e,i=((r=n.constructor)==null?void 0:r.name)??"Object";return i==="Object"||i==="Array"?(t==null?void 0:t.quoteKeys)===!1?Ga(n,(t==null?void 0:t.indent)??0,""):JSON.stringify(Ls(n,Ki,[]),null,t==null?void 0:t.indent):Ga(n,(t==null?void 0:t.indent)??0,"");case"symbol":return Ki.onSymbol(e);default:return od(e)}},Ga=(e,t,r)=>{var o;if(typeof e=="function")return Ki.onFunction(e);if(typeof e!="object"||e===null)return od(e);const n=r+" ".repeat(t);if(Array.isArray(e)){if(e.length===0)return"[]";const u=e.map(d=>Ga(d,t,n)).join(`,
`+n);return t?`[
${n}${u}
${r}]`:`[${u}]`}const i=((o=e.constructor)==null?void 0:o.name)??"Object";if(i==="Object"){const u=Ha(e).map(([d,h])=>{const m=typeof d=="symbol"?Ki.onSymbol(d):ro(d)?d:JSON.stringify(d),g=Ga(h,t,n);return`${n}${m}: ${g}`});return u.length===0?"{}":t?`{
${u.join(`,
`)}
${r}}`:`{${u.join(", ")}}`}return e instanceof Date?po(e):"expression"in e&&typeof e.expression=="string"?e.expression:i},Ki={onCycle:()=>"(cycle)",onSymbol:e=>`Symbol(${Jc(e)})`,onFunction:e=>`Function(${Jc(e)})`},Ls=(e,t,r)=>{var n,i;switch(or(e)){case"object":{const o=e;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();if(typeof o=="function")return Ki.onFunction(o);if(r.includes(o))return"(cycle)";const u=[...r,o];if(Array.isArray(o))return o.map(h=>Ls(h,t,u));if(o instanceof Date)return o.toDateString();const d={};for(const h in o)d[h]=Ls(o[h],t,u);for(const h of Object.getOwnPropertySymbols(o))d[((n=t.onSymbol)==null?void 0:n.call(t,h))??h.toString()]=Ls(o[h],t,u);return d}case"symbol":return Ki.onSymbol(e);case"bigint":return((i=t.onBigInt)==null?void 0:i.call(t,e))??`${e}n`;case"undefined":return t.onUndefined??"undefined";case"string":return e.replace(/\\/g,"\\\\");default:return e}},po=e=>{const t=e.getFullYear(),r=e.getMonth(),n=e.getDate(),i=e.getHours(),o=e.getMinutes(),u=e.getSeconds(),d=e.getMilliseconds();if(r===0&&n===1&&i===0&&o===0&&u===0&&d===0)return`${t}`;const h=`${lE[r]} ${n}, ${t}`;if(i===0&&o===0&&u===0&&d===0)return h;let m=e.toLocaleTimeString();const g=m.endsWith(" AM")||m.endsWith(" PM")?m.slice(-3):"";return g&&(m=m.slice(0,-g.length)),d?m+=`.${fE(d,3)}`:cE.test(m)&&(m=m.slice(0,-3)),`${m+g}, ${h}`},lE=["January","February","March","April","May","June","July","August","September","October","November","December"],cE=/:\d\d:00$/,fE=(e,t)=>String(e).padStart(t,"0"),Xy=(e,t,...[r])=>{const n=(r==null?void 0:r.stringifySymbol)??we;let i=e;switch(typeof t){case"string":i=ro(t)?e===""?t:`${e}.${t}`:`${e}[${JSON.stringify(t)}]`;break;case"number":i=`${e}[${t}]`;break;case"symbol":i=`${e}[${n(t)}]`;break;default:r!=null&&r.stringifyNonKey?i=`${e}[${r.stringifyNonKey(t)}]`:q(`${we(t)} must be a PropertyKey or stringifyNonKey must be passed to options`)}return i},ho=(e,...t)=>e.reduce((r,n)=>Xy(r,n,...t),"");class eg extends Fy{constructor(...r){super();b(this,"cache",{});this.push(...r)}toJSON(){if(this.cache.json)return this.cache.json;this.cache.json=[];for(let r=0;r<this.length;r++)this.cache.json.push(typeof this[r]=="symbol"?we(this[r]):this[r]);return this.cache.json}stringify(){return this.cache.stringify?this.cache.stringify:this.cache.stringify=ho(this)}stringifyAncestors(){if(this.cache.stringifyAncestors)return this.cache.stringifyAncestors;let r="";const n=[r];for(const i of this)r=Xy(r,i),n.push(r);return this.cache.stringifyAncestors=n}}class tg{constructor(t){b(this,"chars");b(this,"i");b(this,"def");this.def=t,this.chars=[...t],this.i=0}shift(){return this.chars[this.i++]??""}get lookahead(){return this.chars[this.i]??""}get nextLookahead(){return this.chars[this.i+1]??""}get length(){return this.chars.length}shiftUntil(t){let r="";for(;this.lookahead&&!t(this,r);)r+=this.shift();return r}shiftUntilEscapable(t){let r="";for(;this.lookahead;)if(this.lookahead===Ts)this.shift(),t(this,r)?r+=this.shift():this.lookahead===Ts?r+=this.shift():r+=`${Ts}${this.shift()}`;else{if(t(this,r))break;r+=this.shift()}return r}shiftUntilLookahead(t){return typeof t=="string"?this.shiftUntil(r=>r.lookahead===t):this.shiftUntil(r=>r.lookahead in t)}shiftUntilNonWhitespace(){return this.shiftUntil(()=>!(this.lookahead in wu))}jumpToIndex(t){this.i=t<0?this.length+t:t}jumpForward(t){this.i+=t}get location(){return this.i}get unscanned(){return this.chars.slice(this.i,this.length).join("")}get scanned(){return this.chars.slice(0,this.i).join("")}sliceChars(t,r){return this.chars.slice(t,r).join("")}lookaheadIs(t){return this.lookahead===t}lookaheadIsIn(t){return this.lookahead in t}}const dE=(e,t)=>`Unmatched ${e}${t===""?"":` before ${t}`}`,rg=e=>`Missing ${e}`;let Vc="$ark",pE=2;for(;Vc in globalThis;)Vc=`$ark${pE++}`;const ng=Vc;globalThis[ng]=fo;const V=fo,hE=e=>`${ng}.${e}`,gt=e=>hE(Jc(e));class ig extends qy{constructor(...r){super();b(this,"argNames");b(this,"body","");b(this,"indentation",0);this.argNames=r;for(const n of r){if(n in this)throw new Error(`Arg name '${n}' would overwrite an existing property on FunctionBody`);this[n]=n}}indent(){return this.indentation+=4,this}dedent(){return this.indentation-=4,this}prop(r,n=!1){return sg(r,n)}index(r,n=!1){return og(`${r}`,n)}line(r){return this.body+=`${" ".repeat(this.indentation)}${r}
`,this}const(r,n){return this.line(`const ${r} = ${n}`),this}let(r,n){return this.line(`let ${r} = ${n}`)}set(r,n){return this.line(`${r} = ${n}`)}if(r,n){return this.block(`if (${r})`,n)}elseIf(r,n){return this.block(`else if (${r})`,n)}else(r){return this.block("else",r)}for(r,n,i=0){return this.block(`for (let i = ${i}; ${r}; i++)`,n)}forIn(r,n){return this.block(`for (const k in ${r})`,n)}block(r,n,i=""){return this.line(`${r} {`),this.indent(),n(this),this.dedent(),this.line(`}${i}`)}return(r=""){return this.line(`return ${r}`)}write(r="anonymous",n=0){return`${r}(${this.argNames.join(", ")}) { ${n?this.body.split(`
`).map(i=>" ".repeat(n)+`${i}`).join(`
`):this.body} }`}compile(){return new RN(...this.argNames,this.body)}}const Wi=e=>Yn(e,"object")||typeof e=="symbol"?gt(e):od(e),sg=(e,t=!1)=>typeof e=="string"&&ro(e)?`${t?"?":""}.${e}`:og(mE(e),t),mE=e=>typeof e=="symbol"?gt(e):JSON.stringify(e),og=(e,t=!1)=>`${t?"?.":""}[${e}]`;class Fl extends ig{constructor(r){super("data","ctx");b(this,"traversalKind");b(this,"optimistic");this.traversalKind=r.kind,this.optimistic=r.optimistic===!0}invoke(r,n){const i=(n==null?void 0:n.arg)??this.data,o=typeof r=="string"?!0:this.requiresContextFor(r),u=typeof r=="string"?r:r.id;return o?`${this.referenceToId(u,n)}(${i}, ${this.ctx})`:`${this.referenceToId(u,n)}(${i})`}referenceToId(r,n){const i=(n==null?void 0:n.kind)??this.traversalKind,o=`this.${r}${i}`;return n!=null&&n.bind?`${o}.bind(${n==null?void 0:n.bind})`:o}requiresContextFor(r){return this.traversalKind==="Apply"||r.allowsRequiresContext}initializeErrorCount(){return this.const("errorCount","ctx.currentErrorCount")}returnIfFail(){return this.if("ctx.currentErrorCount > errorCount",()=>this.return())}returnIfFailFast(){return this.if("ctx.failFast && ctx.currentErrorCount > errorCount",()=>this.return())}traverseKey(r,n,i){const o=this.requiresContextFor(i);return o&&this.line(`${this.ctx}.path.push(${r})`),this.check(i,{arg:n}),o&&this.line(`${this.ctx}.path.pop()`),this}check(r,n){return this.traversalKind==="Allows"?this.if(`!${this.invoke(r,n)}`,()=>this.return(!1)):this.line(this.invoke(r,n))}}const ag=e=>Se(e,(t,r)=>[t,mt(r)?[...r]:r]),Rr=zy("arkKind"),ne=(e,t)=>(e==null?void 0:e[Rr])===t,vt=e=>ne(e,"root")||ne(e,"constraint"),$E=["unit","proto","domain"],ku=["required","optional","index","sequence"],ug=["pattern","divisor","exactLength","max","min","maxLength","minLength","before","after"],lg=[...ug,"structure","predicate"],ad=[...lg,...ku],Su=["alias","union","morph","unit","intersection","proto","domain"],vE=[...Su,...ad],cg=Se(ad,(e,t)=>[t,1]),yE=Se([...ku,"undeclared"],(e,t)=>[t,1]),fg=Se(vE,(e,t)=>[t,e]),ka=e=>typeof e=="string"&&e in fg,Ya=e=>fg[e],ud=e=>Su.slice(Ya(e)+1);[...ud("union")];[...ud("morph")];const Hn=e=>typeof e=="string"||typeof e=="boolean"||e===null?e:typeof e=="number"?Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e:Wi(e),xu=e=>{let t="{ ";for(const[r,n]of Object.entries(e))t+=`${r}: ${Wi(n)}, `;return t+" }"},qe=e=>{var r,n,i,o;const t=e;return t.hasAssociatedError&&((r=t.defaults).expected??(r.expected=u=>"description"in u?u.description:t.defaults.description(u)),(n=t.defaults).actual??(n.actual=u=>we(u)),(i=t.defaults).problem??(i.problem=u=>`must be ${u.expected}${u.actual?` (was ${u.actual})`:""}`),(o=t.defaults).message??(o.message=u=>{if(u.path.length===0)return u.problem;const d=`${u.propString} ${u.problem}`;return d[0]==="["?`value at ${d}`:d})),t};class gE extends Error{constructor(r,n){super(we(n,{quoteKeys:!1,indent:4}));b(this,"name","ToJsonSchemaError");b(this,"code");b(this,"context");this.code=r,this.context=n}hasCode(r){return this.code===r}}const bE={target:"draft-2020-12",dialect:"https://json-schema.org/draft/2020-12/schema",useRefs:!1,fallback:{arrayObject:e=>He.throw("arrayObject",e),arrayPostfix:e=>He.throw("arrayPostfix",e),defaultValue:e=>He.throw("defaultValue",e),domain:e=>He.throw("domain",e),morph:e=>He.throw("morph",e),patternIntersection:e=>He.throw("patternIntersection",e),predicate:e=>He.throw("predicate",e),proto:e=>He.throw("proto",e),symbolKey:e=>He.throw("symbolKey",e),unit:e=>He.throw("unit",e),date:e=>He.throw("date",e)}},He={Error:gE,throw:(...e)=>{throw new He.Error(...e)},throwInternalOperandError:(e,t)=>Ve(`Unexpected JSON Schema input for ${e}: ${we(t)}`),defaultConfig:bE};V.config??(V.config={});const Hc=(e,t)=>{if(!t)return e;const r={...e};let n;for(n in t){const i={...e.keywords};if(n==="keywords"){for(const o in t[n]){const u=t.keywords[o];u!==void 0&&(i[o]=typeof u=="string"?{description:u}:u)}r.keywords=i}else n==="toJsonSchema"?r[n]=dg(e.toJsonSchema,t.toJsonSchema):ka(n)?r[n]={...e[n],...t[n]}:r[n]=t[n]}return r},wE={"draft-2020-12":"https://json-schema.org/draft/2020-12/schema","draft-07":"http://json-schema.org/draft-07/schema#"},dg=(e,t)=>{if(!e)return wm(t??{},void 0);if(!t)return e;const r={...e};let n;for(n in t)n==="fallback"?r.fallback=kE(e.fallback,t.fallback):r[n]=t[n];return wm(r,t)},wm=(e,t)=>(t==null?void 0:t.dialect)!==void 0?e:(t==null?void 0:t.target)!==void 0?{...e,dialect:wE[t.target]}:e,kE=(e,t)=>{e=km(e),t=km(t);const r={};let n;for(n in He.defaultConfig.fallback)r[n]=t[n]??t.default??e[n]??e.default??He.defaultConfig.fallback[n];return r},km=e=>typeof e=="function"?{default:e}:e??{};var m$,$$;class Qi extends($$=qy,m$=Rr,$$){constructor({prefixPath:r,relativePath:n,...i},o){super();b(this,m$,"error");b(this,"path");b(this,"data");b(this,"nodeConfig");b(this,"input");b(this,"ctx");this.input=i,this.ctx=o,CN(this,i);const u=o.data;i.code==="union"&&(i.errors=i.errors.flatMap(h=>{const m=h.hasCode("union")?h.errors:[h];return!r&&!n?m:m.map(g=>g.transform(c=>({...c,path:vN(r,c.path,n)})))})),this.nodeConfig=o.config[this.code];const d=[...i.path??o.path];n&&d.push(...n),r&&d.unshift(...r),this.path=new eg(...d),this.data="data"in i?i.data:u}transform(r){return new Qi(r({data:this.data,path:this.path,...this.input}),this.ctx)}hasCode(r){return this.code===r}get propString(){return ho(this.path)}get expected(){var n;if(this.input.expected)return this.input.expected;const r=((n=this.meta)==null?void 0:n.expected)??this.nodeConfig.expected;return typeof r=="function"?r(this.input):r}get actual(){var n;if(this.input.actual)return this.input.actual;const r=((n=this.meta)==null?void 0:n.actual)??this.nodeConfig.actual;return typeof r=="function"?r(this.data):r}get problem(){var n;if(this.input.problem)return this.input.problem;const r=((n=this.meta)==null?void 0:n.problem)??this.nodeConfig.problem;return typeof r=="function"?r(this):r}get message(){var n;if(this.input.message)return this.input.message;const r=((n=this.meta)==null?void 0:n.message)??this.nodeConfig.message;return typeof r=="function"?r(this):r}get flat(){return this.hasCode("intersection")?[...this.errors]:[this]}toJSON(){return{data:this.data,path:this.path,...this.input,expected:this.expected,actual:this.actual,problem:this.problem,message:this.message}}toString(){return this.message}throw(){throw this}}var v$,y$;class mn extends(y$=Fy,v$=Rr,y$){constructor(r){super();b(this,v$,"errors");b(this,"ctx");b(this,"byPath",Object.create(null));b(this,"byAncestorPath",Object.create(null));b(this,"count",0);b(this,"mutable",this);this.ctx=r}get flatByPath(){return Se(this.byPath,(r,n)=>[r,n.flat])}get flatProblemsByPath(){return Se(this.byPath,(r,n)=>[r,n.flat.map(i=>i.problem)])}throw(){throw this.toTraversalError()}toTraversalError(){return new SE(this)}add(r){const n=this.byPath[r.propString];if(n){if(r===n||n.hasCode("union")&&n.errors.length===0)return;const i=r.hasCode("union")&&r.errors.length===0?r:new Qi({code:"intersection",errors:n.hasCode("intersection")?[...n.errors,r]:[n,r]},this.ctx),o=this.indexOf(n);this.mutable[o===-1?this.length:o]=i,this.byPath[r.propString]=i,this.addAncestorPaths(r)}else this.byPath[r.propString]=r,this.addAncestorPaths(r),this.mutable.push(r);this.count++}transform(r){const n=new mn(this.ctx);for(const i of this)n.add(r(i));return n}merge(r){for(const n of r)this.add(new Qi({...n,path:[...this.ctx.path,...n.path]},this.ctx))}affectsPath(r){return this.length===0?!1:r.stringifyAncestors().some(n=>n in this.byPath)||r.stringify()in this.byAncestorPath}get summary(){return this.toString()}get issues(){return this}toJSON(){return[...this.map(r=>r.toJSON())]}toString(){return this.join(`
`)}addAncestorPaths(r){for(const n of r.path.stringifyAncestors())this.byAncestorPath[n]=ke(this.byAncestorPath[n],r)}}class SE extends Error{constructor(r){var t=(..._O)=>(super(..._O),b(this,"name","TraversalError"),this);r.length===1?t(r.summary):t(`
`+r.map(n=>`   ${xE(n)}`).join(`
`)),Object.defineProperty(this,"arkErrors",{value:r,enumerable:!1})}}const xE=e=>e.toString().split(`
`).join(`
  `);class Si{constructor(t,r){b(this,"path",[]);b(this,"errors",new mn(this));b(this,"root");b(this,"config");b(this,"queuedMorphs",[]);b(this,"branches",[]);b(this,"seen",{});this.root=t,this.config=r}get data(){let t=this.root;for(const r of this.path)t=t==null?void 0:t[r];return t}get propString(){return ho(this.path)}reject(t){return this.error(t),!1}mustBe(t){return this.error(t),!1}error(t){const r=typeof t=="object"?t.code?t:{...t,code:"predicate"}:{code:"predicate",expected:t};return this.errorFromContext(r)}hasError(){return this.currentErrorCount!==0}get currentBranch(){return this.branches[this.branches.length-1]}queueMorphs(t){const r={path:new eg(...this.path),morphs:t};this.currentBranch?this.currentBranch.queuedMorphs.push(r):this.queuedMorphs.push(r)}finalize(t){return this.queuedMorphs.length&&(typeof this.root=="object"&&this.root!==null&&this.config.clone&&(this.root=this.config.clone(this.root)),this.applyQueuedMorphs()),this.hasError()?t?t(this.errors):this.errors:this.root}get currentErrorCount(){return this.currentBranch?this.currentBranch.error?1:0:this.errors.count}get failFast(){return this.branches.length!==0}pushBranch(){this.branches.push({error:void 0,queuedMorphs:[]})}popBranch(){return this.branches.pop()}get external(){return this}errorFromNodeContext(t){return this.errorFromContext(t)}errorFromContext(t){const r=new Qi(t,this);return this.currentBranch?this.currentBranch.error=r:this.errors.add(r),r}applyQueuedMorphs(){for(;this.queuedMorphs.length;){const t=this.queuedMorphs;this.queuedMorphs=[];for(const{path:r,morphs:n}of t)this.errors.affectsPath(r)||this.applyMorphsAtPath(r,n)}}applyMorphsAtPath(t,r){const n=t[t.length-1];let i;if(n!==void 0){i=this.root;for(let o=0;o<t.length-1;o++)i=i[t[o]]}for(const o of r){this.path=[...t];const u=vt(o),d=o(i===void 0?this.root:i[n],this);if(d instanceof Qi){this.errors.includes(d)||this.errors.add(d);break}if(d instanceof mn){u||this.errors.merge(d),this.queuedMorphs=[];break}i===void 0?this.root=d:i[n]=d,this.applyQueuedMorphs()}}}const Tr=(e,t,r)=>{if(!r)return t();r.path.push(e);const n=t();return r.path.pop(),n};class pg extends gn{constructor(r,n){var o;super((u,d,h=this.onFail)=>d?(this.traverseApply(u,d),d.hasError()?d.errors:d.data):this.rootApply(u,h),{attach:r});b(this,"attachments");b(this,"$");b(this,"onFail");b(this,"includesTransform");b(this,"includesContextualPredicate");b(this,"isCyclic");b(this,"allowsRequiresContext");b(this,"rootApplyStrategy");b(this,"contextFreeMorph");b(this,"rootApply");b(this,"referencesById");b(this,"shallowReferences");b(this,"flatRefs");b(this,"flatMorphs");b(this,"allows");b(this,"compiledMeta",NE(this.metaJson));b(this,"precedence",Ya(this.kind));b(this,"precompilation");b(this,"assert",(r,n)=>this(r,n,i=>i.throw()));this.attachments=r,this.$=n,this.onFail=this.meta.onFail??this.$.resolvedConfig.onFail,this.includesTransform=this.hasKind("morph")||this.hasKind("structure")&&this.structuralMorph!==void 0||this.hasKind("sequence")&&this.inner.defaultables!==void 0,this.includesContextualPredicate=this.hasKind("predicate")&&this.inner.predicate.length!==1,this.isCyclic=this.kind==="alias",this.referencesById={[this.id]:this},this.shallowReferences=this.hasKind("structure")?[this,...this.children]:this.children.reduce((u,d)=>EE(u,d.shallowReferences),[this]);const i=this.isStructural();this.flatRefs=[],this.flatMorphs=[];for(let u=0;u<this.children.length;u++){if(this.includesTransform||(this.includesTransform=this.children[u].includesTransform),this.includesContextualPredicate||(this.includesContextualPredicate=this.children[u].includesContextualPredicate),this.isCyclic||(this.isCyclic=this.children[u].isCyclic),!i){const d=this.children[u].flatRefs;for(let h=0;h<d.length;h++){const m=d[h];if(!this.flatRefs.some(g=>hg(g,m))){this.flatRefs.push(m);for(const g of m.node.branches)(g.hasKind("morph")||g.hasKind("intersection")&&((o=g.structure)==null?void 0:o.structuralMorph)!==void 0)&&this.flatMorphs.push({path:m.path,propString:m.propString,node:g})}}}Object.assign(this.referencesById,this.children[u].referencesById)}this.flatRefs.sort((u,d)=>u.path.length>d.path.length?1:u.path.length<d.path.length?-1:u.propString>d.propString?1:u.propString<d.propString||u.node.expression<d.node.expression?-1:1),this.allowsRequiresContext=this.includesContextualPredicate||this.isCyclic,this.rootApplyStrategy=!this.allowsRequiresContext&&this.flatMorphs.length===0?this.shallowMorphs.length===0?"allows":this.shallowMorphs.every(u=>u.length===1||u.name==="$arkStructuralMorph")?this.hasKind("union")?this.branches.some(u=>u.shallowMorphs.length>1)?"contextual":"branchedOptimistic":this.shallowMorphs.length>1?"contextual":"optimistic":"contextual":"contextual",this.rootApply=this.createRootApply(),this.allows=this.allowsRequiresContext?u=>this.traverseAllows(u,new Si(u,this.$.resolvedConfig)):u=>this.traverseAllows(u)}get shallowMorphs(){return[]}createRootApply(){switch(this.rootApplyStrategy){case"allows":return(n,i)=>{if(this.allows(n))return n;const o=new Si(n,this.$.resolvedConfig);return this.traverseApply(n,o),o.finalize(i)};case"contextual":return(n,i)=>{const o=new Si(n,this.$.resolvedConfig);return this.traverseApply(n,o),o.finalize(i)};case"optimistic":this.contextFreeMorph=this.shallowMorphs[0];const r=this.$.resolvedConfig.clone;return(n,i)=>{if(this.allows(n))return this.contextFreeMorph(r&&(typeof n=="object"&&n!==null||typeof n=="function")?r(n):n);const o=new Si(n,this.$.resolvedConfig);return this.traverseApply(n,o),o.finalize(i)};case"branchedOptimistic":return this.createBranchedOptimisticRootApply();default:return this.rootApplyStrategy,Ve(`Unexpected rootApplyStrategy ${this.rootApplyStrategy}`)}}cacheGetter(r,n){return Object.defineProperty(this,r,{value:n}),n}get description(){var r;return this.cacheGetter("description",((r=this.meta)==null?void 0:r.description)??this.$.resolvedConfig[this.kind].description(this))}get references(){return Object.values(this.referencesById)}traverse(r,n){return this(r,n,null)}get in(){return this.cacheGetter("in",this.rawIn.isRoot()?this.$.finalize(this.rawIn):this.rawIn)}get rawIn(){return this.cacheGetter("rawIn",this.getIo("in"))}get out(){return this.cacheGetter("out",this.rawOut.isRoot()?this.$.finalize(this.rawOut):this.rawOut)}get rawOut(){return this.cacheGetter("rawOut",this.getIo("out"))}getIo(r){if(!this.includesTransform)return this;const n={};for(const[i,o]of this.innerEntries){const u=this.impl.keys[i];if(u.reduceIo)u.reduceIo(r,n,o);else if(u.child){const d=o;n[i]=mt(d)?d.map(h=>r==="in"?h.rawIn:h.rawOut):r==="in"?d.rawIn:d.rawOut}else n[i]=o}return this.$.node(this.kind,n)}toJSON(){return this.json}toString(){return`Type<${this.expression}>`}equals(r){const n=vt(r)?r:this.$.parseDefinition(r);return this.innerHash===n.innerHash}ifEquals(r){return this.equals(r)?this:void 0}hasKind(r){return this.kind===r}assertHasKind(r){return this.kind!==r&&qi(`${this.kind} node was not of asserted kind ${r}`),this}hasKindIn(...r){return r.includes(this.kind)}assertHasKindIn(...r){return Nr(r,this.kind)||qi(`${this.kind} node was not one of asserted kinds ${r}`),this}isBasis(){return Nr($E,this.kind)}isConstraint(){return Nr(ad,this.kind)}isStructural(){return Nr(ku,this.kind)}isRefinement(){return Nr(lg,this.kind)}isRoot(){return Nr(Su,this.kind)}isUnknown(){return this.hasKind("intersection")&&this.children.length===0}isNever(){return this.hasKind("union")&&this.children.length===0}hasUnit(r){return this.hasKind("unit")&&this.allows(r)}hasOpenIntersection(){return this.impl.intersectionIsOpen}get nestableExpression(){return this.expression}select(r){const n=Cs.normalize(r);return this._select(n)}_select(r){let n=Cs.applyBoundary[r.boundary??"references"](this);return r.kind&&(n=n.filter(i=>i.kind===r.kind)),r.where&&(n=n.filter(r.where)),Cs.applyMethod[r.method??"filter"](n,this,r)}transform(r,n){return this._transform(r,this._createTransformContext(n))}_createTransformContext(r){return{root:this,selected:void 0,seen:{},path:[],parseOptions:{prereduced:(r==null?void 0:r.prereduced)??!1},undeclaredKeyHandling:void 0,...r}}_transform(r,n){var c;const i=n.bindScope??this.$;if(n.seen[this.id])return this.$.lazilyResolve(n.seen[this.id]);if(((c=n.shouldTransform)==null?void 0:c.call(n,this,n))===!1)return this;let o;n.seen[this.id]=()=>o,this.hasKind("structure")&&this.undeclared!==n.undeclaredKeyHandling&&(n={...n,undeclaredKeyHandling:this.undeclared});const u=Se(this.inner,(v,E)=>{if(!this.impl.keys[v].child)return[v,E];const C=E;if(!mt(C)){const H=C._transform(r,n);return H?[v,H]:[]}if(C.length===0)return[v,E];const R=C.flatMap(H=>H._transform(r,n)??[]);return R.length?[v,R]:[]});delete n.seen[this.id];const d=Object.assign(u,{meta:this.meta}),h=n.selected&&!n.selected.includes(this)?d:r(this.kind,d,n);if(h===null)return null;if(vt(h))return o=h;const m=Object.keys(h);return(m.length===0||m.length===1&&m[0]==="meta")&&!co(this.inner)?null:(this.kind==="required"||this.kind==="optional"||this.kind==="index")&&!("value"in h)?n.undeclaredKeyHandling?{...h,value:V.intrinsic.unknown}:null:(this.kind==="morph"&&(h.in??(h.in=V.intrinsic.unknown)),o=i.node(this.kind,h,n.parseOptions))}configureReferences(r,n="references"){const i=Cs.normalize(n),o=typeof r=="string"?(m,g)=>({...g,meta:{...g.meta,description:r}}):typeof r=="function"?(m,g)=>({...g,meta:r(g.meta)}):(m,g)=>({...g,meta:{...g.meta,...r}});if(i.boundary==="self")return this.$.node(this.kind,o(this.kind,{...this.inner,meta:this.meta}));const u=this._select(i),d=u&&lo(u),h=i.boundary==="child"?(m,g)=>g.root.children.includes(m):i.boundary==="shallow"?m=>m.kind!=="structure":()=>!0;return this.$.finalize(this.transform(o,{shouldTransform:h,selected:d}))}}const Cs={applyBoundary:{self:e=>[e],child:e=>[...e.children],shallow:e=>[...e.shallowReferences],references:e=>[...e.references]},applyMethod:{filter:e=>e,assertFilter:(e,t,r)=>(e.length===0&&qi(Sm(t,r)),e),find:e=>e[0],assertFind:(e,t,r)=>(e.length===0&&qi(Sm(t,r)),e[0])},normalize:e=>typeof e=="function"?{boundary:"references",method:"filter",where:e}:typeof e=="string"?$r(e,Cs.applyBoundary)?{method:"filter",boundary:e}:{boundary:"references",method:"filter",kind:e}:{boundary:"references",method:"filter",...e}},Sm=(e,t)=>`${e} had no references matching ${we(t)}.`,DE=e=>ho(e,{stringifyNonKey:t=>t.expression}),CE=/"(\$ark\.[^"]+)"/g,NE=e=>JSON.stringify(e).replace(CE,"$1"),nn=(e,t)=>({path:e,node:t,propString:DE(e)}),hg=(e,t)=>e.propString===t.propString&&e.node.equals(t.node),xm=(e,t)=>qn(e,t,{isEqual:hg}),EE=(e,t)=>qn(e,t,{isEqual:(r,n)=>r.equals(n)});class ee extends Array{static init(t,r,n,i){return new ee({kind:t,l:r,r:n,path:(i==null?void 0:i.path)??[],optional:(i==null?void 0:i.optional)??!1})}add(t,r,n,i){return this.push({kind:t,l:r,r:n,path:(i==null?void 0:i.path)??[],optional:(i==null?void 0:i.optional)??!1}),this}get summary(){return this.describeReasons()}describeReasons(){if(this.length===1){const{path:t,l:r,r:n}=this[0],i=ho(t);return mg(`Intersection${i&&` at ${i}`} of ${Dm(r,n)}`)}return`The following intersections result in unsatisfiable types:
 ${this.map(({path:t,l:r,r:n})=>`${t}: ${Dm(r,n)}`).join(`
 `)}`}throw(){return q(this.describeReasons())}invert(){const t=this.map(r=>({...r,l:r.r,r:r.l}));return t instanceof ee?t:new ee(...t)}withPrefixKey(t,r){return this.map(n=>({...n,path:[t,...n.path],optional:n.optional||r==="optional"}))}toNeverIfDisjoint(){return V.intrinsic.never}}const Dm=(e,t)=>`${Wc(e)} and ${Wc(t)}`,Wc=e=>vt(e)?e.expression:mt(e)?e.map(Wc).join(" | ")||"never":String(e),mg=e=>`${e} results in an unsatisfiable type`,li={},Lr=(e,t,r)=>tt(e,t,{$:r,invert:!1,pipe:!1}),Gc=(e,t,r)=>tt(e,t,{$:r,invert:!1,pipe:!0}),tt=(e,t,r)=>{const n=r.pipe?"|>":"&",i=`${e.hash}${n}${t.hash}`;if(li[i]!==void 0)return li[i];if(!r.pipe){const d=`${t.hash}${n}${e.hash}`;if(li[d]!==void 0){const h=li[d],m=h instanceof ee?h.invert():h;return li[i]=m,m}}const o=!r.pipe||!e.includesTransform&&!t.includesTransform;if(o&&e.equals(t))return e;let u=o?Yc(e,t,r):e.hasKindIn(...Su)?jE(e,t,r):Yc(e,t,r);return vt(u)&&(e.equals(u)?u=e:t.equals(u)&&(u=t)),li[i]=u,u},Yc=(e,t,r)=>{const n=e.precedence<t.precedence?e.kind:t.kind,i=e.impl.intersections[t.kind]??t.impl.intersections[e.kind];if(i===void 0)return null;if(n===e.kind)return i(e,t,r);{let o=i(t,e,{...r,invert:!r.invert});return o instanceof ee&&(o=o.invert()),o}},jE=(e,t,r)=>e.includesTransform||t.includesTransform?r.invert?Cm(t,e,r):Cm(e,t,r):Yc(e,t,r),Cm=(e,t,r)=>e.distribute(n=>IE(n,t,r),n=>{const i=n.filter(vt);if(i.length===0)return ee.init("union",e.branches,t.branches);if(i.length<e.branches.length||!e.branches.every((u,d)=>u.rawIn.equals(i[d].rawIn)))return r.$.parseSchema(i);if(i.length===1)return i[0];const o={branches:i};return r.$.parseSchema(o)}),IE=(e,t,r)=>{if(e.hasKind("morph")){const i=[...e.morphs];if(e.lastMorphIfNode){const o=tt(e.lastMorphIfNode,t,r);if(o instanceof ee)return o;i[i.length-1]=o}else i.push(t);return r.$.node("morph",{morphs:i,in:e.inner.in})}if(t.hasKind("morph")){const i=tt(e,t.rawIn,r);return i instanceof ee?i:r.$.node("morph",{morphs:[t],in:i})}return r.$.node("morph",{morphs:[t],in:e})};class Gi extends pg{constructor(r,n){super(r,n);b(this,"impliedSiblings");Object.defineProperty(this,Rr,{value:"constraint",enumerable:!1})}intersect(r){return Lr(this,r,this.$)}}class Du extends Gi{constructor(){super(...arguments);b(this,"traverseApply",(r,n)=>{this.traverseAllows(r,n)||n.errorFromNodeContext(this.errorContext)})}compile(r){r.traversalKind==="Allows"?r.return(this.compiledCondition):r.if(this.compiledNegation,()=>r.line(`ctx.errorFromNodeContext(${this.compiledErrorContext})`))}get errorContext(){return{code:this.kind,description:this.description,meta:this.meta,...this.inner}}get compiledErrorContext(){return xu(this.errorContext)}}const St=e=>(t,r)=>{if(mt(t)){if(t.length===0)return;const i=t.map(o=>r.$.node(e,o));return e==="predicate"?i:i.sort((o,u)=>o.hash<u.hash?-1:1)}const n=r.$.node(e,t);return n.hasOpenIntersection()?[n]:n},Za=e=>{const t=e.r.shift();if(!t){let n=e.l.length===0&&e.kind==="structure"?V.intrinsic.unknown.internal:e.ctx.$.node(e.kind,Object.assign(e.baseInner,ME(e.l)),{prereduced:!0});for(const i of e.roots){if(n instanceof ee)return n;n=tt(i,n,e.ctx)}return n}let r=!1;for(let n=0;n<e.l.length;n++){const i=tt(e.l[n],t,e.ctx);if(i!==null){if(i instanceof ee)return i;if(i.isRoot())return e.roots.push(i),e.l.splice(n),Za(e);if(!r)e.l[n]=i,r=!0;else if(!e.l.includes(i))return Ve(`Unexpectedly encountered multiple distinct intersection results for refinement ${t}`)}}if(r||e.l.push(t),e.kind==="intersection"&&t.impliedSiblings)for(const n of t.impliedSiblings)qn(e.r,n);return Za(e)},Xa=e=>Object.entries(e).flatMap(([r,n])=>r in cg?n:[]).sort((r,n)=>r.precedence<n.precedence?-1:r.precedence>n.precedence?1:r.kind==="predicate"&&n.kind==="predicate"?0:r.hash<n.hash?-1:1),ME=e=>{const t={};for(const r of e)if(r.hasOpenIntersection())t[r.kind]=ke(t[r.kind],r);else{if(t[r.kind])return Ve(`Unexpected intersection of closed refinements of kind ${r.kind}`);t[r.kind]=r}return t},PE=(...e)=>q(OE(...e)),OE=(e,t,r)=>{const n=r.hasKind("morph")?"a morph":r.isUnknown()?"unknown":r.exclude(t).defaultShortDescription;return`${BN(e)} operand must be ${t.description} (was ${n})`},AE=(e,t,r)=>new eu(e,t,r,r,null);class $g extends gn{}var g$,b$;class eu extends(b$=gn,g$=Rr,b$){constructor(r,n,i,o,u){super((...d)=>{const h=Se(this.names,(m,g)=>{const c=this.arg$.parse(d[m]);return c.extends(this.constraints[m])||q(_E(g,this.constraints[m].expression,c.expression)),[g,c]});if(this.defIsLazy()){const m=this.bodyDef(h);return this.$.parse(m)}return this.$.parse(n,{args:h})});b(this,g$,"generic");b(this,"paramDefs");b(this,"bodyDef");b(this,"$");b(this,"arg$");b(this,"baseInstantiation");b(this,"hkt");b(this,"description");this.paramDefs=r,this.bodyDef=n,this.$=i,this.arg$=o,this.hkt=u,this.description=u?new u().description??`a generic type for ${u.constructor.name}`:"a generic type",this.baseInstantiation=this(...this.constraints)}defIsLazy(){return this.bodyDef instanceof $g}cacheGetter(r,n){return Object.defineProperty(this,r,{value:n}),n}get json(){return this.cacheGetter("json",{params:this.params.map(r=>r[1].isUnknown()?r[0]:[r[0],r[1].json]),body:uE(this.bodyDef)})}get params(){return this.cacheGetter("params",this.paramDefs.map(r=>typeof r=="string"?[r,V.intrinsic.unknown]:[r[0],this.$.parse(r[1])]))}get names(){return this.cacheGetter("names",this.params.map(r=>r[0]))}get constraints(){return this.cacheGetter("constraints",this.params.map(r=>r[1]))}get internal(){return this}get referencesById(){return this.baseInstantiation.internal.referencesById}get references(){return this.baseInstantiation.internal.references}}const _E=(e,t,r)=>`${e} must be assignable to ${t} (was ${r})`,RE=qe({kind:"predicate",hasAssociatedError:!0,collapsibleKey:"predicate",keys:{predicate:{}},normalize:e=>typeof e=="function"?{predicate:e}:e,defaults:{description:e=>`valid according to ${e.predicate.name||"an anonymous predicate"}`},intersectionIsOpen:!0,intersections:{predicate:()=>null}});class TE extends Gi{constructor(){super(...arguments);b(this,"serializedPredicate",gt(this.predicate));b(this,"compiledCondition",`${this.serializedPredicate}(data, ctx)`);b(this,"compiledNegation",`!${this.compiledCondition}`);b(this,"impliedBasis",null);b(this,"expression",this.serializedPredicate);b(this,"traverseAllows",this.predicate);b(this,"errorContext",{code:"predicate",description:this.description,meta:this.meta});b(this,"compiledErrorContext",xu(this.errorContext));b(this,"traverseApply",(r,n)=>{const i=n.currentErrorCount;!this.predicate(r,n.external)&&n.currentErrorCount===i&&n.errorFromNodeContext(this.errorContext)})}compile(r){if(r.traversalKind==="Allows"){r.return(this.compiledCondition);return}r.initializeErrorCount(),r.if(`${this.compiledNegation} && ctx.currentErrorCount === errorCount`,()=>r.line(`ctx.errorFromNodeContext(${this.compiledErrorContext})`))}reduceJsonSchema(r,n){return n.fallback.predicate({code:"predicate",base:r,predicate:this.predicate})}}const vg={implementation:RE,Node:TE},LE=qe({kind:"divisor",collapsibleKey:"rule",keys:{rule:{parse:e=>Number.isInteger(e)?e:q(zE(e))}},normalize:e=>typeof e=="number"?{rule:e}:e,hasAssociatedError:!0,defaults:{description:e=>e.rule===1?"an integer":e.rule===2?"even":`a multiple of ${e.rule}`},intersections:{divisor:(e,t,r)=>r.$.node("divisor",{rule:Math.abs(e.rule*t.rule/BE(e.rule,t.rule))})},obviatesBasisDescription:!0});class FE extends Du{constructor(){super(...arguments);b(this,"traverseAllows",r=>r%this.rule===0);b(this,"compiledCondition",`data % ${this.rule} === 0`);b(this,"compiledNegation",`data % ${this.rule} !== 0`);b(this,"impliedBasis",V.intrinsic.number.internal);b(this,"expression",`% ${this.rule}`)}reduceJsonSchema(r){return r.type="integer",this.rule===1||(r.multipleOf=this.rule),r}}const yg={implementation:LE,Node:FE},zE=e=>`divisor must be an integer (was ${e})`,BE=(e,t)=>{let r,n=e,i=t;for(;i!==0;)r=i,i=n%i,n=r;return n};class Yi extends Du{constructor(){super(...arguments);b(this,"boundOperandKind",QE[this.kind]);b(this,"compiledActual",this.boundOperandKind==="value"?"data":this.boundOperandKind==="length"?"data.length":"data.valueOf()");b(this,"comparator",JE(this.kind,this.exclusive));b(this,"numericLimit",this.rule.valueOf());b(this,"expression",`${this.comparator} ${this.rule}`);b(this,"compiledCondition",`${this.compiledActual} ${this.comparator} ${this.numericLimit}`);b(this,"compiledNegation",`${this.compiledActual} ${qE[this.comparator]} ${this.numericLimit}`);b(this,"stringLimit",this.boundOperandKind==="date"?VE(this.numericLimit):`${this.numericLimit}`);b(this,"limitKind",this.comparator[0]==="<"?"upper":"lower")}isStricterThan(r){return(this.limitKind==="upper"?this.numericLimit<r.numericLimit:this.numericLimit>r.numericLimit)||this.numericLimit===r.numericLimit&&this.exclusive===!0&&!r.exclusive}overlapsRange(r){return!(this.isStricterThan(r)||this.numericLimit===r.numericLimit&&(this.exclusive||r.exclusive))}overlapIsUnit(r){return this.numericLimit===r.numericLimit&&!this.exclusive&&!r.exclusive}}const qE={"<":">=","<=":">",">":"<=",">=":"<"},UE={min:"max",minLength:"maxLength",after:"before"},gg={parse:e=>e||void 0},bg=e=>t=>{if(typeof t=="number")return{rule:t};const{exclusive:r,...n}=t;return r?{...n,rule:e==="minLength"?n.rule+1:n.rule-1}:n},wg=e=>t=>{if(typeof t=="number"||typeof t=="string"||t instanceof Date)return{rule:t};const{exclusive:r,...n}=t;if(!r)return n;const i=typeof n.rule=="number"?n.rule:typeof n.rule=="string"?new Date(n.rule).valueOf():n.rule.valueOf();return r?{...n,rule:e==="after"?i+1:i-1}:n},kg=e=>typeof e=="string"||typeof e=="number"?new Date(e):e,KE=(e,t)=>`${e} bound must be a positive integer (was ${t})`,ld=e=>t=>((!Number.isInteger(t)||t<0)&&q(KE(e,t)),t),QE={min:"value",max:"value",minLength:"length",maxLength:"length",after:"date",before:"date"},JE=(e,t)=>`${$r(e,UE)?">":"<"}${t?"":"="}`,VE=e=>typeof e=="string"?e:new Date(e).toLocaleString(),HE=e=>`Bounded expression ${e} must be exactly one of number, string, Array, or Date`,WE=qe({kind:"after",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{parse:kg,serialize:e=>e.toISOString()}},normalize:wg("after"),defaults:{description:e=>`${e.collapsibleLimitString} or later`,actual:po},intersections:{after:(e,t)=>e.isStricterThan(t)?e:t}});class GE extends Yi{constructor(){super(...arguments);b(this,"impliedBasis",V.intrinsic.Date.internal);b(this,"collapsibleLimitString",po(this.rule));b(this,"traverseAllows",r=>r>=this.rule)}reduceJsonSchema(r,n){return n.fallback.date({code:"date",base:r,after:this.rule})}}const Sg={implementation:WE,Node:GE},YE=qe({kind:"before",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{parse:kg,serialize:e=>e.toISOString()}},normalize:wg("before"),defaults:{description:e=>`${e.collapsibleLimitString} or earlier`,actual:po},intersections:{before:(e,t)=>e.isStricterThan(t)?e:t,after:(e,t,r)=>e.overlapsRange(t)?e.overlapIsUnit(t)?r.$.node("unit",{unit:e.rule}):null:ee.init("range",e,t)}});class ZE extends Yi{constructor(){super(...arguments);b(this,"collapsibleLimitString",po(this.rule));b(this,"traverseAllows",r=>r<=this.rule);b(this,"impliedBasis",V.intrinsic.Date.internal)}reduceJsonSchema(r,n){return n.fallback.date({code:"date",base:r,before:this.rule})}}const xg={implementation:YE,Node:ZE},XE=qe({kind:"exactLength",collapsibleKey:"rule",keys:{rule:{parse:ld("exactLength")}},normalize:e=>typeof e=="number"?{rule:e}:e,hasAssociatedError:!0,defaults:{description:e=>`exactly length ${e.rule}`,actual:e=>`${e.length}`},intersections:{exactLength:(e,t,r)=>ee.init("unit",r.$.node("unit",{unit:e.rule}),r.$.node("unit",{unit:t.rule}),{path:["length"]}),minLength:(e,t)=>e.rule>=t.rule?e:ee.init("range",e,t),maxLength:(e,t)=>e.rule<=t.rule?e:ee.init("range",e,t)}});class ej extends Du{constructor(){super(...arguments);b(this,"traverseAllows",r=>r.length===this.rule);b(this,"compiledCondition",`data.length === ${this.rule}`);b(this,"compiledNegation",`data.length !== ${this.rule}`);b(this,"impliedBasis",V.intrinsic.lengthBoundable.internal);b(this,"expression",`== ${this.rule}`)}reduceJsonSchema(r){switch(r.type){case"string":return r.minLength=this.rule,r.maxLength=this.rule,r;case"array":return r.minItems=this.rule,r.maxItems=this.rule,r;default:return He.throwInternalOperandError("exactLength",r)}}}const Dg={implementation:XE,Node:ej},tj=qe({kind:"max",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{},exclusive:gg},normalize:e=>typeof e=="number"?{rule:e}:e,defaults:{description:e=>e.rule===0?e.exclusive?"negative":"non-positive":`${e.exclusive?"less than":"at most"} ${e.rule}`},intersections:{max:(e,t)=>e.isStricterThan(t)?e:t,min:(e,t,r)=>e.overlapsRange(t)?e.overlapIsUnit(t)?r.$.node("unit",{unit:e.rule}):null:ee.init("range",e,t)},obviatesBasisDescription:!0});class rj extends Yi{constructor(){super(...arguments);b(this,"impliedBasis",V.intrinsic.number.internal);b(this,"traverseAllows",this.exclusive?r=>r<this.rule:r=>r<=this.rule)}reduceJsonSchema(r){return this.exclusive?r.exclusiveMaximum=this.rule:r.maximum=this.rule,r}}const Cg={implementation:tj,Node:rj},nj=qe({kind:"maxLength",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{parse:ld("maxLength")}},reduce:(e,t)=>e.rule===0?t.node("exactLength",e):void 0,normalize:bg("maxLength"),defaults:{description:e=>`at most length ${e.rule}`,actual:e=>`${e.length}`},intersections:{maxLength:(e,t)=>e.isStricterThan(t)?e:t,minLength:(e,t,r)=>e.overlapsRange(t)?e.overlapIsUnit(t)?r.$.node("exactLength",{rule:e.rule}):null:ee.init("range",e,t)}});class ij extends Yi{constructor(){super(...arguments);b(this,"impliedBasis",V.intrinsic.lengthBoundable.internal);b(this,"traverseAllows",r=>r.length<=this.rule)}reduceJsonSchema(r){switch(r.type){case"string":return r.maxLength=this.rule,r;case"array":return r.maxItems=this.rule,r;default:return He.throwInternalOperandError("maxLength",r)}}}const Ng={implementation:nj,Node:ij},sj=qe({kind:"min",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{},exclusive:gg},normalize:e=>typeof e=="number"?{rule:e}:e,defaults:{description:e=>e.rule===0?e.exclusive?"positive":"non-negative":`${e.exclusive?"more than":"at least"} ${e.rule}`},intersections:{min:(e,t)=>e.isStricterThan(t)?e:t},obviatesBasisDescription:!0});class oj extends Yi{constructor(){super(...arguments);b(this,"impliedBasis",V.intrinsic.number.internal);b(this,"traverseAllows",this.exclusive?r=>r>this.rule:r=>r>=this.rule)}reduceJsonSchema(r){return this.exclusive?r.exclusiveMinimum=this.rule:r.minimum=this.rule,r}}const Eg={implementation:sj,Node:oj},aj=qe({kind:"minLength",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{parse:ld("minLength")}},reduce:e=>e.rule===0?V.intrinsic.unknown:void 0,normalize:bg("minLength"),defaults:{description:e=>e.rule===1?"non-empty":`at least length ${e.rule}`,actual:e=>e.length===0?"":`${e.length}`},intersections:{minLength:(e,t)=>e.isStricterThan(t)?e:t}});class uj extends Yi{constructor(){super(...arguments);b(this,"impliedBasis",V.intrinsic.lengthBoundable.internal);b(this,"traverseAllows",r=>r.length>=this.rule)}reduceJsonSchema(r){switch(r.type){case"string":return r.minLength=this.rule,r;case"array":return r.minItems=this.rule,r;default:return He.throwInternalOperandError("minLength",r)}}}const jg={implementation:aj,Node:uj},lj={min:Eg.implementation,max:Cg.implementation,minLength:jg.implementation,maxLength:Ng.implementation,exactLength:Dg.implementation,after:Sg.implementation,before:xg.implementation},cj={min:Eg.Node,max:Cg.Node,minLength:jg.Node,maxLength:Ng.Node,exactLength:Dg.Node,after:Sg.Node,before:xg.Node},fj=qe({kind:"pattern",collapsibleKey:"rule",keys:{rule:{},flags:{}},normalize:e=>typeof e=="string"?{rule:e}:e instanceof RegExp?e.flags?{rule:e.source,flags:e.flags}:{rule:e.source}:e,obviatesBasisDescription:!0,obviatesBasisExpression:!0,hasAssociatedError:!0,intersectionIsOpen:!0,defaults:{description:e=>`matched by ${e.rule}`},intersections:{pattern:()=>null}});class dj extends Du{constructor(){super(...arguments);b(this,"instance",new RegExp(this.rule,this.flags));b(this,"expression",`${this.instance}`);b(this,"traverseAllows",this.instance.test.bind(this.instance));b(this,"compiledCondition",`${this.expression}.test(data)`);b(this,"compiledNegation",`!${this.compiledCondition}`);b(this,"impliedBasis",V.intrinsic.string.internal)}reduceJsonSchema(r,n){return r.pattern?n.fallback.patternIntersection({code:"patternIntersection",base:r,pattern:this.rule}):(r.pattern=this.rule,r)}}const Ig={implementation:fj,Node:dj},Sa=(e,t)=>{const r=pj(e);return t&&!t.includes(r)?q(`Root of kind ${r} should be one of ${t}`):r},pj=e=>{if(ne(e,"root"))return e.kind;if(typeof e=="string")return e[0]==="$"?"alias":e in _r?"domain":"proto";if(typeof e=="function")return"proto";if(typeof e!="object"||e===null)return q(Nm(e));if("morphs"in e)return"morph";if("branches"in e||mt(e))return"union";if("unit"in e)return"unit";if("reference"in e)return"alias";const t=Object.keys(e);return t.length===0||t.some(r=>r in cg)?"intersection":"proto"in e?"proto":"domain"in e?"domain":q(Nm(e))},Nm=e=>`${we(e)} is not a valid type schema`,oa={},hj=e=>mt(e)?e.map(t=>t.collapsibleJson):e.collapsibleJson,zt={};V.nodesByRegisteredId=zt;const Mg=e=>(oa[e]??(oa[e]=0),`${e}${++oa[e]}`),Pg=e=>{var m;const t=Cu[e.kind],r=((m=t.applyConfig)==null?void 0:m.call(t,e.def,e.$.resolvedConfig))??e.def,n={},{meta:i,...o}=r,u=i===void 0?{}:typeof i=="string"?{description:i}:i,d=By(o).sort(([g],[c])=>ka(g)?ka(c)?Ya(g)-Ya(c):1:ka(c)||g<c?-1:1).filter(([g,c])=>{if(g.startsWith("meta.")){const v=g.slice(5);return u[v]=c,!1}return!0});for(const g of d){const c=g[0],v=t.keys[c];if(!v)return q(`Key ${c} is not valid on ${e.kind} schema`);const E=v.parse?v.parse(g[1],e):g[1];E!==dr&&(E!==void 0||v.preserveUndefined)&&(n[c]=E)}if(t.reduce&&!e.prereduced){const g=t.reduce(n,e.$);if(g)return g instanceof ee?g.throw():$j(g,u)}return cd({id:e.id,kind:e.kind,inner:n,meta:u,$:e.$})},cd=({id:e,kind:t,inner:r,meta:n,$:i,ignoreCache:o})=>{const u=Cu[t],d=By(r),h=[];let m={};for(const[S,k]of d){const x=u.keys[S],I=x.serialize??(x.child?hj:Hn);if(m[S]=I(k),x.child===!0){const O=k;mt(O)?h.push(...O):h.push(O)}else typeof x.child=="function"&&h.push(...x.child(k))}u.finalizeInnerJson&&(m=u.finalizeInnerJson(m));let g={...m},c={};co(n)||(c=Se(n,(S,k)=>[S,S==="examples"?k:Hn(k)]),g.meta=aa(c,"description",!0)),m=aa(m,u.collapsibleKey,!1);const v=JSON.stringify({kind:t,...m});g=aa(g,u.collapsibleKey,!1);const E=aa(g,u.collapsibleKey,!0),C=JSON.stringify({kind:t,...g});if(i.nodesByHash[C]&&!o)return i.nodesByHash[C];const R={id:e,kind:t,impl:u,inner:r,innerEntries:d,innerJson:m,innerHash:v,meta:n,metaJson:c,json:g,hash:C,collapsibleJson:E,children:h};if(t!=="intersection")for(const S in r)S!=="in"&&S!=="out"&&(R[S]=r[S]);const H=new wI[t](R,i);return i.nodesByHash[C]=H},mj=(e,t)=>e.id===t?e:(vt(zt[t])&&Ve(`Unexpected attempt to overwrite node id ${t}`),cd({id:t,kind:e.kind,inner:e.inner,meta:e.meta,$:e.$,ignoreCache:!0})),$j=(e,t,r)=>cd({id:Mg(t.alias??e.kind),kind:e.kind,inner:e.inner,meta:t,$:e.$}),aa=(e,t,r)=>{const n=Object.keys(e);if(n.length===1&&n[0]===t){const i=e[t];if(r||Yn(i,"object")&&(Object.keys(i).length===1||Array.isArray(i)))return i}return e},Zc=(e,t,r)=>{if(e.key!==t.key)return null;const n=e.key;let i=tt(e.value,t.value,r);const o=e.required||t.required?"required":"optional";if(i instanceof ee)if(o==="optional")i=V.intrinsic.never.internal;else return i.withPrefixKey(e.key,e.required&&t.required?"required":"optional");if(o==="required")return r.$.node("required",{key:n,value:i});const u=e.hasDefault()?t.hasDefault()?e.default===t.default?e.default:q(Ag(e.default,t.default)):e.default:t.hasDefault()?t.default:dr;return r.$.node("optional",{key:n,value:i,default:u})};class Og extends Gi{constructor(){super(...arguments);b(this,"required",this.kind==="required");b(this,"optional",this.kind==="optional");b(this,"impliedBasis",V.intrinsic.object.internal);b(this,"serializedKey",Wi(this.key));b(this,"compiledKey",typeof this.key=="string"?this.key:this.serializedKey);b(this,"flatRefs",ke(this.value.flatRefs.map(r=>nn([this.key,...r.path],r.node)),nn([this.key],this.value)));b(this,"traverseAllows",(r,n)=>this.key in r?Tr(this.key,()=>this.value.traverseAllows(r[this.key],n),n):this.optional);b(this,"traverseApply",(r,n)=>{this.key in r?Tr(this.key,()=>this.value.traverseApply(r[this.key],n),n):this.hasKind("required")&&n.errorFromNodeContext(this.errorContext)})}_transform(r,n){n.path.push(this.key);const i=super._transform(r,n);return n.path.pop(),i}hasDefault(){return"default"in this.inner}compile(r){r.if(`${this.serializedKey} in data`,()=>r.traverseKey(this.serializedKey,`data${r.prop(this.key)}`,this.value)),this.hasKind("required")&&r.else(()=>r.traversalKind==="Apply"?r.line(`ctx.errorFromNodeContext(${this.compiledErrorContext})`):r.return(!1)),r.traversalKind==="Allows"&&r.return(!0)}}const Ag=(e,t)=>`Invalid intersection of default values ${we(e)} & ${we(t)}`,vj=qe({kind:"optional",hasAssociatedError:!1,intersectionIsOpen:!0,keys:{key:{},value:{child:!0,parse:(e,t)=>t.$.parseSchema(e)},default:{preserveUndefined:!0}},normalize:e=>e,reduce:(e,t)=>{if(t.resolvedConfig.exactOptionalPropertyTypes===!1&&!e.value.allows(void 0))return t.node("optional",{...e,value:e.value.or(ie.undefined)},{prereduced:!0})},defaults:{description:e=>`${e.compiledKey}?: ${e.value.description}`},intersections:{optional:Zc}});class yj extends Og{constructor(...r){super(...r);b(this,"expression",this.hasDefault()?`${this.compiledKey}: ${this.value.expression} = ${we(this.inner.default)}`:`${this.compiledKey}?: ${this.value.expression}`);b(this,"defaultValueMorph",gj(this));b(this,"defaultValueMorphRef",this.defaultValueMorph&&gt(this.defaultValueMorph));"default"in this.inner&&dd(this.value,this.inner.default,this.key)}get rawIn(){const r=super.rawIn;return this.hasDefault()?this.$.node("optional",Uy(r.inner,{default:!0}),{prereduced:!0}):r}get outProp(){if(!this.hasDefault())return this;const{default:r,...n}=this.inner;return this.cacheGetter("outProp",this.$.node("required",n,{prereduced:!0}))}}const fd={implementation:vj,Node:yj},zl={},gj=e=>{if(!e.hasDefault())return;const t=`{${e.compiledKey}: ${e.value.id} = ${Hn(e.default)}}`;return zl[t]??(zl[t]=_g(e.key,e.value,e.default))},_g=(e,t,r)=>{if(typeof r=="function")return t.includesTransform?(i,o)=>(Tr(e,()=>t(i[e]=r(),o),o),i):i=>(i[e]=r(),i);const n=t.includesTransform?t.assert(r):r;return Yn(n,"object")?(i,o)=>(Tr(e,()=>t(i[e]=r,o),o),i):i=>(i[e]=n,i)},dd=(e,t,r)=>{const n=bu(t);Yn(t,"object")&&!n&&q(bj(r));const i=e.in(n?t():t);if(i instanceof mn){r===null&&q(`Default ${i.summary}`);const o=i.transform(u=>u.transform(d=>({...d,prefixPath:[r]})));q(`Default for ${o.summary}`)}return t},bj=e=>`Non-primitive default ${e===null?"":typeof e=="number"?`for value at [${e}] `:`for ${Wi(e)} `}must be specified as a function like () => ({my: 'object'})`;class mo extends pg{constructor(r,n){super(r,n);b(this,"branches",this.hasKind("union")?this.inner.branches:[this]);b(this,"_keyof");b(this,"pipe",Object.assign(this._pipe.bind(this),{try:this.tryPipe.bind(this)}));Object.defineProperty(this,Rr,{value:"root",enumerable:!1})}get rawIn(){return super.rawIn}get rawOut(){return super.rawOut}get internal(){return this}get"~standard"(){return{vendor:"arktype",version:1,validate:r=>{const n=this(r);return n instanceof mn?n:{value:n}},jsonSchema:{input:r=>this.rawIn.toJsonSchema({target:Em(r.target),...r.libraryOptions}),output:r=>this.rawOut.toJsonSchema({target:Em(r.target),...r.libraryOptions})}}}as(){return this}brand(r){return r===""?q(wj):this}readonly(){return this}distribute(r,n){const i=this.branches.map(r);return(n==null?void 0:n(i))??i}get shortDescription(){return this.meta.description??this.defaultShortDescription}toJsonSchema(r={}){const n=dg(this.$.resolvedConfig.toJsonSchema,r);n.useRefs||(n.useRefs=this.isCyclic);const i=typeof n.dialect=="string"?{$schema:n.dialect}:{};if(Object.assign(i,this.toJsonSchemaRecurse(n)),n.useRefs){const o=Se(this.references,(u,d)=>d.isRoot()&&!d.alwaysExpandJsonSchema?[d.id,d.toResolvedJsonSchema(n)]:[]);n.target==="draft-07"?Object.assign(i,{definitions:o}):i.$defs=o}return i}toJsonSchemaRecurse(r){return r.useRefs&&!this.alwaysExpandJsonSchema?{$ref:`#/${r.target==="draft-07"?"definitions":"$defs"}/${this.id}`}:this.toResolvedJsonSchema(r)}get alwaysExpandJsonSchema(){return this.isBasis()||this.kind==="alias"||this.hasKind("union")&&this.isBoolean}toResolvedJsonSchema(r){const n=this.innerToJsonSchema(r);return Object.assign(n,this.metaJson)}intersect(r){const n=this.$.parseDefinition(r),i=this.rawIntersect(n);return i instanceof ee?i:this.$.finalize(i)}rawIntersect(r){return Lr(this,r,this.$)}toNeverIfDisjoint(){return this}and(r){const n=this.intersect(r);return n instanceof ee?n.throw():n}rawAnd(r){const n=this.rawIntersect(r);return n instanceof ee?n.throw():n}or(r){const n=this.$.parseDefinition(r);return this.$.finalize(this.rawOr(n))}rawOr(r){const n=[...this.branches,...r.branches];return this.$.node("union",n)}map(r){return this.$.schema(this.applyStructuralOperation("map",[r]))}pick(...r){return this.$.schema(this.applyStructuralOperation("pick",r))}omit(...r){return this.$.schema(this.applyStructuralOperation("omit",r))}required(){return this.$.schema(this.applyStructuralOperation("required",[]))}partial(){return this.$.schema(this.applyStructuralOperation("partial",[]))}keyof(){if(this._keyof)return this._keyof;const r=this.applyStructuralOperation("keyof",[]).reduce((n,i)=>n.intersect(i).toNeverIfDisjoint(),V.intrinsic.unknown.internal);return r.branches.length===0&&q(mg(`keyof ${this.expression}`)),this._keyof=this.$.finalize(r)}get props(){return this.branches.length!==1?q(Sj(this.expression)):[...this.applyStructuralOperation("props",[])[0]]}merge(r){const n=this.$.parseDefinition(r);return this.$.schema(n.distribute(i=>this.applyStructuralOperation("merge",[jm(i)??q(Im("merge",i.expression))])))}applyStructuralOperation(r,n){return this.distribute(i=>{if(i.equals(V.intrinsic.object)&&r!=="merge")return i;const o=jm(i);if(o||q(Im(r,i.expression)),r==="keyof")return o.keyof();if(r==="get")return o.get(...n);if(r==="props")return o.props;const u=r==="required"?"require":r==="partial"?"optionalize":r;return this.$.node("intersection",{domain:"object",structure:o[u](...n)})})}get(...r){return r[0]===void 0?this:this.$.schema(this.applyStructuralOperation("get",r))}extract(r){const n=this.$.parseDefinition(r);return this.$.schema(this.branches.filter(i=>i.extends(n)))}exclude(r){const n=this.$.parseDefinition(r);return this.$.schema(this.branches.filter(i=>!i.extends(n)))}array(){return this.$.schema(this.isUnknown()?{proto:Array}:{proto:Array,sequence:this},{prereduced:!0})}overlaps(r){return!(this.intersect(r)instanceof ee)}extends(r){if(this.isNever())return!0;const n=this.intersect(r);return!(n instanceof ee)&&this.equals(n)}ifExtends(r){return this.extends(r)?this:void 0}subsumes(r){return this.$.parseDefinition(r).extends(this)}configure(r,n="shallow"){return this.configureReferences(r,n)}describe(r,n="shallow"){return this.configure({description:r},n)}optional(){return[this,"?"]}default(r){return dd(this,r,null),[this,"=",r]}from(r){return this.assert(r)}_pipe(...r){const n=r.reduce((i,o)=>i.rawPipeOnce(o),this);return this.$.finalize(n)}tryPipe(...r){const n=r.reduce((i,o)=>i.rawPipeOnce(ne(o,"root")?o:(u,d)=>{try{return o(u,d)}catch(h){return d.error({code:"predicate",predicate:o,actual:`aborted due to error:
    ${h}
`})}}),this);return this.$.finalize(n)}to(r){return this.$.finalize(this.toNode(this.$.parseDefinition(r)))}toNode(r){const n=Gc(this,r,this.$);return n instanceof ee?n.throw():n}rawPipeOnce(r){return ne(r,"root")?this.toNode(r):this.distribute(n=>n.hasKind("morph")?this.$.node("morph",{in:n.inner.in,morphs:[...n.morphs,r]}):this.$.node("morph",{in:n,morphs:[r]}),this.$.parseSchema)}narrow(r){return this.constrainOut("predicate",r)}constrain(r,n){return this._constrain("root",r,n)}constrainIn(r,n){return this._constrain("in",r,n)}constrainOut(r,n){return this._constrain("out",r,n)}_constrain(r,n,i){const o=this.$.node(n,i);if(o.isRoot())return o.isUnknown()?this:Ve(`Unexpected constraint node ${o}`);const u=r==="root"?this:r==="in"?this.rawIn:this.rawOut;if(u.hasKind("morph")||o.impliedBasis&&!u.extends(o.impliedBasis))return PE(n,o.impliedBasis,this);const d=this.$.node("intersection",{[o.kind]:o}),h=r==="out"?Gc(this,d,this.$):Lr(this,d,this.$);return h instanceof ee&&h.throw(),this.$.finalize(h)}onUndeclaredKey(r){const n=typeof r=="string"?r:r.rule,i=typeof r=="string"?!1:r.deep;return this.$.finalize(this.transform((o,u)=>o==="structure"?n==="ignore"?Uy(u,{undeclared:1}):{...u,undeclared:n}:u,i?void 0:{shouldTransform:o=>!Nr(ku,o.kind)}))}hasEqualMorphs(r){return!this.includesTransform&&!r.includesTransform?!0:!(!Bi(this.shallowMorphs,r.shallowMorphs)||!Bi(this.flatMorphs,r.flatMorphs,{isEqual:(n,i)=>{var o,u;return n.propString===i.propString&&(n.node.hasKind("morph")&&i.node.hasKind("morph")?n.node.hasEqualMorphs(i.node):n.node.hasKind("intersection")&&i.node.hasKind("intersection")?((o=n.node.structure)==null?void 0:o.structuralMorphRef)===((u=i.node.structure)==null?void 0:u.structuralMorphRef):!1)}}))}onDeepUndeclaredKey(r){return this.onUndeclaredKey({rule:r,deep:!0})}filter(r){return this.constrainIn("predicate",r)}divisibleBy(r){return this.constrain("divisor",r)}matching(r){return this.constrain("pattern",r)}atLeast(r){return this.constrain("min",r)}atMost(r){return this.constrain("max",r)}moreThan(r){return this.constrain("min",ci(r))}lessThan(r){return this.constrain("max",ci(r))}atLeastLength(r){return this.constrain("minLength",r)}atMostLength(r){return this.constrain("maxLength",r)}moreThanLength(r){return this.constrain("minLength",ci(r))}lessThanLength(r){return this.constrain("maxLength",ci(r))}exactlyLength(r){return this.constrain("exactLength",r)}atOrAfter(r){return this.constrain("after",r)}atOrBefore(r){return this.constrain("before",r)}laterThan(r){return this.constrain("after",ci(r))}earlierThan(r){return this.constrain("before",ci(r))}}const wj="Expected a non-empty brand name after #",Rg=["draft-2020-12","draft-07"],kj=e=>`JSONSchema target '${e}' is not supported (must be ${Rg.map(t=>`"${t}"`).join(" or ")})`,Em=e=>(Nr(Rg,e)||q(kj(e)),e),ci=e=>typeof e=="object"&&!(e instanceof Date)?{...e,exclusive:!0}:{rule:e,exclusive:!0},ua=(e,t)=>ne(t,"root")?ne(e,"root")?e.extends(t):t.allows(e):ne(e,"root")?e.hasUnit(t):t===e,jm=e=>{var t;return e.hasKind("morph")?null:e.hasKind("intersection")?e.inner.structure??(((t=e.basis)==null?void 0:t.domain)==="object"?e.$.bindReference(V.intrinsic.emptyStructure):null):e.isBasis()&&e.domain==="object"?e.$.bindReference(V.intrinsic.emptyStructure):null},Sj=e=>`Props cannot be extracted from a union. Use .distribute to extract props from each branch instead. Received:
${e}`,Im=(e,t)=>`${e} operand must be an object (was ${t})`,$o=(e,t)=>Se(ud(e),(r,n)=>[n,t]),xj=e=>typeof e=="string"?{reference:e}:e,Mm=e=>e instanceof ee?V.intrinsic.never.internal:e,Dj=qe({kind:"alias",hasAssociatedError:!1,collapsibleKey:"reference",keys:{reference:{serialize:e=>e.startsWith("$")?e:`$ark.${e}`},resolve:{}},normalize:xj,defaults:{description:e=>e.reference},intersections:{alias:(e,t,r)=>r.$.lazilyResolve(()=>Mm(tt(e.resolution,t.resolution,r)),`${e.reference}${r.pipe?"=>":"&"}${t.reference}`),...$o("alias",(e,t,r)=>t.isUnknown()?e:t.isNever()?t:t.isBasis()&&!t.overlaps(V.intrinsic.object)?ee.init("assignability",V.intrinsic.object,t):r.$.lazilyResolve(()=>Mm(tt(e.resolution,t,r)),`${e.reference}${r.pipe?"=>":"&"}${t.id}`))}});class Cj extends mo{constructor(){super(...arguments);b(this,"expression",this.reference);b(this,"structure");b(this,"traverseAllows",(r,n)=>{const i=n.seen[this.reference];return i!=null&&i.includes(r)?!0:(n.seen[this.reference]=ke(i,r),this.resolution.traverseAllows(r,n))});b(this,"traverseApply",(r,n)=>{const i=n.seen[this.reference];i!=null&&i.includes(r)||(n.seen[this.reference]=ke(i,r),this.resolution.traverseApply(r,n))})}get resolution(){const r=this._resolve();return zt[this.id]=r}_resolve(){if(this.resolve)return this.resolve();if(this.reference[0]==="$")return this.$.resolveRoot(this.reference.slice(1));const r=this.reference;let n=zt[r];const i=[];for(;ne(n,"context");){if(i.includes(n.id))return q(Nj(n.id,i));i.push(n.id),n=zt[n.id]}return ne(n,"root")?n:Ve(`Unexpected resolution for reference ${this.reference}
Seen: [${i.join("->")}] 
Resolution: ${we(n)}`)}get resolutionId(){if(this.reference.includes("&")||this.reference.includes("=>"))return this.resolution.id;if(this.reference[0]!=="$")return this.reference;const r=this.reference.slice(1),n=this.$.resolutions[r];return typeof n=="string"?n:ne(n,"root")?n.id:Ve(`Unexpected resolution for reference ${this.reference}: ${we(n)}`)}get defaultShortDescription(){return _r.object}innerToJsonSchema(r){return this.resolution.toJsonSchemaRecurse(r)}compile(r){const n=this.resolutionId;r.if(`ctx.seen.${n} && ctx.seen.${n}.includes(data)`,()=>r.return(!0)),r.if(`!ctx.seen.${n}`,()=>r.line(`ctx.seen.${n} = []`)),r.line(`ctx.seen.${n}.push(data)`),r.return(r.invoke(n))}}const Nj=(e,t)=>`Alias '${e}' has a shallow resolution cycle: ${[...t,e].join("->")}`,pd={implementation:Dj,Node:Cj};class hd extends mo{constructor(){super(...arguments);b(this,"traverseApply",(r,n)=>{this.traverseAllows(r,n)||n.errorFromNodeContext(this.errorContext)})}get errorContext(){return{code:this.kind,description:this.description,meta:this.meta,...this.inner}}get compiledErrorContext(){return xu(this.errorContext)}compile(r){r.traversalKind==="Allows"?r.return(this.compiledCondition):r.if(this.compiledNegation,()=>r.line(`ctx.errorFromNodeContext(${this.compiledErrorContext})`))}}const Ej=qe({kind:"domain",hasAssociatedError:!0,collapsibleKey:"domain",keys:{domain:{},numberAllowsNaN:{}},normalize:e=>typeof e=="string"?{domain:e}:rd(e,"numberAllowsNaN")&&e.domain!=="number"?q(md.writeBadAllowNanMessage(e.domain)):e,applyConfig:(e,t)=>e.numberAllowsNaN===void 0&&e.domain==="number"&&t.numberAllowsNaN?{...e,numberAllowsNaN:!0}:e,defaults:{description:e=>_r[e.domain],actual:e=>Number.isNaN(e)?"NaN":_r[or(e)]},intersections:{domain:(e,t)=>e.domain==="number"&&t.domain==="number"?e.numberAllowsNaN?t:e:ee.init("domain",e,t)}});class jj extends hd{constructor(){super(...arguments);b(this,"requiresNaNCheck",this.domain==="number"&&!this.numberAllowsNaN);b(this,"traverseAllows",this.requiresNaNCheck?r=>typeof r=="number"&&!Number.isNaN(r):r=>or(r)===this.domain);b(this,"compiledCondition",this.domain==="object"?'((typeof data === "object" && data !== null) || typeof data === "function")':`typeof data === "${this.domain}"${this.requiresNaNCheck?" && !Number.isNaN(data)":""}`);b(this,"compiledNegation",this.domain==="object"?'((typeof data !== "object" || data === null) && typeof data !== "function")':`typeof data !== "${this.domain}"${this.requiresNaNCheck?" || Number.isNaN(data)":""}`);b(this,"expression",this.numberAllowsNaN?"number | NaN":this.domain)}get nestableExpression(){return this.numberAllowsNaN?`(${this.expression})`:this.expression}get defaultShortDescription(){return _r[this.domain]}innerToJsonSchema(r){return this.domain==="bigint"||this.domain==="symbol"?r.fallback.domain({code:"domain",base:{},domain:this.domain}):{type:this.domain}}}const md={implementation:Ej,Node:jj,writeBadAllowNanMessage:e=>`numberAllowsNaN may only be specified with domain "number" (was ${e})`},Ij=qe({kind:"intersection",hasAssociatedError:!0,normalize:e=>{if(vt(e))return e;const{structure:t,...r}=e,n=!!t,i=t??{},o=Se(r,(u,d)=>$r(u,yE)?(n&&q(`Flattened structure key ${u} cannot be specified alongside a root 'structure' key.`),i[u]=d,[]):[u,d]);return(ne(i,"constraint")||!co(i))&&(o.structure=i),o},finalizeInnerJson:({structure:e,...t})=>Yn(e,"object")?{...e,...t}:t,keys:{domain:{child:!0,parse:(e,t)=>t.$.node("domain",e)},proto:{child:!0,parse:(e,t)=>t.$.node("proto",e)},structure:{child:!0,parse:(e,t)=>t.$.node("structure",e),serialize:e=>{var u;if(!((u=e.sequence)!=null&&u.minLength))return e.collapsibleJson;const{sequence:t,...r}=e.collapsibleJson,{minVariadicLength:n,...i}=t,o=i.variadic&&Object.keys(i).length===1?i.variadic:i;return{...r,sequence:o}}},divisor:{child:!0,parse:St("divisor")},max:{child:!0,parse:St("max")},min:{child:!0,parse:St("min")},maxLength:{child:!0,parse:St("maxLength")},minLength:{child:!0,parse:St("minLength")},exactLength:{child:!0,parse:St("exactLength")},before:{child:!0,parse:St("before")},after:{child:!0,parse:St("after")},pattern:{child:!0,parse:St("pattern")},predicate:{child:!0,parse:St("predicate")}},reduce:(e,t)=>Pm({},e,{$:t,invert:!1,pipe:!1}),defaults:{description:e=>{if(e.children.length===0)return"unknown";if(e.structure)return e.structure.description;const t=[];if(e.basis&&!e.prestructurals.some(r=>r.impl.obviatesBasisDescription)&&t.push(e.basis.description),e.prestructurals.length){const r=e.prestructurals.slice().sort((n,i)=>n.kind==="min"&&i.kind==="max"?-1:0).map(n=>n.description);t.push(...r)}return e.inner.predicate&&t.push(...e.inner.predicate.map(r=>r.description)),t.join(" and ")},expected:e=>`   ${e.errors.map(t=>t.expected).join(`
   `)}`,problem:e=>`(${e.actual}) must be...
${e.expected}`},intersections:{intersection:(e,t,r)=>Pm(e.inner,t.inner,r),...$o("intersection",(e,t,r)=>{var h;if(e.children.length===0)return t;const{domain:n,proto:i,...o}=e.inner,u=i??n,d=u?tt(u,t,r):t;return d instanceof ee?d:(h=e==null?void 0:e.basis)!=null&&h.equals(d)?e:e.$.node("intersection",{...o,[d.kind]:d},{prereduced:!0})})}});class Mj extends mo{constructor(){super(...arguments);b(this,"basis",this.inner.domain??this.inner.proto??null);b(this,"prestructurals",[]);b(this,"refinements",this.children.filter(r=>r.isRefinement()?(Nr(ug,r.kind)&&this.prestructurals.push(r),!0):!1));b(this,"structure",this.inner.structure);b(this,"expression",Pj(this));b(this,"traverseAllows",(r,n)=>this.children.every(i=>i.traverseAllows(r,n)));b(this,"traverseApply",(r,n)=>{const i=n.currentErrorCount;if(!(this.basis&&(this.basis.traverseApply(r,n),n.currentErrorCount>i))){if(this.prestructurals.length){for(let o=0;o<this.prestructurals.length-1;o++)if(this.prestructurals[o].traverseApply(r,n),n.failFast&&n.currentErrorCount>i)return;if(this.prestructurals[this.prestructurals.length-1].traverseApply(r,n),n.currentErrorCount>i)return}if(!(this.structure&&(this.structure.traverseApply(r,n),n.currentErrorCount>i))&&this.inner.predicate){for(let o=0;o<this.inner.predicate.length-1;o++)if(this.inner.predicate[o].traverseApply(r,n),n.failFast&&n.currentErrorCount>i)return;this.inner.predicate[this.inner.predicate.length-1].traverseApply(r,n)}}})}get shallowMorphs(){var r;return(r=this.inner.structure)!=null&&r.structuralMorph?[this.inner.structure.structuralMorph]:[]}get defaultShortDescription(){var r;return((r=this.basis)==null?void 0:r.defaultShortDescription)??"present"}innerToJsonSchema(r){return this.children.reduce((n,i)=>i.isBasis()?i.toJsonSchemaRecurse(r):i.reduceJsonSchema(n,r),{})}compile(r){if(r.traversalKind==="Allows"){for(const n of this.children)r.check(n);r.return(!0);return}if(r.initializeErrorCount(),this.basis&&(r.check(this.basis),this.children.length>1&&r.returnIfFail()),this.prestructurals.length){for(let n=0;n<this.prestructurals.length-1;n++)r.check(this.prestructurals[n]),r.returnIfFailFast();r.check(this.prestructurals[this.prestructurals.length-1]),(this.structure||this.inner.predicate)&&r.returnIfFail()}if(this.structure&&(r.check(this.structure),this.inner.predicate&&r.returnIfFail()),this.inner.predicate){for(let n=0;n<this.inner.predicate.length-1;n++)r.check(this.inner.predicate[n]),r.returnIfFail();r.check(this.inner.predicate[this.inner.predicate.length-1])}}}const Tg={implementation:Ij,Node:Mj},Pj=e=>{var i;if((i=e.structure)!=null&&i.expression)return e.structure.expression;const t=e.basis&&!e.prestructurals.some(o=>o.impl.obviatesBasisExpression)?e.basis.nestableExpression:"",r=e.prestructurals.map(o=>o.expression).join(" & "),n=`${t}${t?" ":""}${r}`;return n==="Array == 0"?"[]":n||"unknown"},Pm=(e,t,r)=>{const n={},i=e.proto??e.domain,o=t.proto??t.domain,u=i?o?tt(i,o,r):i:o;return u instanceof ee?u:(u&&(n[u.kind]=u),Za({kind:"intersection",baseInner:n,l:Xa(e),r:Xa(t),roots:[],ctx:r}))},Oj=qe({kind:"morph",hasAssociatedError:!1,keys:{in:{child:!0,parse:(e,t)=>t.$.parseSchema(e)},morphs:{parse:lo,serialize:e=>e.map(t=>ne(t,"root")?t.json:gt(t))},declaredIn:{child:!1,serialize:e=>e.json},declaredOut:{child:!1,serialize:e=>e.json}},normalize:e=>e,defaults:{description:e=>{var t;return`a morph from ${e.rawIn.description} to ${((t=e.rawOut)==null?void 0:t.description)??"unknown"}`}},intersections:{morph:(e,t,r)=>{if(!e.hasEqualMorphs(t))return q(_j(e.expression,t.expression));const n=tt(e.rawIn,t.rawIn,r);if(n instanceof ee)return n;const i={morphs:e.morphs};if(e.declaredIn||t.declaredIn){const o=tt(e.rawIn,t.rawIn,r);if(o instanceof ee)return o.throw();i.declaredIn=o}if(e.declaredOut||t.declaredOut){const o=tt(e.rawOut,t.rawOut,r);if(o instanceof ee)return o.throw();i.declaredOut=o}return n.distribute(o=>r.$.node("morph",{...i,in:o}),r.$.parseSchema)},...$o("morph",(e,t,r)=>{const n=e.inner.in?tt(e.inner.in,t,r):t;return n instanceof ee?n:n.equals(e.inner.in)?e:r.$.node("morph",{...e.inner,in:n})})}});class Aj extends mo{constructor(){super(...arguments);b(this,"serializedMorphs",this.morphs.map(gt));b(this,"compiledMorphs",`[${this.serializedMorphs}]`);b(this,"lastMorph",this.inner.morphs[this.inner.morphs.length-1]);b(this,"lastMorphIfNode",ne(this.lastMorph,"root")?this.lastMorph:void 0);b(this,"introspectableIn",this.inner.in);b(this,"introspectableOut",this.lastMorphIfNode?Object.assign(this.referencesById,this.lastMorphIfNode.referencesById)&&this.lastMorphIfNode.rawOut:void 0);b(this,"expression",`(In: ${this.rawIn.expression}) => ${this.lastMorphIfNode?"To":"Out"}<${this.rawOut.expression}>`);b(this,"traverseAllows",(r,n)=>!this.introspectableIn||this.introspectableIn.traverseAllows(r,n));b(this,"traverseApply",(r,n)=>{this.introspectableIn&&this.introspectableIn.traverseApply(r,n),n.queueMorphs(this.morphs)})}get shallowMorphs(){var r;return Array.isArray((r=this.inner.in)==null?void 0:r.shallowMorphs)?[...this.inner.in.shallowMorphs,...this.morphs]:this.morphs}get rawIn(){var r;return this.declaredIn??((r=this.inner.in)==null?void 0:r.rawIn)??V.intrinsic.unknown.internal}get rawOut(){return this.declaredOut??this.introspectableOut??V.intrinsic.unknown.internal}declareIn(r){return this.$.node("morph",{...this.inner,declaredIn:r})}declareOut(r){return this.$.node("morph",{...this.inner,declaredOut:r})}get defaultShortDescription(){return this.rawIn.meta.description??this.rawIn.defaultShortDescription}innerToJsonSchema(r){var n;return r.fallback.morph({code:"morph",base:this.rawIn.toJsonSchemaRecurse(r),out:((n=this.introspectableOut)==null?void 0:n.toJsonSchemaRecurse(r))??null})}compile(r){if(r.traversalKind==="Allows"){if(!this.introspectableIn)return;r.return(r.invoke(this.introspectableIn));return}this.introspectableIn&&r.line(r.invoke(this.introspectableIn)),r.line(`ctx.queueMorphs(${this.compiledMorphs})`)}hasEqualMorphs(r){return Bi(this.morphs,r.morphs,{isEqual:(n,i)=>n===i||ne(n,"root")&&ne(i,"root")&&n.equals(i)})}}const Lg={implementation:Oj,Node:Aj},_j=(e,t)=>`The intersection of distinct morphs at a single path is indeterminate:
Left: ${e}
Right: ${t}`,Rj=qe({kind:"proto",hasAssociatedError:!0,collapsibleKey:"proto",keys:{proto:{serialize:e=>id(e)??Hn(e)},dateAllowsInvalid:{}},normalize:e=>{const t=typeof e=="string"?{proto:Ui[e]}:typeof e=="function"?vt(e)?e:{proto:e}:typeof e.proto=="string"?{...e,proto:Ui[e.proto]}:e;return typeof t.proto!="function"&&q(tu.writeInvalidSchemaMessage(t.proto)),rd(t,"dateAllowsInvalid")&&t.proto!==Date&&q(tu.writeBadInvalidDateMessage(t.proto)),t},applyConfig:(e,t)=>e.dateAllowsInvalid===void 0&&e.proto===Date&&t.dateAllowsInvalid?{...e,dateAllowsInvalid:!0}:e,defaults:{description:e=>e.builtinName?ON[e.builtinName]:`an instance of ${e.proto.name}`,actual:e=>e instanceof Date&&e.toString()==="Invalid Date"?"an invalid Date":Uc(e)},intersections:{proto:(e,t)=>e.proto===Date&&t.proto===Date?e.dateAllowsInvalid?t:e:ym(e.proto,t.proto)?e:ym(t.proto,e.proto)?t:ee.init("proto",e,t),domain:(e,t)=>t.domain==="object"?e:ee.init("domain",V.intrinsic.object.internal,t)}});class Tj extends hd{constructor(){super(...arguments);b(this,"builtinName",id(this.proto));b(this,"serializedConstructor",this.json.proto);b(this,"requiresInvalidDateCheck",this.proto===Date&&!this.dateAllowsInvalid);b(this,"traverseAllows",this.requiresInvalidDateCheck?r=>r instanceof Date&&r.toString()!=="Invalid Date":r=>r instanceof this.proto);b(this,"compiledCondition",`data instanceof ${this.serializedConstructor}${this.requiresInvalidDateCheck?' && data.toString() !== "Invalid Date"':""}`);b(this,"compiledNegation",`!(${this.compiledCondition})`);b(this,"expression",this.dateAllowsInvalid?"Date | InvalidDate":this.proto.name);b(this,"domain","object")}innerToJsonSchema(r){var n,i;switch(this.builtinName){case"Array":return{type:"array"};case"Date":return((i=(n=r.fallback).date)==null?void 0:i.call(n,{code:"date",base:{}}))??r.fallback.proto({code:"proto",base:{},proto:this.proto});default:return r.fallback.proto({code:"proto",base:{},proto:this.proto})}}get nestableExpression(){return this.dateAllowsInvalid?`(${this.expression})`:this.expression}get defaultShortDescription(){return this.description}}const tu={implementation:Rj,Node:Tj,writeBadInvalidDateMessage:e=>`dateAllowsInvalid may only be specified with constructor Date (was ${e.name})`,writeInvalidSchemaMessage:e=>`instanceOf operand must be a function (was ${or(e)})`},Lj=qe({kind:"union",hasAssociatedError:!0,collapsibleKey:"branches",keys:{ordered:{},branches:{child:!0,parse:(e,t)=>{const r=[];for(const n of e){const i=ne(n,"root")?n.branches:t.$.parseSchema(n).branches;for(const o of i)if(o.hasKind("morph")){const u=r.findIndex(d=>d.hasKind("morph")&&d.hasEqualMorphs(o));if(u===-1)r.push(o);else{const d=r[u];r[u]=t.$.node("morph",{...d.inner,in:d.rawIn.rawOr(o.rawIn)})}}else r.push(o)}return t.def.ordered||r.sort((n,i)=>n.hash<i.hash?-1:1),r}}},normalize:e=>mt(e)?{branches:e}:e,reduce:(e,t)=>{const r=Wj(e);if(r.length===1)return r[0];if(r.length!==e.branches.length)return t.node("union",{...e,branches:r},{prereduced:!0})},defaults:{description:e=>e.distribute(t=>t.description,Pi),expected:e=>{const t=yN(e.errors,"propString"),r=Object.entries(t).map(([n,i])=>{const o=[];for(const h of i)qn(o,h.expected);const u=Pi(o),d=i.every(h=>h.actual===i[0].actual)?i[0].actual:we(i[0].data);return`${n&&`${n} `}must be ${u}${d&&` (was ${d})`}`});return Pi(r)},problem:e=>e.expected,message:e=>e.problem[0]==="["?`value at ${e.problem}`:e.problem},intersections:{union:(e,t,r)=>{if(e.isNever!==t.isNever)return ee.init("presence",e,t);let n;return e.ordered?(t.ordered&&q(Yj(e.expression,t.expression)),n=Bl(t.branches,e.branches,r),n instanceof ee&&n.invert()):n=Bl(e.branches,t.branches,r),n instanceof ee?n:r.$.parseSchema(e.ordered||t.ordered?{branches:n,ordered:!0}:{branches:n})},...$o("union",(e,t,r)=>{const n=Bl(e.branches,[t],r);return n instanceof ee?n:n.length===1?n[0]:r.$.parseSchema(e.ordered?{branches:n,ordered:!0}:{branches:n})})}});class Fj extends mo{constructor(){super(...arguments);b(this,"isBoolean",this.branches.length===2&&this.branches[0].hasUnit(!1)&&this.branches[1].hasUnit(!0));b(this,"unitBranches",this.branches.filter(r=>r.rawIn.hasKind("unit")));b(this,"discriminant",this.discriminate());b(this,"discriminantJson",this.discriminant?Jj(this.discriminant):null);b(this,"expression",this.distribute(r=>r.nestableExpression,Hj));b(this,"traverseAllows",(r,n)=>this.branches.some(i=>i.traverseAllows(r,n)));b(this,"traverseApply",(r,n)=>{const i=[];for(let o=0;o<this.branches.length;o++){if(n.pushBranch(),this.branches[o].traverseApply(r,n),!n.hasError())return this.branches[o].includesTransform?n.queuedMorphs.push(...n.popBranch().queuedMorphs):n.popBranch();i.push(n.popBranch().error)}n.errorFromNodeContext({code:"union",errors:i,meta:this.meta})});b(this,"traverseOptimistic",r=>{for(let n=0;n<this.branches.length;n++){const i=this.branches[n];if(i.traverseAllows(r))return i.contextFreeMorph?i.contextFreeMorph(r):r}return dr})}get branchGroups(){const r=[];let n=-1;for(const i of this.branches){if(i.hasKind("unit")&&i.domain==="boolean"){n===-1?(n=r.length,r.push(i)):r[n]=V.intrinsic.boolean;continue}r.push(i)}return r}createBranchedOptimisticRootApply(){return(r,n)=>{const i=this.traverseOptimistic(r);if(i!==dr)return i;const o=new Si(r,this.$.resolvedConfig);return this.traverseApply(r,o),o.finalize(n)}}get shallowMorphs(){return this.branches.reduce((r,n)=>qn(r,n.shallowMorphs),[])}get defaultShortDescription(){return this.distribute(r=>r.defaultShortDescription,Pi)}innerToJsonSchema(r){if(this.branchGroups.length===1&&this.branchGroups[0].equals(V.intrinsic.boolean))return{type:"boolean"};const n=this.branchGroups.map(i=>i.toJsonSchemaRecurse(r));return n.every(i=>Object.keys(i).length===1&&rd(i,"const"))?{enum:n.map(i=>i.const)}:{anyOf:n}}compile(r){if(!this.discriminant||this.unitBranches.length===this.branches.length&&this.branches.length===2)return this.compileIndiscriminable(r);let n=this.discriminant.optionallyChainedPropString;this.discriminant.kind==="domain"&&(n=`typeof ${n} === "object" ? ${n} === null ? "null" : "object" : typeof ${n} === "function" ? "object" : typeof ${n}`);const i=this.discriminant.cases,o=Object.keys(i),{optimistic:u}=r;if(r.optimistic=!1,r.block(`switch(${n})`,()=>{for(const c in i){const v=i[c],E=c==="default"?c:`case ${c}`;let C;v===!0?C=u?"data":"true":u?v.rootApplyStrategy==="branchedOptimistic"?C=r.invoke(v,{kind:"Optimistic"}):v.contextFreeMorph?C=`${r.invoke(v)} ? ${gt(v.contextFreeMorph)}(data) : "${dr}"`:C=`${r.invoke(v)} ? data : "${dr}"`:C=r.invoke(v),r.line(`${E}: return ${C}`)}return r}),r.traversalKind==="Allows"){r.return(u?`"${dr}"`:!1);return}const d=Pi(this.discriminant.kind==="domain"?o.map(c=>{const v=c.slice(1,-1);return v==="function"?_r.object:_r[v]}):o),h=this.discriminant.path.map(c=>typeof c=="symbol"?gt(c):JSON.stringify(c)),m=JSON.stringify(d),g=this.discriminant.kind==="domain"?`${Kj}[${n}]`:`${Qj}(${n})`;r.line(`ctx.errorFromNodeContext({
	code: "predicate",
	expected: ${m},
	actual: ${g},
	relativePath: [${h}],
	meta: ${this.compiledMeta}
})`)}compileIndiscriminable(r){if(r.traversalKind==="Apply"){r.const("errors","[]");for(const n of this.branches)r.line("ctx.pushBranch()").line(r.invoke(n)).if("!ctx.hasError()",()=>r.return(n.includesTransform?"ctx.queuedMorphs.push(...ctx.popBranch().queuedMorphs)":"ctx.popBranch()")).line("errors.push(ctx.popBranch().error)");r.line(`ctx.errorFromNodeContext({ code: "union", errors, meta: ${this.compiledMeta} })`)}else{const{optimistic:n}=r;r.optimistic=!1;for(const i of this.branches)r.if(`${r.invoke(i)}`,()=>r.return(n?i.contextFreeMorph?`${gt(i.contextFreeMorph)}(data)`:"data":!0));r.return(n?`"${dr}"`:!1)}}get nestableExpression(){return this.isBoolean?"boolean":`(${this.expression})`}discriminate(){var u,d;if(this.branches.length<2||this.isCyclic)return null;if(this.unitBranches.length===this.branches.length){const h=Se(this.unitBranches,(m,g)=>[`${g.rawIn.serializedValue}`,g.hasKind("morph")?g:!0]);return{kind:"unit",path:[],optionallyChainedPropString:"data",cases:h}}const r=[];for(let h=0;h<this.branches.length-1;h++){const m=this.branches[h];for(let g=h+1;g<this.branches.length;g++){const c=this.branches[g],v=Lr(m.rawIn,c.rawIn,m.$);if(v instanceof ee)for(const E of v){if(!E.kind||E.optional)continue;let C,R;if(E.kind==="domain"){const S=E.l,k=E.r;C=`"${typeof S=="string"?S:S.domain}"`,R=`"${typeof k=="string"?k:k.domain}"`}else if(E.kind==="unit")C=E.l.serializedValue,R=E.r.serializedValue;else continue;const H=r.find(S=>Bi(S.path,E.path)&&S.kind===E.kind);H?(H.cases[C]?H.cases[C].branchIndices=qn(H.cases[C].branchIndices,h):(u=H.cases)[C]??(u[C]={branchIndices:[h],condition:E.l}),H.cases[R]?H.cases[R].branchIndices=qn(H.cases[R].branchIndices,g):(d=H.cases)[R]??(d[R]={branchIndices:[g],condition:E.r})):r.push({kind:E.kind,cases:{[C]:{branchIndices:[h],condition:E.l},[R]:{branchIndices:[g],condition:E.r}},path:E.path})}}}const n=this.ordered?qj(r,this.branches):r;if(!n.length)return null;const i=zj(n,this),o={};for(const h in i.best.cases){const m=Bj(i,h);if(m===null){o[h]=!0;continue}if(m.length===this.branches.length)return null;this.ordered&&m.sort((v,E)=>v.originalIndex-E.originalIndex);const g=m.map(v=>v.branch),c=g.length===1?g[0]:this.$.node("union",this.ordered?{branches:g,ordered:!0}:g);Object.assign(this.referencesById,c.referencesById),o[h]=c}if(i.defaultEntries.length){const h=i.defaultEntries.map(m=>m.branch);o.default=this.$.node("union",this.ordered?{branches:h,ordered:!0}:h,{prereduced:!0}),Object.assign(this.referencesById,o.default.referencesById)}return Object.assign(i.location,{cases:o})}}const zj=(e,t)=>{const n=e.sort((u,d)=>u.path.length===d.path.length?Object.keys(d.cases).length-Object.keys(u.cases).length:u.path.length-d.path.length)[0],i={kind:n.kind,path:n.path,optionallyChainedPropString:Fg(n.path)},o=t.branches.map((u,d)=>({originalIndex:d,branch:u}));return{best:n,location:i,defaultEntries:o,node:t}},Bj=(e,t)=>{const r=e.best.cases[t],n=Uj(r.condition,e.location.path,e.node.$);let i=[];const o=[];for(let u=0;u<e.defaultEntries.length;u++){const d=e.defaultEntries[u];if(r.branchIndices.includes(d.originalIndex)){const h=Om(e.node.branches[d.originalIndex],e.location);h===null?i=null:i==null||i.push({originalIndex:d.originalIndex,branch:h})}else if(d.branch.hasKind("alias")&&n.hasKind("domain")&&n.domain==="object")i==null||i.push(d);else{if(d.branch.rawIn.overlaps(n)){const h=Om(d.branch,e.location);i==null||i.push({originalIndex:d.originalIndex,branch:h})}o.push(d)}}return e.defaultEntries=o,i},qj=(e,t)=>e.filter(n=>{const i=Object.values(n.cases).map(o=>o.branchIndices);for(let o=0;o<i.length-1;o++){const u=i[o];for(let d=o+1;d<i.length;d++){const h=i[d];for(const m of u)for(const g of h)if(m>g&&t[m].overlaps(t[g]))return!1}}return!0}),Uj=(e,t,r)=>{let n=e==="undefined"?r.node("unit",{unit:void 0}):e==="null"?r.node("unit",{unit:null}):e==="boolean"?r.units([!0,!1]):e;for(let i=t.length-1;i>=0;i--){const o=t[i];n=r.node("intersection",typeof o=="number"?{proto:"Array",sequence:[...$N(o).map(u=>({})),n]}:{domain:"object",required:[{key:o,value:n}]})}return n},Fg=e=>e.reduce((t,r)=>t+sg(r,!0),"data"),Kj=gt(gN),Qj=gt(we),zg={implementation:Lj,Node:Fj},Jj=e=>({kind:e.kind,path:e.path.map(t=>typeof t=="string"?t:Wi(t)),cases:Se(e.cases,(t,r)=>[t,r===!0?r:r.hasKind("union")&&r.discriminantJson?r.discriminantJson:r.json])}),Vj={delimiter:" | ",finalDelimiter:" | "},Hj=e=>Pi(e,Vj),Pi=(e,t)=>{const r=(t==null?void 0:t.delimiter)??", ",n=(t==null?void 0:t.finalDelimiter)??" or ";if(e.length===0)return"never";if(e.length===1)return e[0];if(e.length===2&&e[0]==="false"&&e[1]==="true"||e[0]==="true"&&e[1]==="false")return"boolean";const i={},o=e.filter(d=>i[d]?!1:i[d]=!0),u=o.pop();return`${o.join(r)}${o.length?n:""}${u}`},Bl=(e,t,r)=>{const n=t.map(()=>[]);for(let o=0;o<e.length;o++){let u={};for(let d=0;d<t.length;d++){if(n[d]===null)continue;if(e[o].equals(t[d])){n[d]=null,u={};break}const h=tt(e[o],t[d],r);if(!(h instanceof ee)){if(h.equals(e[o])){n[d].push(e[o]),u={};break}h.equals(t[d])?n[d]=null:u[d]=h}}for(const d in u)n[d][o]=u[d]}const i=n.flatMap((o,u)=>(o==null?void 0:o.flatMap(d=>d.branches))??t[u]);return i.length===0?ee.init("union",e,t):i},Wj=({branches:e,ordered:t})=>{if(e.length<2)return e;const r=e.map(()=>!0);for(let n=0;n<e.length;n++)for(let i=n+1;i<e.length&&r[n]&&r[i];i++){if(e[n].equals(e[i])){r[i]=!1;continue}const o=Lr(e[n].rawIn,e[i].rawIn,e[0].$);o instanceof ee||(t||Gj(e[n],e[i]),o.equals(e[n].rawIn)?r[n]=!!t:o.equals(e[i].rawIn)&&(r[i]=!1))}return e.filter((n,i)=>r[i])},Gj=(e,t)=>{!e.includesTransform&&!t.includesTransform||(Bi(e.shallowMorphs,t.shallowMorphs)||q(Am(e.expression,t.expression)),Bi(e.flatMorphs,t.flatMorphs,{isEqual:(r,n)=>{var i,o;return r.propString===n.propString&&(r.node.hasKind("morph")&&n.node.hasKind("morph")?r.node.hasEqualMorphs(n.node):r.node.hasKind("intersection")&&n.node.hasKind("intersection")?((i=r.node.structure)==null?void 0:i.structuralMorphRef)===((o=n.node.structure)==null?void 0:o.structuralMorphRef):!1)}})||q(Am(e.expression,t.expression)))},Om=(e,t)=>e.transform((r,n)=>r==="domain"||r==="unit"?null:n,{shouldTransform:(r,n)=>{const i=Fg(n.path);return t.optionallyChainedPropString.startsWith(i)?r.hasKind("domain")&&r.domain==="object"||(r.hasKind("domain")||t.kind==="unit")&&i===t.optionallyChainedPropString?!0:r.children.length!==0&&r.kind!=="index":!1}}),Am=(e,t)=>`An unordered union of a type including a morph and a type with overlapping input is indeterminate:
Left: ${e}
Right: ${t}`,Yj=(e,t)=>`The intersection of two ordered unions is indeterminate:
Left: ${e}
Right: ${t}`,Zj=qe({kind:"unit",hasAssociatedError:!0,keys:{unit:{preserveUndefined:!0,serialize:e=>e instanceof Date?e.toISOString():Hn(e)}},normalize:e=>e,defaults:{description:e=>we(e.unit),problem:({expected:e,actual:t})=>`${e===t?`must be reference equal to ${e} (serialized to the same value)`:`must be ${e} (was ${t})`}`},intersections:{unit:(e,t)=>ee.init("unit",e,t),...$o("unit",(e,t)=>{if(t.allows(e.unit))return e;const r=t.hasKind("intersection")?t.basis:t;if(r){const n=r.hasKind("domain")?r:V.intrinsic.object;if(e.domain!==n.domain){const i=e.domain==="undefined"||e.domain==="null"||e.domain==="boolean"?e.domain:V.intrinsic[e.domain];return ee.init("domain",i,n)}}return ee.init("assignability",e,t.hasKind("intersection")?t.children.find(n=>!n.allows(e.unit)):t)})}});class Xj extends hd{constructor(){super(...arguments);b(this,"compiledValue",this.json.unit);b(this,"serializedValue",typeof this.unit=="string"||this.unit instanceof Date?JSON.stringify(this.compiledValue):`${this.compiledValue}`);b(this,"compiledCondition",_m(this.unit,this.serializedValue));b(this,"compiledNegation",_m(this.unit,this.serializedValue,"negated"));b(this,"expression",we(this.unit));b(this,"domain",or(this.unit));b(this,"traverseAllows",this.unit instanceof Date?r=>r instanceof Date&&r.toISOString()===this.compiledValue:Number.isNaN(this.unit)?r=>Number.isNaN(r):r=>r===this.unit)}get defaultShortDescription(){return this.domain==="object"?_r.object:this.description}innerToJsonSchema(r){return this.unit===null?{type:"null"}:V.intrinsic.jsonPrimitive.allows(this.unit)?{const:this.unit}:r.fallback.unit({code:"unit",base:{},unit:this.unit})}}const Bg={implementation:Zj,Node:Xj},_m=(e,t,r)=>{if(e instanceof Date){const n=`data instanceof Date && data.toISOString() === ${t}`;return r?`!(${n})`:n}return Number.isNaN(e)?`${r?"!":""}Number.isNaN(data)`:`data ${r?"!":"="}== ${t}`},eI=qe({kind:"index",hasAssociatedError:!1,intersectionIsOpen:!0,keys:{signature:{child:!0,parse:(e,t)=>{const r=t.$.parseSchema(e);if(!r.extends(V.intrinsic.key))return q(nI(r.expression));const n=r.branches.filter(i=>i.hasKind("unit"));return n.length?q(rI(n.map(i=>we(i.unit)))):r}},value:{child:!0,parse:(e,t)=>t.$.parseSchema(e)}},normalize:e=>e,defaults:{description:e=>`[${e.signature.expression}]: ${e.value.description}`},intersections:{index:(e,t,r)=>{if(e.signature.equals(t.signature)){const n=tt(e.value,t.value,r),i=n instanceof ee?V.intrinsic.never.internal:n;return r.$.node("index",{signature:e.signature,value:i})}return e.signature.extends(t.signature)&&e.value.subsumes(t.value)?t:t.signature.extends(e.signature)&&t.value.subsumes(e.value)?e:null}}});class tI extends Gi{constructor(){super(...arguments);b(this,"impliedBasis",V.intrinsic.object.internal);b(this,"expression",`[${this.signature.expression}]: ${this.value.expression}`);b(this,"flatRefs",ke(this.value.flatRefs.map(r=>nn([this.signature,...r.path],r.node)),nn([this.signature],this.value)));b(this,"traverseAllows",(r,n)=>Ha(r).every(i=>this.signature.traverseAllows(i[0],n)?Tr(i[0],()=>this.value.traverseAllows(i[1],n),n):!0));b(this,"traverseApply",(r,n)=>{for(const i of Ha(r))this.signature.traverseAllows(i[0],n)&&Tr(i[0],()=>this.value.traverseApply(i[1],n),n)})}_transform(r,n){n.path.push(this.signature);const i=super._transform(r,n);return n.path.pop(),i}compile(){}}const qg={implementation:eI,Node:tI},rI=e=>`Index keys ${e.join(", ")} should be specified as named props.`,nI=e=>`Indexed key definition '${e}' must be a string or symbol`,iI=qe({kind:"required",hasAssociatedError:!0,intersectionIsOpen:!0,keys:{key:{},value:{child:!0,parse:(e,t)=>t.$.parseSchema(e)}},normalize:e=>e,defaults:{description:e=>`${e.compiledKey}: ${e.value.description}`,expected:e=>e.missingValueDescription,actual:()=>"missing"},intersections:{required:Zc,optional:Zc}});class sI extends Og{constructor(){super(...arguments);b(this,"expression",`${this.compiledKey}: ${this.value.expression}`);b(this,"errorContext",Object.freeze({code:"required",missingValueDescription:this.value.defaultShortDescription,relativePath:[this.key],meta:this.meta}));b(this,"compiledErrorContext",xu(this.errorContext))}}const Ug={implementation:iI,Node:sI},oI=qe({kind:"sequence",hasAssociatedError:!1,collapsibleKey:"variadic",keys:{prefix:{child:!0,parse:(e,t)=>{if(e.length!==0)return e.map(r=>t.$.parseSchema(r))}},optionals:{child:!0,parse:(e,t)=>{if(e.length!==0)return e.map(r=>t.$.parseSchema(r))}},defaultables:{child:e=>e.map(t=>t[0]),parse:(e,t)=>{if(e.length!==0)return e.map(r=>{const n=t.$.parseSchema(r[0]);return dd(n,r[1],null),[n,r[1]]})},serialize:e=>e.map(t=>[t[0].collapsibleJson,Hn(t[1])]),reduceIo:(e,t,r)=>{if(e==="in"){t.optionals=r.map(n=>n[0].rawIn);return}t.prefix=r.map(n=>n[0].rawOut)}},variadic:{child:!0,parse:(e,t)=>t.$.parseSchema(e,t)},minVariadicLength:{parse:e=>e===0?void 0:e},postfix:{child:!0,parse:(e,t)=>{if(e.length!==0)return e.map(r=>t.$.parseSchema(r))}}},normalize:e=>{var t,r,n;if(typeof e=="string")return{variadic:e};if("variadic"in e||"prefix"in e||"defaultables"in e||"optionals"in e||"postfix"in e||"minVariadicLength"in e){if((t=e.postfix)!=null&&t.length){if(!e.variadic)return q(cI);if((r=e.optionals)!=null&&r.length||(n=e.defaultables)!=null&&n.length)return q(Qg)}return e.minVariadicLength&&!e.variadic?q("minVariadicLength may not be specified without a variadic element"):e}return{variadic:e}},reduce:(e,t)=>{var d,h,m,g,c,v,E;let r=e.minVariadicLength??0;const n=((d=e.prefix)==null?void 0:d.slice())??[],i=((h=e.defaultables)==null?void 0:h.slice())??[],o=((m=e.optionals)==null?void 0:m.slice())??[],u=((g=e.postfix)==null?void 0:g.slice())??[];if(e.variadic){for(;(c=o[o.length-1])!=null&&c.equals(e.variadic);)o.pop();if(o.length===0&&i.length===0)for(;(v=n[n.length-1])!=null&&v.equals(e.variadic);)n.pop(),r++;for(;(E=u[0])!=null&&E.equals(e.variadic);)u.shift(),r++}else o.length===0&&i.length===0&&n.push(...u.splice(0));if(r!==e.minVariadicLength||e.prefix&&e.prefix.length!==n.length)return t.node("sequence",{...e,prefix:n,defaultables:i,optionals:o,postfix:u,minVariadicLength:r},{prereduced:!0})},defaults:{description:e=>e.isVariadicOnly?`${e.variadic.nestableExpression}[]`:`[${e.tuple.map(r=>r.kind==="defaultables"?`${r.node.nestableExpression} = ${we(r.default)}`:r.kind==="optionals"?`${r.node.nestableExpression}?`:r.kind==="variadic"?`...${r.node.nestableExpression}[]`:r.node.expression).join(", ")}]`},intersections:{sequence:(e,t,r)=>{const n=Ns({l:e.tuple,r:t.tuple,disjoint:new ee,result:[],fixedVariants:[],ctx:r}),i=n.disjoint.length===0?[n,...n.fixedVariants]:n.fixedVariants;return i.length===0?n.disjoint:i.length===1?r.$.node("sequence",Rm(i[0].result)):r.$.node("union",i.map(o=>({proto:Array,sequence:Rm(o.result)})))}}});var w$,k$,S$,x$;class aI extends Gi{constructor(){super(...arguments);b(this,"impliedBasis",V.intrinsic.Array.internal);b(this,"tuple",lI(this.inner));b(this,"prefixLength",((w$=this.prefix)==null?void 0:w$.length)??0);b(this,"defaultablesLength",((k$=this.defaultables)==null?void 0:k$.length)??0);b(this,"optionalsLength",((S$=this.optionals)==null?void 0:S$.length)??0);b(this,"postfixLength",((x$=this.postfix)==null?void 0:x$.length)??0);b(this,"defaultablesAndOptionals",[]);b(this,"prevariadic",this.tuple.filter(r=>r.kind==="defaultables"||r.kind==="optionals"?(this.defaultablesAndOptionals.push(r.node),!0):r.kind==="prefix"));b(this,"variadicOrPostfix",Fn(this.variadic&&[this.variadic],this.postfix));b(this,"flatRefs",this.addFlatRefs());b(this,"isVariadicOnly",this.prevariadic.length+this.postfixLength===0);b(this,"minVariadicLength",this.inner.minVariadicLength??0);b(this,"minLength",this.prefixLength+this.minVariadicLength+this.postfixLength);b(this,"minLengthNode",this.minLength===0?null:this.$.node("minLength",this.minLength));b(this,"maxLength",this.variadic?null:this.tuple.length);b(this,"maxLengthNode",this.maxLength===null?null:this.$.node("maxLength",this.maxLength));b(this,"impliedSiblings",this.minLengthNode?this.maxLengthNode?[this.minLengthNode,this.maxLengthNode]:[this.minLengthNode]:this.maxLengthNode?[this.maxLengthNode]:[]);b(this,"defaultValueMorphs",uI(this));b(this,"defaultValueMorphsReference",this.defaultValueMorphs.length?gt(this.defaultValueMorphs):void 0);b(this,"traverseAllows",(r,n)=>{for(let i=0;i<r.length;i++)if(!this.elementAtIndex(r,i).node.traverseAllows(r[i],n))return!1;return!0});b(this,"traverseApply",(r,n)=>{let i=0;for(;i<r.length;i++)Tr(i,()=>this.elementAtIndex(r,i).node.traverseApply(r[i],n),n)});b(this,"expression",this.description)}addFlatRefs(){return xm(this.flatRefs,this.prevariadic.flatMap((r,n)=>ke(r.node.flatRefs.map(i=>nn([`${n}`,...i.path],i.node)),nn([`${n}`],r.node)))),xm(this.flatRefs,this.variadicOrPostfix.flatMap(r=>ke(r.flatRefs.map(n=>nn([V.intrinsic.nonNegativeIntegerString.internal,...n.path],n.node)),nn([V.intrinsic.nonNegativeIntegerString.internal],r)))),this.flatRefs}elementAtIndex(r,n){if(n<this.prevariadic.length)return this.tuple[n];const i=r.length-this.postfixLength;return n>=i?{kind:"postfix",node:this.postfix[n-i]}:{kind:"variadic",node:this.variadic??Ve(`Unexpected attempt to access index ${n} on ${this}`)}}get element(){return this.cacheGetter("element",this.$.node("union",this.children))}compile(r){if(this.prefix)for(const[n,i]of this.prefix.entries())r.traverseKey(`${n}`,`data[${n}]`,i);for(const[n,i]of this.defaultablesAndOptionals.entries()){const o=`${n+this.prefixLength}`;r.if(`${o} >= data.length`,()=>r.traversalKind==="Allows"?r.return(!0):r.return()),r.traverseKey(o,`data[${o}]`,i)}if(this.variadic&&(this.postfix&&r.const("firstPostfixIndex",`data.length${this.postfix?`- ${this.postfix.length}`:""}`),r.for(`i < ${this.postfix?"firstPostfixIndex":"data.length"}`,()=>r.traverseKey("i","data[i]",this.variadic),this.prevariadic.length),this.postfix))for(const[n,i]of this.postfix.entries()){const o=`firstPostfixIndex + ${n}`;r.traverseKey(o,`data[${o}]`,i)}r.traversalKind==="Allows"&&r.return(!0)}_transform(r,n){n.path.push(V.intrinsic.nonNegativeIntegerString.internal);const i=super._transform(r,n);return n.path.pop(),i}reduceJsonSchema(r,n){const i=n.target==="draft-07";if(this.prevariadic.length){const o=this.prevariadic.map(u=>{const d=u.node.toJsonSchemaRecurse(n);if(u.kind==="defaultables"){const h=typeof u.default=="function"?u.default():u.default;d.default=V.intrinsic.jsonData.allows(h)?h:n.fallback.defaultValue({code:"defaultValue",base:d,value:h})}return d});i?r.items=o:r.prefixItems=o}if(this.minLength&&(r.minItems=this.minLength),this.variadic){const o=this.variadic.toJsonSchemaRecurse(n);if(i&&this.prevariadic.length?r.additionalItems=o:r.items=o,this.maxLength&&(r.maxItems=this.maxLength),this.postfix){const u=this.postfix.map(d=>d.toJsonSchemaRecurse(n));r=n.fallback.arrayPostfix({code:"arrayPostfix",base:r,elements:u})}}else i?r.additionalItems=!1:r.items=!1,delete r.maxItems;return r}}const ql={},uI=e=>{if(!e.defaultables)return[];const t=[];let r="[";const n=e.prefixLength+e.defaultablesLength-1;for(let i=e.prefixLength;i<=n;i++){const[o,u]=e.defaultables[i-e.prefixLength];t.push(_g(i,o,u)),r+=`${i}: ${o.id} = ${Hn(u)}, `}return r+="]",ql[r]??(ql[r]=t)},Kg={implementation:oI,Node:aI},lI=e=>{const t=[];if(e.prefix)for(const r of e.prefix)t.push({kind:"prefix",node:r});if(e.defaultables)for(const[r,n]of e.defaultables)t.push({kind:"defaultables",node:r,default:n});if(e.optionals)for(const r of e.optionals)t.push({kind:"optionals",node:r});if(e.variadic&&t.push({kind:"variadic",node:e.variadic}),e.postfix)for(const r of e.postfix)t.push({kind:"postfix",node:r});return t},Rm=e=>e.reduce((t,r)=>(r.kind==="variadic"?t.variadic=r.node:r.kind==="defaultables"?t.defaultables=ke(t.defaultables,[[r.node,r.default]]):t[r.kind]=ke(t[r.kind],r.node),t),{}),Qg="A postfix required element cannot follow an optional or defaultable element",cI="A postfix element requires a variadic element",Ns=e=>{var c,v;const[t,...r]=e.l,[n,...i]=e.r;if(!t||!n)return e;const o=((c=r[r.length-1])==null?void 0:c.kind)==="postfix",u=((v=i[i.length-1])==null?void 0:v.kind)==="postfix",d=t.kind==="prefix"||n.kind==="prefix"?"prefix":t.kind==="postfix"||n.kind==="postfix"?"postfix":t.kind==="variadic"&&n.kind==="variadic"?"variadic":o||u?"prefix":t.kind==="defaultables"||n.kind==="defaultables"?"defaultables":"optionals";if(t.kind==="prefix"&&n.kind==="variadic"&&u){const E=Ns({...e,fixedVariants:[],r:i.map(C=>({...C,kind:"prefix"}))});E.disjoint.length===0&&e.fixedVariants.push(E)}else if(n.kind==="prefix"&&t.kind==="variadic"&&o){const E=Ns({...e,fixedVariants:[],l:r.map(C=>({...C,kind:"prefix"}))});E.disjoint.length===0&&e.fixedVariants.push(E)}const h=tt(t.node,n.node,e.ctx);if(h instanceof ee)if(d==="prefix"||d==="postfix")e.disjoint.push(...h.withPrefixKey(d==="prefix"?e.result.length:`-${r.length+1}`,Tm(t)&&Tm(n)?"required":"optional")),e.result=[...e.result,{kind:d,node:V.intrinsic.never.internal}];else return d==="optionals"||d==="defaultables"?e:Ns({...e,fixedVariants:[],l:r.map(E=>({...E,kind:"prefix"})),r:r.map(E=>({...E,kind:"prefix"}))});else d==="defaultables"?(t.kind==="defaultables"&&n.kind==="defaultables"&&t.default!==n.default&&q(Ag(t.default,n.default)),e.result=[...e.result,{kind:d,node:h,default:t.kind==="defaultables"?t.default:n.kind==="defaultables"?n.default:Ve(`Unexpected defaultable intersection from ${t.kind} and ${n.kind} elements.`)}]):e.result=[...e.result,{kind:d,node:h}];const m=e.l.length,g=e.r.length;return(t.kind!=="variadic"||m>=g&&(n.kind==="variadic"||g===1))&&(e.l=r),(n.kind!=="variadic"||g>=m&&(t.kind==="variadic"||m===1))&&(e.r=i),Ns(e)},Tm=e=>e.kind==="prefix"||e.kind==="postfix",Jg=e=>t=>{var r,n;if(t.props.length||t.index){const i=((r=t.index)==null?void 0:r.map(u=>u[e]))??[];for(const u of t.props)i.push(u[e]);t.undeclared&&i.push(`+ (undeclared): ${t.undeclared}`);const o=`{ ${i.join(", ")} }`;return t.sequence?`${o} & ${t.sequence.description}`:o}return((n=t.sequence)==null?void 0:n.description)??"{}"},fI=Jg("description"),dI=Jg("expression"),Lm=(e,t,r)=>{const n=e.required?"required":"optional";if(!t.signature.allows(e.key))return null;const i=Lr(e.value,t.value,r);return i instanceof ee?n==="optional"?r.node("optional",{key:e.key,value:V.intrinsic.never.internal}):i.withPrefixKey(e.key,e.kind):null},pI=qe({kind:"structure",hasAssociatedError:!1,normalize:e=>e,applyConfig:(e,t)=>!e.undeclared&&t.onUndeclaredKey!=="ignore"?{...e,undeclared:t.onUndeclaredKey}:e,keys:{required:{child:!0,parse:St("required"),reduceIo:(e,t,r)=>{t.required=ke(t.required,r.map(n=>e==="in"?n.rawIn:n.rawOut))}},optional:{child:!0,parse:St("optional"),reduceIo:(e,t,r)=>{if(e==="in"){t.optional=r.map(n=>n.rawIn);return}for(const n of r)t[n.outProp.kind]=ke(t[n.outProp.kind],n.outProp.rawOut)}},index:{child:!0,parse:St("index")},sequence:{child:!0,parse:St("sequence")},undeclared:{parse:e=>e==="ignore"?void 0:e,reduceIo:(e,t,r)=>{if(r==="reject"){t.undeclared="reject";return}e==="in"?delete t.undeclared:t.undeclared="reject"}}},defaults:{description:fI},intersections:{structure:(e,t,r)=>{const n={...e.inner},i={...t.inner},o=new ee;if(e.undeclared){const h=e.keyof();for(const m of t.requiredKeys)h.allows(m)||o.add("presence",V.intrinsic.never.internal,t.propsByKey[m].value,{path:[m]});i.optional&&(i.optional=i.optional.filter(m=>h.allows(m.key))),i.index&&(i.index=i.index.flatMap(m=>{if(m.signature.extends(h))return m;const g=Lr(h,m.signature,r.$);if(g instanceof ee)return[];const c=Xc(g,m.value,r.$);return c.required&&(i.required=Fn(i.required,c.required)),c.optional&&(i.optional=Fn(i.optional,c.optional)),c.index??[]}))}if(t.undeclared){const h=t.keyof();for(const m of e.requiredKeys)h.allows(m)||o.add("presence",e.propsByKey[m].value,V.intrinsic.never.internal,{path:[m]});n.optional&&(n.optional=n.optional.filter(m=>h.allows(m.key))),n.index&&(n.index=n.index.flatMap(m=>{if(m.signature.extends(h))return m;const g=Lr(h,m.signature,r.$);if(g instanceof ee)return[];const c=Xc(g,m.value,r.$);return c.required&&(n.required=Fn(n.required,c.required)),c.optional&&(n.optional=Fn(n.optional,c.optional)),c.index??[]}))}const u={};(e.undeclared||t.undeclared)&&(u.undeclared=e.undeclared==="reject"||t.undeclared==="reject"?"reject":"delete");const d=Za({kind:"structure",baseInner:u,l:Xa(n),r:Xa(i),roots:[],ctx:r});return d instanceof ee&&o.push(...d),o.length?o:d}},reduce:(e,t)=>{if(!e.required&&!e.optional)return;const r={};let n=!1;const i=e.optional?[...e.optional]:[];if(e.required)for(let o=0;o<e.required.length;o++){const u=e.required[o];if(u.key in r&&q(zm(u.key)),r[u.key]=!0,e.index)for(const d of e.index){const h=Lm(u,d,t);if(h instanceof ee)return h}}if(e.optional)for(let o=0;o<e.optional.length;o++){const u=e.optional[o];if(u.key in r&&q(zm(u.key)),r[u.key]=!0,e.index)for(const d of e.index){const h=Lm(u,d,t);if(h instanceof ee)return h;h!==null&&(i[o]=h,n=!0)}}if(n)return t.node("structure",{...e,optional:i},{prereduced:!0})}});var D$,C$;class hI extends Gi{constructor(){super(...arguments);b(this,"impliedBasis",V.intrinsic.object.internal);b(this,"impliedSiblings",this.children.flatMap(r=>r.impliedSiblings??[]));b(this,"props",Fn(this.required,this.optional));b(this,"propsByKey",Se(this.props,(r,n)=>[n.key,n]));b(this,"propsByKeyReference",gt(this.propsByKey));b(this,"expression",dI(this));b(this,"requiredKeys",((D$=this.required)==null?void 0:D$.map(r=>r.key))??[]);b(this,"optionalKeys",((C$=this.optional)==null?void 0:C$.map(r=>r.key))??[]);b(this,"literalKeys",[...this.requiredKeys,...this.optionalKeys]);b(this,"_keyof");b(this,"traverseAllows",(r,n)=>this._traverse("Allows",r,n));b(this,"traverseApply",(r,n)=>this._traverse("Apply",r,n));b(this,"_traverse",(r,n,i)=>{const o=(i==null?void 0:i.currentErrorCount)??0;for(let u=0;u<this.props.length;u++)if(r==="Allows"){if(!this.props[u].traverseAllows(n,i))return!1}else if(this.props[u].traverseApply(n,i),i.failFast&&i.currentErrorCount>o)return!1;if(this.sequence){if(r==="Allows"){if(!this.sequence.traverseAllows(n,i))return!1}else if(this.sequence.traverseApply(n,i),i.failFast&&i.currentErrorCount>o)return!1}if(this.index||this.undeclared==="reject"){const u=Object.keys(n);u.push(...Object.getOwnPropertySymbols(n));for(let d=0;d<u.length;d++){const h=u[d];if(this.index){for(const m of this.index)if(m.signature.traverseAllows(h,i)){if(r==="Allows"){if(!Tr(h,()=>m.value.traverseAllows(n[h],i),i))return!1}else if(Tr(h,()=>m.value.traverseApply(n[h],i),i),i.failFast&&i.currentErrorCount>o)return!1}}if(this.undeclared==="reject"&&!this.declaresKey(h)&&(r==="Allows"||(i.errorFromNodeContext({code:"predicate",expected:"removed",actual:"",relativePath:[h],meta:this.meta}),i.failFast)))return!1}}return this.structuralMorph&&i&&!i.hasError()&&i.queueMorphs([this.structuralMorph]),!0});b(this,"declaresKey",r=>{var n;return r in this.propsByKey||((n=this.index)==null?void 0:n.some(i=>i.signature.allows(r)))||this.sequence!==void 0&&V.intrinsic.nonNegativeIntegerString.allows(r)});b(this,"structuralMorphRef",this.structuralMorph&&gt(this.structuralMorph))}keyof(){if(this._keyof)return this._keyof;let r=this.$.units(this.literalKeys).branches;if(this.index)for(const{signature:n}of this.index)r=r.concat(n.branches);return this._keyof=this.$.node("union",r)}map(r){return this.$.node("structure",this.props.flatMap(r).reduce((n,i)=>{const o=this.propsByKey[i.key];if(vt(i))return i.kind!=="required"&&i.kind!=="optional"?q(`Map result must have kind "required" or "optional" (was ${i.kind})`):(n[i.kind]=ke(n[i.kind],i),n);const u=i.kind??(o==null?void 0:o.kind)??"required",d=Se(i,(h,m)=>h in fd.implementation.keys?[h,m]:[]);return n[u]=ke(n[u],this.$.node(u,d)),n},{}))}assertHasKeys(r){const n=r.filter(i=>!ua(i,this.keyof()));if(n.length)return q(Fm(this.expression,n))}get(r,...n){var h;let i,o=!1;const u=yI(r);if((typeof u=="string"||typeof u=="symbol")&&this.propsByKey[u]&&(i=this.propsByKey[u].value,o=this.propsByKey[u].required),this.index)for(const m of this.index)ua(u,m.signature)&&(i=(i==null?void 0:i.and(m.value))??m.value);if(this.sequence&&ua(u,V.intrinsic.nonNegativeIntegerString))if(ne(u,"root"))this.sequence.variadic&&(i=(i==null?void 0:i.and(this.sequence.element))??this.sequence.element);else{const m=Number.parseInt(u);if(m<this.sequence.prevariadic.length){const g=this.sequence.prevariadic[m].node;i=(i==null?void 0:i.and(g))??g,o||(o=m<this.sequence.prefixLength)}else if(this.sequence.variadic){const g=this.$.node("union",this.sequence.variadicOrPostfix);i=(i==null?void 0:i.and(g))??g}}if(!i)return(h=this.sequence)!=null&&h.variadic&&ne(u,"root")&&u.extends(V.intrinsic.number)?q(gI(u.expression,this.sequence.expression)):q(Fm(this.expression,[u]));const d=i.get(...n);return o?d:d.or(V.intrinsic.undefined)}pick(...r){return this.assertHasKeys(r),this.$.node("structure",this.filterKeys("pick",r))}omit(...r){return this.assertHasKeys(r),this.$.node("structure",this.filterKeys("omit",r))}optionalize(){const{required:r,...n}=this.inner;return this.$.node("structure",{...n,optional:this.props.map(i=>i.hasKind("required")?this.$.node("optional",i.inner):i)})}require(){const{optional:r,...n}=this.inner;return this.$.node("structure",{...n,required:this.props.map(i=>i.hasKind("optional")?{key:i.key,value:i.value}:i)})}merge(r){const n=this.filterKeys("omit",[r.keyof()]);return r.required&&(n.required=ke(n.required,r.required)),r.optional&&(n.optional=ke(n.optional,r.optional)),r.index&&(n.index=ke(n.index,r.index)),r.sequence&&(n.sequence=r.sequence),r.undeclared?n.undeclared=r.undeclared:delete n.undeclared,this.$.node("structure",n)}filterKeys(r,n){const i=ag(this.inner),o=u=>{const d=n.some(h=>ua(u,h));return r==="pick"?d:!d};return i.required&&(i.required=i.required.filter(u=>o(u.key))),i.optional&&(i.optional=i.optional.filter(u=>o(u.key))),i.index&&(i.index=i.index.filter(u=>o(u.signature))),i}get defaultable(){var r;return this.cacheGetter("defaultable",((r=this.optional)==null?void 0:r.filter(n=>n.hasDefault()))??[])}_compileDeclaresKey(r){const n=[];if(this.props.length&&n.push(`k in ${this.propsByKeyReference}`),this.index)for(const i of this.index)n.push(r.invoke(i.signature,{kind:"Allows",arg:"k"}));return this.sequence&&n.push("$ark.intrinsic.nonNegativeIntegerString.allows(k)"),n.join(" || ")||"false"}get structuralMorph(){return this.cacheGetter("structuralMorph",$I(this))}compile(r){r.traversalKind==="Apply"&&r.initializeErrorCount();for(const n of this.props)r.check(n),r.traversalKind==="Apply"&&r.returnIfFailFast();if(this.sequence&&(r.check(this.sequence),r.traversalKind==="Apply"&&r.returnIfFailFast()),(this.index||this.undeclared==="reject")&&(r.const("keys","Object.keys(data)"),r.line("keys.push(...Object.getOwnPropertySymbols(data))"),r.for("i < keys.length",()=>this.compileExhaustiveEntry(r))),r.traversalKind==="Allows")return r.return(!0);this.structuralMorphRef&&r.if("ctx && !ctx.hasError()",()=>(r.line("ctx.queueMorphs(["),vI(r,this),r.line("])")))}compileExhaustiveEntry(r){if(r.const("k","keys[i]"),this.index)for(const n of this.index)r.if(`${r.invoke(n.signature,{arg:"k",kind:"Allows"})}`,()=>r.traverseKey("k","data[k]",n.value));return this.undeclared==="reject"&&r.if(`!(${this._compileDeclaresKey(r)})`,()=>r.traversalKind==="Allows"?r.return(!1):r.line(`ctx.errorFromNodeContext({ code: "predicate", expected: "removed", actual: "", relativePath: [k], meta: ${this.compiledMeta} })`).if("ctx.failFast",()=>r.return())),r}reduceJsonSchema(r,n){var i;switch(r.type){case"object":return this.reduceObjectJsonSchema(r,n);case"array":const o=((i=this.sequence)==null?void 0:i.reduceJsonSchema(r,n))??r;return this.props.length||this.index?n.fallback.arrayObject({code:"arrayObject",base:o,object:this.reduceObjectJsonSchema({type:"object"},n)}):o;default:return He.throwInternalOperandError("structure",r)}}reduceObjectJsonSchema(r,n){if(this.props.length){r.properties={};for(const i of this.props){const o=i.value.toJsonSchemaRecurse(n);if(typeof i.key=="symbol"){n.fallback.symbolKey({code:"symbolKey",base:r,key:i.key,value:o,optional:i.optional});continue}if(i.hasDefault()){const u=typeof i.default=="function"?i.default():i.default;o.default=V.intrinsic.jsonData.allows(u)?u:n.fallback.defaultValue({code:"defaultValue",base:o,value:u})}r.properties[i.key]=o}this.requiredKeys.length&&r.properties&&(r.required=this.requiredKeys.filter(i=>typeof i=="string"&&i in r.properties))}if(this.index)for(const i of this.index){const o=i.value.toJsonSchemaRecurse(n);if(i.signature.equals(V.intrinsic.string)){r.additionalProperties=o;continue}for(const u of i.signature.branches){if(!u.extends(V.intrinsic.string)){r=n.fallback.symbolKey({code:"symbolKey",base:r,key:null,value:o,optional:!1});continue}let d={type:"string"};if(u.hasKind("morph")&&(d=n.fallback.morph({code:"morph",base:u.rawIn.toJsonSchemaRecurse(n),out:u.rawOut.toJsonSchemaRecurse(n)})),!u.hasKind("intersection"))return Ve(`Unexpected index branch kind ${u.kind}.`);const{pattern:h}=u.inner;if(h){const m=Object.assign(d,{pattern:h[0].rule});for(let g=1;g<h.length;g++)d=n.fallback.patternIntersection({code:"patternIntersection",base:m,pattern:h[g].rule});r.patternProperties??(r.patternProperties={}),r.patternProperties[m.pattern]=o}}}return this.undeclared&&!r.additionalProperties&&(r.additionalProperties=!1),r}}const Ul={},mI=e=>{var r,n;let t="";for(let i=0;i<e.defaultable.length;i++)t+=e.defaultable[i].defaultValueMorphRef;if((r=e.sequence)!=null&&r.defaultValueMorphsReference&&(t+=(n=e.sequence)==null?void 0:n.defaultValueMorphsReference),e.undeclared==="delete"){if(t+="delete !(",e.required)for(const i of e.required)t+=i.compiledKey+" | ";if(e.optional)for(const i of e.optional)t+=i.compiledKey+" | ";if(e.index)for(const i of e.index)t+=i.signature.id+" | ";if(e.sequence)if(e.sequence.maxLength===null)t+=ie.nonNegativeIntegerString.id;else for(let i=0;i<e.sequence.tuple.length;i++)t+=i+" | ";t+=")"}return t},$I=e=>{const t=mI(e);if(!t)return;if(Ul[t])return Ul[t];const r=(n,i)=>{var o;for(let u=0;u<e.defaultable.length;u++)e.defaultable[u].key in n||e.defaultable[u].defaultValueMorph(n,i);if((o=e.sequence)!=null&&o.defaultables)for(let u=n.length-e.sequence.prefixLength;u<e.sequence.defaultables.length;u++)e.sequence.defaultValueMorphs[u](n,i);if(e.undeclared==="delete")for(const u in n)e.declaresKey(u)||delete n[u];return n};return Ul[t]=r},vI=(e,t)=>{var i;const n=`(data${t.defaultable.some(o=>o.defaultValueMorph.length===2)||((i=t.sequence)==null?void 0:i.defaultValueMorphs.some(o=>o.length===2))?", ctx":""})`;return e.block(`${n} => `,o=>{var u;for(let d=0;d<t.defaultable.length;d++){const{serializedKey:h,defaultValueMorphRef:m}=t.defaultable[d];o.if(`!(${h} in data)`,g=>g.line(`${m}${n}`))}return(u=t.sequence)!=null&&u.defaultables&&o.for(`i < ${t.sequence.defaultables.length}`,d=>d.set("data[i]",5),`data.length - ${t.sequence.prefixLength}`),t.undeclared==="delete"&&o.forIn("data",d=>d.if(`!(${t._compileDeclaresKey(d)})`,h=>h.line("delete data[k]"))),o.return("data")})},Vg={implementation:pI,Node:hI},yI=e=>(ne(e,"root")&&e.hasKind("unit")&&(e=e.unit),typeof e=="number"&&(e=`${e}`),e),gI=(e,t)=>`${e} is not allowed as an array index on ${t}. Use the 'nonNegativeIntegerString' keyword instead.`,Xc=(e,t,r)=>{const[n,i]=mN(e.branches,u=>u.hasKind("unit"));if(!n.length)return{index:r.node("index",{signature:e,value:t})};const o={};for(const u of n){const d=r.node("required",{key:u.unit,value:t});o[d.kind]=ke(o[d.kind],d)}return i.length&&(o.index=r.node("index",{signature:i,value:t})),o},bI=e=>ne(e,"root")?e.expression:we(e),Fm=(e,t)=>`Key${t.length===1?"":"s"} ${t.map(bI).join(", ")} ${t.length===1?"does":"do"} not exist on ${e}`,zm=e=>`Duplicate key ${Wi(e)}`,Cu={...lj,alias:pd.implementation,domain:md.implementation,unit:Bg.implementation,proto:tu.implementation,union:zg.implementation,morph:Lg.implementation,intersection:Tg.implementation,divisor:yg.implementation,pattern:Ig.implementation,predicate:vg.implementation,required:Ug.implementation,optional:fd.implementation,index:qg.implementation,sequence:Kg.implementation,structure:Vg.implementation};V.defaultConfig=NN(Object.assign(Se(Cu,(e,t)=>[e,t.defaults]),{jitless:TN(),clone:AN,onUndeclaredKey:"ignore",exactOptionalPropertyTypes:!0,numberAllowsNaN:!1,dateAllowsInvalid:!1,onFail:null,keywords:{},toJsonSchema:He.defaultConfig}));V.resolvedConfig=Hc(V.defaultConfig,V.config);const wI={...cj,alias:pd.Node,domain:md.Node,unit:Bg.Node,proto:tu.Node,union:zg.Node,morph:Lg.Node,intersection:Tg.Node,divisor:yg.Node,pattern:Ig.Node,predicate:vg.Node,required:Ug.Node,optional:fd.Node,index:qg.Node,sequence:Kg.Node,structure:Vg.Node};class ef extends SN{get[Rr](){return"module"}}const Hg=(e,t)=>new ef(Se(e,(r,n)=>[r,ne(n,"module")?Hg(n,t):t.bindReference(n)])),kI=e=>mt(e)?e:"branches"in e&&mt(e.branches)?e.branches:void 0,SI=(e,t)=>q(`Node of kind ${t} is not valid as a ${e} definition`),Bm=e=>`#${e} duplicates public alias ${e}`,Kl={};V.ambient??(V.ambient={});let qm;const Wg="function $",xI=e=>Gg(e,Yg(e)),Gg=(e,t)=>{const r=t.write(Wg,4),n=t.compile()();for(const i of e)i.precompilation||(i.traverseAllows=n[`${i.id}Allows`].bind(n),i.isRoot()&&!i.allowsRequiresContext&&(i.allows=i.traverseAllows),i.traverseApply=n[`${i.id}Apply`].bind(n),n[`${i.id}Optimistic`]&&(i.traverseOptimistic=n[`${i.id}Optimistic`].bind(n)),i.precompilation=r)},Yg=e=>new ig().return(e.reduce((t,r)=>{const n=new Fl({kind:"Allows"}).indent();r.compile(n);const i=n.write(`${r.id}Allows`),o=new Fl({kind:"Apply"}).indent();r.compile(o);const u=o.write(`${r.id}Apply`),d=`${t}${i},
${u},
`;if(!r.hasKind("union"))return d;const h=new Fl({kind:"Allows",optimistic:!0}).indent();r.compile(h);const m=h.write(`${r.id}Optimistic`);return`${d}${m},
`},`{
`)+"}");class Zg{constructor(t,r){b(this,"config");b(this,"resolvedConfig");b(this,"name");b(this,"referencesById",{});b(this,"references",[]);b(this,"resolutions",{});b(this,"exportedNames",[]);b(this,"aliases",{});b(this,"resolved",!1);b(this,"nodesByHash",{});b(this,"intrinsic");b(this,"_json");b(this,"generic",(...t)=>{const r=this;return(n,i)=>new eu(t,i?new $g(n):n,r,r,i??null)});b(this,"units",(t,r)=>{const n=[];for(const o of t)n.includes(o)||n.push(o);const i=n.map(o=>this.node("unit",{unit:o},r));return this.node("union",i,{...r,prereduced:!0})});b(this,"lazyResolutions",[]);b(this,"schema",(t,r)=>this.finalize(this.parseSchema(t,r)));b(this,"parseSchema",(t,r)=>this.node(Sa(t),t,r));b(this,"precompilation");b(this,"_exportedResolutions");b(this,"_exports");b(this,"node",(t,r,n={})=>{const i=this.preparseNode(t,r,n);if(vt(i))return this.bindReference(i);const o=this.createParseContext(i),u=Pg(o),d=this.bindReference(u);return zt[o.id]=d});b(this,"parse",(t,r={})=>this.finalize(this.parseDefinition(t,r)));this.config=Hc(V.config,r),this.resolvedConfig=Hc(V.resolvedConfig,r),this.name=this.resolvedConfig.name??`anonymousScope${Object.keys(Kl).length}`,this.name in Kl&&q(`A Scope already named ${this.name} already exists`),Kl[this.name]=this;const n=Object.entries(t).map(i=>this.preparseOwnAliasEntry(...i));for(const[i,o]of n){let u=i;if(i[0]==="#"?(u=i.slice(1),u in this.aliases&&q(Bm(u)),this.aliases[u]=o):(u in this.aliases&&q(Bm(i)),this.aliases[u]=o,this.exportedNames.push(u)),!ne(o,"module")&&!ne(o,"generic")&&!bu(o)){const d=this.preparseOwnDefinitionFormat(o,{alias:u});this.resolutions[u]=ne(d,"root")?this.bindReference(d):this.createParseContext(d).id}}qm??(qm=this.node("union",{branches:["string","number","object","bigint","symbol",{unit:!0},{unit:!1},{unit:void 0},{unit:null}]},{prereduced:!0})),this.nodesByHash[qm.hash]=this.node("intersection",{},{prereduced:!0}),this.intrinsic=V.intrinsic?Se(V.intrinsic,(i,o)=>i.startsWith("json")?[]:[i,this.bindReference(o)]):{}}get[Rr](){return"scope"}cacheGetter(t,r){return Object.defineProperty(this,t,{value:r}),r}get internal(){return this}get json(){return this._json||this.export(),this._json}defineSchema(t){return t}lazilyResolve(t,r){const n=this.node("alias",{reference:r??"synthetic",resolve:t},{prereduced:!0});return this.resolved||this.lazyResolutions.push(n),n}preparseNode(t,r,n){var d;let i=typeof t=="string"?t:Sa(r,t);if(vt(r)&&r.kind===i)return r;if(i==="alias"&&!(n!=null&&n.prereduced)){const{reference:h}=pd.implementation.normalize(r,this);if(h.startsWith("$")){const m=this.resolveRoot(h.slice(1));r=m,i=m.kind}}else if(i==="union"&&Yn(r,"object")){const h=kI(r);(h==null?void 0:h.length)===1&&(r=h[0],i=Sa(r))}if(vt(r)&&r.kind===i)return r;const o=Cu[i],u=((d=o.normalize)==null?void 0:d.call(o,r,this))??r;return vt(u)?u.kind===i?u:SI(i,u.kind):{...n,$:this,kind:i,def:u,prefix:n.alias??i}}bindReference(t){let r;return vt(t)?r=t.$===this?t:new t.constructor(t.attachments,this):r=t.$===this?t:new eu(t.params,t.bodyDef,t.$,this,t.hkt),this.resolved||Object.assign(this.referencesById,r.referencesById),r}resolveRoot(t){return this.maybeResolveRoot(t)??q(r0(t))}maybeResolveRoot(t){const r=this.maybeResolve(t);if(!ne(r,"generic"))return r}maybeResolveSubalias(t){return tf(this.aliases,t)??tf(this.ambient,t)}get ambient(){return V.ambient}maybeResolve(t){var i;const r=this.resolutions[t];if(r){if(typeof r!="string")return this.bindReference(r);const o=zt[r];if(ne(o,"root"))return this.resolutions[t]=o;if(ne(o,"context")){if(o.phase==="resolving")return this.node("alias",{reference:`$${t}`},{prereduced:!0});if(o.phase==="resolved")return Ve(`Unexpected resolved context for was uncached by its scope: ${we(o)}`);o.phase="resolving";const u=this.bindReference(this.parseOwnDefinitionFormat(o.def,o));return o.phase="resolved",zt[u.id]=u,zt[o.id]=u,this.resolutions[t]=u}return Ve(`Unexpected nodesById entry for ${r}: ${we(o)}`)}let n=this.aliases[t]??((i=this.ambient)==null?void 0:i[t]);return n?(n=this.normalizeRootScopeValue(n),ne(n,"generic")?this.resolutions[t]=this.bindReference(n):ne(n,"module")?(n.root||q(n0(t)),this.resolutions[t]=this.bindReference(n.root)):this.resolutions[t]=this.parse(n,{alias:t})):this.maybeResolveSubalias(t)}createParseContext(t){const r=t.id??Mg(t.prefix);return zt[r]=Object.assign(t,{[Rr]:"context",$:this,id:r,phase:"unresolved"})}traversal(t){return new Si(t,this.resolvedConfig)}import(...t){return new ef(Se(this.export(...t),(r,n)=>[`#${r}`,n]))}export(...t){if(!this._exports){this._exports={};for(const n of this.exportedNames){const i=this.aliases[n];this._exports[n]=ne(i,"module")?Hg(i,this):Um(this.maybeResolve(n))}for(const n of this.lazyResolutions)n.resolution;if(this._exportedResolutions=t0(this,this._exports),this._json=e0(this._exportedResolutions),Object.assign(this.resolutions,this._exportedResolutions),this.references=Object.values(this.referencesById),!this.resolvedConfig.jitless){const n=Yg(this.references);this.precompilation=n.write(Wg,4),Gg(this.references,n)}this.resolved=!0}const r=t.length?t:this.exportedNames;return new ef(Se(r,(n,i)=>[i,this._exports[i]]))}resolve(t){return this.export()[t]}parseDefinition(t,r={}){if(ne(t,"root"))return this.bindReference(t);const n=this.preparseOwnDefinitionFormat(t,r);if(ne(n,"root"))return this.bindReference(n);const i=this.createParseContext(n);zt[i.id]=i;let o=this.bindReference(this.parseOwnDefinitionFormat(t,i));return o.isCyclic&&(o=mj(o,i.id)),zt[i.id]=o,o}finalize(t){return Um(t),!t.precompilation&&!this.resolvedConfig.jitless&&xI(t.references),t}}class Xg extends Zg{parseOwnDefinitionFormat(t,r){return Pg(r)}preparseOwnDefinitionFormat(t,r){return this.preparseNode(Sa(t),t,r)}preparseOwnAliasEntry(t,r){return[t,r]}normalizeRootScopeValue(t){return t}}const Um=e=>{const t=e.references.filter(r=>r.hasKind("alias"));for(const r of t){Object.assign(r.referencesById,r.resolution.referencesById);for(const n of e.references)r.id in n.referencesById&&Object.assign(n.referencesById,r.referencesById)}return e},e0=e=>Se(e,(t,r)=>[t,ne(r,"root")||ne(r,"generic")?r.json:ne(r,"module")?e0(r):Ve(`Unexpected resolution ${we(r)}`)]),tf=(e,t)=>{const r=t.indexOf(".");if(r===-1)return;const n=t.slice(0,r),i=e[n];if(i===void 0)return;if(!ne(i,"module"))return q(DI(n));const o=t.slice(r+1),u=i[o];if(u===void 0)return tf(i,o);if(ne(u,"root")||ne(u,"generic"))return u;if(ne(u,"module"))return u.root??q(n0(t));Ve(`Unexpected resolution for alias '${t}': ${we(u)}`)},$d=(e,t)=>new Xg(e,t),vo=new Xg({}),t0=(e,t)=>{const r={};for(const n in t){const i=t[n];if(ne(i,"module")){const o=t0(e,i),u=Se(o,(d,h)=>[`${n}.${d}`,h]);Object.assign(r,u)}else ne(i,"root")||ne(i,"generic")?r[n]=i:Ve(`Unexpected scope resolution ${we(i)}`)}return r},r0=e=>`'${e}' is unresolvable`,DI=e=>`'${e}' must reference a module to be accessed using dot syntax`,n0=e=>`Reference to submodule '${e}' must specify an alias`;vo.export();const xe=vo.schema,vd=vo.node;vo.defineSchema;const zr=vo.generic,i0="^(?:0|[1-9]\\d*)$",CI=new RegExp(i0);gt(CI);const s0=$d({bigint:"bigint",boolean:[{unit:!1},{unit:!0}],false:{unit:!1},never:[],null:{unit:null},number:"number",object:"object",string:"string",symbol:"symbol",true:{unit:!0},unknown:{},undefined:{unit:void 0},Array,Date},{prereducedAliases:!0}).export();V.intrinsic={...s0};const o0=$d({integer:{domain:"number",divisor:1},lengthBoundable:["string",Array],key:["string","symbol"],nonNegativeIntegerString:{domain:"string",pattern:i0}},{prereducedAliases:!0}).export();Object.assign(V.intrinsic,o0);const NI=$d({jsonPrimitive:["string","number",{unit:!0},{unit:!1},{unit:null}],jsonObject:{domain:"object",index:{signature:"string",value:"$jsonData"}},jsonData:["$jsonPrimitive","$jsonObject"]},{prereducedAliases:!0}).export(),ie={...s0,...o0,...NI,emptyStructure:vd("structure",{},{prereduced:!0})};V.intrinsic={...ie};const Km=(e,t)=>new RegExp(e,t);Object.assign(Km,{as:Km});const EI=e=>typeof e=="string"&&e[0]==="d"&&(e[1]==="'"||e[1]==='"')&&e[e.length-1]===e[1],Qm=e=>e.toString()!=="Invalid Date",jI=e=>e.slice(2,-1),a0=e=>`'${e}' could not be parsed by the Date constructor`,II=(e,t)=>MI(e,t),MI=(e,t)=>{const r=new Date(e);if(Qm(r))return r;const n=tE(e);if(n!==void 0){const i=new Date(n);if(Qm(i))return i}return t?q(t===!0?a0(e):t):void 0},PI=xe({proto:"Array",sequence:"string",required:{key:"groups",value:["object",{unit:void 0}]}}),Ql=(e,t)=>{const r=e.scanner.shiftUntilEscapable(_I[c0[t]]);if(e.scanner.lookahead==="")return e.error(TI(r,t));if(e.scanner.shift(),t in l0){let n;try{n=new RegExp(r)}catch(i){q(String(i))}e.root=e.ctx.$.node("intersection",{domain:"string",pattern:r},{prereduced:!0}),t==="x/"&&(e.root=e.ctx.$.node("morph",{in:e.root,morphs:i=>n.exec(i),declaredOut:PI}))}else if($r(t,u0))e.root=e.ctx.$.node("unit",{unit:r});else{const n=II(r,a0(r));e.root=e.ctx.$.node("unit",{meta:r,unit:n})}},u0={"'":1,'"':1},OI={"/":1,"'":1,'"':1},AI={"d'":"'",'d"':'"',"'":"'",'"':'"'},l0={"/":"/","x/":"/"},c0={...AI,...l0},_I={"'":e=>e.lookahead==="'",'"':e=>e.lookahead==='"',"/":e=>e.lookahead==="/"},RI={'"':"double-quote","'":"single-quote","/":"forward slash"},TI=(e,t)=>`${t}${e} requires a closing ${RI[c0[t]]}`,LI=e=>`Private type references should not include '#'. Use '${e}' instead.`,f0="Optional definitions like 'string?' are only valid as properties in an object or tuple",d0="Defaultable definitions like 'number = 0' are only valid as properties in an object or tuple",Zi={"<":1,">":1,"=":1,"|":1,"&":1,")":1,"[":1,"%":1,",":1,":":1,"?":1,"#":1,...wu},FI=(e,t)=>e===">"?t[0]==="="?t[1]==="=":t.trimStart()===""||$r(t.trimStart()[0],Zi):e==="="?t[0]!=="=":e===","||e==="?",zI=(e,t,r)=>p0(e,t,r,[]),p0=(e,t,r,n)=>{const i=r.parseUntilFinalizer();return n.push(i.root),i.finalizer===">"?n.length!==t.params.length?r.error(h0(e,t.names,n.map(o=>o.expression))):n:i.finalizer===","?p0(e,t,r,n):i.error(rg(">"))},h0=(e,t,r)=>`${e}<${t.join(", ")}> requires exactly ${t.length} args (got ${r.length}${r.length===0?"":`: ${r.join(", ")}`})`,Jl=e=>{const t=e.scanner.shiftUntilLookahead(Zi);t==="keyof"?e.addPrefix("keyof"):e.root=qI(e,t)},BI=(e,t,r)=>{if(r.scanner.shiftUntilNonWhitespace(),r.scanner.shift()!=="<")return r.error(h0(e,t.names,[]));const i=zI(e,t,r);return t(...i)},qI=(e,t)=>UI(e,t)??KI(e,t)??e.error(t===""?e.scanner.lookahead==="#"?LI(e.shiftedBy(1).scanner.shiftUntilLookahead(Zi)):m0(e):r0(t)),UI=(e,t)=>{var n;if((n=e.ctx.args)!=null&&n[t]){const i=e.ctx.args[t];return typeof i!="string"?i:e.ctx.$.node("alias",{reference:i},{prereduced:!0})}const r=e.ctx.$.maybeResolve(t);if(ne(r,"root"))return r;if(r!==void 0)return ne(r,"generic")?BI(t,r,e):q(`Unexpected resolution ${we(r)}`)},KI=(e,t)=>{const r=rE(t);if(r!==void 0)return e.ctx.$.node("unit",{unit:r});const n=iE(t);if(n!==void 0)return e.ctx.$.node("unit",{unit:n})},m0=e=>{const t=e.previousOperator();return t?$0(t,e.scanner.unscanned):QI(e.scanner.unscanned)},$0=(e,t="")=>`Token '${e}' requires a right operand${t?` before '${t}'`:""}`,QI=e=>`Expected an expression${e?` before '${e}'`:""}`,v0=e=>e.scanner.lookahead===""?e.error(m0(e)):e.scanner.lookahead==="("?e.shiftedBy(1).reduceGroupOpen():e.scanner.lookaheadIsIn(OI)?Ql(e,e.scanner.shift()):e.scanner.lookaheadIsIn(wu)?v0(e.shiftedBy(1)):e.scanner.lookahead==="d"?e.scanner.nextLookahead in u0?Ql(e,`${e.scanner.shift()}${e.scanner.shift()}`):Jl(e):e.scanner.lookahead==="x"&&e.scanner.nextLookahead==="/"?e.shiftedBy(2)&&Ql(e,"x/"):Jl(e),JI={">":!0,">=":!0},VI={"<":!0,"<=":!0},ru={"<":">",">":"<","<=":">=",">=":"<=","==":"=="},HI=(e,t)=>`Left bounds are only valid when paired with right bounds (try ...${t}${e})`,y0=e=>`Left-bounded expressions must specify their limits using < or <= (was ${e})`,WI=(e,t,r,n)=>`An expression may have at most one left bound (parsed ${e}${ru[t]}, ${r}${ru[n]})`,GI=(e,t)=>{const r=ZI(e,t);if(e.root.hasKind("unit")){if(typeof e.root.unit=="number"){e.reduceLeftBound(e.root.unit,r),e.unsetRoot();return}if(e.root.unit instanceof Date){const n=`d'${e.root.description??e.root.unit.toISOString()}'`;e.unsetRoot(),e.reduceLeftBound(n,r);return}}return eM(e,r)},YI={"<":1,">":1,"=":1},ZI=(e,t)=>e.scanner.lookaheadIs("=")?`${t}${e.scanner.shift()}`:t,Jm=(e,t,r,n)=>r.extends(V.intrinsic.number)?typeof t!="number"?q(rf(e,t,n)):e==="=="?["min","max"]:e[0]===">"?["min"]:["max"]:r.extends(V.intrinsic.lengthBoundable)?typeof t!="number"?q(rf(e,t,n)):e==="=="?["exactLength"]:e[0]===">"?["minLength"]:["maxLength"]:r.extends(V.intrinsic.Date)?e==="=="?["after","before"]:e[0]===">"?["after"]:["before"]:q(HE(r.expression)),XI=e=>({rule:EI(e.limit)?jI(e.limit):e.limit,exclusive:e.comparator.length===1}),eM=(e,t)=>{const r=e.unsetRoot(),n=e.scanner.location;e.parseOperand();const i=e.unsetRoot(),o=e.scanner.sliceChars(n,e.scanner.location);if(e.root=r,!i.hasKind("unit")||typeof i.unit!="number"&&!(i.unit instanceof Date))return e.error(rf(t,o,"right"));const u=i.unit,d=t.length===1,h=Jm(t,typeof u=="number"?u:o,r,"right");for(const g of h)e.constrainRoot(g,t==="=="?{rule:u}:{rule:u,exclusive:d});if(!e.branches.leftBound)return;if(!$r(t,VI))return e.error(y0(t));const m=Jm(e.branches.leftBound.comparator,e.branches.leftBound.limit,r,"left");e.constrainRoot(m[0],XI(e.branches.leftBound)),e.branches.leftBound=null},rf=(e,t,r)=>`Comparator ${r==="left"?ru[e]:e} must be ${r==="left"?"preceded":"followed"} by a corresponding literal (was ${t})`,tM=e=>{e.scanner.shiftUntilNonWhitespace();const t=e.scanner.shiftUntilLookahead(Zi);e.root=e.root.brand(t)},rM=e=>{e.scanner.shiftUntilNonWhitespace();const t=e.scanner.shiftUntilLookahead(Zi),r=nE(t,{errorOnFail:Vm(t)});r===0&&e.error(Vm(0)),e.root=e.root.constrain("divisor",r)},Vm=e=>`% operator must be followed by a non-zero integer literal (was ${e})`,g0=e=>{const t=e.scanner.shift();return t===""?e.finalize(""):t==="["?e.scanner.shift()==="]"?e.setRoot(e.root.array()):e.error(nM):t==="|"?e.scanner.lookahead===">"?e.shiftedBy(1).pushRootToBranch("|>"):e.pushRootToBranch(t):t==="&"?e.pushRootToBranch(t):t===")"?e.finalizeGroup():FI(t,e.scanner.unscanned)?e.finalize(t):$r(t,YI)?GI(e,t):t==="%"?rM(e):t==="#"?tM(e):t in wu?g0(e):e.error(yd(t))},yd=(e,t="")=>`'${e}' is not allowed here${t&&` (should be ${t})`}`,nM="Missing expected ']'",iM=e=>{const t=e.unsetRoot();e.parseOperand();const r=e.unsetRoot();if(!r.hasKind("unit"))return e.error(sM(r.expression));const n=r.unit instanceof Date?()=>new Date(r.unit):r.unit;return[t,"=",n]},sM=e=>`Default value '${e}' must be a literal value`,Hm=(e,t)=>{const r=t.$.maybeResolveRoot(e);if(r)return r;if(e.endsWith("[]")){const o=t.$.maybeResolveRoot(e.slice(0,-2));if(o)return o.array()}const n=new Nu(new tg(e),t),i=oM(n);return n.finalizer===">"&&q(yd(">")),i},oM=e=>{e.parseOperand();let t=gd(e).root;return t?(e.finalizer==="="?t=iM(e):e.finalizer==="?"&&(t=[t,"?"]),e.scanner.shiftUntilNonWhitespace(),e.scanner.lookahead&&q(yd(e.scanner.lookahead)),t):Ve(`Root was unexpectedly unset after parsing string '${e.scanner.scanned}'`)},gd=e=>{for(;e.finalizer===void 0;)aM(e);return e},aM=e=>e.hasRoot()?e.parseOperator():e.parseOperand();class Nu{constructor(t,r){b(this,"root");b(this,"branches",{prefixes:[],leftBound:null,intersection:null,union:null,pipe:null});b(this,"finalizer");b(this,"groups",[]);b(this,"scanner");b(this,"ctx");this.scanner=t,this.ctx=r}error(t){return q(t)}hasRoot(){return this.root!==void 0}setRoot(t){this.root=t}unsetRoot(){const t=this.root;return this.root=void 0,t}constrainRoot(...t){this.root=this.root.constrain(t[0],t[1])}finalize(t){if(this.groups.length)return this.error(rg(")"));this.finalizeBranches(),this.finalizer=t}reduceLeftBound(t,r){const n=ru[r];if(!$r(n,JI))return this.error(y0(r));if(this.branches.leftBound)return this.error(WI(this.branches.leftBound.limit,this.branches.leftBound.comparator,t,n));this.branches.leftBound={comparator:n,limit:t}}finalizeBranches(){if(this.assertRangeUnset(),this.branches.pipe){this.pushRootToBranch("|>"),this.root=this.branches.pipe;return}if(this.branches.union){this.pushRootToBranch("|"),this.root=this.branches.union;return}if(this.branches.intersection){this.pushRootToBranch("&"),this.root=this.branches.intersection;return}this.applyPrefixes()}finalizeGroup(){this.finalizeBranches();const t=this.groups.pop();if(!t)return this.error(dE(")",this.scanner.unscanned));this.branches=t}addPrefix(t){this.branches.prefixes.push(t)}applyPrefixes(){for(;this.branches.prefixes.length;){const t=this.branches.prefixes.pop();this.root=t==="keyof"?this.root.keyof():Ve(`Unexpected prefix '${t}'`)}}pushRootToBranch(t){var n,i,o;this.assertRangeUnset(),this.applyPrefixes();const r=this.root;this.root=void 0,this.branches.intersection=((n=this.branches.intersection)==null?void 0:n.rawAnd(r))??r,t!=="&"&&(this.branches.union=((i=this.branches.union)==null?void 0:i.rawOr(this.branches.intersection))??this.branches.intersection,this.branches.intersection=null,t!=="|"&&(this.branches.pipe=((o=this.branches.pipe)==null?void 0:o.rawPipeOnce(this.branches.union))??this.branches.union,this.branches.union=null))}parseUntilFinalizer(){return gd(new Nu(this.scanner,this.ctx))}parseOperator(){return g0(this)}parseOperand(){return v0(this)}assertRangeUnset(){if(this.branches.leftBound)return this.error(HI(this.branches.leftBound.limit,this.branches.leftBound.comparator))}reduceGroupOpen(){this.groups.push(this.branches),this.branches={prefixes:[],leftBound:null,union:null,intersection:null,pipe:null}}previousOperator(){var t;return((t=this.branches.leftBound)==null?void 0:t.comparator)??this.branches.prefixes[this.branches.prefixes.length-1]??(this.branches.intersection?"&":this.branches.union?"|":this.branches.pipe?"|>":void 0)}shiftedBy(t){return this.scanner.jumpForward(t),this}}const uM="An empty string is not a valid generic parameter name",nf=(e,t,r)=>{e.shiftUntilNonWhitespace();const n=e.shiftUntilLookahead(Zi);return n===""?e.lookahead===""&&t.length?t:q(uM):(e.shiftUntilNonWhitespace(),lM(e,n,t,r))},Wm="extends ",lM=(e,t,r,n)=>{if(e.shiftUntilNonWhitespace(),e.unscanned.startsWith(Wm))e.jumpForward(Wm.length);else return e.lookahead===","&&e.shift(),r.push(t),nf(e,r,n);const i=gd(new Nu(e,n));return r.push([t,i.root]),nf(e,r,n)};class cM extends gn{constructor(t){const r={$:t,raw:t.fn};super((...n)=>{const i=n.indexOf(":"),o=i===-1?n.length-1:i-1,u=n.slice(0,o+1),d=t.parse(u).assertHasKind("intersection");let h=t.intrinsic.unknown;if(i!==-1){if(i!==n.length-2)return q(dM);h=t.parse(n[i+1])}return m=>new fM(m,d,h)},{attach:r})}}class fM extends gn{constructor(r,n,i){const o=`typed ${r.name}`,u={[o]:(...h)=>{const m=n.assert(h),g=r(...m);return i.assert(g)}}[o];super(u);b(this,"raw");b(this,"params");b(this,"returns");b(this,"expression");this.raw=r,this.params=n,this.returns=i;let d=n.expression;d[0]==="["&&d[d.length-1]==="]"?d=d.slice(1,-1):d.endsWith("[]")&&(d=`...${d}`),this.expression=`(${d}) => ${(i==null?void 0:i.expression)??"unknown"}`}}const dM=`":" must be followed by exactly one return type e.g:
fn("string", ":", "number")(s => s.length)`;class pM extends gn{constructor(r){super((...n)=>new la(r)(...n),{bind:r});b(this,"$");this.$=r}in(r){return new la(this.$,r===void 0?void 0:this.$.parse(r))}at(r,n){return new la(this.$).at(r,n)}case(r,n){return new la(this.$).case(r,n)}}class la extends gn{constructor(r,n){super(i=>this.caseEntries(Object.entries(i).map(([o,u])=>o==="default"?[o,u]:[this.$.parse(o),u])));b(this,"$");b(this,"in");b(this,"key");b(this,"branches",[]);this.$=r,this.in=n}at(r,n){return this.key&&q(mM),this.branches.length&&q(hM),this.key=r,n?this.match(n):this}case(r,n){return this.caseEntry(this.$.parse(r),n)}caseEntry(r,n){const o=(this.key?this.$.parse({[this.key]:r}):r).pipe(n);return this.branches.push(o),this}match(r){return this(r)}strings(r){return this.caseEntries(Object.entries(r).map(([n,i])=>n==="default"?[n,i]:[this.$.node("unit",{unit:n}),i]))}caseEntries(r){for(let n=0;n<r.length;n++){const[i,o]=r[n];if(i==="default")return n!==r.length-1&&q("default may only be specified as the last key of a switch definition"),this.default(o);if(typeof o!="function")return q(`Value for case "${i}" must be a function (was ${or(o)})`);this.caseEntry(i,o)}return this}default(r){typeof r=="function"&&this.case(ie.unknown,r);const n={branches:this.branches,ordered:!0};(r==="never"||r==="assert")&&(n.meta={onFail:Gm});const i=this.$.node("union",n);if(!this.in)return this.$.finalize(i);let o=this.in.pipe(i);return(r==="never"||r==="assert")&&(o=o.configureReferences({onFail:Gm},"self")),this.$.finalize(o)}}const Gm=e=>e.throw(),hM="A key matcher must be specified before the first case i.e. match.at('foo') or match.in<object>().at('bar')",mM="At most one key matcher may be specified per expression",b0=(e,t)=>{if(mt(e)){if(e[1]==="=")return[t.$.parseOwnDefinitionFormat(e[0],t),"=",e[2]];if(e[1]==="?")return[t.$.parseOwnDefinitionFormat(e[0],t),"?"]}return N0(e,t)},$M="Only required keys may make their values optional, e.g. { [mySymbol]: ['number', '?'] }",vM="Only required keys may specify default values, e.g. { value: 'number = 0' }",yM=(e,t)=>{var u;let r;const n={},i=Ha(e);for(const[d,h]of i){const m=wM(d);if(m.kind==="spread"){if(!co(n))return q(bM);const C=t.$.parseOwnDefinitionFormat(h,t);if(C.equals(ie.object))continue;if(!C.hasKind("intersection")||!((u=C.basis)!=null&&u.equals(ie.object)))return q(kM(C.expression));r=C.structure;continue}if(m.kind==="undeclared"){h!=="reject"&&h!=="delete"&&h!=="ignore"&&q(gM(h)),n.undeclared=h;continue}const g=b0(h,t),c=m;if(m.kind==="required"){mt(g)?Vl(n,"optional",g[1]==="="?{key:m.normalized,value:g[0],default:g[2]}:{key:m.normalized,value:g[0]},t):Vl(n,"required",{key:m.normalized,value:g},t);continue}if(mt(g)&&(g[1]==="?"&&q($M),g[1]==="="&&q(vM)),m.kind==="optional"){Vl(n,"optional",{key:m.normalized,value:g},t);continue}const v=t.$.parseOwnDefinitionFormat(c.normalized,t),E=Xc(v,g,t.$);E.index&&(n.index=ke(n.index,E.index)),E.required&&(n.required=ke(n.required,E.required))}const o=t.$.node("structure",n);return t.$.parseSchema({domain:"object",structure:(r==null?void 0:r.merge(o))??o})},Vl=(e,t,r,n)=>{e[t]=ke(e[t],n.$.node(t,r))},gM=e=>`Value of '+' key must be 'reject', 'delete', or 'ignore' (was ${we(e)})`,bM="Spread operator may only be used as the first key in an object",wM=e=>typeof e=="symbol"?{kind:"required",normalized:e}:e[e.length-1]==="?"?e[e.length-2]===Ts?{kind:"required",normalized:`${e.slice(0,-2)}?`}:{kind:"optional",normalized:e.slice(0,-1)}:e[0]==="["&&e[e.length-1]==="]"?{kind:"index",normalized:e.slice(1,-1)}:e[0]===Ts&&e[1]==="["&&e[e.length-1]==="]"?{kind:"required",normalized:e.slice(1)}:e==="..."?{kind:"spread"}:e==="+"?{kind:"undeclared"}:{kind:"required",normalized:e==="\\..."?"...":e==="\\+"?"+":e},kM=e=>`Spread operand must resolve to an object literal type (was ${e})`,SM=(e,t)=>OM(e)?x0[e[0]](e,t):MM(e)?S0[e[1]](e,t):null,xM=(e,t)=>t.$.parseOwnDefinitionFormat(e[1],t).keyof(),Hl=(e,t)=>{if(e[2]===void 0)return q($0(e[1],""));const r=t.$.parseOwnDefinitionFormat(e[0],t),n=t.$.parseOwnDefinitionFormat(e[2],t);if(e[1]==="|")return t.$.node("union",{branches:[r,n]});const i=e[1]==="&"?Lr(r,n,t.$):Gc(r,n,t.$);return i instanceof ee?i.throw():i},DM=(e,t)=>t.$.parseOwnDefinitionFormat(e[0],t).array(),CM=(e,t)=>typeof e[2]!="function"?q(w0("=>",e[2])):t.$.parseOwnDefinitionFormat(e[0],t).pipe(e[2]),w0=(e,t)=>`${e===":"?"Narrow":"Morph"} expression requires a function following '${e}' (was ${typeof t})`,NM=(e,t)=>typeof e[2]!="function"?q(w0(":",e[2])):t.$.parseOwnDefinitionFormat(e[0],t).constrain("predicate",e[2]),EM=(e,t)=>t.$.parseOwnDefinitionFormat(e[0],t).configure(e[2],e[3]),k0=e=>e,jM=k0({"[]":DM,"?":()=>q(f0)}),IM=k0({"|":Hl,"&":Hl,":":NM,"=>":CM,"|>":Hl,"@":EM,"=":()=>q(d0)}),S0={...jM,...IM},MM=e=>S0[e[1]]!==void 0,PM=e=>e,x0=PM({keyof:xM,instanceof:(e,t)=>{if(typeof e[1]!="function")return q(Ym(Uc(e[1])));const r=e.slice(1).map(n=>typeof n=="function"?t.$.node("proto",{proto:n}):q(Ym(Uc(n))));return r.length===1?r[0]:t.$.node("union",{branches:r})},"===":(e,t)=>t.$.units(e.slice(1))}),OM=e=>x0[e[0]]!==void 0,Ym=e=>`Expected a constructor following 'instanceof' operator (was ${e})`,AM=(e,t)=>{let r=[{}],n=0;for(;n<e.length;){let i=!1;e[n]==="..."&&n<e.length-1&&(i=!0,n++);const o=b0(e[n],t),[u,d,h]=mt(o)?o:[o];if(n++,i){if(!u.extends(V.intrinsic.Array))return q(TM(u.expression));r=r.flatMap(m=>u.distribute(g=>RM(ag(m),g)))}else r=r.map(m=>d==="?"?D0(m,u):d==="="?_M(m,u,h):sf(m,u))}return t.$.parseSchema(r.map(i=>co(i)?{proto:Array,exactLength:0}:{proto:Array,sequence:i}))},sf=(e,t)=>e.defaultables||e.optionals?q(e.variadic?Qg:LM):(e.variadic?e.postfix=ke(e.postfix,t):e.prefix=ke(e.prefix,t),e),D0=(e,t)=>e.variadic?q(C0):(e.optionals=ke(e.optionals,t),e),_M=(e,t,r)=>e.variadic?q(C0):e.optionals?q(FM):(e.defaultables=ke(e.defaultables,[[t,r]]),e),Zm=(e,t)=>(e.postfix&&q(Xm),e.variadic?e.variadic.equals(t)||q(Xm):e.variadic=t.internal,e),RM=(e,t)=>{const r=t.select({method:"find",kind:"sequence"});if(!r)return Zm(e,V.intrinsic.unknown);if(r.prefix)for(const n of r.prefix)sf(e,n);if(r.optionals)for(const n of r.optionals)D0(e,n);if(r.variadic&&Zm(e,r.variadic),r.postfix)for(const n of r.postfix)sf(e,n);return e},TM=e=>`Spread element must be an array (was ${e})`,Xm="A tuple may have at most one variadic element",LM="A required element may not follow an optional element",C0="An optional element may not follow a variadic element",FM="A defaultable element may not follow an optional element without a default",Wl={},N0=(e,t)=>{var r;if(typeof e=="string"){if(t.args&&Object.keys(t.args).some(i=>e.includes(i)))return Hm(e,t);const n=Wl[r=t.$.name]??(Wl[r]={});return n[e]??(n[e]=Hm(e,t))}return Yn(e,"object")?zM(e,t):q(of(or(e)))},zM=(e,t)=>{const r=nd(e);switch(r){case void 0:return ne(e,"root")?e:"~standard"in e?BM(e,t):yM(e,t);case"Array":return qM(e,t);case"RegExp":return t.$.node("intersection",{domain:"string",pattern:e},{prereduced:!0});case"Function":{const n=bu(e)?e():e;return ne(n,"root")?n:q(of("Function"))}default:return q(of(r??we(e)))}},BM=(e,t)=>t.$.intrinsic.unknown.pipe((r,n)=>{const i=e["~standard"].validate(r);if(!i.issues)return i.value;for(const{message:o,path:u}of i.issues)u?u.length?n.error({problem:qN(o),relativePath:u.map(d=>typeof d=="object"?d.key:d)}):n.error({message:o}):n.error({message:o})}),qM=(e,t)=>SM(e,t)??AM(e,t),of=e=>`Type definitions must be strings or objects (was ${e})`;class UM extends gn{constructor(t){const r=Object.assign({errors:mn,hkt:vr,$:t,raw:t.parse,module:t.constructor.module,scope:t.constructor.scope,declare:t.declare,define:t.define,match:t.match,generic:t.generic,schema:t.schema,keywords:t.ambient,unit:t.unit,enumerated:t.enumerated,instanceOf:t.instanceOf,valueOf:t.valueOf,or:t.or,and:t.and,merge:t.merge,pipe:t.pipe,fn:t.fn},t.ambientAttachments);super((...n)=>{if(n.length===1)return t.parse(n[0]);if(n.length===2&&typeof n[0]=="string"&&n[0][0]==="<"&&n[0][n[0].length-1]===">"){const i=n[0].slice(1,-1),o=t.parseGenericParams(i,{});return new eu(o,n[1],t,t,null)}return t.parse(n)},{attach:r})}}const no=V,Di=class Di extends Zg{constructor(){super(...arguments);b(this,"unit",r=>this.units([r]));b(this,"valueOf",r=>this.units(EN(r)));b(this,"enumerated",(...r)=>this.units(r));b(this,"instanceOf",r=>this.node("proto",{proto:r},{prereduced:!0}));b(this,"or",(...r)=>this.schema(r.map(n=>this.parse(n))));b(this,"and",(...r)=>r.reduce((n,i)=>n.and(this.parse(i)),this.intrinsic.unknown));b(this,"merge",(...r)=>r.reduce((n,i)=>n.merge(this.parse(i)),this.intrinsic.object));b(this,"pipe",(...r)=>this.intrinsic.unknown.pipe(...r));b(this,"fn",new cM(this));b(this,"match",new pM(this));b(this,"declare",()=>({type:this.type}));b(this,"type",new UM(this))}get ambientAttachments(){if(no.typeAttachments)return this.cacheGetter("ambientAttachments",Se(no.typeAttachments,(r,n)=>[r,this.bindReference(n)]))}preparseOwnAliasEntry(r,n){var d;const i=r.indexOf("<");if(i===-1){if(ne(n,"module")||ne(n,"generic"))return[r,n];const h=this.name==="ark"?r:r==="root"?this.name:`${this.name}.${r}`,m=(d=this.resolvedConfig.keywords)==null?void 0:d[h];return m&&(n=[n,"@",m]),[r,n]}r[r.length-1]!==">"&&q("'>' must be the last character of a generic declaration in a scope");const o=r.slice(0,i),u=r.slice(i+1,-1);return[o,()=>{const h=this.parseGenericParams(u,{alias:o});return AE(h,n,this)}]}parseGenericParams(r,n){return nf(new tg(r),[],this.createParseContext({...n,def:r,prefix:"generic"}))}normalizeRootScopeValue(r){return bu(r)&&!ne(r,"generic")?r():r}preparseOwnDefinitionFormat(r,n){return{...n,def:r,prefix:n.alias??"type"}}parseOwnDefinitionFormat(r,n){!(n.alias&&n.alias in this.aliases)&&!n.args&&(n.args={this:n.id});const o=N0(r,n);if(mt(o)){if(o[1]==="=")return q(d0);if(o[1]==="?")return q(f0)}return o}define(r){return r}};b(Di,"scope",(r,n={})=>new Di(r,n)),b(Di,"module",(r,n={})=>Di.scope(r,n).export());let nu=Di;const KM=Object.assign(nu.scope,{define:e=>e}),ge=nu;class QM extends vr{constructor(){super(...arguments);b(this,"description",'merge an object\'s properties onto another like `Merge(User, { isAdmin: "true" })`')}}const JM=zr(["base",ie.object],["props",ie.object])(e=>e.base.merge(e.props),QM),VM=ge.module({Key:ie.key,Merge:JM});class HM extends vr{}const WM=zr("element")(e=>{const t=e.element.exclude(ie.Array),r=t.array();return t.rawOr(r).pipe(lo).distribute(n=>n.assertHasKind("morph").declareOut(r),xe)},HM),GM=ge.module({root:ie.Array,readonly:"root",index:ie.nonNegativeIntegerString,liftFrom:WM},{name:"Array"}),af=xe(["string",fo.FileConstructor]),YM=af.rawOr(af.array()),e$=xe({meta:"an object representing parsed form data",domain:"object",index:{signature:"string",value:YM}}),ZM=ge.module({root:["instanceof",FormData],value:af,parsed:e$,parse:xe({in:FormData,morphs:e=>{const t={};for(const[r,n]of e)if(r in t){const i=t[r];typeof i=="string"||i instanceof fo.FileConstructor?t[r]=[i,n]:i.push(n)}else t[r]=n;return t},declaredOut:e$})},{name:"FormData"}),XM=ge.module({Int8:["instanceof",Int8Array],Uint8:["instanceof",Uint8Array],Uint8Clamped:["instanceof",Uint8ClampedArray],Int16:["instanceof",Int16Array],Uint16:["instanceof",Uint16Array],Int32:["instanceof",Int32Array],Uint32:["instanceof",Uint32Array],Float32:["instanceof",Float32Array],Float64:["instanceof",Float64Array],BigInt64:["instanceof",BigInt64Array],BigUint64:["instanceof",BigUint64Array]},{name:"TypedArray"}),eP={Boolean:1,Number:1,String:1},tP=ge.module({...Se({...Ky,...Jy},(e,t)=>e in eP?[]:[e,["instanceof",t]]),Array:GM,TypedArray:XM,FormData:ZM}),rP=xe({domain:{domain:"number",meta:"a number representing a Unix timestamp"},divisor:{rule:1,meta:"an integer representing a Unix timestamp"},min:{rule:-864e13,meta:"a Unix timestamp after -8640000000000000"},max:{rule:864e13,meta:"a Unix timestamp before 8640000000000000"},meta:"an integer representing a safe Unix timestamp"}),nP=xe({domain:"number",divisor:1}),E0=ge.module({root:ie.number,integer:nP,epoch:rP,safe:xe({domain:{domain:"number",numberAllowsNaN:!1},min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER}),NaN:["===",Number.NaN],Infinity:["===",Number.POSITIVE_INFINITY],NegativeInfinity:["===",Number.NEGATIVE_INFINITY]},{name:"number"}),je=(e,t,r)=>{const n={domain:"string",pattern:{rule:e.source,flags:e.flags,meta:t}};return r&&(n.meta={format:r}),vd("intersection",n)},t$=je(Wa,"a well-formed integer string"),j0=ge.module({root:t$,parse:xe({in:t$,morphs:(e,t)=>{const r=Number.parseInt(e);return Number.isSafeInteger(r)?r:t.error("an integer in the range Number.MIN_SAFE_INTEGER to Number.MAX_SAFE_INTEGER")},declaredOut:ie.integer})},{name:"string.integer"}),iP=je(/^[\dA-Fa-f]+$/,"hex characters only"),sP=ge.module({root:je(/^(?:[\d+/A-Za-z]{4})*(?:[\d+/A-Za-z]{2}==|[\d+/A-Za-z]{3}=)?$/,"base64-encoded"),url:je(/^(?:[\w-]{4})*(?:[\w-]{2}(?:==|%3D%3D)?|[\w-]{3}(?:=|%3D)?)?$/,"base64url-encoded")},{name:"string.base64"}),r$=je(/^[A-Z].*$/,"capitalized"),oP=ge.module({root:xe({in:"string",morphs:e=>e.charAt(0).toUpperCase()+e.slice(1),declaredOut:r$}),preformatted:r$},{name:"string.capitalize"}),aP=e=>{const t=e.replace(/[ -]+/g,"");let r=0,n,i,o=!1;for(let u=t.length-1;u>=0;u--)n=t.substring(u,u+1),i=Number.parseInt(n,10),o?(i*=2,r+=i>=10?i%10+1:i):r+=i,o=!o;return!!(r%10===0&&t)},uP=/^(?:4\d{12}(?:\d{3,6})?|5[1-5]\d{14}|(222[1-9]|22[3-9]\d|2[3-6]\d{2}|27[01]\d|2720)\d{12}|6(?:011|5\d\d)\d{12,15}|3[47]\d{13}|3(?:0[0-5]|[68]\d)\d{11}|(?:2131|1800|35\d{3})\d{11}|6[27]\d{14}|^(81\d{14,17}))$/,lP=xe({domain:"string",pattern:{meta:"a credit card number",rule:uP.source},predicate:{meta:"a credit card number",predicate:aP}}),cP=/^([+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))(T((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([,.]\d+(?!:))?)?(\17[0-5]\d([,.]\d+)?)?([Zz]|([+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,fP=e=>!Number.isNaN(new Date(e).valueOf()),n$=xe({domain:"string",predicate:{meta:"a parsable date",predicate:fP}}).assertHasKind("intersection"),i$=j0.root.internal.narrow((e,t)=>{const r=Number.parseInt(e),n=E0.epoch(r);return n instanceof mn?(t.errors.merge(n),!1):!0}).configure({description:"an integer string representing a safe Unix timestamp"},"self").assertHasKind("intersection"),dP=ge.module({root:i$,parse:xe({in:i$,morphs:e=>new Date(e),declaredOut:ie.Date})},{name:"string.date.epoch"}),s$=je(cP,"an ISO 8601 (YYYY-MM-DDTHH:mm:ss.sssZ) date").internal.assertHasKind("intersection"),pP=ge.module({root:s$,parse:xe({in:s$,morphs:e=>new Date(e),declaredOut:ie.Date})},{name:"string.date.iso"}),hP=ge.module({root:n$,parse:xe({declaredIn:n$,in:"string",morphs:(e,t)=>{const r=new Date(e);return Number.isNaN(r.valueOf())?t.error("a parsable date"):r},declaredOut:ie.Date}),iso:pP,epoch:dP},{name:"string.date"}),mP=je(/^[\w%+.-]+@[\d.A-Za-z-]+\.[A-Za-z]{2,}$/,"an email address","email"),o$="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",Hr=`(${o$}[.]){3}${o$}`,$P=new RegExp(`^${Hr}$`),Qe="(?:[0-9a-fA-F]{1,4})",vP=new RegExp(`^((?:${Qe}:){7}(?:${Qe}|:)|(?:${Qe}:){6}(?:${Hr}|:${Qe}|:)|(?:${Qe}:){5}(?::${Hr}|(:${Qe}){1,2}|:)|(?:${Qe}:){4}(?:(:${Qe}){0,1}:${Hr}|(:${Qe}){1,3}|:)|(?:${Qe}:){3}(?:(:${Qe}){0,2}:${Hr}|(:${Qe}){1,4}|:)|(?:${Qe}:){2}(?:(:${Qe}){0,3}:${Hr}|(:${Qe}){1,5}|:)|(?:${Qe}:){1}(?:(:${Qe}){0,4}:${Hr}|(:${Qe}){1,6}|:)|(?::((?::${Qe}){0,5}:${Hr}|(?::${Qe}){1,7}|:)))(%[0-9a-zA-Z.]{1,})?$`),yP=ge.module({root:["v4 | v6","@","an IP address"],v4:je($P,"an IPv4 address","ipv4"),v6:je(vP,"an IPv6 address","ipv6")},{name:"string.ip"}),Oi="a JSON string",I0=e=>{if(!(e instanceof SyntaxError))throw e;return`must be ${Oi} (${e})`},gP=xe({meta:Oi,domain:"string",predicate:{meta:Oi,predicate:(e,t)=>{try{return JSON.parse(e),!0}catch(r){return t.reject({code:"predicate",expected:Oi,problem:I0(r)})}}}}),bP=(e,t)=>{if(e.length===0)return t.error({code:"predicate",expected:Oi,actual:"empty"});try{return JSON.parse(e)}catch(r){return t.error({code:"predicate",expected:Oi,problem:I0(r)})}},wP=ge.module({root:gP,parse:xe({meta:"safe JSON string parser",in:"string",morphs:bP,declaredOut:ie.jsonObject})},{name:"string.json"}),a$=je(/^[a-z]*$/,"only lowercase letters"),kP=ge.module({root:xe({in:"string",morphs:e=>e.toLowerCase(),declaredOut:a$}),preformatted:a$},{name:"string.lower"}),M0=["NFC","NFD","NFKC","NFKD"],yo=Se(M0,(e,t)=>[t,xe({domain:"string",predicate:r=>r.normalize(t)===r,meta:`${t}-normalized unicode`})]),Eu=Se(M0,(e,t)=>[t,xe({in:"string",morphs:r=>r.normalize(t),declaredOut:yo[t]})]),SP=ge.module({root:Eu.NFC,preformatted:yo.NFC},{name:"string.normalize.NFC"}),xP=ge.module({root:Eu.NFD,preformatted:yo.NFD},{name:"string.normalize.NFD"}),DP=ge.module({root:Eu.NFKC,preformatted:yo.NFKC},{name:"string.normalize.NFKC"}),CP=ge.module({root:Eu.NFKD,preformatted:yo.NFKD},{name:"string.normalize.NFKD"}),NP=ge.module({root:"NFC",NFC:SP,NFD:xP,NFKC:DP,NFKD:CP},{name:"string.normalize"}),u$=je(Kc,"a well-formed numeric string"),EP=ge.module({root:u$,parse:xe({in:u$,morphs:e=>Number.parseFloat(e),declaredOut:ie.number})},{name:"string.numeric"}),l$="a regex pattern",jP=xe({domain:"string",predicate:{meta:l$,predicate:(e,t)=>{try{return new RegExp(e),!0}catch(r){return t.reject({code:"predicate",expected:l$,problem:String(r)})}}},meta:{format:"regex"}}),IP=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[A-Za-z-][\dA-Za-z-]*)(?:\.(?:0|[1-9]\d*|\d*[A-Za-z-][\dA-Za-z-]*))*))?(?:\+([\dA-Za-z-]+(?:\.[\dA-Za-z-]+)*))?$/,MP=je(IP,"a semantic version (see https://semver.org/)"),c$=je(/^\S.*\S$|^\S?$/,"trimmed"),PP=ge.module({root:xe({in:"string",morphs:e=>e.trim(),declaredOut:c$}),preformatted:c$},{name:"string.trim"}),f$=je(/^[A-Z]*$/,"only uppercase letters"),OP=ge.module({root:xe({in:"string",morphs:e=>e.toUpperCase(),declaredOut:f$}),preformatted:f$},{name:"string.upper"}),AP=e=>URL.canParse(e),d$=xe({domain:"string",predicate:{meta:"a URL string",predicate:AP},meta:{format:"uri"}}),_P=ge.module({root:d$,parse:xe({declaredIn:d$,in:"string",morphs:(e,t)=>{try{return new URL(e)}catch{return t.error("a URL string")}},declaredOut:xe(URL)})},{name:"string.url"}),RP=ge.module({root:["versioned | nil | max","@",{description:"a UUID",format:"uuid"}],"#nil":"'00000000-0000-0000-0000-000000000000'","#max":"'ffffffff-ffff-ffff-ffff-ffffffffffff'","#versioned":/[\da-f]{8}-[\da-f]{4}-[1-8][\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}/i,v1:je(/^[\da-f]{8}-[\da-f]{4}-1[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv1"),v2:je(/^[\da-f]{8}-[\da-f]{4}-2[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv2"),v3:je(/^[\da-f]{8}-[\da-f]{4}-3[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv3"),v4:je(/^[\da-f]{8}-[\da-f]{4}-4[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv4"),v5:je(/^[\da-f]{8}-[\da-f]{4}-5[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv5"),v6:je(/^[\da-f]{8}-[\da-f]{4}-6[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv6"),v7:je(/^[\da-f]{8}-[\da-f]{4}-7[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv7"),v8:je(/^[\da-f]{8}-[\da-f]{4}-8[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv8")},{name:"string.uuid"}),TP=ge.module({root:ie.string,alpha:je(/^[A-Za-z]*$/,"only letters"),alphanumeric:je(/^[\dA-Za-z]*$/,"only letters and digits 0-9"),hex:iP,base64:sP,capitalize:oP,creditCard:lP,date:hP,digits:je(/^\d*$/,"only digits 0-9"),email:mP,integer:j0,ip:yP,json:wP,lower:kP,normalize:NP,numeric:EP,regex:jP,semver:MP,trim:PP,upper:OP,url:_P,uuid:RP},{name:"string"}),LP=ge.module({bigint:ie.bigint,boolean:ie.boolean,false:ie.false,never:ie.never,null:ie.null,number:ie.number,object:ie.object,string:ie.string,symbol:ie.symbol,true:ie.true,unknown:ie.unknown,undefined:ie.undefined}),FP=ge.module({root:ie.unknown,any:ie.unknown},{name:"unknown"}),zP=ge.module({root:ie.jsonObject,stringify:vd("morph",{in:ie.jsonObject,morphs:e=>JSON.stringify(e),declaredOut:ie.string})},{name:"object.json"}),BP=ge.module({root:ie.object,json:zP},{name:"object"});class qP extends vr{constructor(){super(...arguments);b(this,"description",'instantiate an object from an index signature and corresponding value type like `Record("string", "number")`')}}const UP=zr(["K",ie.key],"V")(e=>({domain:"object",index:{signature:e.K,value:e.V}}),qP);class KP extends vr{constructor(){super(...arguments);b(this,"description",'pick a set of properties from an object like `Pick(User, "name | age")`')}}const QP=zr(["T",ie.object],["K",ie.key])(e=>e.T.pick(e.K),KP);class JP extends vr{constructor(){super(...arguments);b(this,"description",'omit a set of properties from an object like `Omit(User, "age")`')}}const VP=zr(["T",ie.object],["K",ie.key])(e=>e.T.omit(e.K),JP);class HP extends vr{constructor(){super(...arguments);b(this,"description","make all named properties of an object optional like `Partial(User)`")}}const WP=zr(["T",ie.object])(e=>e.T.partial(),HP);class GP extends vr{constructor(){super(...arguments);b(this,"description","make all named properties of an object required like `Required(User)`")}}const YP=zr(["T",ie.object])(e=>e.T.required(),GP);class ZP extends vr{constructor(){super(...arguments);b(this,"description",'exclude branches of a union like `Exclude("boolean", "true")`')}}const XP=zr("T","U")(e=>e.T.exclude(e.U),ZP);class eO extends vr{constructor(){super(...arguments);b(this,"description",'extract branches of a union like `Extract("0 | false | 1", "number")`')}}const tO=zr("T","U")(e=>e.T.extract(e.U),eO),rO=ge.module({Exclude:XP,Extract:tO,Omit:VP,Partial:WP,Pick:QP,Record:UP,Required:YP}),bn=KM({...LP,...rO,...tP,...VM,string:TP,number:E0,object:BP,unknown:FP},{prereducedAliases:!0,name:"ark"}),Xe=bn.export();Object.assign(no.ambient,Xe);no.typeAttachments={string:Xe.string.root,number:Xe.number.root,bigint:Xe.bigint,boolean:Xe.boolean,symbol:Xe.symbol,undefined:Xe.undefined,null:Xe.null,object:Xe.object.root,unknown:Xe.unknown.root,false:Xe.false,true:Xe.true,never:Xe.never,arrayIndex:Xe.Array.index,Key:Xe.Key,Record:Xe.Record,Array:Xe.Array.root,Date:Xe.Date};const Br=Object.assign(bn.type,no.typeAttachments);bn.match;bn.fn;bn.generic;bn.schema;bn.define;bn.declare;const bd=Br("number").pipe(e=>new Date(e*1e3)),P0=Br("boolean").or("number").pipe(e=>typeof e=="number"?e!==0:e),nO=Br({userId:"number",role:"string"}),iO=Br({}),p$={user:{id:!0,name:!0,email:!0,createdAt:!0,posts:{id:!0,title:!0,content:!0,published:!0,createdAt:!0}},post:{id:!0,title:!0,content:!0,published:!0,createdAt:!0,authorUserId:!0,users:{id:!0,name:!0,email:!0}}},sO=Br({id:"number",title:"string",content:"string",published:P0,createdAt:bd}),oO=Br({id:"number",name:"string | null",email:"string | null",createdAt:bd,posts:sO.array()}),aO=Br({id:"number",name:"string | null",email:"string | null"}),uO=Br({id:"number",title:"string",content:"string",published:P0,createdAt:bd,authorUserId:"number",users:aO.or("null")}),lO=Br({user:oO.array(),post:uO.array()}),cO={id:"40c6d28ff9e87d82dc765286575586ec6fd57d8ab03e7f3f5e3ba7cc969ff2a0",operation:"query",session_args:["userId"],InputValidator:iO,SessionValidator:nO,ReturnData:lO,queryShape:p$,toQueryShape:e=>p$};function fO({client:e,isSelected:t,onSelect:r}){const[n,i]=he.useState({user:null,posts:[]});he.useEffect(()=>{if(!e.pyreClient||!e.connected){i({user:null,posts:[]});return}const u=e.pyreClient.run(cO,{},d=>{var c;const h=e.userId||e.requestedUserId||0,m=((c=d.user)==null?void 0:c.find(v=>v.id===h))||null,g=d.post||[];i({user:m,posts:g})});return()=>{u&&typeof u=="object"&&"unsubscribe"in u&&u.unsubscribe()}},[e.pyreClient,e.connected,e.userId,e.requestedUserId]);const o=()=>{var u,d;return(u=n.user)!=null&&u.name?n.user.name:(d=n.user)!=null&&d.email?n.user.email:e.name};return L.jsxs("div",{className:"clients-client-wrapper",children:[L.jsxs("div",{className:"clients-client-name",children:[o()," ",L.jsxs("span",{className:"clients-client-id",children:["(",e.userId??e.requestedUserId??e.id,")"]})]}),L.jsx("div",{className:`clients-client-card ${t?"selected":""}`,onClick:r,children:L.jsx("div",{className:"clients-posts-grid",children:n.posts.length===0?L.jsx("div",{className:"clients-empty",children:"No posts"}):n.posts.map(u=>L.jsxs("div",{className:`clients-post-card ${u.published?"":"unpublished"}`,children:[L.jsx("div",{className:"clients-post-title",children:u.title||"Untitled"}),L.jsx("div",{className:"clients-post-content",children:u.content||""})]},u.id))})})]})}function dO({clients:e,selectedClientId:t,onSelectClient:r,onAddClient:n}){return L.jsxs("div",{className:"clients",children:[L.jsx("h2",{children:"Clients"}),L.jsxs("div",{className:"clients-grid",children:[e.map(i=>L.jsx(fO,{client:i,isSelected:t===i.id,onSelect:()=>r(i.id)},i.id)),L.jsx("div",{className:"clients-client-wrapper clients-add-client-wrapper",children:L.jsx("div",{className:"clients-add-client-card",onClick:n,children:L.jsx("div",{className:"clients-add-client-text",children:"Add client"})})})]})]})}async function pO(){try{const e=await fetch("http://localhost:3000/queries");if(!e.ok)throw new Error(`Failed to fetch queries: ${e.statusText}`);return await e.json()}catch(e){return console.error("Failed to discover queries:",e),[]}}function hO(e){if(!e)throw new Error("Elm scope is required");return function(t){function r(s,a,l){return l.a=s,l.f=a,l}function n(s){return r(2,s,function(a){return function(l){return s(a,l)}})}function i(s){return r(3,s,function(a){return function(l){return function(f){return s(a,l,f)}}})}function o(s){return r(4,s,function(a){return function(l){return function(f){return function(p){return s(a,l,f,p)}}}})}function u(s){return r(5,s,function(a){return function(l){return function(f){return function(p){return function($){return s(a,l,f,p,$)}}}}})}function d(s){return r(6,s,function(a){return function(l){return function(f){return function(p){return function($){return function(y){return s(a,l,f,p,$,y)}}}}}})}function h(s){return r(7,s,function(a){return function(l){return function(f){return function(p){return function($){return function(y){return function(w){return s(a,l,f,p,$,y,w)}}}}}}})}function m(s){return r(8,s,function(a){return function(l){return function(f){return function(p){return function($){return function(y){return function(w){return function(D){return s(a,l,f,p,$,y,w,D)}}}}}}}})}function g(s){return r(9,s,function(a){return function(l){return function(f){return function(p){return function($){return function(y){return function(w){return function(D){return function(N){return s(a,l,f,p,$,y,w,D,N)}}}}}}}}})}function c(s,a,l){return s.a===2?s.f(a,l):s(a)(l)}function v(s,a,l,f){return s.a===3?s.f(a,l,f):s(a)(l)(f)}function E(s,a,l,f,p){return s.a===4?s.f(a,l,f,p):s(a)(l)(f)(p)}function C(s,a,l,f,p,$){return s.a===5?s.f(a,l,f,p,$):s(a)(l)(f)(p)($)}function R(s,a,l,f,p,$,y){return s.a===6?s.f(a,l,f,p,$,y):s(a)(l)(f)(p)($)(y)}function H(s,a,l,f,p,$,y,w){return s.a===7?s.f(a,l,f,p,$,y,w):s(a)(l)(f)(p)($)(y)(w)}var S=[];function k(s){return s.length}var x=i(function(s,a,l){for(var f=new Array(s),p=0;p<s;p++)f[p]=l(a+p);return f}),I=n(function(s,a){for(var l=new Array(s),f=0;f<s&&a.b;f++)l[f]=a.a,a=a.b;return l.length=f,j(l,a)});n(function(s,a){return a[s]}),i(function(s,a,l){for(var f=l.length,p=new Array(f),$=0;$<f;$++)p[$]=l[$];return p[s]=a,p}),n(function(s,a){for(var l=a.length,f=new Array(l+1),p=0;p<l;p++)f[p]=a[p];return f[l]=s,f}),i(function(s,a,l){for(var f=l.length,p=0;p<f;p++)a=c(s,l[p],a);return a});var O=i(function(s,a,l){for(var f=l.length-1;f>=0;f--)a=c(s,l[f],a);return a});n(function(s,a){for(var l=a.length,f=new Array(l),p=0;p<l;p++)f[p]=s(a[p]);return f}),i(function(s,a,l){for(var f=l.length,p=new Array(f),$=0;$<f;$++)p[$]=c(s,a+$,l[$]);return p}),i(function(s,a,l){return l.slice(s,a)}),i(function(s,a,l){var f=a.length,p=s-f;p>l.length&&(p=l.length);for(var $=f+p,y=new Array($),w=0;w<f;w++)y[w]=a[w];for(var w=0;w<p;w++)y[w+f]=l[w];return y}),n(function(s,a){return a}),n(function(s,a){return console.log(s+": "+F()),a});function F(s){return"<internals>"}function K(s){throw new Error("https://github.com/elm/core/blob/1.0.0/hints/"+s+".md")}function z(s,a){for(var l,f=[],p=me(s,a,0,f);p&&(l=f.pop());p=me(l.a,l.b,0,f));return p}function me(s,a,l,f){if(s===a)return!0;if(typeof s!="object"||s===null||a===null)return typeof s=="function"&&K(5),!1;if(l>100)return f.push(j(s,a)),!0;s.$<0&&(s=Do(s),a=Do(a));for(var p in s)if(!me(s[p],a[p],l+1,f))return!1;return!0}n(z),n(function(s,a){return!z(s,a)});function X(s,a,l){if(typeof s!="object")return s===a?0:s<a?-1:1;if(typeof s.$>"u")return(l=X(s.a,a.a))||(l=X(s.b,a.b))?l:X(s.c,a.c);for(;s.b&&a.b&&!(l=X(s.a,a.a));s=s.b,a=a.b);return l||(s.b?1:a.b?-1:0)}n(function(s,a){return X(s,a)<0}),n(function(s,a){return X(s,a)<1}),n(function(s,a){return X(s,a)>0}),n(function(s,a){return X(s,a)>=0});var Ye=n(function(s,a){var l=X(s,a);return l<0?Od:l?Wb:Pd}),$e=0;function j(s,a){return{a:s,b:a}}function Xi(s,a,l){return{a:s,b:a,c:l}}function wd(s){return s}function fe(s,a){var l={};for(var f in s)l[f]=s[f];for(var f in a)l[f]=a[f];return l}n(nt);function nt(s,a){if(typeof s=="string")return s+a;if(!s.b)return a;var l=re(s.a,a);s=s.b;for(var f=l;s.b;s=s.b)f=f.b=re(s.a,a);return l}var _={$:0};function re(s,a){return{$:1,a:s,b:a}}var oe=n(re);function U(s){for(var a=_,l=s.length;l--;)a=re(s[l],a);return a}function Le(s){for(var a=[];s.b;s=s.b)a.push(s.a);return a}var Zn=i(function(s,a,l){for(var f=[];a.b&&l.b;a=a.b,l=l.b)f.push(c(s,a.a,l.a));return U(f)});o(function(s,a,l,f){for(var p=[];a.b&&l.b&&f.b;a=a.b,l=l.b,f=f.b)p.push(v(s,a.a,l.a,f.a));return U(p)}),u(function(s,a,l,f,p){for(var $=[];a.b&&l.b&&f.b&&p.b;a=a.b,l=l.b,f=f.b,p=p.b)$.push(E(s,a.a,l.a,f.a,p.a));return U($)}),d(function(s,a,l,f,p,$){for(var y=[];a.b&&l.b&&f.b&&p.b&&$.b;a=a.b,l=l.b,f=f.b,p=p.b,$=$.b)y.push(C(s,a.a,l.a,f.a,p.a,$.a));return U(y)}),n(function(s,a){return U(Le(a).sort(function(l,f){return X(s(l),s(f))}))});var yr=n(function(s,a){return U(Le(a).sort(function(l,f){var p=c(s,l,f);return p===Pd?0:p===Od?-1:1}))});n(function(s,a){return s+a}),n(function(s,a){return s-a}),n(function(s,a){return s*a}),n(function(s,a){return s/a}),n(function(s,a){return s/a|0}),n(Math.pow),n(function(s,a){return a%s}),n(function(s,a){var l=a%s;return s===0?K(11):l>0&&s<0||l<0&&s>0?l+s:l}),n(Math.atan2);var es=Math.ceil,gr=Math.floor,wn=Math.log;function _0(s){return!s}n(function(s,a){return s&&a}),n(function(s,a){return s||a}),n(function(s,a){return s!==a}),n(function(s,a){return s+a});function R0(s){var a=s.charCodeAt(0);return isNaN(a)?Q:G(55296<=a&&a<=56319?j(s[0]+s[1],s.slice(2)):j(s[0],s.slice(1)))}n(function(s,a){return s+a}),n(function(s,a){for(var l=a.length,f=new Array(l),p=0;p<l;){var $=a.charCodeAt(p);if(55296<=$&&$<=56319){f[p]=s(a[p]+a[p+1]),p+=2;continue}f[p]=s(a[p]),p++}return f.join("")}),n(function(s,a){for(var l=[],f=a.length,p=0;p<f;){var $=a[p],y=a.charCodeAt(p);p++,55296<=y&&y<=56319&&($+=a[p],p++),s($)&&l.push($)}return l.join("")}),i(function(s,a,l){for(var f=l.length,p=0;p<f;){var $=l[p],y=l.charCodeAt(p);p++,55296<=y&&y<=56319&&($+=l[p],p++),a=c(s,$,a)}return a}),i(function(s,a,l){for(var f=l.length;f--;){var p=l[f],$=l.charCodeAt(f);56320<=$&&$<=57343&&(f--,p=l[f]+p),a=c(s,p,a)}return a});var T0=n(function(s,a){return a.split(s)}),L0=n(function(s,a){return a.join(s)});i(function(s,a,l){return l.slice(s,a)});function F0(s){return s.toLowerCase()}n(function(s,a){for(var l=a.length;l--;){var f=a[l],p=a.charCodeAt(l);if(56320<=p&&p<=57343&&(l--,f=a[l]+f),s(f))return!0}return!1});var z0=n(function(s,a){for(var l=a.length;l--;){var f=a[l],p=a.charCodeAt(l);if(56320<=p&&p<=57343&&(l--,f=a[l]+f),!s(f))return!1}return!0});n(function(s,a){return a.indexOf(s)>-1}),n(function(s,a){return a.indexOf(s)===0}),n(function(s,a){return a.length>=s.length&&a.lastIndexOf(s)===a.length-s.length}),n(function(s,a){var l=s.length;if(l<1)return _;for(var f=0,p=[];(f=a.indexOf(s,f))>-1;)p.push(f),f=f+l;return U(p)});function B0(s){return s+""}function q0(s){if(s.length===0||/[\sxbo]/.test(s))return Q;var a=+s;return a===a?G(a):Q}function U0(s){var a=s.charCodeAt(0);return 55296<=a&&a<=56319?(a-55296)*1024+s.charCodeAt(1)-56320+65536:a}function K0(s){return{$:0,a:s}}function Q0(s){return{$:1,a:s}}function ts(s){return{$:2,b:s}}var J0=ts(function(s){return typeof s!="number"?_t("an INT",s):-2147483647<s&&s<2147483647&&(s|0)===s||isFinite(s)&&!(s%1)?Ze(s):_t("an INT",s)}),V0=ts(function(s){return typeof s=="boolean"?Ze(s):_t("a BOOL",s)}),H0=ts(function(s){return typeof s=="number"?Ze(s):_t("a FLOAT",s)}),W0=ts(function(s){return Ze(s)}),G0=ts(function(s){return typeof s=="string"?Ze(s):s instanceof String?Ze(s+""):_t("a STRING",s)});function Y0(s){return{$:3,b:s}}function Z0(s){return{$:5,c:s}}var X0=n(function(s,a){return{$:6,d:s,b:a}}),eb=n(function(s,a){return{$:7,e:s,b:a}});function tb(s){return{$:8,b:s}}function qr(s,a){return{$:9,f:s,g:a}}var rb=n(function(s,a){return{$:10,b:a,h:s}});function nb(s){return{$:11,g:s}}var ib=n(function(s,a){return qr(s,[a])}),sb=i(function(s,a,l){return qr(s,[a,l])}),ob=o(function(s,a,l,f){return qr(s,[a,l,f])}),ab=u(function(s,a,l,f,p){return qr(s,[a,l,f,p])}),ub=d(function(s,a,l,f,p,$){return qr(s,[a,l,f,p,$])});h(function(s,a,l,f,p,$,y){return qr(s,[a,l,f,p,$,y])}),m(function(s,a,l,f,p,$,y,w){return qr(s,[a,l,f,p,$,y,w])}),g(function(s,a,l,f,p,$,y,w,D){return qr(s,[a,l,f,p,$,y,w,D])});var lb=n(function(s,a){try{var l=JSON.parse(a);return ar(s,l)}catch(f){return Fe(c(Ru,"This is not valid JSON! "+f.message,a))}}),ju=n(function(s,a){return ar(s,a)});function ar(s,a){switch(s.$){case 2:return s.b(a);case 5:return a===null?Ze(s.c):_t("null",a);case 3:return go(a)?kd(s.b,a,U):_t("a LIST",a);case 4:return go(a)?kd(s.b,a,cb):_t("an ARRAY",a);case 6:var l=s.d;if(typeof a!="object"||a===null||!(l in a))return _t("an OBJECT with a field named `"+l+"`",a);var N=ar(s.b,a[l]);return wr(N)?N:Fe(c(Ad,l,N.a));case 7:var f=s.e;if(!go(a))return _t("an ARRAY",a);if(f>=a.length)return _t("a LONGER array. Need index "+f+" but only see "+a.length+" entries",a);var N=ar(s.b,a[f]);return wr(N)?N:Fe(c(_d,f,N.a));case 8:if(typeof a!="object"||a===null||go(a))return _t("an OBJECT",a);var p=_;for(var $ in a)if(Object.prototype.hasOwnProperty.call(a,$)){var N=ar(s.b,a[$]);if(!wr(N))return Fe(c(Ad,$,N.a));p=re(j($,N.a),p)}return Ze(ur(p));case 9:for(var y=s.f,w=s.g,D=0;D<w.length;D++){var N=ar(w[D],a);if(!wr(N))return N;y=y(N.a)}return Ze(y);case 10:var N=ar(s.b,a);return wr(N)?ar(s.h(N.a),a):N;case 11:for(var A=_,P=s.g;P.b;P=P.b){var N=ar(P.a,a);if(wr(N))return N;A=re(N.a,A)}return Fe(Zb(ur(A)));case 1:return Fe(c(Ru,s.a,a));case 0:return Ze(s.a)}}function kd(s,a,l){for(var f=a.length,p=new Array(f),$=0;$<f;$++){var y=ar(s,a[$]);if(!wr(y))return Fe(c(_d,$,y.a));p[$]=y.a}return Ze(l(p))}function go(s){return Array.isArray(s)||typeof FileList<"u"&&s instanceof FileList}function cb(s){return c($w,s.length,function(a){return s[a]})}function _t(s,a){return Fe(c(Ru,"Expecting "+s,a))}var fb=n(function(s,a){return JSON.stringify(a,null,s)+""});function bo(s){return s}function MO(s){return s}function db(){return[]}function Sd(){return{}}var xd=i(function(s,a,l){var f=a;return s==="toJSON"&&typeof f=="function"||(l[s]=f),l});function pb(s){return n(function(a,l){return l.push(s(a)),l})}var hb=null;function kn(s){return{$:0,a:s}}function Xn(s){return{$:2,b:s,c:null}}var Iu=n(function(s,a){return{$:3,b:s,d:a}});n(function(s,a){return{$:4,b:s,d:a}});function mb(s){return{$:5,b:s}}var $b=0;function wo(s){var a={$:0,e:$b++,f:s,g:null,h:[]};return Pu(a),a}function vb(s){return Xn(function(a){a(kn(wo(s)))})}function Dd(s,a){s.h.push(a),Pu(s)}var yb=n(function(s,a){return Xn(function(l){Dd(s,a),l(kn($e))})});function gb(s){return Xn(function(a){var l=s.f;l.$===2&&l.c&&l.c(),s.f=null,a(kn($e))})}var Mu=!1,Cd=[];function Pu(s){if(Cd.push(s),!Mu){for(Mu=!0;s=Cd.shift();)bb(s);Mu=!1}}function bb(s){for(;s.f;){var a=s.f.$;if(a===0||a===1){for(;s.g&&s.g.$!==a;)s.g=s.g.i;if(!s.g)return;s.f=s.g.b(s.f.a),s.g=s.g.i}else if(a===2){s.f.c=s.f.b(function(l){s.f=l,Pu(s)});return}else if(a===5){if(s.h.length===0)return;s.f=s.f.b(s.h.shift())}else s.g={$:a===3?0:1,b:s.f.b,i:s.g},s.f=s.f.d}}function wb(s){return Xn(function(a){var l=setTimeout(function(){a(kn($e))},s);return function(){clearTimeout(l)}})}var kb=o(function(s,a,l,f){return Sb(a,f,s.bT,s.ct,s.w,function(){return function(){}})});function Sb(s,a,l,f,p,$){var y=c(ju,s,a?a.flags:void 0);wr(y)||K(2);var w={},D=l(y.a),N=D.a,A=$(M,N),P=xb(w,M);function M(T,J){var Z=c(f,T,N);A(N=Z.a,J),jd(w,Z.b,p(N))}return jd(w,D.b,p(N)),P?{ports:P}:{}}var kt={};function xb(s,a){var l;for(var f in kt){var p=kt[f];p.a&&(l=l||{},l[f]=p.a(f,a)),s[f]=Cb(p,a)}return l}function Db(s,a,l,f,p){return{b:s,c:a,d:l,e:f,f:p}}function Cb(s,a){var l={g:a,h:void 0},f=s.c,p=s.d,$=s.e,y=s.f;function w(D){return c(Iu,w,mb(function(N){var A=N.a;return N.$===0?v(p,l,A,D):$&&y?E(f,l,A.i,A.j,D):v(f,l,$?A.i:A.j,D)}))}return l.h=wo(c(Iu,w,s.b))}var Nb=n(function(s,a){return Xn(function(l){s.g(a),l(kn($e))})}),Eb=n(function(s,a){return c(yb,s.h,{$:0,a})});function Ou(s){return function(a){return{$:1,k:s,l:a}}}function Nd(s){return{$:2,m:s}}var jb=n(function(s,a){return{$:3,n:s,o:a}}),Ed=[],Au=!1;function jd(s,a,l){if(Ed.push({p:s,q:a,r:l}),!Au){Au=!0;for(var f;f=Ed.shift();)Ib(f.p,f.q,f.r);Au=!1}}function Ib(s,a,l){var f={};ko(!0,a,f,null),ko(!1,l,f,null);for(var p in s)Dd(s[p],{$:"fx",a:f[p]||{i:_,j:_}})}function ko(s,a,l,f){switch(a.$){case 1:var p=a.k,$=Mb(s,p,f,a.l);l[p]=Pb(s,$,l[p]);return;case 2:for(var y=a.m;y.b;y=y.b)ko(s,y.a,l,f);return;case 3:ko(s,a.o,l,{s:a.n,t:f});return}}function Mb(s,a,l,f){function p(y){for(var w=l;w;w=w.t)y=w.s(y);return y}var $=s?kt[a].e:kt[a].f;return c($,p,f)}function Pb(s,a,l){return l=l||{i:_,j:_},s?l.i=re(a,l.i):l.j=re(a,l.j),l}function Id(s){kt[s]&&K(3)}function ei(s,a){return Id(s),kt[s]={e:Ob,u:a,a:Ab},Ou(s)}var Ob=n(function(s,a){return a});function Ab(s){var a=[],l=kt[s].u,f=wb(0);kt[s].b=f,kt[s].c=i(function(y,w,D){for(;w.b;w=w.b)for(var N=a,A=l(w.a),P=0;P<N.length;P++)N[P](A);return f});function p(y){a.push(y)}function $(y){a=a.slice();var w=a.indexOf(y);w>=0&&a.splice(w,1)}return{subscribe:p,unsubscribe:$}}function rs(s,a){return Id(s),kt[s]={f:_b,u:a,a:Rb},Ou(s)}var _b=n(function(s,a){return function(l){return s(a(l))}});function Rb(s,a){var l=_,f=kt[s].u,p=kn(null);kt[s].b=p,kt[s].c=i(function(y,w,D){return l=w,p});function $(y){var w=c(ju,f,y);wr(w)||K(4,s,w.a);for(var D=w.a,N=l;N.b;N=N.b)a(N.a(D))}return{send:$}}function Tb(s){t.Elm?Md(t.Elm,s):t.Elm=s}function Md(s,a){for(var l in a)l in s?l=="init"?K(6):Md(s[l],a[l]):s[l]=a[l]}function Lb(s){return encodeURIComponent(s)}var Fb=i(function(s,a,l){return Xn(function(f){function p(y){f(a(l.bK.a(y)))}var $=new XMLHttpRequest;$.addEventListener("error",function(){p(VS)}),$.addEventListener("timeout",function(){p(GS)}),$.addEventListener("load",function(){p(Bb(l.bK.b,$))}),Jp(l.cq)&&Hb(s,$,l.cq.a);try{$.open(l.b_,l.cu,!0)}catch{return p(QS(l.cu))}return zb($,l),l.bB.a&&$.setRequestHeader("Content-Type",l.bB.a),$.send(l.bB.b),function(){$.c=!0,$.abort()}})});function zb(s,a){for(var l=a.bQ;l.b;l=l.b)s.setRequestHeader(l.a.a,l.a.b);s.timeout=a.co.a||0,s.responseType=a.bK.d,s.withCredentials=a.by}function Bb(s,a){return c(200<=a.status&&a.status<300?JS:KS,qb(a),s(a.response))}function qb(s){return{cu:s.responseURL,cj:s.status,ck:s.statusText,bQ:Ub(s.getAllResponseHeaders())}}function Ub(s){if(!s)return Ae;for(var a=Ae,l=s.split(`\r
`),f=l.length;f--;){var p=l[f],$=p.indexOf(": ");if($>0){var y=p.substring(0,$),w=p.substring($+2);a=v(ll,y,function(D){return G(Jp(D)?w+", "+D.a:w)},a)}}return a}var Kb=i(function(s,a,l){return{$:0,d:s,b:a,a:l}}),Qb=n(function(s,a){return{$:0,d:a.d,b:a.b,a:function(l){return s(a.a(l))}}}),Jb={$:0},Vb=n(function(s,a){return{$:0,a:s,b:a}});n(function(s,a){return new Blob([a],{type:s})});function Hb(s,a,l){a.upload.addEventListener("progress",function(f){a.c||wo(c(Vp,s,j(l,WS({ci:f.loaded,bk:f.total}))))}),a.addEventListener("progress",function(f){a.c||wo(c(Vp,s,j(l,HS({cc:f.loaded,bk:f.lengthComputable?G(f.total):Q}))))})}var de=oe,So=O;i(function(s,a,l){var f=l.c,p=l.d,$=n(function(y,w){if(y.$){var N=y.a;return v(So,s,w,N)}else{var D=y.a;return v(So,$,w,D)}});return v(So,$,v(So,s,a,p),f)});var xo=i(function(s,a,l){e:for(;;){if(l.$===-2)return a;var f=l.b,p=l.c,$=l.d,y=l.e,w=s,D=v(s,f,p,v(xo,s,a,y)),N=$;s=w,a=D,l=N;continue e}}),Do=function(s){return v(xo,i(function(a,l,f){return c(de,j(a,l),f)}),_,s)},_u=function(s){return v(xo,i(function(a,l,f){return c(de,a,f)}),_,s)},Pd=1,Wb=2,Od=0,Gb=i(function(s,a,l){return{aA:l,s,at:a}}),Yb=function(s){return{aN:s}},Fe=function(s){return{$:1,a:s}},Ru=n(function(s,a){return{$:3,a:s,b:a}}),Ad=n(function(s,a){return{$:0,a:s,b:a}}),_d=n(function(s,a){return{$:1,a:s,b:a}}),Ze=function(s){return{$:0,a:s}},Zb=function(s){return{$:2,a:s}},G=function(s){return{$:0,a:s}},Q={$:1},Xb=z0,Tu=fb,br=B0,Ur=n(function(s,a){return c(L0,s,Le(a))}),Lu=n(function(s,a){return U(c(T0,s,a))}),Rd=function(s){return c(Ur,`
    `,c(Lu,`
`,s))},Ke=i(function(s,a,l){e:for(;;)if(l.b){var f=l.a,p=l.b,$=s,y=c(s,f,a),w=p;s=$,a=y,l=w;continue e}else return a}),ti=function(s){return v(Ke,n(function(a,l){return l+1}),0,s)},Sn=Zn,ew=i(function(s,a,l){e:for(;;)if(X(s,a)<1){var f=s,p=a-1,$=c(de,a,l);s=f,a=p,l=$;continue e}else return l}),Td=n(function(s,a){return v(ew,s,a,_)}),Fu=n(function(s,a){return v(Sn,s,c(Td,0,ti(a)-1),a)}),zu=U0,Ld=function(s){var a=zu(s);return 97<=a&&a<=122},Fd=function(s){var a=zu(s);return a<=90&&65<=a},tw=function(s){return Ld(s)||Fd(s)},rw=function(s){var a=zu(s);return a<=57&&48<=a},nw=function(s){return Ld(s)||Fd(s)||rw(s)},ur=function(s){return v(Ke,de,_,s)},iw=R0,sw=n(function(s,a){return`

(`+(br(s+1)+(") "+Rd(xn(a))))}),xn=function(s){return c(ow,s,_)},ow=n(function(s,a){e:for(;;)switch(s.$){case 0:var l=s.a,y=s.b,f=function(){var Z=iw(l);if(Z.$===1)return!1;var se=Z.a,ce=se.a,ue=se.b;return tw(ce)&&c(Xb,nw,ue)}(),p=f?"."+l:"['"+(l+"']"),D=y,N=c(de,p,a);s=D,a=N;continue e;case 1:var $=s.a,y=s.b,w="["+(br($)+"]"),D=y,N=c(de,w,a);s=D,a=N;continue e;case 2:var A=s.a;if(A.b)if(A.b.b){var P=function(){return a.b?"The Json.Decode.oneOf at json"+c(Ur,"",ur(a)):"Json.Decode.oneOf"}(),J=P+(" failed in the following "+(br(ti(A))+" ways:"));return c(Ur,`

`,c(de,J,c(Fu,sw,A)))}else{var y=A.a,D=y,N=a;s=D,a=N;continue e}else return"Ran into a Json.Decode.oneOf with no possibilities"+function(){return a.b?" at json"+c(Ur,"",ur(a)):"!"}();default:var M=s.a,T=s.b,J=function(){return a.b?"Problem with the value at json"+(c(Ur,"",ur(a))+`:

    `):`Problem with the given value:

`}();return J+(Rd(c(Tu,4,T))+(`

`+M))}}),Vt=32,Bu=o(function(s,a,l,f){return{$:0,a:s,b:a,c:l,d:f}}),qu=S,zd=es,Bd=n(function(s,a){return wn(a)/wn(s)}),Uu=zd(c(Bd,2,Vt)),aw=E(Bu,0,Uu,qu,qu),qd=x,uw=function(s){return{$:1,a:s}};n(function(s,a){return s(a)}),n(function(s,a){return a(s)});var lw=gr,Ud=k,Kd=n(function(s,a){return X(s,a)>0?s:a}),cw=function(s){return{$:0,a:s}},Qd=I,fw=n(function(s,a){e:for(;;){var l=c(Qd,Vt,s),f=l.a,p=l.b,$=c(de,cw(f),a);if(p.b){var y=p,w=$;s=y,a=w;continue e}else return ur($)}}),dw=function(s){var a=s.a;return a},pw=n(function(s,a){e:for(;;){var l=zd(a/Vt);if(l===1)return c(Qd,Vt,s).a;var f=c(fw,s,_),p=l;s=f,a=p;continue e}}),hw=n(function(s,a){if(a.f){var l=a.f*Vt,f=lw(c(Bd,Vt,l-1)),p=s?ur(a.j):a.j,$=c(pw,p,a.f);return E(Bu,Ud(a.i)+l,c(Kd,5,f*Uu),$,a.i)}else return E(Bu,Ud(a.i),Uu,qu,a.i)}),mw=u(function(s,a,l,f,p){e:for(;;){if(a<0)return c(hw,!1,{j:f,f:l/Vt|0,i:p});var $=uw(v(qd,Vt,a,s)),y=s,w=a-Vt,D=l,N=c(de,$,f),A=p;s=y,a=w,l=D,f=N,p=A;continue e}}),$w=n(function(s,a){if(s<=0)return aw;var l=s%Vt,f=v(qd,l,s-l,a),p=s-l-Vt;return C(mw,a,p,s,_,f)}),wr=function(s){return!s.$},Rt=rb,Tt=Q0,ye=G0,ut=K0,vw=c(Rt,function(s){switch(s){case"sse":return ut(0);case"websocket":return ut(1);default:return Tt("Unknown live sync transport: "+s)}},ye),te=X0,Ne=ib,yw=c(Ne,Yb,c(te,"transport",vw)),gw=n(function(s,a){return{aE:a,ab:s}}),bw=i(function(s,a,l){return{bS:l,bZ:a,b1:s}}),ww=i(function(s,a,l){return{bO:s,cb:l,cs:a}}),ri=V0,Dn=ob,kw=E(Dn,ww,c(te,"field",ye),c(te,"unique",ri),c(te,"primary",ri)),Sw=i(function(s,a,l){return{bP:a,cp:l,cr:s}}),xw=n(function(s,a){return{bG:a,bq:s}}),Cn=sb,Dw=v(Cn,xw,c(te,"table",ye),c(te,"column",ye)),Cw=c(Rt,function(s){switch(s){case"many-to-one":return ut(0);case"one-to-many":return ut(1);case"one-to-one":return ut(2);default:return Tt("Unknown link type: "+s)}},ye),Nw=E(Dn,Sw,c(te,"type",Cw),c(te,"from",ye),c(te,"to",Dw)),lr={$:-2},Ae=lr,ae=u(function(s,a,l,f,p){return{$:-1,a:s,b:a,c:l,d:f,e:p}}),ni=u(function(s,a,l,f,p){if(p.$===-1&&!p.a){p.a;var $=p.b,y=p.c,w=p.d,D=p.e;if(f.$===-1&&!f.a){f.a;var N=f.b,A=f.c,P=f.d,M=f.e;return C(ae,0,a,l,C(ae,1,N,A,P,M),C(ae,1,$,y,w,D))}else return C(ae,s,$,y,C(ae,0,a,l,f,w),D)}else if(f.$===-1&&!f.a&&f.d.$===-1&&!f.d.a){f.a;var N=f.b,A=f.c,T=f.d;T.a;var J=T.b,Z=T.c,se=T.d,ce=T.e,M=f.e;return C(ae,0,N,A,C(ae,1,J,Z,se,ce),C(ae,1,a,l,M,p))}else return C(ae,s,a,l,f,p)}),Jd=Ye,Ku=i(function(s,a,l){if(l.$===-2)return C(ae,0,s,a,lr,lr);var f=l.a,p=l.b,$=l.c,y=l.d,w=l.e,D=c(Jd,s,p);switch(D){case 0:return C(ni,f,p,$,v(Ku,s,a,y),w);case 1:return C(ae,f,p,a,y,w);default:return C(ni,f,p,$,y,v(Ku,s,a,w))}}),De=i(function(s,a,l){var f=v(Ku,s,a,l);if(f.$===-1&&!f.a){f.a;var p=f.b,$=f.c,y=f.d,w=f.e;return C(ae,1,p,$,y,w)}else{var D=f;return D}}),Nn=function(s){return v(Ke,n(function(a,l){var f=a.a,p=a.b;return v(De,f,p,l)}),Ae,s)},Vd=tb,Ht=function(s){return c(Ne,Nn,Vd(s))},Lt=Y0,Ew=E(Dn,bw,c(te,"name",ye),c(te,"links",Ht(Nw)),c(te,"indices",Lt(kw))),jw=v(Cn,gw,c(te,"tables",Ht(Ew)),c(te,"queryFieldToTable",Ht(ye))),Iw=n(function(s,a){return{aQ:s,aS:a}}),Mw=v(Cn,Iw,c(te,"baseUrl",ye),c(te,"catchupPath",ye)),Kr=nb,Pw=E(Dn,Gb,c(te,"schema",jw),c(te,"server",Mw),Kr(U([c(te,"liveSync",yw),ut({aN:0})]))),Wt=ju,Hd={$:0},Gt=Nd,Ow={$:0},Aw=function(s){return{B:Ae,E:!1,ai:!1,at:s,O:Ow,I:0}},_w={w:Ae},Rw={bS:Ae,ab:Ae},Tw={$:0},Qu=bo,Me=i(function(s,a,l){e:for(;;){if(l.$===-2)return a;var f=l.b,p=l.c,$=l.d,y=l.e,w=s,D=v(s,f,p,v(Me,s,a,$)),N=y;s=w,a=D,l=N;continue e}}),Qr=i(function(s,a,l){return v(Me,i(function(f,p,$){return v(xd,s(f),a(p),$)}),Sd(),l)}),Wd=bo,lt=function(s){return s},kr=bo,Sr=n(function(s,a){return v(Ke,pb(s),db(),a)}),Gd=hb,pe=bo,En=function(s){switch(s.$){case 0:var a=s.a;return pe(a);case 1:var l=s.a;return kr(l);case 2:var f=s.a;return Wd(f);case 3:var p=s.a;return Qu(p);case 4:return Gd;case 5:var $=s.a;return c(Sr,En,$);default:var y=s.a;return v(Qr,lt,En,y)}},Pe=function(s){return v(Ke,n(function(a,l){var f=a.a,p=a.b;return v(xd,f,p,l)}),Sd(),s)},Lw=function(s){return Pe(U([j("table_name",pe(s.cm)),j("headers",c(Sr,pe,s.bQ)),j("rows",c(Sr,Sr(En),s.ap))]))},Fw=function(s){if(s.$){var a=s.a;return Pe(U([j("type",pe("writeDelta")),j("tableGroups",c(Sr,Lw,a))]))}else return Pe(U([j("type",pe("requestInitialData"))]))},zw=ei("indexedDbOut",lt),Yd=function(s){return zw(Fw(s))},Bw=Yd(Tw),Zd=function(s){return j({L:Aw(s.at),ad:Rw,Y:!1,aj:s.aA.aN,h:_w,s:s.s,P:Hd},Gt(U([Bw])))},Co=function(s){return{$:6,a:s}},qw=function(s){return{$:0,a:s}},Uw=function(s){return{$:1,a:s}},Kw=function(s){return{$:3,a:s}},Qw=function(s){return{$:2,a:s}},Xd=Nd,Jw=function(s){return{ab:s}},ep=function(s){return{$:5,a:s}},Vw=function(s){return{$:3,a:s}},Hw=function(s){return{$:2,a:s}},Ww=function(s){return{$:1,a:s}},jn={$:4},tp=function(s){return{$:6,a:s}},Gw=function(s){return{$:0,a:s}},rp=H0,ns=J0,Ju=function(s){return c(Rt,s,ut(0))},Vu=Z0;function No(){return Kr(U([c(Ne,Gw,ye),c(Ne,Ww,ns),c(Ne,Hw,rp),c(Ne,Vw,ri),Vu(jn),c(Ne,ep,Lt(Ju(function(s){return No()}))),c(Ne,tp,Ht(Ju(function(s){return No()})))]))}var is=No();No=function(){return is};var Yw=c(Ne,Jw,c(te,"tables",Ht(Lt(Ht(is))))),Zw=c(Rt,function(s){return s==="initialData"?c(Ne,lt,c(te,"data",Yw)):Tt("Unknown IndexedDB incoming type: "+s)},c(te,"type",ye)),Ft=W0,Xw=rs("receiveIndexedDbMessage",Ft),e1=function(s){return Xw(function(a){return s(c(Wt,Zw,a))})},t1=function(s){return{$:0,a:s}},r1=function(s){return{$:2,a:s}},n1=function(s){return{$:3,a:s}},i1={$:4},s1=function(s){return{$:1,a:s}},o1=function(s){return{cl:s}},a1=i(function(s,a,l){return{bQ:a,ap:l,cm:s}}),u1=E(Dn,a1,c(te,"table_name",ye),c(te,"headers",Lt(ye)),c(te,"rows",Lt(Lt(is)))),l1=c(Ne,o1,Lt(u1)),c1=u(function(s,a,l,f,p){return{aT:f,M:p,bq:s,I:a,bt:l}}),f1=ub,Hu=function(s){return Kr(U([c(Ne,G,s),ut(Q)]))},d1=R(f1,c1,Hu(c(te,"table",ye)),c(te,"tablesSynced",ns),Hu(c(te,"totalTables",ns)),c(te,"complete",ri),Hu(c(te,"error",ye))),np=c(Rt,function(s){switch(s){case"delta":return c(Ne,t1,c(te,"data",l1));case"syncProgress":return c(Ne,s1,c(te,"data",d1));case"connected":return c(Ne,r1,c(te,"sessionId",ye));case"error":return c(Ne,n1,c(te,"error",ye));case"syncComplete":return ut(i1);default:return Tt("Unknown live sync incoming type: "+s)}},c(te,"type",ye)),p1=rs("receiveSSEMessage",Ft),h1=rs("receiveWebSocketMessage",Ft),m1=function(s){return Xd(U([p1(function(a){return s(c(Wt,np,a))}),h1(function(a){return s(c(Wt,np,a))})]))},$1=o(function(s,a,l,f){return{$:0,a:s,b:a,c:l,d:f}}),ip=eb,ii=n(function(s,a){return j(s,a)}),v1=v(Cn,ii,c(ip,0,ye),c(ip,1,ye)),y1=Lt(v1),g1=ab,b1=c(Rt,function(s){return s==="sendMutation"?C(g1,$1,c(te,"id",ye),c(te,"baseUrl",ye),Kr(U([c(te,"headers",y1),ut(_)])),c(te,"input",Ft)):Tt("Unknown QueryManager incoming type: "+s)},c(te,"type",ye)),w1=rs("receiveQueryManagerMessage",Ft),k1=function(s){return w1(function(a){return s(c(Wt,b1,a))})},S1=i(function(s,a,l){return{$:0,a:s,b:a,c:l}}),x1=function(s){return{$:2,a:s}},D1=n(function(s,a){return{$:1,a:s,b:a}}),C1={$:0},N1=function(s){return{$:1,a:s}},E1=n(function(s,a){return{aX:a,bO:s}}),j1=F0,I1=c(Rt,function(s){var a=j1(s);return ut(a==="desc"?1:0)},ye),sp=v(Cn,E1,c(te,"field",ye),c(te,"direction",I1)),M1=Kr(U([Lt(sp),c(Ne,function(s){return U([s])},sp)])),P1=function(s){return{$:3,a:s}},O1={$:1},A1=function(s){return{$:2,a:s}},_1=function(s){return{$:4,a:s}},op=function(s){return{$:0,a:s}},Y=n(function(s,a){e:for(;;){if(a.$===-2)return Q;var l=a.b,f=a.c,p=a.d,$=a.e,y=c(Jd,s,l);switch(y){case 0:var w=s,D=p;s=w,a=D;continue e;case 1:return G(f);default:var w=s,D=$;s=w,a=D;continue e}}}),Eo=n(function(s,a){var l=c(Y,s,a);return!l.$}),ap=function(s){switch(s){case"$eq":return G(0);case"$ne":return G(1);case"$gt":return G(2);case"$gte":return G(3);case"$lt":return G(4);case"$lte":return G(5);case"$in":return G(6);case"$nin":return G(7);case"$like":return G(8);case"$nlike":return G(9);default:return Q}},R1=function(s){var a=i(function(l,f,p){var $=ap(l);if($.$)return Tt("Unknown operator");var y=c(Wt,Io(),f);if(y.$)return Tt("Invalid operator value");var w=y.a;return ut(v(De,l,w,p))});return c(Ne,A1,v(Me,i(function(l,f,p){return c(Rt,function($){return v(a,l,f,$)},p)}),ut(Ae),s))};function jo(){return Ht(Io())}function Io(){return Kr(U([Vu(O1),c(Rt,function(s){return c(Eo,"$and",s)?c(Ne,P1,c(te,"$and",Lt(jo()))):c(Eo,"$or",s)?c(Ne,_1,c(te,"$or",Lt(jo()))):R1(s)},Ht(Ft)),c(Ne,op,is)]))}var up=jo();jo=function(){return up};var T1=Io();Io=function(){return T1};var L1=function(s){return C(F1,Ae,Q,Q,Q,s)},F1=u(function(s,a,l,f,p){e:for(;;)if(p.b){var $=p.a,y=$.a,w=$.b,D=p.b;switch(y){case"@where":var N=c(Wt,up,w);if(N.$)return Tt("Invalid @where clause");var A=N.a,P=s,M=G(A),T=l,J=f,Z=D;s=P,a=M,l=T,f=J,p=Z;continue e;case"@sort":var se=c(Wt,M1,w);if(se.$)return Tt("Invalid @sort clause");var ce=se.a,P=s,M=a,T=G(ce),J=f,Z=D;s=P,a=M,l=T,f=J,p=Z;continue e;case"@limit":var ue=c(Wt,ns,w);if(ue.$)return Tt("Invalid @limit value");var ze=ue.a,P=s,M=a,T=l,J=G(ze),Z=D;s=P,a=M,l=T,f=J,p=Z;continue e;default:var it=c(Wt,Gu(),w);if(it.$){var P=s,M=a,T=l,J=f,Z=D;s=P,a=M,l=T,f=J,p=Z;continue e}else{var xr=it.a,P=v(De,y,xr,s),M=a,T=l,J=f,Z=D;s=P,a=M,l=T,f=J,p=Z;continue e}}}else return ut({bY:f,aI:s,bm:l,bu:a})});function Wu(){return c(Rt,L1,Vd(Ft))}function Gu(){return Kr(U([c(Rt,function(s){return s?ut(C1):Tt("false is not a valid selection")},ri),c(Ne,N1,Ju(function(s){return Wu()}))]))}var lp=Wu();Wu=function(){return lp};var z1=Gu();Gu=function(){return z1};var B1=Ht(lp),q1=c(Rt,function(s){switch(s){case"register":return E(Dn,S1,c(te,"queryId",ye),c(te,"querySource",B1),c(te,"queryInput",Ft));case"update-input":return v(Cn,D1,c(te,"queryId",ye),c(te,"queryInput",Ft));case"unregister":return c(Ne,x1,c(te,"queryId",ye));default:return Tt("Unknown QueryClient incoming type: "+s)}},c(te,"type",ye)),U1=rs("receiveQueryClientMessage",Ft),K1=function(s){return U1(function(a){return s(c(Wt,q1,a))})},Q1=function(s){return Xd(U([e1(function(a){if(a.$){var f=a.a;return Co("Failed to decode IndexedDB message: "+xn(f))}else{var l=a.a;return qw(l)}}),m1(function(a){if(a.$){var f=a.a;return Co("Failed to decode LiveSync message: "+xn(f))}else{var l=a.a;return Uw(l)}}),k1(function(a){if(a.$){var f=a.a;return Co("Failed to decode QueryManager message: "+xn(f))}else{var l=a.a;return Qw(l)}}),K1(function(a){if(a.$){var f=a.a;return Co("Failed to decode QueryClient message: "+xn(f))}else{var l=a.a;return Kw(l)}})]))},Mo=function(s){return{$:5,a:s}},J1=n(function(s,a){return{$:0,a:s,b:a}}),V1=function(s){return{$:7,a:s}},cp=o(function(s,a,l,f){if(f.b){var p=f.a,$=f.b;if($.b){var y=$.a,w=$.b;if(w.b){var D=w.a,N=w.b;if(N.b){var A=N.a,P=N.b,M=l>500?v(Ke,s,a,ur(P)):E(cp,s,a,l+1,P);return c(s,p,c(s,y,c(s,D,c(s,A,M))))}else return c(s,p,c(s,y,c(s,D,a)))}else return c(s,p,c(s,y,a))}else return c(s,p,a)}else return a}),In=i(function(s,a,l){return E(cp,s,a,0,l)}),ct=n(function(s,a){return v(In,n(function(l,f){return c(de,s(l),f)}),_,a)}),ss=jb,Yt=Gt(_),H1=i(function(s,a,l){return{$:2,a:s,b:a,c:l}}),W1=i(function(s,a,l){return{$:3,a:s,b:a,c:l}}),os=function(s){if(s.$){var a=s.a;return"s:"+a}else{var a=s.a;return"i:"+br(a)}},Yu=n(function(s,a){e:for(;;){if(s<=0)return a;if(a.b){a.a;var l=a.b,f=s-1,p=l;s=f,a=p;continue e}else return a}}),G1=i(function(s,a,l){e:for(;;){if(s<=0)return l;if(a.b){var f=a.a,p=a.b,$=s-1,y=p,w=c(de,f,l);s=$,a=y,l=w;continue e}else return l}}),Y1=n(function(s,a){return ur(v(G1,s,a,_))}),fp=i(function(s,a,l){if(a<=0)return _;var f=j(a,l);e:for(;;){t:for(;;)if(f.b.b)if(f.b.b.b)switch(f.a){case 1:break e;case 2:var p=f.b,ue=p.a,$=p.b,y=$.a;return U([ue,y]);case 3:if(f.b.b.b.b){var w=f.b,ue=w.a,D=w.b,y=D.a,N=D.b,A=N.a;return U([ue,y,A])}else break t;default:if(f.b.b.b.b&&f.b.b.b.b.b){var P=f.b,ue=P.a,M=P.b,y=M.a,T=M.b,A=T.a,J=T.b,Z=J.a,se=J.b;return s>1e3?c(de,ue,c(de,y,c(de,A,c(de,Z,c(Y1,a-4,se))))):c(de,ue,c(de,y,c(de,A,c(de,Z,v(fp,s+1,a-4,se)))))}else break t}else{if(f.a===1)break e;break t}else return l;return l}var ce=f.b,ue=ce.a;return U([ue])}),Po=n(function(s,a){return v(fp,0,s,a)}),Z1=i(function(s,a,l){var f=c(Po,s,l),p=c(Yu,s,l);return nt(f,c(de,a,p))}),X1=function(s){var a=s.b;return a},ek=n(function(s,a){var l=n(function(f,p){var $=p.a,y=p.b;return y.$?z(f,s)?j($+1,G($)):j($+1,Q):j($+1,y)});return v(Ke,l,j(0,Q),a).b}),Zu=function(s){return"."+s},Mn=n(function(s,a){e:for(;;)if(a.b){var l=a.a,f=a.b;if(s(l))return!0;var p=s,$=f;s=p,a=$;continue e}else return!1}),as=n(function(s,a){return c(Mn,function(l){return z(l,s)},a)}),tk=i(function(s,a,l){if(z(s,a))return l;var f=c(Yu,s,l),p=c(Po,s,l);if(f.b){var $=f.a,y=f.b,w=nt(p,y),D=c(Po,a,w),N=c(Yu,a,w);return nt(D,c(de,$,N))}else return l}),rk=n(function(s,a){return{$:4,a:s,b:a}}),nk=i(function(s,a,l){var f=ti(l),p=c(Td,a,f-1);return c(ct,function($){return c(rk,Zu(s),$)},ur(p))}),ik=o(function(s,a,l,f){var p=c(ct,os,a),$=Nn(v(Sn,n(function(P,M){return j(os(P),M)}),l,f)),y=c(ct,os,l),w=v(Ke,n(function(P,M){var T=P.a,J=P.b,Z=M.a,se=M.b;if(c(as,J,se)){var ce=c(ek,J,se);if(ce.$)return j(Z,se);var ue=ce.a;if(z(ue,T))return j(Z,se);var ze=v(tk,ue,T,se);return j(nt(Z,U([v(W1,Zu(s),ue,T)])),ze)}else{var it=c(Y,J,$);if(it.$)return j(Z,se);var xr=it.a,ze=v(Z1,T,J,se);return j(nt(Z,U([v(H1,Zu(s),T,xr)])),ze)}}),j(_,p),c(Fu,ii,y)),D=w.a,N=w.b,A=v(nk,s,ti(y),N);return nt(D,A)}),sk=n(function(s,a){return{$:0,a:s,b:a}}),ok=i(function(s,a,l){var f=s(a);if(f.$)return l;var p=f.a;return c(de,p,l)}),Pn=n(function(s,a){return v(In,ok(s),_,a)}),ak=i(function(s,a,l){return s(a(l))}),uk=_0,dp=n(function(s,a){return!c(Mn,c(ak,uk,s),a)}),pp=n(function(s,a){e:for(;;){if(a.$===-2)return s;var l=a.d,f=a.e,p=c(pp,s+1,f),$=l;s=p,a=$;continue e}}),Xu=function(s){return c(pp,0,s)},lk=n(function(s,a){return z(ti(s),ti(a))?c(dp,lt,v(Sn,mp,s,a)):!1}),hp=n(function(s,a){return z(Xu(s),Xu(a))?v(Me,i(function(l,f,p){if(p){var $=c(Y,l,a);if($.$)return!1;var y=$.a;return c(mp,f,y)}else return!1}),!0,s):!1}),mp=n(function(s,a){var l=j(s,a);e:for(;;)switch(l.a.$){case 0:if(l.b.$)break e;var f=l.a.a,p=l.b.a;return z(f,p);case 1:if(l.b.$===1){var f=l.a.a,p=l.b.a;return z(f,p)}else break e;case 2:if(l.b.$===2){var f=l.a.a,p=l.b.a;return z(f,p)}else break e;case 3:if(l.b.$===3){var f=l.a.a,p=l.b.a;return z(f,p)}else break e;case 4:if(l.b.$===4)return l.a,l.b,!0;break e;case 5:if(l.b.$===5){var f=l.a.a,p=l.b.a;return c(lk,f,p)}else break e;default:if(l.b.$===6){var f=l.a.a,p=l.b.a;return c(hp,f,p)}else break e}return!1}),ck=n(function(s,a){return"."+(s+("["+(br(a)+"]")))}),fk=u(function(s,a,l,f,p){var $=Nn(v(Sn,n(function(w,D){return j(os(w),D)}),a,f)),y=v(Sn,ii,l,p);return c(Pn,function(w){var D=w.a,N=w.b,A=N.a,P=N.b,M=os(A),T=c(Y,M,$);if(T.$)return Q;var J=T.a;return c(hp,J,P)?Q:G(c(sk,c(ck,s,D),P))},c(Fu,ii,y))}),dk=function(s){return{$:0,a:s}},pk=function(s){return{$:1,a:s}},hk=function(s){var a=c(Y,"id",s);e:for(;;){if(a.$)break e;switch(a.a.$){case 1:var l=a.a.a;return G(dk(l));case 0:var l=a.a.a;return G(pk(l));default:break e}}return Q},mk=function(s){return v(In,n(function(a,l){var f=j(a,l);if(!f.a.$&&!f.b.$){var p=f.a.a,$=f.b.a;return G(c(de,p,$))}else return Q}),G(_),s)},$p=function(s){return mk(c(ct,hk,s))},Zt=n(function(s,a){if(a.$)return s;var l=a.a;return l}),$k=i(function(s,a,l){var f=c(Zt,_,c(Y,s,a)),p=c(Zt,_,c(Y,s,l)),$=j($p(f),$p(p));if(!$.a.$&&!$.b.$){var y=$.a.a,w=$.b.a,D=C(fk,s,y,w,f,p),N=E(ik,s,y,w,p);return Ze(nt(N,D))}else return Fe("Missing id field for query result rows in "+s)}),vk=n(function(s,a){var l=v(Ke,n(function(f,p){return c(as,f,p)?p:c(de,f,p)}),_u(s),_u(a));return v(Ke,n(function(f,p){if(p.$===1)return p;var $=p.a,y=v($k,f,s,a);if(y.$){var D=y.a;return Fe(D)}else{var w=y.a;return Ze(nt($,w))}}),Ze(_),l)}),yk=function(s){return v(Qr,lt,function(a){return c(Sr,function(l){return v(Qr,lt,En,l)},a)},s)},gk=n(function(s,a){if(s.$)return a;var l=s.a;return c(Po,l,a)}),us=n(function(s,a){var l=j(s,a);e:for(;;)switch(l.a.$){case 1:if(l.b.$===1){var f=l.a.a,p=l.b.a;return f-p}else break e;case 2:if(l.b.$===2){var $=l.a.a,y=l.b.a;return X($,y)>0?1:X($,y)<0?-1:0}else break e;case 0:if(l.b.$)break e;var w=l.a.a,D=l.b.a;return X(w,D)>0?1:X(w,D)<0?-1:0;default:break e}return 0}),bk=yr,wk=n(function(s,a){if(s.$)return a;var l=s.a;return c(bk,n(function(f,p){var $=f.b,y=p.b,w=v(Ke,n(function(N,A){if(A.$){var P=c(Zt,jn,c(Y,N.bO,y)),M=c(Zt,jn,c(Y,N.bO,$)),T=c(us,M,P),J=N.aX===1?-1*T:T;return J<0?G(0):J>0?G(2):Q}else return A}),Q,l);if(w.$)return 1;var D=w.a;return D}),a)}),ls=n(function(s,a){if(a.$)return Q;var l=a.a;return s(l)}),kk=n(function(s,a){return a.b?v(In,de,a,s):s}),Sk=function(s){return v(In,kk,_,s)},xk=n(function(s,a){return Sk(c(ct,s,a))}),Oo=Ae,Ao=n(function(s,a){var l=a;return v(De,s,0,l)}),cs=function(s){return v(Ke,Ao,Oo,s)},el=n(function(s,a){var l=a;return c(Zt,_,c(Y,s,l))}),tl=function(s){switch(s){case 0:return"$eq";case 1:return"$ne";case 2:return"$gt";case 3:return"$gte";case 4:return"$lt";case 5:return"$lte";case 6:return"$in";case 7:return"$nin";case 8:return"$like";default:return"$nlike"}},fs=function(s){switch(s.$){case 1:var a=s.a;return G(br(a));case 0:var l=s.a;return G(l);case 4:return Q;default:return Q}},vp=o(function(s,a,l,f){var p=j(a,l),$=c(ls,function(M){if(!M.$&&M.a.$===5){var T=M.a.a;return G(T)}else return Q},c(Y,tl(6),f)),y=function(M){var T=c(Y,p,s);if(T.$)return Q;var J=T.a,Z=fs(M);if(Z.$)return Q;var se=Z.a;return G(cs(c(el,se,J)))},w=c(ls,function(M){if(M.$)return Q;var T=M.a;return G(T)},c(Y,tl(0),f));if(w.$){if($.$)return Q;var N=$.a,A=c(Y,p,s);if(A.$)return Q;var P=A.a;return G(cs(c(xk,function(M){return c(el,M,P)},c(Pn,fs,N))))}else{var D=w.a;return y(D)}}),Dk=i(function(s,a,l){e:for(;;)if(l.b){var f=l.a,p=l.b,$=v(yp,s,a,f);if($.$){var w=s,D=a,N=p;s=w,a=D,l=N;continue e}else{var y=$.a;return G(y)}}else return Q}),yp=i(function(s,a,l){var f=function(){var $=c(Y,"$and",l);if(!$.$&&$.a.$===3){var y=$.a.a;return v(Dk,s,a,y)}else return Q}(),p=v(Me,i(function($,y,w){if(w.$)switch(y.$){case 2:var D=y.a;return E(vp,s,a,$,D);case 0:var N=y.a;return E(vp,s,a,$,Nn(U([j(tl(0),op(N))])));default:return Q}else return w}),Q,l);return p.$?f:p}),Ck=i(function(s,a,l){var f=j(a,l);e:for(;;){if(f.b.$)break e;switch(f.a){case 0:f.a;var p=f.b.a;return z(s,p);case 1:f.a;var p=f.b.a;return!z(s,p);case 2:f.a;var p=f.b.a;return c(us,s,p)>0;case 3:f.a;var p=f.b.a;return c(us,s,p)>=0;case 4:f.a;var p=f.b.a;return c(us,s,p)<0;case 5:f.a;var p=f.b.a;return c(us,s,p)<=0;case 6:if(f.b.a.$===5){f.a;var $=f.b.a.a;return c(as,s,$)}else break e;default:break e}}return!1}),gp=n(function(s,a){switch(a.$){case 1:return z(s,jn);case 0:var l=a.a;return z(s,l);case 2:var f=a.a;return v(Me,i(function(p,$,y){if(y){var w=ap(p);if(w.$)return!1;var D=w.a;return v(Ck,s,D,$)}else return!1}),!0,f);case 3:return!1;default:return!1}}),ds=n(function(s,a){var l=c(Y,"$and",a);if(!l.$&&l.a.$===3){var f=l.a.a;return c(dp,function($){return c(ds,s,$)},f)}else{var p=c(Y,"$or",a);if(!p.$&&p.a.$===4){var f=p.a.a;return c(Mn,function(y){return c(ds,s,y)},f)}else return v(Me,i(function($,y,w){if(w){var D=c(Y,$,s);if(D.$)return c(gp,jn,y);var N=D.a;return c(gp,N,y)}else return!1}),!0,a)}}),Jr=n(function(s,a){return v(In,n(function(l,f){return s(l)?c(de,l,f):f}),_,a)}),_o=n(function(s,a){var l=a;return c(Eo,s,l)}),Nk=o(function(s,a,l,f){if(l.$)return f;var p=l.a,$=v(yp,s,a,p);if($.$)return c(Jr,function(w){var D=w.b;return c(ds,D,p)},f);var y=$.a;return c(Jr,function(w){var D=w.a,N=w.b;return c(_o,D,y)&&c(ds,N,p)},f)}),rl=function(s){return s.$===-2},Ek=i(function(s,a,l){var f=c(Y,a,s.ab);if(f.$)return"";var p=f.a,$=c(Y,l,p.bZ);if($.$)return"";var y=$.a;return y.cp.bq}),jk=function(s){if(s.$===1){var a=s.a;return G(a)}else return Q},bp=o(function(s,a,l,f){var p=c(Y,a,s);if(p.$)return Q;var $=p.a,y=jk(f);if(y.$)return Q;var w=y.a;return c(Y,w,$)}),wp=function(s){return v(xo,i(function(a,l,f){return c(de,l,f)}),_,s)},Ik=o(function(s,a,l,f){var p=c(Y,a,s);if(p.$)return Q;var $=p.a,y=c(Jr,function(w){return z(c(Y,l,w),G(f))},wp($));return G(y)}),Mk=u(function(s,a,l,f,p){var $=j(l,f),y=j(c(Y,$,s),fs(p));if(!y.a.$&&!y.b.$){var w=y.a.a,D=y.b.a,N=c(el,D,w),A=function(){var P=c(Y,l,a);if(P.$)return _;var M=P.a;return c(Pn,function(T){return c(Y,T,M)},N)}();return G(A)}else return E(Ik,a,l,f,p)}),Ro=n(function(s,a){if(a.$)return Q;var l=a.a;return G(s(l))}),kp=function(s){return U([s])},Pk=d(function(s,a,l,f,p,$){var y=c(Y,a,s.ab);if(y.$)return Q;var w=y.a,D=c(Y,l,w.bZ);if(D.$)return Q;var N=D.a,A=N.cr;switch(A){case 1:var P=c(Y,"id",f);if(P.$)return Q;var M=P.a;return C(Mk,$,p,N.cp.bq,N.cp.bG,M);case 0:var T=c(Y,N.bP,f);if(T.$)return Q;var J=T.a;return c(Ro,kp,E(bp,p,N.cp.bq,N.cp.bG,J));default:var Z=c(Y,N.bP,f);if(Z.$)return Q;var J=Z.a;return c(Ro,kp,E(bp,p,N.cp.bq,N.cp.bG,J))}}),Sp=d(function(s,a,l,f,p,$){return v(Me,i(function(y,w,D){if(w.$){var P=w.a,M=R(Pk,s,a,y,l,p,$);if(M.$)return v(De,y,jn,D);var T=M.a,J=v(Ek,s,a,y),Z=c(ct,function(ce){return R(Sp,s,J,ce,P.aI,p,$)},T),se=ep(c(ct,tp,Z));return v(De,y,se,D)}else{var N=c(Y,y,l);if(N.$)return D;var A=N.a;return v(De,y,A,D)}}),Ae,f)}),Ok=d(function(s,a,l,f,p,$){return rl(l)?$:c(ct,function(y){return R(Sp,s,a,y,l,f,p)},$)}),Ak=u(function(s,a,l,f,p){var $=c(Y,f,s.aE);if($.$)return j(_,Oo);var y=$.a,w=c(Y,y,a);if(w.$)return j(_,Oo);var D=w.a,N=Do(D),A=E(Nk,l,y,p.bu,N),P=c(wk,p.bm,A),M=c(gk,p.bY,P),T=cs(c(ct,dw,M)),J=R(Ok,s,y,p.aI,a,l,c(ct,X1,M));return j(J,T)}),si=n(function(s,a){if(a.$===-2)return lr;var l=a.a,f=a.b,p=a.c,$=a.d,y=a.e;return C(ae,l,f,c(s,f,p),c(si,s,$),c(si,s,y))}),To=i(function(s,a,l){var f=c(si,n(function(y,w){return C(Ak,s,a.ab,a.bS,y,w)}),l),p=c(si,n(function(y,w){var D=w.b;return D}),f),$=c(si,n(function(y,w){var D=w.a;return D}),f);return{aH:$,ch:p}}),nl=function(s){return!s.b},xp=function(s){switch(s.$){case 0:var p=s.a,a=s.b;return Pe(U([j("op",pe("set-row")),j("path",pe(p)),j("row",v(Qr,lt,En,a))]));case 1:var p=s.a;return Pe(U([j("op",pe("remove-row")),j("path",pe(p))]));case 2:var p=s.a,$=s.b,a=s.c;return Pe(U([j("op",pe("insert-row")),j("path",pe(p)),j("index",kr($)),j("row",v(Qr,lt,En,a))]));case 3:var p=s.a,l=s.b,f=s.c;return Pe(U([j("op",pe("move-row")),j("path",pe(p)),j("from",kr(l)),j("to",kr(f))]));default:var p=s.a,$=s.b;return Pe(U([j("op",pe("remove-row-by-index")),j("path",pe(p)),j("index",kr($))]))}},Dp=ei("queryClientOut",lt),_k=i(function(s,a,l){return Dp(Pe(U([j("type",pe("delta")),j("queryId",pe(s)),j("revision",kr(a)),j("delta",Pe(U([j("ops",c(Sr,xp,l))])))])))}),Lo=i(function(s,a,l){return Dp(Pe(U([j("type",pe("full")),j("queryId",pe(s)),j("revision",kr(a)),j("result",l)])))}),Rk=n(function(s,a){return v(Me,De,a,s)}),Cp=n(function(s,a){var l=s,f=a;return c(Rk,l,f)}),il=function(s){return v(Me,i(function(a,l,f){switch(l.$){case 3:var p=l.a;return v(Ke,n(function($,y){return c(Cp,y,il($))}),f,p);case 4:var p=l.a;return v(Ke,n(function($,y){return c(Cp,y,il($))}),f,p);case 2:return c(Ao,a,f);case 0:return c(Ao,a,f);default:return c(Ao,a,f)}}),Oo,s)},Np=i(function(s,a,l){var f=l;return v(Me,i(function(p,$,y){return c(s,p,y)}),a,f)}),Tk=i(function(s,a,l){var f=il(s);return v(Np,n(function(p,$){return $?!0:!z(c(Y,p,a),c(Y,p,l))}),!1,f)}),sl=function(s){if(s.b){var a=s.a;return s.b,G(a)}else return Q},ol=n(function(s,a){return Nn(v(Sn,ii,s,a))}),Lk=u(function(s,a,l,f,p){var $=c(Zt,Ae,c(Y,a,s.ab)),y=sl(c(Jr,function(D){return z(D.cm,a)},p.cl)),w=function(){if(y.$)return!1;var D=y.a;return c(Mn,function(N){if(N.b&&N.a.$===1){var A=N.a.a;if(c(_o,A,l)){var P=c(Y,A,$);if(P.$)return!0;var M=P.a,T=c(ol,D.bQ,N);return v(Tk,f,M,T)}else return!1}else return!1},D.ap)}();return w}),Fk=u(function(s,a,l,f,p){var $=c(Zt,Ae,c(Y,a,s.ab)),y=sl(c(Jr,function(D){return z(D.cm,a)},p.cl)),w=function(){if(y.$)return!1;var D=y.a;return c(Mn,function(N){if(N.b&&N.a.$===1){var A=N.a.a;if(c(_o,A,l)){var P=c(Y,A,$);if(P.$)return!0;var M=P.a,T=c(ol,D.bQ,N);return v(Np,n(function(J,Z){return Z?!0:!z(c(Y,J,M),c(Y,J,T))}),!1,f)}else return!1}else return!1},D.ap)}();return w}),zk=d(function(s,a,l,f,p,$){var y=v(Me,i(function(Z,se,ce){if(ce.$){var ue=c(Y,Z,s.aE);if(ue.$)return Q;var ze=ue.a;return z(ze,f)?G(se):Q}else return ce}),Q,l._);if(y.$)return!0;var w=y.a,D=!z(w.bY,Q)||!z(w.bm,Q);if(D){var N=w.bm;if(N.$)return!0;var A=N.a,P=cs(c(ct,function(Z){return Z.bO},A)),M=C(Fk,a,f,p,P,$);return M}else{var T=w.bu;if(T.$)return!0;var J=T.a;return C(Lk,a,f,p,J,$)}}),al=function(s){var a=s;return rl(a)},Bk=n(function(s,a){if(s.$)return!0;var l=s.a;return c(ds,a,l)}),qk=Bk,Uk=d(function(s,a,l,f,p,$){if(al(f))return!1;var y=v(Me,i(function(M,T,J){if(J.$){var Z=c(Y,M,s.aE);if(Z.$)return Q;var se=Z.a;return z(se,l)?G(T):Q}else return J}),Q,p._),w=sl(c(Jr,function(M){return z(M.cm,l)},$.cl)),D=j(y,w);if(!D.a.$&&!D.b.$){var N=D.a.a,A=D.b.a,P=N.bu;return P.$?!0:c(Mn,function(M){if(M.b&&M.a.$===1){var T=M.a.a;if(c(_o,T,f)){var J=c(ol,A.bQ,M);return c(qk,P,J)}else return!1}else return!1},A.ap)}else return!0}),Kk=function(s){e:for(;;)if(s.$===-1&&s.d.$===-1){var a=s.d,l=a;s=l;continue e}else return s},Ep=function(s){if(s.$===-1&&s.d.$===-1&&s.e.$===-1)if(s.e.d.$===-1&&!s.e.d.a){var a=s.a,l=s.b,f=s.c,p=s.d;p.a;var $=p.b,y=p.c,w=p.d,D=p.e,N=s.e;N.a;var A=N.b,P=N.c,M=N.d;M.a;var T=M.b,J=M.c,Z=M.d,se=M.e,ce=N.e;return C(ae,0,T,J,C(ae,1,l,f,C(ae,0,$,y,w,D),Z),C(ae,1,A,P,se,ce))}else{var a=s.a,l=s.b,f=s.c,ue=s.d;ue.a;var $=ue.b,y=ue.c,w=ue.d,D=ue.e,ze=s.e;ze.a;var A=ze.b,P=ze.c,M=ze.d,ce=ze.e;return C(ae,1,l,f,C(ae,0,$,y,w,D),C(ae,0,A,P,M,ce))}else return s},jp=function(s){if(s.$===-1&&s.d.$===-1&&s.e.$===-1)if(s.d.d.$===-1&&!s.d.d.a){var a=s.a,l=s.b,f=s.c,p=s.d;p.a;var $=p.b,y=p.c,w=p.d;w.a;var D=w.b,N=w.c,A=w.d,P=w.e,M=p.e,T=s.e;T.a;var J=T.b,Z=T.c,se=T.d,ce=T.e;return C(ae,0,$,y,C(ae,1,D,N,A,P),C(ae,1,l,f,M,C(ae,0,J,Z,se,ce)))}else{var a=s.a,l=s.b,f=s.c,ue=s.d;ue.a;var $=ue.b,y=ue.c,ze=ue.d,M=ue.e,it=s.e;it.a;var J=it.b,Z=it.c,se=it.d,ce=it.e;return C(ae,1,l,f,C(ae,0,$,y,ze,M),C(ae,0,J,Z,se,ce))}else return s},Qk=h(function(s,a,l,f,p,$,y){if($.$===-1&&!$.a){$.a;var w=$.b,D=$.c,N=$.d,A=$.e;return C(ae,l,w,D,N,C(ae,0,f,p,A,y))}else{e:for(;;)if(y.$===-1&&y.a===1)if(y.d.$===-1)if(y.d.a===1){y.a;var P=y.d;return P.a,jp(a)}else break e;else return y.a,y.d,jp(a);else break e;return a}}),Fo=function(s){if(s.$===-1&&s.d.$===-1){var a=s.a,l=s.b,f=s.c,p=s.d,$=p.a,y=p.d,w=s.e;if($===1){if(y.$===-1&&!y.a)return y.a,C(ae,a,l,f,Fo(p),w);var D=Ep(s);if(D.$===-1){var N=D.a,A=D.b,P=D.c,M=D.d,T=D.e;return C(ni,N,A,P,Fo(M),T)}else return lr}else return C(ae,a,l,f,Fo(p),w)}else return lr},ps=n(function(s,a){if(a.$===-2)return lr;var l=a.a,f=a.b,p=a.c,$=a.d,y=a.e;if(X(s,f)<0)if($.$===-1&&$.a===1){$.a;var w=$.d;if(w.$===-1&&!w.a)return w.a,C(ae,l,f,p,c(ps,s,$),y);var D=Ep(a);if(D.$===-1){var N=D.a,A=D.b,P=D.c,M=D.d,T=D.e;return C(ni,N,A,P,c(ps,s,M),T)}else return lr}else return C(ae,l,f,p,c(ps,s,$),y);else return c(Jk,s,H(Qk,s,a,l,f,p,$,y))}),Jk=n(function(s,a){if(a.$===-1){var l=a.a,f=a.b,p=a.c,$=a.d,y=a.e;if(z(s,f)){var w=Kk(y);if(w.$===-1){var D=w.b,N=w.c;return C(ni,l,D,N,$,Fo(y))}else return lr}else return C(ni,l,f,p,$,c(ps,s,y))}else return lr}),zo=n(function(s,a){var l=c(ps,s,a);if(l.$===-1&&!l.a){l.a;var f=l.b,p=l.c,$=l.d,y=l.e;return C(ae,1,f,p,$,y)}else{var w=l;return w}}),Vk=n(function(s,a){return v(Me,i(function(l,f,p){return c(zo,l,p)}),s,a)}),Ip=n(function(s,a){var l=s,f=a;return c(Vk,l,f)}),Hk=function(s){return v(Ke,n(function(a,l){var f=cs(c(Pn,function(p){if(p.b&&p.a.$===1){var $=p.a.a;return G($)}else return Q},a.ap));return v(De,a.cm,f,l)}),Ae,s.cl)},Wk=n(function(s,a){return v(Me,i(function(l,f,p){var $=c(Y,l,s.aE);if($.$)return p;var y=$.a;return c(as,y,p)?p:c(de,y,p)}),_,a)}),Gk=n(function(s,a){return v(Me,i(function(l,f,p){return c(s,l,f)?v(De,l,f,p):p}),Ae,a)}),Yk=n(function(s,a){return c(Gk,n(function(l,f){return c(Eo,l,a)}),s)}),Zk=n(function(s,a){var l=s,f=a;return c(Yk,l,f)}),Xk=o(function(s,a,l,f){var p=c(Wk,s,l._),$=Hk(f),y=c(Mn,function(w){var D=j(c(Y,w,$),c(Y,w,l.aG));if(D.a.$)return D.a,!1;if(D.b.$)return D.b,!0;var N=D.a.a,A=D.b.a,P=c(Zk,N,A),M=!al(c(Ip,N,A));return al(P)?M?R(Uk,s,a,w,c(Ip,N,A),l,f):!1:R(zk,s,a,l,w,P,f)},p);return y?1:0}),Mp=o(function(s,a,l,f){return v(Me,i(function(p,$,y){var w=y.a,D=y.b,N=E(Xk,s,a,$,f);if(N===1){var A=v(To,s,a,$._),P=yk(A.aH),M=fe($,{az:G(A.aH),aG:A.ch}),T=function(){var it=$.az;if(it.$)return Fe("Missing previous result");var xr=it.a;return c(vk,xr,A.aH)}();if(T.$){var ce=$.aa+1,ue=fe(M,{aa:ce}),ze=v(De,p,ue,w.w),se=fe(w,{w:ze});return j(se,c(de,v(Lo,$.aF,ce,P),D))}else{var J=T.a;if(nl(J)){var Z=v(De,p,M,w.w),se=fe(w,{w:Z});return j(se,D)}else{var ce=$.aa+1,ue=fe(M,{aa:ce}),ze=v(De,p,ue,w.w),se=fe(w,{w:ze});return j(se,c(de,v(_k,$.aF,ce,J),D))}}}else return j(w,D)}),j(l,_),l.w)}),eS=ei("errorOut",pe),Pp=function(s){return eS(s)},Op=function(s){switch(s){case 0:return Pe(U([j("type",pe("connectSSE"))]));case 1:return Pe(U([j("type",pe("disconnectSSE"))]));case 2:return Pe(U([j("type",pe("connectWebSocket"))]));default:return Pe(U([j("type",pe("disconnectWebSocket"))]))}},tS=ei("sseOut",lt),rS=function(s){return tS(Op(s))},nS=ei("webSocketOut",lt),iS=function(s){return nS(Op(s))},Ap=function(s){var a=s.aN;return a?iS(2):rS(0)},_p=function(s){return s.O},sS=function(s){var a=j(s.Y,_p(s.L));e:for(;;){if(a.a)break e;switch(a.b.$){case 2:return a.b,j(fe(s,{Y:!0}),Ap({aN:s.aj}));case 3:return j(fe(s,{Y:!0}),Ap({aN:s.aj}));default:break e}}return j(s,Yt)},Rp=function(s){return{$:3,a:s}},Tp={$:2},Lp=function(s){return{$:1,a:s}},oS=function(s){var a=_p(s);switch(a.$){case 0:return Hd;case 1:var l=a.a;return Lp(l);case 2:return Tp;default:var f=a.a;return Rp(f)}},Fp=n(function(s,a){var l=fe(a,{L:s.al,ad:s.ad,P:oS(s.al)}),f=function(){var M=s.M;if(M.$)return Yt;var T=M.a;return Pp(T)}(),p=c(ct,ss(Mo),s.ae),$=function(){var M=s.af;if(M.$)return j(a.h,_);var T=M.a;return E(Mp,a.s,s.ad,a.h,T)}(),y=$.a,w=$.b,D=sS(l),N=D.a,A=D.b,P=nt(U([c(ss,V1,s.ac),f,Gt(w),A]),p);return j(fe(N,{h:y}),Gt(P))}),aS={$:0},ul=function(s){return v(Qr,lt,function(a){return c(Sr,function(l){return v(Qr,lt,En,l)},a)},s)},uS=i(function(s,a,l){return v(Me,i(function(f,p,$){var y=$.a,w=$.b,D=p.aa+1,N=v(To,s,a,p._),A=ul(N.aH),P=fe(p,{az:G(N.aH),aG:N.ch,aa:D}),M=v(De,p.aF,P,y.w),T=fe(y,{w:M});return j(T,c(de,v(Lo,p.aF,D,A),w))}),j(l,_),l.w)}),lS=q0,cS=function(s){switch(s.$){case 1:var a=s.a;return G(a);case 2:var l=s.a;return G(l);case 0:var f=s.a;return lS(f);default:return Q}},fS=n(function(s,a){var l=c(Y,"updatedAt",s);if(l.$)return a;var f=l.a,p=cS(f);if(p.$)return a;var $=p.a;return G(function(){if(a.$)return $;var y=a.a;return c(Kd,$,y)}())}),dS=function(s){return v(Ke,fS,Q,wp(s))},pS=n(function(s,a){return v(Me,i(function(l,f,p){var $=dS(f),y=c(Zt,"",c(Ro,function(D){return D.H},c(Y,l,a))),w={F:function(){return $.$?c(Zt,Q,c(Ro,function(D){return D.F},c(Y,l,a))):$}(),H:y};return v(De,l,w,p)}),a,s.ab)}),hS=function(s){return{$:3,a:s}},mS={$:2},zp=function(s){return{$:1,a:s}},Bp=function(s){return{$:1,a:s}},$S=n(function(s,a){var l=a.ap;if(l.b){var f=l.a,p=_u(f),$=c(ct,function(y){return c(ct,function(w){return c(Zt,jn,c(Y,w,y))},p)},a.ap);return G({bQ:p,ap:$,cm:s})}else return Q}),vS=u(function(s,a,l,f,p){return v(Me,i(function($,y,w){var D=$.a,N=$.b;if(z(D,a)){var A=c(ls,fs,c(ls,Y(N),f)),P=c(ls,fs,c(Y,N,p));return z(A,P)?w:c(de,{ah:j(D,N),am:P,an:A,ao:l},w)}else return w}),_,s)}),qp=function(s){var a=c(Y,"id",s);if(!a.$&&a.a.$===1){var l=a.a.a;return G(l)}else return Q},yS=n(function(s,a){return Nn(v(Sn,ii,s,a))}),gS=u(function(s,a,l,f,p){return v(Ke,n(function($,y){var w=y.a,D=y.b,N=c(yS,f,$),A=qp(N);if(A.$)return j(w,D);var P=A.a,M=v(De,P,N,w),T=c(Y,P,w),J=C(vS,s,a,P,T,N);return j(M,nt(D,J))}),j(l,_),p)}),bS=i(function(s,a,l){return v(Ke,n(function(f,p){var $=p.a,y=p.b,w=f.cm,D=c(Zt,Ae,c(Y,w,$)),N=C(gS,s,w,D,f.bQ,f.ap),A=N.a,P=N.b;return j(v(De,w,A,$),nt(y,P))}),j(a,_),l.cl)}),ll=i(function(s,a,l){var f=a(c(Y,s,l));if(f.$)return c(zo,s,l);var p=f.a;return v(De,s,p,l)}),Up=i(function(s,a,l){var f=l;return v(ll,s,function(p){if(p.$)return G(U([a]));var $=p.a;return c(as,a,$)?G($):G(c(de,a,$))},f)}),wS=i(function(s,a,l){var f=l;return v(ll,s,function(p){if(p.$)return Q;var $=p.a,y=c(Jr,function(w){return!z(w,a)},$);return nl(y)?Q:G(y)},f)}),kS=n(function(s,a){var l=s.an,f=s.am,p=s.ao,$=function(){if(l.$)return a;var w=l.a;return v(wS,w,p,a)}();if(f.$)return $;var y=f.a;return v(Up,y,p,$)}),SS=n(function(s,a){return v(Ke,n(function(l,f){var p=c(Y,l.ah,f);if(p.$)return f;var $=p.a,y=c(kS,{am:l.am,an:l.an,ao:l.ao},$);return v(De,l.ah,y,f)}),a,s)}),xS=n(function(s,a){var l=v(bS,a.bS,a.ab,s),f=l.a,p=l.b,$=c(SS,p,a.bS);return{bS:$,ab:f}}),DS=Ae,CS=function(s){switch(s.$){case 1:var a=s.a;return G(br(a));case 0:var l=s.a;return G(l);case 4:return Q;default:return Q}},Kp=n(function(s,a){return v(Me,i(function(l,f,p){var $=c(Y,a,f);if($.$)return p;var y=$.a,w=CS(y);if(w.$)return p;var D=w.a;return v(Up,D,l,p)}),DS,s)}),NS=n(function(s,a){return v(Me,i(function(l,f,p){var $=v(Me,i(function(w,D,N){var A=D.cr;if(A===1){var P=c(Y,D.cp.bq,a);if(P.$)return N;var M=P.a,T=j(D.cp.bq,D.cp.bG),J=c(Kp,M,D.cp.bG);return v(De,T,J,N)}else return N}),p,f.bZ),y=v(Ke,n(function(w,D){var N=c(Y,l,a);if(N.$)return D;var A=N.a,P=j(l,w.bO),M=c(Kp,A,w.bO);return v(De,P,M,D)}),$,f.bS);return y}),Ae,s.ab)}),ES=function(s){return c(si,n(function(a,l){return Nn(c(Pn,function(f){var p=qp(f);if(p.$)return Q;var $=p.a;return G(j($,f))},l))}),s.ab)},jS=n(function(s,a){var l=ES(a),f=c(NS,s,l);return{bS:f,ab:l}}),IS=function(s){return{$:1,a:s}},MS=function(s){return Yd(IS(s))},Bo=n(function(s,a){if(s.$){var $=s.a,y=c(xS,$,a);return j(y,MS($.cl))}else{var l=s.a,f=s.b,p=f;return j(c(jS,l,p),Yt)}}),PS=n(function(s,a){var l=c(Pn,function(w){var D=w.a,N=w.b;return c($S,D,N)},Do(s.ab));if(nl(l))return Xi(Q,a,_);var f={cl:l},p=c(Bo,Bp(f),a),$=p.a,y=p.b;return Xi(G(f),$,U([y]))}),OS=function(s){switch(s.$){case 0:var a=s.a;return"Bad URL: "+a;case 1:return"Timeout";case 2:return"Network Error";case 3:var l=s.a;return"Bad Status: "+br(l);default:var f=s.a;return"Decode Error: "+f}},AS=function(s){return{$:1,a:s}},cl=function(s){return s===""},_S=Lb,RS=n(function(s,a){var l=c(Lu,"?",s);if(l.b){var f=l.a,p=l.b,$=c(Ur,"?",p),y=c(ct,function(D){var N=D.a,A=D.b;return N+("="+_S(A))},a),w=c(Ur,"&",c(Jr,function(D){return!cl(D)},c(de,$,y)));return cl(w)?f:f+("?"+w)}else return s}),TS=n(function(s,a){return{U:a,ab:s}}),LS=i(function(s,a,l){return{F:l,H:a,ap:s}}),FS=Kr(U([Vu(Q),c(Ne,G,rp),c(Ne,function(s){return G(s)},ns)])),zS=E(Dn,LS,c(te,"rows",Lt(Ht(is))),c(te,"permission_hash",ye),c(te,"last_seen_updated_at",FS)),BS=v(Cn,TS,c(te,"tables",Ht(zS)),c(te,"has_more",ri)),qS=function(s){return Pe(U([j("last_seen_updated_at",function(){var a=s.F;if(a.$)return Gd;var l=a.a;return Wd(l)}()),j("permission_hash",pe(s.H))]))},US=function(s){return Pe(U([j("tables",v(Qr,lt,qS,s))]))},Qp=lb,KS=n(function(s,a){return{$:3,a:s,b:a}}),QS=function(s){return{$:0,a:s}},JS=n(function(s,a){return{$:4,a:s,b:a}}),VS={$:2},HS=function(s){return{$:1,a:s}},WS=function(s){return{$:0,a:s}},GS={$:1},Jp=function(s){return!s.$},Vp=Eb,Hp=i(function(s,a,l){return a(s(l))}),Wp=n(function(s,a){return v(Kb,"",lt,c(Hp,a,s))}),Gp=n(function(s,a){if(a.$){var f=a.a;return Fe(s(f))}else{var l=a.a;return Ze(l)}}),Yp=function(s){return{$:4,a:s}},Zp=function(s){return{$:3,a:s}},Xp=function(s){return{$:0,a:s}},eh={$:2},th={$:1},YS=n(function(s,a){switch(a.$){case 0:var l=a.a;return Fe(Xp(l));case 1:return Fe(th);case 2:return Fe(eh);case 3:var f=a.a;return Fe(Zp(f.cj));default:var p=a.b;return c(Gp,Yp,s(p))}}),ZS=n(function(s,a){return c(Wp,s,YS(function(l){return c(Gp,xn,c(Qp,a,l))}))}),XS=Jb,rh=function(s){return{$:1,a:s}},nh=n(function(s,a){return{bg:s,bp:a}}),oi=kn,ex=oi(c(nh,Ae,_)),ai=Iu,tx=gb,ih=Nb,rx=vb,qo=i(function(s,a,l){e:for(;;)if(a.b){var f=a.a,p=a.b;if(f.$){var P=f.a;return c(ai,function(M){var T=P.cq;if(T.$===1)return v(qo,s,p,l);var J=T.a;return v(qo,s,p,v(De,J,M,l))},rx(v(Fb,s,ih(s),P)))}else{var $=f.a,y=c(Y,$,l);if(y.$===1){var w=s,D=p,N=l;s=w,a=D,l=N;continue e}else{var A=y.a;return c(ai,function(M){return v(qo,s,p,c(zo,$,l))},tx(A))}}}else return oi(l)}),nx=o(function(s,a,l,f){return c(ai,function(p){return oi(c(nh,p,l))},v(qo,s,a,f.bg))}),ix=o(function(s,a,l,f){var p=f.a,$=f.b;return z(a,p)?G(c(ih,s,$(l))):Q}),sx=i(function(s,a,l){return c(ai,function(f){return c(ai,function(p){return oi(c(s,f,p))},l)},a)}),ox=function(s){return v(In,sx(de),oi(_),s)},ax=i(function(s,a,l){var f=a.a,p=a.b;return c(ai,function($){return oi(l)},ox(c(Pn,v(ix,s,f,p),l.bp)))}),ux=function(s){return{$:0,a:s}},lx=n(function(s,a){if(a.$){var f=a.a;return rh({by:f.by,bB:f.bB,bK:c(Qb,s,f.bK),bQ:f.bQ,b_:f.b_,co:f.co,cq:f.cq,cu:f.cu})}else{var l=a.a;return ux(l)}}),cx=n(function(s,a){return{$:0,a:s,b:a}}),fx=n(function(s,a){var l=a.a,f=a.b;return c(cx,l,c(Hp,f,s))});kt.Http=Db(ex,nx,ax,lx,fx);var dx=Ou("Http"),sh=function(s){return dx(rh({by:!1,bB:s.bB,bK:s.bK,bQ:s.bQ,b_:s.b_,co:s.co,cq:s.cq,cu:s.cu}))},px=function(s){return sh({bB:XS,bK:s.bK,bQ:_,b_:"GET",co:Q,cq:Q,cu:s.cu})},oh=n(function(s,a){var l=rl(s)?_:U([j("syncCursor",c(Tu,0,US(s)))]),f=c(RS,nt(a.aQ,a.aS),l);return px({bK:c(ZS,AS,BS),cu:f})}),hx=n(function(s,a){return v(Me,i(function(l,f,p){return v(De,l,{F:f.F,H:f.H},p)}),a,s.ab)}),mx=i(function(s,a,l){if(s.$){var se=s.a,ce=OS(se);return{ac:Yt,ad:l,ae:_,af:Q,M:G(ce),al:fe(a,{E:!1,O:hS(ce)})}}else{var f=s.a,p=c(hx,f,a.B),$=a.I+Xu(f.ab),y={aT:!f.U,M:Q,bq:Q,I:$,bt:Q},w=f.U?zp(y):mS,D=fe(a,{B:p,E:f.U,O:w,I:$}),N=c(PS,f,l),A=N.a,P=N.b,M=N.c,T=f.U?j(D,c(oh,p,a.at)):j(fe(D,{E:!1}),Yt),J=T.a,Z=T.b;return{ac:Z,ad:P,ae:M,af:A,M:Q,al:J}}}),$x=function(s){var a=j(s.ai,s.E);if(a.a&&!a.b){var l={aT:!1,M:Q,bq:Q,I:s.I,bt:Q};return j(fe(s,{E:!0,O:zp(l)}),c(oh,s.B,s.at))}else return j(s,Yt)},ah=i(function(s,a,l){if(s.$){var D=s.a;return v(mx,D,a,l)}else{var f=c(pS,l,a.B),p=fe(a,{B:f,ai:!0}),$=$x(p),y=$.a,w=$.b;return{ac:w,ad:l,ae:_,af:Q,M:Q,al:y}}}),vx=n(function(s,a){var l=v(uS,a.s,a.ad,a.h),f=l.a,p=l.b,$=fe(a,{h:f}),y=c(Fp,v(ah,aS,a.L,a.ad),$),w=y.a,D=y.b;return j(w,Gt(U([Gt(p),D])))}),yx=n(function(s,a){switch(s.$){case 0:var l=s.a,f=c(Bo,Bp(l),a.ad),p=f.a,$=f.b,y=E(Mp,a.s,p,a.h,l),w=y.a,D=y.b;return j(fe(a,{ad:p,h:w}),Gt(U([c(ss,Mo,$),Gt(D)])));case 2:return j(a,Yt);case 3:var N=s.a;return j(fe(a,{P:Rp(N)}),Yt);case 1:var A=s.a;return j(fe(a,{P:Lp(A)}),Yt);default:return j(fe(a,{P:Tp}),Yt)}}),gx=h(function(s,a,l,f,p,$,y){return{bE:f,bU:l,az:y,_:a,aF:s,aG:p,aa:$}}),bx=n(function(s,a){switch(s.$){case 0:var T=s.a,l=s.b,f=s.c,p=H(gx,T,l,f,"",Ae,0,Q),J=v(De,T,p,a.h.w),$=1,y=v(To,a.s,a.ad,l),w=fe(p,{az:G(y.aH),aG:y.ch,aa:$}),D=v(De,T,w,J),Z={w:D},N=ul(y.aH);return j(fe(a,{h:Z}),U([v(Lo,T,$,N)]));case 1:var T=s.a,A=s.b,P=c(Y,T,a.h.w);if(P.$)return j(a,_);var p=P.a,M=fe(p,{bU:A,az:Q,aG:Ae}),$=p.aa+1,y=v(To,a.s,a.ad,p._),w=fe(M,{az:G(y.aH),aG:y.ch,aa:$}),J=v(De,T,w,a.h.w),Z={w:J},N=ul(y.aH);return j(fe(a,{h:Z}),U([v(Lo,T,$,N)]));default:var T=s.a,J=c(zo,T,a.h.w),Z={w:J};return j(fe(a,{h:Z}),_)}}),wx=o(function(s,a,l,f){return{$:4,a:s,b:a,c:l,d:f}}),kx=n(function(s,a){var l=c(Lu,"?",s);if(l.b){var f=l.a,p=l.b,$=c(Ur,"?",p);return cl($)?f+("/"+a):f+("/"+(a+("?"+$)))}else return s+("/"+a)}),Sx=n(function(s,a){return{$:0,a:s,b:a}}),xx=Sx,Dx=function(s){return c(Vb,"application/json",c(Tu,0,s))},Cx=n(function(s,a){var l=s.a,f=s.b,p=s.c,$=s.d,y=c(kx,f,l);return j(a,U([sh({bB:Dx($),bK:c(Wp,v(wx,l,f,$),function(w){switch(w.$){case 0:var D=w.a;return Fe(Xp(D));case 1:return Fe(th);case 2:return Fe(eh);case 3:var N=w.a,A=w.b;return Fe(Zp(N.cj));default:var A=w.b,P=c(Qp,Ft,A);if(P.$){var T=P.a;return Fe(Yp(xn(T)))}else{var M=P.a;return Ze(M)}}}),bQ:c(ct,function(w){var D=w.a,N=w.b;return c(xx,D,N)},p),b_:"POST",co:Q,cq:Q,cu:y})]))}),Nx=function(s){switch(s.$){case 0:var a=s.a;return"Bad URL: "+a;case 1:return"Timeout";case 2:return"Network Error";case 3:var l=s.a;return"Bad Status: "+br(l);default:var f=s.a;return"Decode Error: "+f}},Ex=n(function(s,a){return{$:3,a:s,b:a}}),jx=function(s){switch(s.$){case 0:var a=s.a,y=s.b;return Pe(U([j("type",pe("queryResult")),j("callbackPort",pe(a)),j("result",y)]));case 1:var l=s.a,f=s.b,y=s.c;return Pe(U([j("type",pe("queryFull")),j("queryId",pe(l)),j("revision",kr(f)),j("result",y)]));case 2:var l=s.a,f=s.b,p=s.c;return Pe(U([j("type",pe("queryDelta")),j("queryId",pe(l)),j("revision",kr(f)),j("delta",Pe(U([j("ops",c(Sr,xp,p))])))]));default:var $=s.a,y=s.b;return Pe(U([j("type",pe("mutationResult")),j("id",pe($)),j("result",function(){if(y.$){var D=y.a;return Pe(U([j("ok",Qu(!1)),j("error",pe(D))]))}else{var w=y.a;return Pe(U([j("ok",Qu(!0)),j("value",w)]))}}())]))}},Ix=ei("queryManagerOut",lt),Mx=function(s){return Ix(jx(s))},uh=n(function(s,a){return Mx(c(Ex,s,a))}),Px=n(function(s,a){return j(a,Yt)}),Ox=n(function(s,a){var l=s;return c(Px,l,a)}),Ax=n(function(s,a){switch(s.$){case 0:var N=s.a,l=c(Bo,c(J1,a.s,N),a.ad),xr=l.a,fl=l.b,f=fe(a,{ad:xr}),p=c(vx,N,f),P=p.a,$=p.b;return j(P,Gt(U([c(ss,Mo,fl),$])));case 1:var N=s.a;return c(yx,N,a);case 2:var N=s.a,y=c(Ox,N,a.h),w=y.a,D=c(Cx,N,fe(a,{h:w})),P=D.a,M=D.b;return j(P,Gt(M));case 3:var N=s.a,A=c(bx,N,a),P=A.a,M=A.b;return j(P,Gt(M));case 4:var T=s.a;s.b,s.c;var J=s.d;if(J.$){var se=J.a;return j(a,c(uh,T,Fe(Nx(se))))}else{var Z=J.a;return j(a,c(uh,T,Ze(Z)))}case 6:var ce=s.a;return j(a,Pp(ce));case 7:var ue=s.a;return c(Fp,v(ah,ue,a.L,a.ad),a);default:var ze=s.a,it=c(Bo,ze,a.ad),xr=it.a,fl=it.b;return j(fe(a,{ad:xr}),c(ss,Mo,fl))}}),_x=kb,Rx=_x({bT:function(s){var a=c(Wt,Pw,s);if(a.$)return a.a,Zd({aA:{aN:0},s:{aE:Ae,ab:Ae},at:{aQ:"",aS:""}});var l=a.a;return Zd(l)},w:Q1,ct:Ax});Tb({Main:{init:Rx(Ft)(0)}})}(e),e.Elm}const mO=1;class $O{constructor(t){this.db=null,this.initPromise=null,this.dbName=t}async init(){return this.db?this.db:this.initPromise?this.initPromise:(this.initPromise=new Promise((t,r)=>{const n=indexedDB.open(this.dbName,mO);n.onerror=()=>{this.initPromise=null,r(new Error(`Failed to open IndexedDB: ${n.error}`))},n.onsuccess=()=>{this.db=n.result,this.initPromise=null,t(this.db)},n.onupgradeneeded=i=>{const o=i.target.result;if(!o.objectStoreNames.contains("tables")){const u=o.createObjectStore("tables",{keyPath:["tableName","id"]});u.createIndex("byTable","tableName",{unique:!1}),u.createIndex("byUpdatedAt","updatedAt",{unique:!1})}o.objectStoreNames.contains("syncCursor")||o.createObjectStore("syncCursor")}}),this.initPromise)}async getDB(){if(this.db||await this.init(),!this.db)throw new Error("Failed to initialize database");return this.db}async getAllRows(t){const r=await this.getDB();return new Promise((n,i)=>{const d=r.transaction(["tables"],"readonly").objectStore("tables").index("byTable"),h=IDBKeyRange.only(t),m=d.getAll(h);m.onsuccess=()=>{const g=m.result||[];n(g.map(c=>{const{tableName:v,...E}=c;return E}))},m.onerror=()=>{i(new Error(`Failed to read rows: ${m.error}`))}})}async getAllTables(){const t=await this.getDB(),r={};return new Promise((n,i)=>{const d=t.transaction(["tables"],"readonly").objectStore("tables").getAll();d.onsuccess=()=>{const h=d.result||[];for(const m of h){const g=m.tableName;r[g]||(r[g]=[]);const{tableName:c,...v}=m;r[g].push(v)}n(r)},d.onerror=()=>{i(new Error(`Failed to read tables: ${d.error}`))}})}async putRows(t,r){if(r.length===0)return;const n=await this.getDB();return new Promise((i,o)=>{const u=n.transaction(["tables"],"readwrite"),d=u.objectStore("tables");let h=null;const m=new Array(r.length);let g=0;u.oncomplete=()=>{h?o(h):i()},u.onerror=()=>{o(new Error(`Transaction failed: ${u.error}`))},r.forEach((v,E)=>{const C=d.get([t,v.id]);C.onsuccess=()=>{m[E]=C.result||null,g+=1,g===r.length&&c()},C.onerror=()=>{m[E]=null,g+=1,g===r.length&&c()}});const c=()=>{r.forEach((v,E)=>{const C=m[E];if(C&&C.updatedAt!=null&&v.updatedAt!=null){const S=typeof C.updatedAt=="number"?C.updatedAt:new Date(C.updatedAt).getTime()/1e3,k=typeof v.updatedAt=="number"?v.updatedAt:new Date(v.updatedAt).getTime()/1e3;if(S>k)return}else if(C&&C.updatedAt!=null&&v.updatedAt==null)return;const R={...v,tableName:t},H=d.put(R);H.onerror=()=>{h=new Error(`Failed to write row: ${H.error}`)}})}})}async deleteDatabase(){return this.db&&(this.db.close(),this.db=null),new Promise((t,r)=>{const n=indexedDB.deleteDatabase(this.dbName);n.onsuccess=()=>t(),n.onerror=()=>r(new Error(`Failed to delete database: ${n.error}`)),n.onblocked=()=>r(new Error("Database deletion blocked"))})}}class vO{constructor(t){this.elmApp=null,this.storage=t}attachPorts(t){this.elmApp=t,t.ports.indexedDbOut&&t.ports.indexedDbOut.subscribe(r=>{console.log("[PyreClient] port indexedDbOut <-",r),this.handleMessage(r).catch(n=>{console.error("[PyreClient] IndexedDB handler failed:",n)})})}async handleMessage(t){if(t.type==="requestInitialData"){await this.sendInitialData();return}t.type==="writeDelta"&&await this.writeDelta(t.tableGroups||[])}async sendInitialData(){var t;if((t=this.elmApp)!=null&&t.ports.receiveIndexedDbMessage)try{await this.storage.init();const r=await this.storage.getAllTables();this.elmApp.ports.receiveIndexedDbMessage.send({type:"initialData",data:{tables:r}}),console.log("[PyreClient] port receiveIndexedDbMessage ->",{type:"initialData",data:{tables:r}})}catch(r){console.error("[PyreClient] Failed to load initial data:",r);const n={type:"initialData",data:{tables:{}}};this.elmApp.ports.receiveIndexedDbMessage.send(n),console.log("[PyreClient] port receiveIndexedDbMessage ->",n)}}async writeDelta(t){try{await this.storage.init();for(const r of t){const n=r.table_name;if(!n)continue;const i=r.rows.map(o=>{const u={};return r.headers.forEach((d,h)=>{u[d]=o[h]}),u});await this.storage.putRows(n,i)}}catch(r){console.error("[PyreClient] Failed to write delta:",r)}}}class yO{constructor(t){this.elmApp=null,this.queryStates=new Map,this.hasPorts=!1,this.logger=t??(r=>{console.error("[PyreClient] QueryClient error",r)})}attachPorts(t){this.elmApp=t,this.hasPorts=!!(t.ports.queryClientOut&&t.ports.receiveQueryClientMessage),t.ports.queryClientOut&&t.ports.queryClientOut.subscribe(r=>{this.handleMessage(r).catch(n=>{this.logError({message:"Failed to handle QueryDelta message",details:n instanceof Error?n.message:String(n)})})})}isAvailable(){return this.hasPorts}registerQuery(t,r){var i,o;console.log("[QueryClient] registerQuery:",t.queryId),this.queryStates.set(t.queryId,{input:t.input,result:null,revision:-1,callback:r});const n={type:"register",queryId:t.queryId,querySource:t.querySource,queryInput:t.input};console.log("[QueryClient] sending register message to Elm:",n),(o=(i=this.elmApp)==null?void 0:i.ports.receiveQueryClientMessage)==null||o.send(n)}updateQueryInput(t,r){var o,u;const n=this.queryStates.get(t);n&&(n.input=r);const i={type:"update-input",queryId:t,queryInput:r};(u=(o=this.elmApp)==null?void 0:o.ports.receiveQueryClientMessage)==null||u.send(i)}unregisterQuery(t){var n,i;console.log("[QueryClient] unregisterQuery:",t),this.queryStates.delete(t);const r={type:"unregister",queryId:t};(i=(n=this.elmApp)==null?void 0:n.ports.receiveQueryClientMessage)==null||i.send(r)}async handleMessage(t){if(console.log("[QueryClient] handleMessage received:",t),!t||typeof t!="object"){console.log("[QueryClient] handleMessage: message is not an object");return}const r=t;if(r.type!=="full"&&r.type!=="delta"){console.log("[QueryClient] handleMessage: unknown type",t.type);return}const n=this.queryStates.get(r.queryId);if(console.log("[QueryClient] handleMessage: queryId =",r.queryId,"state =",n?"found":"NOT FOUND"),console.log("[QueryClient] handleMessage: registered queryIds =",Array.from(this.queryStates.keys())),!n){this.logError({message:"QueryDelta received for unknown query",queryId:r.queryId});return}if(r.revision<=n.revision){this.logError({message:"QueryDelta revision out of order",queryId:r.queryId,details:`received=${r.revision} current=${n.revision}`});return}if(r.type==="full"){console.log("[QueryClient] handleMessage: full result, calling callback with:",r.result),n.result=r.result,n.revision=r.revision,n.callback(n.result),console.log("[QueryClient] handleMessage: callback completed");return}const i=this.applyDelta(r.queryId,n.result,r.delta);n.result=i,n.revision=r.revision,n.callback(n.result)}applyDelta(t,r,n){let i=r;for(const o of n.ops){const u=this.applyOp(t,i,o);u.ok&&(i=u.node)}return i}applyOp(t,r,n){const i=gO(n.path);if(!i.ok)return this.logError({message:"QueryDelta op failed: invalid path",queryId:t,op:n.op,path:n.path,details:i.details}),{ok:!1,details:i.details};const o=i.segments;if(n.op==="set-row"){const u=Yr(r,o,()=>({ok:!0,node:n.row}));return u.ok||this.logError({message:"QueryDelta op failed: set-row",queryId:t,op:n.op,path:n.path,details:u.details}),u}if(n.op==="remove-row"){if(o.length===0)return this.failOp(t,n,"Empty path");const u=o[o.length-1];if(u.type==="field"){const m=Yr(r,o,()=>({ok:!0,node:null}));return m.ok||this.logError({message:"QueryDelta op failed: remove-row",queryId:t,op:n.op,path:n.path,details:m.details}),m}const d=o.slice(0,-1),h=Yr(r,d,m=>{if(!Array.isArray(m))return{ok:!1,details:"Expected list for row removal"};const g=u.type==="index"?u.index:A0(m,u.id);if(g<0||g>=m.length)return{ok:!1,details:"Row not found for removal"};const c=m.slice();return c.splice(g,1),{ok:!0,node:c}});return h.ok||this.logError({message:"QueryDelta op failed: remove-row",queryId:t,op:n.op,path:n.path,details:h.details}),h}if(n.op==="insert-row"){const u=Yr(r,o,d=>{if(!Array.isArray(d))return{ok:!1,details:"Expected list for insert-row"};const h=Math.min(Math.max(0,n.index),d.length),m=d.slice();return m.splice(h,0,n.row),{ok:!0,node:m}});return u.ok||this.logError({message:"QueryDelta op failed: insert-row",queryId:t,op:n.op,path:n.path,details:u.details}),u}if(n.op==="move-row"){const u=Yr(r,o,d=>{if(!Array.isArray(d))return{ok:!1,details:"Expected list for move-row"};if(n.from<0||n.from>=d.length||n.to<0||n.to>=d.length)return{ok:!1,details:"move-row index out of bounds"};const h=d.slice(),[m]=h.splice(n.from,1);return h.splice(n.to,0,m),{ok:!0,node:h}});return u.ok||this.logError({message:"QueryDelta op failed: move-row",queryId:t,op:n.op,path:n.path,details:u.details}),u}if(n.op==="remove-row-by-index"){const u=Yr(r,o,d=>{if(!Array.isArray(d))return{ok:!1,details:"Expected list for remove-row-by-index"};if(n.index<0||n.index>=d.length)return{ok:!1,details:"remove-row-by-index out of bounds"};const h=d.slice();return h.splice(n.index,1),{ok:!0,node:h}});return u.ok||this.logError({message:"QueryDelta op failed: remove-row-by-index",queryId:t,op:n.op,path:n.path,details:u.details}),u}return this.failOp(t,n,"Unknown op")}failOp(t,r,n){return this.logError({message:"QueryDelta op failed",queryId:t,op:r.op,path:"path"in r?r.path:void 0,details:n}),{ok:!1,details:n}}logError(t){this.logger(t)}}const O0=e=>typeof e=="object"&&e!==null&&!Array.isArray(e),Yr=(e,t,r)=>{if(t.length===0)return r(e);const[n,...i]=t;if(n.type==="field"){if(!O0(e))return{ok:!1,details:`Expected object before field '${n.name}'`};if(!(n.name in e))return{ok:!1,details:`Missing field '${n.name}'`};const m=e[n.name],g=Yr(m,i,r);return g.ok?g.node===m?{ok:!0,node:e}:{ok:!0,node:{...e,[n.name]:g.node}}:g}if(!Array.isArray(e))return{ok:!1,details:"Expected list before index selector"};const o=n.type==="index"?n.index:A0(e,n.id);if(o<0||o>=e.length)return{ok:!1,details:"Row not found for selector"};const u=e[o],d=Yr(u,i,r);if(!d.ok)return d;if(d.node===u)return{ok:!0,node:e};const h=e.slice();return h[o]=d.node,{ok:!0,node:h}},gO=e=>{if(!e.startsWith("."))return{ok:!1,details:"Path must start with a dot"};const t=e.slice(1).split(".");if(t.length===0)return{ok:!1,details:"Empty path"};const r=[];for(const n of t){if(!n)return{ok:!1,details:"Empty path segment"};let i=0,o="";for(;i<n.length&&n[i]!=="#"&&n[i]!=="[";)o+=n[i],i+=1;if(!o)return{ok:!1,details:"Missing field name"};for(r.push({type:"field",name:o});i<n.length;){if(n[i]==="#"){if(n[i+1]!=="(")return{ok:!1,details:"Invalid id selector"};i+=2;const u=bO(n,i);if(!u.ok)return{ok:!1,details:u.details};r.push({type:"id",id:u.id}),i=u.next;continue}if(n[i]==="["){const u=n.indexOf("]",i+1);if(u===-1)return{ok:!1,details:"Unclosed index selector"};const d=n.slice(i+1,u);if(!d||!/^[0-9]+$/.test(d))return{ok:!1,details:"Invalid index selector"};r.push({type:"index",index:Number(d)}),i=u+1;continue}return{ok:!1,details:"Invalid selector segment"}}}return{ok:!0,segments:r}},bO=(e,t)=>{let r=t,n="";for(;r<e.length;){const i=e[r];if(i===")")return{ok:!0,id:n,next:r+1};if(i==="\\"){const o=e[r+1];if(o===void 0)return{ok:!1,details:"Dangling escape in id selector"};n+=o,r+=2;continue}n+=i,r+=1}return{ok:!1,details:"Unclosed id selector"}},A0=(e,t)=>e.findIndex(r=>!O0(r)||!("id"in r)?!1:String(r.id)===t);function wO(e,t,r){let n=t??{};const i=[];for(const o of r.ops){const u=kO(o.path);if(!u.ok||!u.segments){i.push({message:"QueryDelta op failed: invalid path",queryId:e,op:o.op,path:o.path,details:u.error});continue}let d;switch(o.op){case"set-row":if(!xi(o.row)){i.push({message:"QueryDelta op failed: row is not an object",queryId:e,op:o.op,path:o.path});continue}d=_n(n,u.segments,h=>xi(h)?{value:o.row}:{error:"Path did not resolve to a row object"});break;case"remove-row":d=_n(n,u.segments,h=>xi(h)?{value:null}:{error:"Path did not resolve to a row object"});break;case"insert-row":if(!xi(o.row)){i.push({message:"QueryDelta op failed: row is not an object",queryId:e,op:o.op,path:o.path});continue}d=_n(n,u.segments,h=>{if(!Array.isArray(h))return{error:"Path did not resolve to a list"};if(!Number.isInteger(o.index)||o.index<0||o.index>h.length)return{error:`Index ${o.index} out of bounds`};const m=h.slice();return m.splice(o.index,0,o.row),{value:m}});break;case"move-row":d=_n(n,u.segments,h=>{if(!Array.isArray(h))return{error:"Path did not resolve to a list"};if(!Number.isInteger(o.from)||!Number.isInteger(o.to))return{error:"Indices must be integers"};if(o.from<0||o.from>=h.length)return{error:`From index ${o.from} out of bounds`};if(o.to<0||o.to>=h.length)return{error:`To index ${o.to} out of bounds`};const m=h.slice(),[g]=m.splice(o.from,1);return m.splice(o.to,0,g),{value:m}});break;case"remove-row-by-index":d=_n(n,u.segments,h=>{if(!Array.isArray(h))return{error:"Path did not resolve to a list"};if(!Number.isInteger(o.index)||o.index<0||o.index>=h.length)return{error:`Index ${o.index} out of bounds`};const m=h.slice();return m.splice(o.index,1),{value:m}});break;default:d={error:"Unknown op"}}if(d.error){i.push({message:"QueryDelta op failed",queryId:e,op:o.op,path:o.path,details:d.error});continue}n=d.value??n}return{result:n,errors:i}}function kO(e){if(!e.startsWith("."))return{ok:!1,error:"Path must start with ."};const t=[];let r=1;for(;r<e.length;){e[r]==="."&&(r+=1);const n=r;for(;r<e.length;){const o=e[r];if(o==="."||o==="["||o==="#"&&e[r+1]==="(")break;r+=1}if(n===r)return{ok:!1,error:"Missing field segment"};const i=e.slice(n,r);for(t.push({kind:"field",name:i});r<e.length;){const o=e[r];if(o===".")break;if(o==="["){const u=e.indexOf("]",r);if(u===-1)return{ok:!1,error:"Unclosed index selector"};const d=e.slice(r+1,u);if(!/^-?\d+$/.test(d))return{ok:!1,error:`Invalid index selector: ${d}`};t.push({kind:"index",index:Number(d)}),r=u+1;continue}if(o==="#"&&e[r+1]==="("){const u=SO(e,r+2);if(!u.ok||u.id===void 0||u.nextIndex===void 0)return{ok:!1,error:u.error??"Invalid id selector"};t.push({kind:"id",id:u.id}),r=u.nextIndex;continue}return{ok:!1,error:`Unexpected path character: ${o}`}}}return{ok:!0,segments:t}}function SO(e,t){let r=t,n="";for(;r<e.length;){const o=e[r];if(o==="\\"){const u=e[r+1];if(u===void 0)return{ok:!1,error:"Invalid escape sequence in id selector"};n+=u,r+=2;continue}if(o===")"){r+=1;break}n+=o,r+=1}return r>e.length||e[r-1]!==")"?{ok:!1,error:"Unclosed id selector"}:{ok:!0,id:/^-?\d+$/.test(n)?Number(n):n,nextIndex:r}}function _n(e,t,r){if(t.length===0)return r(e);const[n,...i]=t;if(n.kind==="field"){if(!xi(e))return{error:`Expected object for field "${n.name}"`};if(!(n.name in e))return{error:`Missing field "${n.name}"`};const g=e[n.name],c=_n(g,i,r);return c.error?c:c.value===g?{value:e}:{value:{...e,[n.name]:c.value}}}if(!Array.isArray(e))return{error:"Expected list for selector"};const o=e,u=n.kind==="index"?n.index:xO(o,n.id);if(u===null)return{error:"Row id not found in list"};if(u<0||u>=o.length)return{error:`Index ${u} out of bounds`};const d=o[u],h=_n(d,i,r);if(h.error)return h;if(h.value===d)return{value:e};const m=o.slice();return m[u]=h.value,{value:m}}function xO(e,t){for(let r=0;r<e.length;r+=1){const n=e[r];if(!xi(n))continue;const i=n.id;if(t===i||typeof t=="number"&&typeof i=="string"&&i===String(t)||typeof t=="string"&&typeof i=="number"&&t===String(i))return r}return null}function xi(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}class DO{constructor(){this.elmApp=null,this.queryCallbacks=new Map,this.callbackPortToQueryId=new Map,this.queryStates=new Map,this.mutationCallbacks=new Map}attachPorts(t){this.elmApp=t,t.ports.queryManagerOut&&t.ports.queryManagerOut.subscribe(r=>{console.log("[PyreClient] port queryManagerOut <-",r),this.handleMessage(r).catch(n=>{console.error("[PyreClient] Query manager handler failed:",n)})})}registerQuery(t,r){var i,o;this.queryCallbacks.set(t.callbackPort,r),this.callbackPortToQueryId.set(t.callbackPort,t.queryId),this.queryStates.set(t.queryId,{queryId:t.queryId,callbackPort:t.callbackPort,result:{},revision:0});const n={type:"registerQuery",queryId:t.queryId,query:t.query,input:t.input,callbackPort:t.callbackPort};(o=(i=this.elmApp)==null?void 0:i.ports.receiveQueryManagerMessage)==null||o.send(n),console.log("[PyreClient] port receiveQueryManagerMessage ->",n)}updateQueryInput(t,r,n){var o,u;const i={type:"updateQueryInput",queryId:t,query:n,input:r};(u=(o=this.elmApp)==null?void 0:o.ports.receiveQueryManagerMessage)==null||u.send(i),console.log("[PyreClient] port receiveQueryManagerMessage ->",i)}unregisterQuery(t,r){var i,o;this.queryCallbacks.delete(r),this.callbackPortToQueryId.delete(r),this.queryStates.delete(t);const n={type:"unregisterQuery",queryId:t};(o=(i=this.elmApp)==null?void 0:i.ports.receiveQueryManagerMessage)==null||o.send(n),console.log("[PyreClient] port receiveQueryManagerMessage ->",n)}sendMutation(t,r,n,i,o){var h,m;if(i){const g=this.mutationCallbacks.get(t)??[];g.push(i),this.mutationCallbacks.set(t,g)}const u=o?Object.entries(o):void 0,d={type:"sendMutation",id:t,baseUrl:r,input:n,headers:u};(m=(h=this.elmApp)==null?void 0:h.ports.receiveQueryManagerMessage)==null||m.send(d),console.log("[PyreClient] port receiveQueryManagerMessage ->",d)}async handleMessage(t){if(t.type==="queryResult"){const r=t;if(!r.callbackPort)return;const n=this.callbackPortToQueryId.get(r.callbackPort);if(n){const o=this.queryStates.get(n);o&&(o.result=r.result??{},o.revision+=1)}const i=this.queryCallbacks.get(r.callbackPort);i&&i(r.result);return}if(t.type==="queryFull"){const r=t;if(!r.queryId||r.revision===void 0)return;const n=this.queryStates.get(r.queryId);if(!n||r.revision<=n.revision)return;n.result=r.result??{},n.revision=r.revision;const i=this.queryCallbacks.get(n.callbackPort);i&&i(n.result);return}if(t.type==="queryDelta"){const r=t;if(!r.queryId||r.revision===void 0||!r.delta)return;const n=this.queryStates.get(r.queryId);if(!n||r.revision<=n.revision)return;const{result:i,errors:o}=wO(r.queryId,n.result,r.delta);o.length>0&&o.forEach(d=>{console.warn("[PyreClient] QueryDelta op failed:",d)}),n.result=i,n.revision=r.revision;const u=this.queryCallbacks.get(n.callbackPort);u&&u(n.result);return}if(t.type==="mutationResult"){const r=t;if(!r.id)return;const n=this.mutationCallbacks.get(r.id);if(!n||n.length===0)return;const i=n.shift();i&&i(r.result??{ok:!1,error:"Missing mutation result"}),n.length===0?this.mutationCallbacks.delete(r.id):this.mutationCallbacks.set(r.id,n)}}}class CO{constructor(t,r){this.eventSource=null,this.sessionId=null,this.config=null,this.shouldReconnect=!0,this.onMessage=null,this.elmApp=null,this.config=t,this.onMessage=r??null}setOnMessage(t){this.onMessage=t}attachPorts(t){this.elmApp=t,t.ports.sseOut&&t.ports.sseOut.subscribe(r=>{console.log("[PyreClient] port sseOut <-",r);const n=r;n.type==="connectSSE"?this.connect():n.type==="disconnectSSE"&&this.disconnect()})}connect(){this.shouldReconnect=!0,this.attemptConnect()}emitMessage(t){var r,n,i;(r=this.onMessage)==null||r.call(this,t),(i=(n=this.elmApp)==null?void 0:n.ports.receiveSSEMessage)==null||i.send(t),console.log("[PyreClient] port receiveSSEMessage ->",t)}attemptConnect(){if(this.config)try{const t=`${this.config.baseUrl}${this.config.eventsPath}`,r=new EventSource(t);r.onopen=()=>{this.eventSource=r},r.addEventListener("connected",n=>{try{const i=JSON.parse(n.data);if(i.sessionId){this.sessionId=i.sessionId;const o={type:"connected",sessionId:i.sessionId};this.emitMessage(o)}}catch(i){console.error("Failed to parse SSE connected message:",i);const o={type:"error",error:"Failed to parse connection message"};this.emitMessage(o)}}),r.addEventListener("delta",n=>{try{const o={type:"delta",data:JSON.parse(n.data).data};this.emitMessage(o)}catch(i){console.error("Failed to parse SSE delta message:",i)}}),r.addEventListener("syncProgress",n=>{try{const o={type:"syncProgress",data:JSON.parse(n.data).data};this.emitMessage(o)}catch(i){console.error("Failed to parse SSE sync progress message:",i)}}),r.addEventListener("syncComplete",()=>{const n={type:"syncComplete"};this.emitMessage(n)}),r.onerror=()=>{const n=r.readyState;if(n===EventSource.CLOSED)console.warn("[PyreClient] SSE connection closed"),this.shouldReconnect;else if(n===EventSource.CONNECTING&&!this.sessionId){const i={type:"error",error:"SSE connection failed"};this.emitMessage(i)}}}catch(t){const r={type:"error",error:`SSE connection error: ${t}`};this.emitMessage(r)}}disconnect(){this.shouldReconnect=!1,this.eventSource&&(this.eventSource.close(),this.eventSource=null),this.sessionId=null}}class NO{constructor(t,r){this.socket=null,this.shouldReconnect=!0,this.reconnectTimer=null,this.onMessage=null,this.elmApp=null,this.config=t,this.onMessage=r??null}setOnMessage(t){this.onMessage=t}attachPorts(t){this.elmApp=t,t.ports.webSocketOut&&t.ports.webSocketOut.subscribe(r=>{console.log("[PyreClient] port webSocketOut <-",r);const n=r;n.type==="connectWebSocket"?this.connect():n.type==="disconnectWebSocket"&&this.disconnect()})}connect(){this.shouldReconnect=!0,this.openSocket()}emitMessage(t){var r,n,i;(r=this.onMessage)==null||r.call(this,t),(i=(n=this.elmApp)==null?void 0:n.ports.receiveWebSocketMessage)==null||i.send(t),console.log("[PyreClient] port receiveWebSocketMessage ->",t)}openSocket(){const t=this.buildWebSocketUrl(),r=new WebSocket(t);r.onopen=()=>{this.socket=r},r.onmessage=n=>{if(typeof n.data=="string")try{const i=JSON.parse(n.data);this.emitMessage(i)}catch(i){console.error("[PyreClient] Failed to parse WebSocket message:",i);const o={type:"error",error:"Failed to parse WebSocket message"};this.emitMessage(o)}},r.onerror=()=>{const n={type:"error",error:"WebSocket connection error"};this.emitMessage(n)},r.onclose=()=>{if(this.socket=null,!this.shouldReconnect||this.reconnectTimer!==null)return;const n=this.config.reconnectDelayMs??1e3;this.reconnectTimer=window.setTimeout(()=>{this.reconnectTimer=null,this.shouldReconnect&&this.openSocket()},n)}}buildWebSocketUrl(){const t=new URL(this.config.eventsPath,this.config.baseUrl);return t.protocol=t.protocol==="https:"?"wss:":"ws:",t.toString()}disconnect(){this.shouldReconnect=!1,this.reconnectTimer!==null&&(window.clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.socket&&(this.socket.close(),this.socket=null)}}class EO{constructor(t){this.sessionId=null,this.syncProgressCallbacks=new Set,this.sessionCallbacks=new Set,this.lastSyncProgress=null,this.queryCounter=0,this.handleLiveSyncMessage=o=>{if(o.type==="connected"&&o.sessionId&&(this.sessionId=o.sessionId,this.sessionCallbacks.forEach(u=>{u(o.sessionId)})),o.type==="syncProgress"&&o.data){const u=o.data;this.lastSyncProgress=u,this.syncProgressCallbacks.forEach(d=>{d(u)})}if(o.type==="syncComplete"&&this.lastSyncProgress){const u={...this.lastSyncProgress,complete:!0};this.lastSyncProgress=u,this.syncProgressCallbacks.forEach(d=>{d(u)})}};const r=t.indexedDbName??"pyre-client",n=t.server.liveSyncTransport??"sse";this.server=t.server,this.endpoints={catchup:"/sync",events:"/sync/events",query:"/db",...t.server.endpoints};const i=hO(Object.create(globalThis));this.elmApp=i.Main.init({flags:{schema:t.schema,server:{baseUrl:t.server.baseUrl,catchupPath:this.endpoints.catchup},liveSync:{transport:n}}}),this.storage=new $O(r),this.indexedDbService=new vO(this.storage),this.sseManager=new CO({baseUrl:t.server.baseUrl,eventsPath:this.endpoints.events}),this.webSocketManager=new NO({baseUrl:t.server.baseUrl,eventsPath:this.endpoints.events}),this.queryManager=new DO,this.queryClient=new yO(o=>{t.onError?t.onError(new Error(o.message)):console.error("[PyreClient] QueryClient error",o)}),this.indexedDbService.attachPorts(this.elmApp),this.sseManager.setOnMessage(this.handleLiveSyncMessage),this.webSocketManager.setOnMessage(this.handleLiveSyncMessage),this.sseManager.attachPorts(this.elmApp),this.webSocketManager.attachPorts(this.elmApp),this.queryManager.attachPorts(this.elmApp),this.queryClient.attachPorts(this.elmApp),this.elmApp.ports.errorOut&&this.elmApp.ports.errorOut.subscribe(o=>{console.log("[PyreClient] port errorOut <-",o);const u=new Error(o);t.onError?t.onError(u):console.error("[PyreClient]",o)})}async init(){await this.storage.init()}onSyncProgress(t){return this.syncProgressCallbacks.add(t),this.lastSyncProgress&&t(this.lastSyncProgress),()=>{this.syncProgressCallbacks.delete(t)}}onSession(t){return this.sessionCallbacks.add(t),this.sessionId&&t(this.sessionId),()=>{this.sessionCallbacks.delete(t)}}getSessionId(){return this.sessionId}run(t,r,n){if(t.operation==="query")return this.runQuery(t,r,n);this.runMutation(t,r,n)}disconnect(){this.sseManager.disconnect(),this.webSocketManager.disconnect(),this.sessionId=null}async deleteDatabase(){await this.storage.deleteDatabase()}runQuery(t,r,n){const i=r??{},o=t.toQueryShape?t.toQueryShape(i):t.queryShape;if(!o)throw new Error("Query module is missing queryShape");const u=`query_${this.queryCounter}_${Date.now()}`;return this.queryCounter+=1,this.queryClient.registerQuery({queryId:u,querySource:o,input:i},n),{unsubscribe:()=>{this.queryClient.unregisterQuery(u)},update:d=>{this.queryClient.updateQueryInput(u,d)}}}runMutation(t,r,n){const i=t.id;if(!i)throw new Error("Mutation module is missing id");const o=r??{},u=`${this.server.baseUrl}${this.endpoints.query}`;this.queryManager.sendMutation(i,u,o,n,this.server.headers)}}const jO={tables:{users:{name:"users",links:{posts:{type:"one-to-many",from:"id",to:{table:"posts",column:"authorUserId"}}},indices:[{field:"id",unique:!0,primary:!0},{field:"updatedAt",unique:!1,primary:!1}]},posts:{name:"posts",links:{users:{type:"many-to-one",from:"authorUserId",to:{table:"users",column:"id"}}},indices:[{field:"id",unique:!0,primary:!0},{field:"updatedAt",unique:!1,primary:!1}]}},queryFieldToTable:{user:"users",post:"posts"}};function IO(){const[e,t]=he.useState([{id:"1",name:"Client 1",pyreClient:null,sessionId:null,connected:!1,userId:null,requestedUserId:1,indexedDbName:"pyre-sync-playground-1"}]),[r,n]=he.useState("clients"),i=he.useRef([]),o=he.useRef(!1),u=he.useRef(2),d=he.useRef(new Map);he.useEffect(()=>{i.current=e},[e]);const[h,m]=he.useState("1"),[g,c]=he.useState([]),[v,E]=he.useState([]);he.useEffect(()=>{(async()=>{try{const I=await pO();E(I)}catch(I){console.error("Failed to discover queries:",I)}})()},[]);const C=he.useCallback(x=>{c(I=>[...I,{...x,id:`${Date.now()}-${Math.random()}`,timestamp:new Date}])},[]),R=he.useCallback(async x=>{const I=i.current.find($e=>$e.id===x);if(!I||I.connected||I.pyreClient)return;let O;I.requestedUserId!=null?O=I.requestedUserId:x==="1"?(O=1,t($e=>$e.map(j=>j.id===x?{...j,requestedUserId:1}:j))):(O=u.current,u.current=O+1,t($e=>$e.map(j=>j.id===x?{...j,requestedUserId:O}:j)));let F=null;try{const $e=await fetch(`http://localhost:3000/login?userId=${encodeURIComponent(String(O))}`);if(!$e.ok)throw new Error(`Login failed: ${$e.status}`);F=(await $e.json()).sessionId}catch($e){console.error("Failed to login:",$e),C({type:"query_response",data:{error:$e.message||"Failed to login"},clientId:x});return}const K=new URLSearchParams({sessionId:String(F)}).toString(),z="websocket",me=`ws://localhost:3000/sync/events?${K}`,X=`pyre-sync-playground-${x}`;C({type:"query_sent",data:{message:"Connecting to server...",url:me,method:"WS"},clientId:x});const Ye=new EO({schema:jO,server:{baseUrl:"http://localhost:3000",liveSyncTransport:z,endpoints:{catchup:`/sync?${K}`,events:`/sync/events?${K}`,query:`/db?${K}`}},indexedDbName:X});d.current.set(x,Ye),Ye.onSyncProgress($e=>{$e.complete?C({type:"query_response",data:{message:"Sync complete",tablesSynced:$e.tablesSynced},clientId:x}):C({type:"query_response",data:{message:`Syncing table: ${$e.table}`,tablesSynced:$e.tablesSynced},clientId:x})});try{await Ye.init(),t($e=>$e.map(j=>j.id===x?{...j,pyreClient:Ye,connected:!0,userId:O,sessionId:F,indexedDbName:X}:j)),C({type:"query_response",data:{message:"Connected",sessionId:F},clientId:x})}catch($e){console.error("Failed to initialize PyreClient:",$e),C({type:"query_response",data:{error:$e.message||"Failed to connect"},clientId:x}),d.current.delete(x)}},[C]);he.useEffect(()=>{o.current||(o.current=!0,R("1"))},[R]);const H=he.useCallback(()=>{const x=u.current;u.current=x+1,t(I=>{const O=`${I.length+1}`,F={id:O,name:`Client ${O}`,pyreClient:null,sessionId:null,connected:!1,userId:null,requestedUserId:x,indexedDbName:`pyre-sync-playground-${O}`};return setTimeout(()=>{R(O)},0),[...I,F]})},[R]);he.useCallback((x,I)=>{t(O=>O.map(F=>F.id===x?{...F,requestedUserId:I}:F))},[]);const S=he.useCallback(async(x,I)=>{if(!h)throw new Error("No client selected");const O=e.find(me=>me.id===h);if(!O)throw new Error("Client not found");const F=O.sessionId,K=F?`http://localhost:3000/db/${x}?sessionId=${F}`:`http://localhost:3000/db/${x}`,z="POST";C({type:"query_sent",data:{queryId:x,params:I,url:K,method:z,sessionId:F},clientId:h});try{const X=await(await fetch(K,{method:z,headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})).json();return C({type:"query_response",data:X,clientId:h}),X}catch(me){const X={error:me.message};throw C({type:"query_response",data:X,clientId:h}),me}},[h,e,C]);he.useEffect(()=>()=>{for(const x of d.current.values())x.disconnect();d.current.clear()},[]);const k=he.useCallback(async()=>{if(!confirm("Are you sure you want to delete all clients and clear all IndexedDB data? This cannot be undone."))return;for(const[O,F]of d.current.entries())F&&F.disconnect();await new Promise(O=>setTimeout(O,200));const x=[],I=[];for(const[O,F]of d.current.entries())if(F){const K=i.current.find(z=>z.id===O);K!=null&&K.indexedDbName&&(I.push(K.indexedDbName),console.log(`[Reset] Will delete database for client ${O}: ${K.indexedDbName}`)),x.push(F.deleteDatabase().catch(z=>{console.error(`Error deleting database for client ${O}:`,z)}))}for(let O=1;O<=10;O++){const F=`pyre-sync-playground-${O}`;I.includes(F)||I.push(F)}try{await Promise.all(x),console.log("[Reset] All client databases deleted via PyreClient"),console.log("[Reset] Attempting direct deletion of databases:",I);for(const O of I)try{const F=indexedDB.deleteDatabase(O);await new Promise(K=>{F.onsuccess=()=>{console.log(`[Reset] Directly deleted database: ${O}`),K()},F.onerror=()=>{console.warn(`[Reset] Failed to directly delete ${O}:`,F.error),K()},F.onblocked=()=>{console.warn(`[Reset] Database deletion blocked: ${O}`),K()}})}catch(F){console.warn(`[Reset] Exception deleting ${O}:`,F)}console.log("[Reset] Database deletion complete")}catch(O){console.error("[Reset] Error deleting databases:",O)}d.current.clear(),t([{id:"1",name:"Client 1",pyreClient:null,sessionId:null,connected:!1,userId:null,requestedUserId:1,indexedDbName:"pyre-sync-playground-1"}]),m("1"),c([]),u.current=2,o.current=!1,setTimeout(()=>{R("1")},1e3)},[R]);return L.jsxs("div",{className:"app",children:[L.jsxs("header",{className:"app-header",children:[L.jsx("h1",{children:"Pyre Sync Playground"}),L.jsx("button",{onClick:k,className:"reset-button",title:"Delete all clients and clear IndexedDB",children:"Reset All"})]}),L.jsxs("div",{className:"app-content",children:[L.jsxs("div",{className:"left-panel",children:[L.jsxs("div",{className:"left-panel-tabs",children:[L.jsx("button",{className:`tab-button ${r==="clients"?"active":""}`,onClick:()=>n("clients"),children:"Clients"}),L.jsx("button",{className:`tab-button ${r==="messages"?"active":""}`,onClick:()=>n("messages"),children:"Messages"})]}),L.jsx("div",{className:"left-panel-content",children:r==="messages"?L.jsx(hN,{events:g,clients:e}):L.jsx(dO,{clients:e,selectedClientId:h,onSelectClient:m,onAddClient:H})})]}),L.jsx("div",{className:"right-panel",children:L.jsx(pN,{queries:v,onSubmit:S,selectedClient:e.find(x=>x.id===h)})})]})]})}Gl.createRoot(document.getElementById("root")).render(L.jsx(tD.StrictMode,{children:L.jsx(IO,{})}));
